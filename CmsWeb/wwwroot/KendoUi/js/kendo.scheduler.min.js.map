{"version":3,"sources":["kendo.scheduler.js"],"names":["f","define","$","normalizeText","text","String","replace","REPLACE_REGEX","SPACE","objectKey","object","key","parts","push","sort","join","hashKey","str","i","hash","length","charCodeAt","zeroSize","width","height","baseline","measureText","style","measureBox","TextMetrics","current","measure","LRUCache","DEFAULT_OPTIONS","defaultMeasureBox","window","kendo","util","Class","extend","init","size","this","_size","_length","_map","put","value","map","entry","_head","_tail","newer","older","get","baselineMarkerSize","document","createElement","cssText","options","_cache","styleKey","cacheKey","cachedResult","baselineMarker","textStr","box","_baselineMarker","cloneNode","textContent","appendChild","body","offsetWidth","offsetHeight","offsetTop","parentNode","removeChild","marker","deepExtend","jQuery","amd","a1","a2","a3","undefined","timezoneButtonText","model","message","startTimezone","endTimezone","appendTimezoneAttr","attrs","timezone","attr","appendValidDateValidator","validDateRule","validationRules","fields","field","validation","validDateValidator","isPlainObject","appendDateCompareValidator","dateCompareRule","dateCompare","wrapDataAccess","originalFunction","data","convertData","wrapDataSerialization","toString","call","ObservableArray","method","removeUid","event","idx","startOffset","endOffset","start","getTimezoneOffset","end","convert","uid","Date","getTime","getOccurrenceByUid","applyZone","date","fromZone","toZone","remove","input","picker","filter","widgetInstance","ui","parseDate","val","format","dateCompareValidator","container","startInput","endInput","startPicker","endPicker","editable","closest","find","untilDateCompareValidator","untilPicker","until","expandAll","events","zone","concat","expand","trimOptions","overrideOptions","name","prefix","edit","add","navigate","descriptionEditor","createValidationAttributes","title","appendTo","wrap","ruleName","rule","modelField","specialRules","datatype","inArray","isFunction","filterResourceEditorData","editor","parentValue","parentValueField","valueField","valueArray","editorValue","isMs","Array","isArray","JSON","parse","stringify","dataSource","forEach","item","set","DISABLED","currentValue","indexOf","splice","trigger","CHANGE","bindParentValueChangeHandler","currentEditor","resource","parent","parentElement","ns","parentWidget","getKendoDropDownList","bind","ev","sender","dataParentValueField","dataValueField","on","target","filterMobileResourceEditorData","parentSelectedValue","OPTION","view","index","itemParentValue","getter","valid","removeAttribute","setAttribute","dropDownResourceEditor","setTimeout","kendoDropDownList","dataTextField","valuePrimitive","optionLabel","template","dataColorField","select","e","dataItem","disabled","preventDefault","dataBound","list","each","el","element","addClass","dropDownResourceEditorMobile","multiSelectResourceEditor","kendoMultiSelect","itemTemplate","tagTemplate","multiSelectResourceEditorMobile","moveEventRange","distance","duration","setTime","defaultCommands","editors","Editor","MobileEditor","PopupEditor","Scheduler","defaultViews","SCHEDULER_EXPORT","TimezoneEditor","ZONETITLEOPTIONTEMPLATE","ZONEOPTIONTEMPLATE","MobileTimezoneEditor","MS_PER_DAY","getDate","getMilliseconds","recurrence","keys","F10","Widget","DataBoundWidget","STRING","Popup","Calendar","DataSource","proxy","Object","prototype","NS","CLICK","MOUSEDOWN","TOUCHSTART","support","pointers","TOUCHMOVE","TOUCHEND","MOUSEMOVE","mousemove","PROGRESS","ERROR","CANCEL","REMOVE","RESET","SAVE","ADD","EDIT","FOCUSEDSTATE","EXPANDEDSTATE","VIEWSSELECTOR","INVERSECOLORCLASS","valueStartEndBoundRegex","TODAY","EXCEPTION_SEPARATOR","OLD_EXCEPTION_SEPARATOR_REGEXP","RECURRENCE_EXCEPTION","DELETECONFIRM","DELETERECURRING","EDITRECURRING","DELETERECURRINGCONFIRM","RESETSERIESCONFIRM","DELETESERIESCONFIRM","COMMANDBUTTONTMPL","VIEWS_DROPDOWN_TEMPLATE","TOOLBARTEMPLATE","MOBILETOOLBARTEMPLATE","MOBILEDATERANGEEDITOR","isAllDay","dateTimeValidate","dateValidate","hide","DATERANGEEDITOR","RECURRENCEEDITOR","kendoRecurrenceEditor","messages","MOBILERECURRENCEEDITOR","kendoMobileRecurrenceEditor","pane","MOBILEISALLDAYEDITOR","MOBILETIMEZONEPOPUP","noTimezone","click","TIMEZONEPOPUP","timezoneEditorButton","MOBILETIMEZONEEDITOR","kendoMobileTimezoneEditor","TIMEZONEEDITOR","visible","toggle","kendoTimezoneEditor","SchedulerDataReader","schema","reader","serialize","errors","total","groups","aggregates","SchedulerEvent","Model","that","fn","_defaultId","defaults","idField","_time","fieldTime","toUtcTime","_date","clone","updateUid","constructor","toJSON","offset","MS_PER_MINUTE","update","eventInfo","_startTime","_endTime","isMultiDay","isException","isNew","recurrenceId","isOccurrence","isRecurring","recurrenceRule","isRecurrenceHead","id","toOccurrence","recurrenceException","obj","shouldSerialize","milliseconds","type","defaultValue","required","validDate","untilDateCompare","description","SchedulerDataSource","modelBase","apply","logic","filters","operator","Query","toArray","cancelChanges","_removeExceptionDate","insert","_createNewModel","accept","_pushCreated","_addExceptionDate","pushCreate","items","_removeExceptions","slice","shift","head","replaceRegExp","RegExp","toExceptionString","test","newException","create","Error","className","canceledit","destroy","imageClass","iconClass","mobile","dateRange","timezonePopUp","multipleResources","resources","desktop","Observable","createButton","toggleDateValidationHandler","_toggleDateValidation","isDateTimeInput","shouldValidate","bindAttribute","is","resourceIndex","resourceView","hasParent","parentResource","_initTimezoneEditor","allDayEvent","checkHierarchical","windows_zones","repeat","recurrenceEditor","some","multiple","_buildDesktopEditTemplate","editableFields","tmpl","settings","Template","templateSettings","paramName","html","separateTimezones","expr","_createEndTimezoneButton","_buildMobileEditTemplate","_buildEditTemplate","isMobile","unescape","_revertTimezones","_startTimezone","_endTimezone","arguments","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","css","animations","left","right","close","unbind","timezoneView","content","kSwitch","endTimezoneRow","last","startTimezoneChange","enable","cancel","timezoneTitle","save","append","contentElement","show","editView","stopPropagation","hasClass","_editPane","checked","showDialog","actions","buttons","button","action","primary","kendoDialog","modal","preventScroll","closable","editEvent","resetSeriesBtn","deleteBtn","updateText","removeText","cancelText","titleText","editorTitle","resetSeries","kendoEditable","clearContainer","validateOnBlur","_views","roleSelector","not","views","eq","purge","deleteText","kendoWindow","minWidth","resizable","draggable","userTriggered","center","open","cycleForm","popup","_timezonePopup","buttonIndex","wrapper","currentTarget","getKendoWindow","activator","wnd","checkbox","saveButton","cancelButton","timezonePopup","prop","timezoneEditorTitle","focus","_initModel","_wrapper","_toolbar","_dataSource","_resources","_resizeHandler","resize","_resizable","_movable","_bindResize","_selectable","_touchHandlers","_ariaId","guid","_createEditor","_unbindResize","off","dataItems","eventsCount","sortedData","_data","eventsUids","dict","eventsUidsLength","_isMobile","mobileOS","_isTouch","originalEvent","pointerType","_isInverseColor","eventElement","_groupsByResource","groupIndex","groupsArray","parentFieldValue","parentField","group","prevIndex","dataIndex","fieldValue","currentGroupIndex","selectedGroups","selectedEvents","slots","fieldName","groupsByResource","rangeStart","rangeEnd","ranges","selection","_selection","_selectedSlots","_selectedEvents","_resourceBySlot","_old","clearSelection","groupedResources","_selectEvents","_select","_startDate","addDays","_endDate","timeSlotCollectionCount","toLocalDate","isDaySlot","currentGroup","daySlotCollectionCount","collIdx","dayCollIdx","eventsLength","isGrouped","ctrlKey","_ctrlKey","getTimeSlotCollection","getDaySlotCollection","_createSelection","startX","startY","endX","endY","timeStamp","touchMoveHandler","_touchMove","stop","_touchPosX","_tapPosition","_touchPosY","_userTouched","_scrolling","now","delta","amplitude","_amplitude","_dragging","selectable","Math","abs","_mouseDownSelection","kineticScrollNeeded","animate","scrollTop","mouseMoveHandler","_tabindex","_mouseMove","which","isRight","_selectFirstSlot","_shiftKey","relatedTarget","toolbar","removeClass","_keydown","shiftKey","_activeElement","focusElement","firstSlot","first","currentUid","labelFormat","oldSelection","oldEventsLength","removeAttr","ariaEventLabel","ariaSlotLabel","uids","occurrenceByUid","coordinate","changedTouches","verticalScroll","scrollHeight","clientHeight","horizontalScroll","scrollWidth","clientWidth","round","scrollLeft","applyVerticalScroll","applyhorizontalScroll","clearTimeout","_moveTimer","slot","startDate","endDate","selectionByElement","backward","_viewByIndex","itemToFocus","focusedViewName","viewByIndex","keyCode","prevSelection","isModifier","focusableToolBarSelector","focusableItems","viewsWrapper","shouldNavigate","focusedViewIndex","children","isRtl","isViewsDropDown","direction","_focusToolbar","TAB","_focusedView","ENTER","SPACEBAR","altKey","DOWN","RIGHT","LEFT","_showCalendar","ESC","_selectedViewName","move","_adjustSelectedDate","moveToEvent","activeElement","getAttribute","addEvent","DELETE","removeEvent","inRange","_updateSelection","indexOfEvent","_updateEventForSelection","_timeSlotInterval","autoBind","snap","allDaySlot","min","max","workWeekStart","workWeekEnd","workDays","showWorkHours","startTime","endTime","currentTimeMarker","updateInterval","useLocalTimezone","footer","today","pdf","deleteWindowTitle","next","previous","search","day","week","workWeek","agenda","month","timeline","timelineWeek","timelineWorkWeek","timelineMonth","year","recurrenceMessages","resetSeriesWindowTitle","deleteWindowOccurrence","deleteWindowSeries","editWindowTitle","editWindowOccurrence","editWindowSeries","confirmation","orientation","resourceDS","_refreshHandler","_progressHandler","_errorHandler","_resourceRefreshHandler","_resourceProgressHandler","_resourceErrorHandler","calendar","_editor","_moveDraggable","_resizeDraggable","_model","setDataSource","fetch","_selectedView","siblings","startSlot","endSlot","startResources","clonedEvent","originSlot","originStartTime","clonedEvents","cachedEvents","movable","android","Draggable","ignore","holdToDrag","autoScroll","evtClone","evtCloneElement","isTouch","_eventOptionsForMove","inverseColor","_slotByPosition","x","startLocation","y","range","slotIndex","targetSlotElement","location","top","_updateMoveHint","endResources","prevented","evt","updatedEventOptions","eventOptions","_removeMoveHint","_isMultiDrag","_updateEvent","sync","cancelHold","handle","directions","k-resize-e","k-resize-w","k-resize-n","k-resize-s","dragstart","dragHandle","_updateEventForResize","drag","dir","currentSlot","originalStart","originalEnd","_updateResizeHint","dragend","_removeResizeHint","setHours","setMinutes","dragcancel","updateEvent","callback","_preventRefresh","_convertDates","getHours","getMinutes","getSeconds","recurrenceHead","getByUid","updateSeries","updateOccurrence","eventUid","exception","_showRecurringDialog","editRecurring","occurrenceText","seriesText","_modelForContainer","_confirmation","isResetSeries","_isEditorOpened","deleteRecurringConfirmation","deleteSeriesConfirmation","resetSeriesConfirmation","cancelEvent","_editEvent","saveEvent","dirty","_editRecurringDialog","_createPopupEditor","editOccurrence","editSeries","editRecurringMode","_createButton","command","commandName","_set","_attemptRefresh","refresh","_deleteRecurringDialog","_removeEvent","occurrence","occurrencesInRange","deleteOccurrenceConfirmation","createExceptionConfirmation","seriesCallback","occurrenceCallback","exeptionCallback","currentModel","deleteOccurrence","deleteSeries","createException","deleteRecurring","_unbindView","angular","elements","_bindView","_viewRemoveHandler","_viewAddHandler","_viewEditHandler","_viewNavigateHandler","switchWorkDay","isWorkDay","_workDayMode","_selectView","_viewActivateHandler","constrainSelection","viewsDropdown","viewButtons","viewSelect","_renderView","_viewsCount","prepend","toLowerCase","rebind","viewName","_initializeView","mouseAndTouchPresent","dateForTitle","shortDateForTitle","mobileDateForTitle","force","getSize","currentSize","selectedDate","isInDateRange","setFullYear","getFullYear","getMonth","isSettings","defaultView","selected","hasType","allDay","time","resourceFetchArray","_preventRebind","when","then","_requestStart","_error","_progress","progress","resourcePromises","_resourceDataSource","groupName","promises","dataSourceInstance","_bindResourceEvents","isResourceGrouped","_refreshResource","preventRefresh","observable","formattedDate","formattedShortDate","commands","grep","viewsCount","saveAsPDF","throttle","timezoneOffset","currentDate","nextDate","previousDate","targetElm","anchor","activate","_toggleResize","change","setOptions","depth","copyAnchorStyles","visibleEndDate","refreshLayout","render","slotByPosition","slotByElement","resourcesBySlot","plugin","PDFMixin","_drawPDF","scheduler","promise","table","styles","Deferred","_drawPDFShadow","avoidLinks","done","args","page","pageNumber","totalPages","notify","resolve","fail","err","reject","always","zones","zones_titles","_zonesQuery","_zoneTitleId","_zoneTitlePicker","_zonePicker","_zoneTitle","_zone","_value","zoneTitle","DropDownList","cascadeFrom","other_zone","_bindZones","_filter","_options","_zonePickerLabel","zoneSelect","after","zonePicker","zone_value"],"mappings":"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","file":"kendo.scheduler.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/text-metrics', ['kendo.core'], f);\n}(function () {\n    (function ($) {\n        window.kendo.util = window.kendo.util || {};\n        var LRUCache = kendo.Class.extend({\n            init: function (size) {\n                this._size = size;\n                this._length = 0;\n                this._map = {};\n            },\n            put: function (key, value) {\n                var map = this._map;\n                var entry = {\n                    key: key,\n                    value: value\n                };\n                map[key] = entry;\n                if (!this._head) {\n                    this._head = this._tail = entry;\n                } else {\n                    this._tail.newer = entry;\n                    entry.older = this._tail;\n                    this._tail = entry;\n                }\n                if (this._length >= this._size) {\n                    map[this._head.key] = null;\n                    this._head = this._head.newer;\n                    this._head.older = null;\n                } else {\n                    this._length++;\n                }\n            },\n            get: function (key) {\n                var entry = this._map[key];\n                if (entry) {\n                    if (entry === this._head && entry !== this._tail) {\n                        this._head = entry.newer;\n                        this._head.older = null;\n                    }\n                    if (entry !== this._tail) {\n                        if (entry.older) {\n                            entry.older.newer = entry.newer;\n                            entry.newer.older = entry.older;\n                        }\n                        entry.older = this._tail;\n                        entry.newer = null;\n                        this._tail.newer = entry;\n                        this._tail = entry;\n                    }\n                    return entry.value;\n                }\n            }\n        });\n        var REPLACE_REGEX = /\\r?\\n|\\r|\\t/g;\n        var SPACE = ' ';\n        function normalizeText(text) {\n            return String(text).replace(REPLACE_REGEX, SPACE);\n        }\n        function objectKey(object) {\n            var parts = [];\n            for (var key in object) {\n                parts.push(key + object[key]);\n            }\n            return parts.sort().join('');\n        }\n        function hashKey(str) {\n            var hash = 2166136261;\n            for (var i = 0; i < str.length; ++i) {\n                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n                hash ^= str.charCodeAt(i);\n            }\n            return hash >>> 0;\n        }\n        function zeroSize() {\n            return {\n                width: 0,\n                height: 0,\n                baseline: 0\n            };\n        }\n        var DEFAULT_OPTIONS = { baselineMarkerSize: 1 };\n        var defaultMeasureBox;\n        if (typeof document !== 'undefined') {\n            defaultMeasureBox = document.createElement('div');\n            defaultMeasureBox.style.cssText = 'position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;' + 'padding: 0 !important; margin: 0 !important; border: 0 !important;' + 'line-height: normal !important; visibility: hidden !important; white-space: pre!important;';\n        }\n        var TextMetrics = kendo.Class.extend({\n            init: function (options) {\n                this._cache = new LRUCache(1000);\n                this.options = $.extend({}, DEFAULT_OPTIONS, options);\n            },\n            measure: function (text, style, options) {\n                if (options === void 0) {\n                    options = {};\n                }\n                if (typeof text === 'undefined' || text === null) {\n                    return zeroSize();\n                }\n                var styleKey = objectKey(style);\n                var cacheKey = hashKey(text + styleKey);\n                var cachedResult = this._cache.get(cacheKey);\n                if (cachedResult) {\n                    return cachedResult;\n                }\n                var size = zeroSize();\n                var measureBox = options.box || defaultMeasureBox;\n                var baselineMarker = this._baselineMarker().cloneNode(false);\n                for (var key in style) {\n                    var value = style[key];\n                    if (typeof value !== 'undefined') {\n                        measureBox.style[key] = value;\n                    }\n                }\n                var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n                measureBox.textContent = textStr;\n                measureBox.appendChild(baselineMarker);\n                document.body.appendChild(measureBox);\n                if (textStr.length) {\n                    size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n                    size.height = measureBox.offsetHeight;\n                    size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n                }\n                if (size.width > 0 && size.height > 0) {\n                    this._cache.put(cacheKey, size);\n                }\n                measureBox.parentNode.removeChild(measureBox);\n                return size;\n            },\n            _baselineMarker: function () {\n                var marker = document.createElement('div');\n                marker.style.cssText = 'display: inline-block; vertical-align: baseline;width: ' + this.options.baselineMarkerSize + 'px; height: ' + this.options.baselineMarkerSize + 'px;overflow: hidden;';\n                return marker;\n            }\n        });\n        TextMetrics.current = new TextMetrics();\n        function measureText(text, style, measureBox) {\n            return TextMetrics.current.measure(text, style, measureBox);\n        }\n        kendo.deepExtend(kendo.util, {\n            LRUCache: LRUCache,\n            TextMetrics: TextMetrics,\n            measureText: measureText,\n            objectKey: objectKey,\n            hashKey: hashKey,\n            normalizeText: normalizeText\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.scheduler', [\n        'kendo.dropdownlist',\n        'kendo.editable',\n        'kendo.multiselect',\n        'kendo.window',\n        'kendo.datetimepicker',\n        'kendo.scheduler.recurrence',\n        'kendo.scheduler.view',\n        'kendo.scheduler.dayview',\n        'kendo.scheduler.agendaview',\n        'kendo.scheduler.monthview',\n        'kendo.scheduler.timelineview',\n        'kendo.scheduler.yearview',\n        'kendo.dialog',\n        'kendo.pane',\n        'kendo.pdf',\n        'kendo.switch'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'scheduler',\n        name: 'Scheduler',\n        category: 'web',\n        description: 'The Scheduler is an event calendar.',\n        depends: [\n            'dropdownlist',\n            'editable',\n            'multiselect',\n            'window',\n            'datepicker',\n            'datetimepicker',\n            'scheduler.recurrence',\n            'scheduler.view'\n        ],\n        features: [\n            {\n                id: 'scheduler-dayview',\n                name: 'Scheduler Day View',\n                description: 'Scheduler Day View',\n                depends: ['scheduler.dayview']\n            },\n            {\n                id: 'scheduler-agendaview',\n                name: 'Scheduler Agenda View',\n                description: 'Scheduler Agenda View',\n                depends: ['scheduler.agendaview']\n            },\n            {\n                id: 'scheduler-monthview',\n                name: 'Scheduler Month View',\n                description: 'Scheduler Month View',\n                depends: ['scheduler.monthview']\n            },\n            {\n                id: 'scheduler-timelineview',\n                name: 'Scheduler Timeline View',\n                description: 'Scheduler Timeline View',\n                depends: ['scheduler.timelineview']\n            },\n            {\n                id: 'scheduler-yearview',\n                name: 'Scheduler Year View',\n                description: 'Scheduler Year View',\n                depends: ['scheduler.yearview']\n            },\n            {\n                id: 'scheduler-mobile',\n                name: 'Scheduler adaptive rendering',\n                description: 'Support for adaptive rendering',\n                depends: [\n                    'dialog',\n                    'pane',\n                    'switch'\n                ]\n            },\n            {\n                id: 'scheduler-pdf-export',\n                name: 'PDF export',\n                description: 'Export the scheduler events as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            },\n            {\n                id: 'scheduler-timezones',\n                name: 'Timezones',\n                description: 'Allow selecting timezones different than Etc/UTC',\n                depends: ['timezones']\n            }\n        ]\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, date = kendo.date, MS_PER_DAY = date.MS_PER_DAY, getDate = date.getDate, getMilliseconds = kendo.date.getMilliseconds, recurrence = kendo.recurrence, keys = $.extend({ F10: 121 }, kendo.keys), ui = kendo.ui, Widget = ui.Widget, DataBoundWidget = ui.DataBoundWidget, STRING = 'string', Popup = ui.Popup, Calendar = ui.Calendar, DataSource = kendo.data.DataSource, isPlainObject = $.isPlainObject, extend = $.extend, proxy = $.proxy, toString = Object.prototype.toString, isArray = Array.isArray, NS = '.kendoScheduler', CLICK = 'click', MOUSEDOWN = 'mousedown', TOUCHSTART = kendo.support.pointers ? 'pointerdown' : 'touchstart', TOUCHMOVE = kendo.support.pointers ? 'pointermove' : 'touchmove', TOUCHEND = kendo.support.pointers ? 'pointerup' : 'touchend', MOUSEMOVE = kendo.support.mousemove, CHANGE = 'change', PROGRESS = 'progress', ERROR = 'error', CANCEL = 'cancel', REMOVE = 'remove', RESET = 'resetSeries', SAVE = 'save', ADD = 'add', EDIT = 'edit', DISABLED = 'disabled', OPTION = 'option', FOCUSEDSTATE = 'k-focus', EXPANDEDSTATE = 'k-state-expanded', VIEWSSELECTOR = '.k-scheduler-views', INVERSECOLORCLASS = 'k-event-inverse', valueStartEndBoundRegex = /(?:value:start|value:end)(?:,|$)/, TODAY = getDate(new Date()), EXCEPTION_SEPARATOR = ',', OLD_EXCEPTION_SEPARATOR_REGEXP = /\\;/g, RECURRENCE_EXCEPTION = 'recurrenceException', DELETECONFIRM = 'Are you sure you want to delete this event?', DELETERECURRING = 'Do you want to delete only this event occurrence or the whole series?', EDITRECURRING = 'Do you want to edit only this event occurrence or the whole series?', DELETERECURRINGCONFIRM = 'Are you sure you want to delete this event occurrence?', RESETSERIESCONFIRM = 'Are you sure you want to reset the whole series?', DELETESERIESCONFIRM = 'Are you sure you want to delete the whole series?', COMMANDBUTTONTMPL = '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid #=className#\" #=attr#><span class=\"k-button-text\">#=text#</span></button>', VIEWS_DROPDOWN_TEMPLATE = kendo.template('' + '<select class=\"k-picker k-dropdown-list k-dropdown k-views-dropdown\">' + '#for (var view in views) {#' + '<option value=\"#= view #\">${views[view].title}</option>' + '#}#' + '</select>'), TOOLBARTEMPLATE = kendo.template('' + '<div class=\"k-scheduler-toolbar k-toolbar\">' + '# if (pdf) { #' + '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-pdf\"><span class=\"k-button-icon k-icon k-i-file-pdf\"></span><span class=\"k-button-text\">${messages.pdf}</span></button>' + '# } #' + '<span class=\"k-scheduler-navigation k-button-group\">' + '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-nav-today\" title=\"${messages.today}\"><span class=\"k-button-text\">${messages.today}</span></button>' + '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-prev\" title=\"${messages.previous}\" aria-label=\"${messages.previous}\"><span class=\"k-button-icon k-icon k-i-arrow-60-left\"></span></button>' + '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-next\" title=\"${messages.next}\" aria-label=\"${messages.next}\"><span class=\"k-button-icon k-icon k-i-arrow-60-right\"></span></button>' + '</span>' + '<a role=\"button\" href=\"\\\\#\" class=\"k-nav-current\">' + '<span class=\"k-icon k-i-calendar\"></span>' + '<span class=\"k-sm-date-format\" data-#=ns#bind=\"text: formattedShortDate\"></span>' + '<span class=\"k-lg-date-format\" data-#=ns#bind=\"text: formattedDate\"></span>' + '</a>' + '<span class=\"k-spacer k-toolbar-spacer\"></span>' + '# if (search) { #' + '<span class=\"k-scheduler-search k-textbox k-input k-input-md k-rounded-md k-input-solid\">' + '<input autocomplete=\"off\" placeholder=\"${messages.search}\" title=\"${messages.search}\" class=\"k-input-inner k-scheduler-search-input k-input-inner\" />' + '<span class=\"k-input-suffix\"><span class=\"k-icon k-i-search\"></span></span>' + '</span>' + '# } #' + '# if (viewsCount === 1) { #' + '<a role=\"button\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-scheduler-refresh\">' + '<span class=\"k-button-icon k-icon k-i-reload\"></span>' + '</a>' + '# } else { #' + '<span class=\"k-scheduler-views-wrapper\">' + '<span class=\"k-scheduler-views k-button-group\">' + '# for (var view in views) { #' + '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-view-#= view.toLowerCase() #\" data-#=ns#name=\"#=view#\"><span class=\"k-button-text\">${views[view].title}</span></button>' + '# } #' + '</span>' + '</span>' + '# } #' + '</div>'), MOBILETOOLBARTEMPLATE = kendo.template('<div class=\"k-scheduler-toolbar k-toolbar\">' + '<span class=\"k-scheduler-tools k-button-group\">' + '# if (pdf) { #' + '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-pdf\"><span class=\"k-button-icon k-icon k-i-file-pdf\"></span></button>' + '# } #' + '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-calendar\"><span class=\"k-button-icon k-icon k-i-calendar\"></span></button>' + '# if (editable) { #' + '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-create-event\"><span class=\"k-button-icon k-icon k-i-plus\"></span></button>' + '# } #' + '</span>' + '<span class=\"k-spacer k-toolbar-spacer\"></span>' + '# if (search) { #' + '<span class=\"k-scheduler-search k-textbox k-input k-input-md k-rounded-md k-input-solid\">' + '<input autocomplete=\"off\" placeholder=\"${messages.search}\" title=\"${messages.search}\" class=\"k-scheduler-search-input k-input-inner\" />' + '<span class=\"k-input-suffix\"><span class=\"k-icon k-i-search\"></span></span>' + '</span>' + '# } #' + '#if(viewsCount === 1){#' + '<a role=\"button\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-scheduler-refresh\">' + '<span class=\"k-button-icon k-icon k-i-reload\"></span>' + '</a>' + '#} else {#' + '<select class=\"k-picker k-dropdown-list k-dropdown k-scheduler-mobile-views\">' + '#for(var view in views){#' + '<option class=\"k-view-#= view.toLowerCase() #\" value=\"#=view#\">${views[view].title}</option>' + '#}#' + '</select>' + '#}#' + '</div>' + '<div class=\"k-scheduler-toolbar k-toolbar\">' + '<span class=\"k-scheduler-navigation\">' + '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-prev\"><span class=\"k-button-icon k-icon k-i-arrow-chevron-left\"></span></button>' + '<span class=\"k-nav-current\">' + '<span class=\"k-m-date-format\" data-#=ns#bind=\"text: formattedMobileDate\"></span>' + '<span class=\"k-y-date-format\" data-#=ns#bind=\"text: formattedYear\"></span>' + '</span>' + '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-next\"><span class=\"k-button-icon k-icon k-i-arrow-chevron-right\"></span></button>' + '</span>' + '</div>'), MOBILEDATERANGEEDITOR = function (container, options) {\n                var attr = {\n                    name: options.field,\n                    title: options.title\n                };\n                var isAllDay = options.model.isAllDay;\n                var dateTimeValidate = kendo.attr('validate') + '=\\'' + !isAllDay + '\\'';\n                var dateValidate = kendo.attr('validate') + '=\\'' + isAllDay + '\\'';\n                appendTimezoneAttr(attr, options);\n                appendValidDateValidator(attr, options);\n                appendDateCompareValidator(attr, options);\n                $('<input type=\"datetime-local\" required ' + kendo.attr('type') + '=\"datetime-local\" ' + kendo.attr('bind') + '=\"value:' + options.field + ', invisible:isAllDay\" ' + dateTimeValidate + '/>').attr(attr).appendTo(container);\n                $('<input type=\"date\" required ' + kendo.attr('type') + '=\"date\" ' + kendo.attr('bind') + '=\"value:' + options.field + ',visible:isAllDay\" ' + dateValidate + '/>').attr(attr).appendTo(container);\n                $('<span ' + kendo.attr('for') + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n            }, DATERANGEEDITOR = function (container, options) {\n                var attr = {\n                        name: options.field,\n                        title: options.title\n                    }, isAllDay = options.model.isAllDay, dateTimeValidate = kendo.attr('validate') + '=\\'' + !isAllDay + '\\' ', dateValidate = kendo.attr('validate') + '=\\'' + isAllDay + '\\' ';\n                appendTimezoneAttr(attr, options);\n                appendValidDateValidator(attr, options);\n                appendDateCompareValidator(attr, options);\n                $('<input type=\"text\" required ' + kendo.attr('type') + '=\"date\"' + ' ' + kendo.attr('role') + '=\"datetimepicker\" ' + kendo.attr('bind') + '=\"value:' + options.field + ',invisible:isAllDay\" ' + dateTimeValidate + '/>').attr(attr).appendTo(container);\n                $('<input type=\"text\" required ' + kendo.attr('type') + '=\"date\"' + ' ' + kendo.attr('role') + '=\"datepicker\" ' + kendo.attr('bind') + '=\"value:' + options.field + ',visible:isAllDay\" ' + dateValidate + '/>').attr(attr).appendTo(container);\n                $('<span ' + kendo.attr('bind') + '=\"text: ' + options.field + 'Timezone\"></span>').appendTo(container);\n                if (options.field === 'end') {\n                    $('<span ' + kendo.attr('bind') + '=\"text: startTimezone, invisible: endTimezone\"></span>').appendTo(container);\n                }\n                $('<span ' + kendo.attr('for') + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n            }, RECURRENCEEDITOR = function (container, options) {\n                $('<div ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).appendTo(container).kendoRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages\n                });\n            }, MOBILERECURRENCEEDITOR = function (container, options) {\n                $('<div ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).appendTo(container).kendoMobileRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages,\n                    pane: options.pane,\n                    value: options.model[options.field]\n                });\n            }, MOBILEISALLDAYEDITOR = function (container, options) {\n                $('<input type=\"checkbox\" data-role=\"switch\"' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').appendTo(container);\n            }, MOBILETIMEZONEPOPUP = function (container, options) {\n                var text = timezoneButtonText(options.model, options.messages.noTimezone);\n                $('<span class=\"k-timezone-label\"></span>').text(text).appendTo(container);\n                $('<span class=\"k-icon k-i-arrow-chevron-right\"></span>').appendTo(container);\n                container.closest('li.k-item label').on('click', options.click);\n            }, TIMEZONEPOPUP = function (container, options) {\n                $('<a href=\"#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" data-bind=\"invisible:isAllDay\"><span class=\"k-button-text\">' + options.messages.timezoneEditorButton + '</span></a>').on('click', options.click).appendTo(container);\n            }, MOBILETIMEZONEEDITOR = function (container, options) {\n                $('<div class=\"k-mobiletimezoneeditor\" ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).appendTo(container).kendoMobileTimezoneEditor({ optionLabel: options.noTimezone });\n            }, TIMEZONEEDITOR = function (container, options) {\n                var visible = options.visible || options.visible === undefined;\n                $('<div ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).toggle(visible).appendTo(container).kendoTimezoneEditor({\n                    optionLabel: options.noTimezone,\n                    title: options.title\n                });\n            };\n        function timezoneButtonText(model, message) {\n            message = message || '';\n            if (model.startTimezone) {\n                message = model.startTimezone;\n                if (model.endTimezone) {\n                    message += ' | ' + model.endTimezone;\n                }\n            }\n            return message;\n        }\n        function appendTimezoneAttr(attrs, options) {\n            var timezone = options.timezone;\n            if (timezone) {\n                attrs[kendo.attr('timezone')] = timezone;\n            }\n        }\n        function appendValidDateValidator(attrs, options) {\n            var validationRules = options.model.fields[options.field].validation;\n            if (validationRules) {\n                var validDateRule = validationRules.validDateValidator;\n                if (validDateRule && isPlainObject(validDateRule) && validDateRule.message) {\n                    attrs[kendo.attr('validDate-msg')] = validDateRule.message;\n                }\n            }\n        }\n        function appendDateCompareValidator(attrs, options) {\n            var validationRules = options.model.fields[options.field].validation;\n            if (validationRules) {\n                var dateCompareRule = validationRules.dateCompare;\n                if (dateCompareRule && isPlainObject(dateCompareRule) && dateCompareRule.message) {\n                    attrs[kendo.attr('dateCompare-msg')] = dateCompareRule.message;\n                }\n            }\n        }\n        function wrapDataAccess(originalFunction, timezone) {\n            return function (data) {\n                data = originalFunction(data);\n                convertData(data, 'apply', timezone);\n                return data || [];\n            };\n        }\n        function wrapDataSerialization(originalFunction, timezone) {\n            return function (data) {\n                if (data) {\n                    if (toString.call(data) !== '[object Array]' && !(data instanceof kendo.data.ObservableArray)) {\n                        data = [data];\n                    }\n                }\n                convertData(data, 'remove', timezone, true);\n                data = originalFunction(data);\n                return data || [];\n            };\n        }\n        function convertData(data, method, timezone, removeUid) {\n            var event, idx, length, startOffset, endOffset;\n            data = data || [];\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                event = data[idx];\n                startOffset = event.start ? event.start.getTimezoneOffset() : null;\n                endOffset = event.start ? event.end.getTimezoneOffset() : null;\n                if (removeUid) {\n                    if (event.startTimezone || event.endTimezone) {\n                        if (timezone) {\n                            event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                            event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                            event.start = kendo.timezone[method](event.start, timezone);\n                            event.end = kendo.timezone[method](event.end, timezone);\n                        } else {\n                            event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                            event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                        }\n                    } else if (timezone) {\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    }\n                } else {\n                    if (event.startTimezone || event.endTimezone) {\n                        event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                        event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                        if (timezone) {\n                            event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                            event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                        }\n                    } else if (timezone) {\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    }\n                }\n                if (removeUid) {\n                    delete event.uid;\n                }\n                if (method === 'remove' && event.start && startOffset && startOffset !== event.start.getTimezoneOffset()) {\n                    event.start = new Date(event.start.getTime() + (startOffset - event.start.getTimezoneOffset()) * 60000);\n                }\n                if (method === 'remove' && event.end && endOffset && endOffset !== event.end.getTimezoneOffset()) {\n                    event.end = new Date(event.end.getTime() + (endOffset - event.end.getTimezoneOffset()) * 60000);\n                }\n            }\n            return data;\n        }\n        function getOccurrenceByUid(data, uid) {\n            var length = data.length, idx = 0, event;\n            for (; idx < length; idx++) {\n                event = data[idx];\n                if (event.uid === uid) {\n                    return event;\n                }\n            }\n        }\n        var SchedulerDataReader = kendo.Class.extend({\n            init: function (schema, reader) {\n                var timezone = schema.timezone;\n                this.reader = reader;\n                if (reader.model) {\n                    this.model = reader.model;\n                }\n                this.timezone = timezone;\n                this.data = wrapDataAccess($.proxy(this.data, this), timezone);\n                this.serialize = wrapDataSerialization($.proxy(this.serialize, this), timezone);\n            },\n            errors: function (data) {\n                return this.reader.errors(data);\n            },\n            parse: function (data) {\n                return this.reader.parse(data);\n            },\n            data: function (data) {\n                return this.reader.data(data);\n            },\n            total: function (data) {\n                return this.reader.total(data);\n            },\n            groups: function (data) {\n                return this.reader.groups(data);\n            },\n            aggregates: function (data) {\n                return this.reader.aggregates(data);\n            },\n            serialize: function (data) {\n                return this.reader.serialize(data);\n            }\n        });\n        function applyZone(date, fromZone, toZone) {\n            if (toZone) {\n                date = kendo.timezone.convert(date, fromZone, toZone);\n            } else {\n                date = kendo.timezone.remove(date, fromZone);\n            }\n            return date;\n        }\n        function validDateValidator(input) {\n            if (input.filter('[name=start]').length && input.filter('[title=Start]').length || input.filter('[name=end]').length && input.filter('[title=End]').length || input.filter('.k-recur-until').length) {\n                var date;\n                var picker = kendo.widgetInstance(input, kendo.ui);\n                if (picker) {\n                    date = kendo.parseDate(input.val(), picker.options.format);\n                    return !!date && picker.value();\n                } else {\n                    date = kendo.parseDate(input.val());\n                    return !!date;\n                }\n            }\n            return true;\n        }\n        function dateCompareValidator(input) {\n            if (input.filter('[name=end]').length) {\n                var container = input.closest('.k-scheduler-edit-form');\n                var startInput = container.find('[name=start]:visible');\n                var endInput = container.find('[name=end]:visible');\n                if (endInput[0] && startInput[0]) {\n                    var start, end;\n                    var startPicker = kendo.widgetInstance(startInput, kendo.ui);\n                    var endPicker = kendo.widgetInstance(endInput, kendo.ui);\n                    var editable = container.data('kendoEditable');\n                    var model = editable ? editable.options.model : null;\n                    if (startPicker && endPicker) {\n                        start = startPicker.value();\n                        end = endPicker.value();\n                    } else {\n                        start = kendo.parseDate(startInput.val());\n                        end = kendo.parseDate(endInput.val());\n                    }\n                    if (start && end) {\n                        if (model) {\n                            var timezone = startInput.attr(kendo.attr('timezone'));\n                            var startTimezone = model.startTimezone;\n                            var endTimezone = model.endTimezone;\n                            startTimezone = startTimezone || endTimezone;\n                            endTimezone = endTimezone || startTimezone;\n                            if (startTimezone) {\n                                start = applyZone(start, startTimezone, timezone);\n                                end = applyZone(end, endTimezone, timezone);\n                            }\n                        }\n                        return start <= end;\n                    }\n                }\n            }\n            return true;\n        }\n        function untilDateCompareValidator(input) {\n            var untilPicker, until, container, startInput, start, startPicker;\n            if (input.filter('.k-recur-until').length) {\n                untilPicker = kendo.widgetInstance(input, kendo.ui);\n                until = untilPicker.value();\n                container = input.closest('.k-scheduler-edit-form');\n                startInput = container.find('[name=start]:visible');\n                if (startInput[0]) {\n                    startPicker = kendo.widgetInstance(startInput, kendo.ui);\n                    if (startPicker) {\n                        start = startPicker.value();\n                    } else {\n                        start = kendo.parseDate(startInput.val());\n                    }\n                    if (start && until) {\n                        return start <= until;\n                    }\n                }\n            }\n            return true;\n        }\n        var SchedulerEvent = kendo.data.Model.define({\n            init: function (value) {\n                var that = this;\n                kendo.data.Model.fn.init.call(that, value);\n                that._defaultId = that.defaults[that.idField];\n            },\n            _time: function (field) {\n                var date = this[field];\n                var fieldTime = '_' + field + 'Time';\n                if (this[fieldTime]) {\n                    return this[fieldTime] - kendo.date.toUtcTime(kendo.date.getDate(date));\n                }\n                return getMilliseconds(date);\n            },\n            _date: function (field) {\n                var fieldTime = '_' + field + 'Time';\n                if (this[fieldTime]) {\n                    return this[fieldTime] - this._time(field);\n                }\n                return kendo.date.getDate(this[field]);\n            },\n            clone: function (options, updateUid) {\n                var uid = this.uid, event = new this.constructor($.extend({}, this.toJSON(), options));\n                if (!updateUid) {\n                    event.uid = uid;\n                }\n                return event;\n            },\n            duration: function () {\n                var end = this.end;\n                var start = this.start;\n                var offset = (end.getTimezoneOffset() - start.getTimezoneOffset()) * kendo.date.MS_PER_MINUTE;\n                return end - start - offset;\n            },\n            expand: function (start, end, zone) {\n                return recurrence ? recurrence.expand(this, start, end, zone) : [this];\n            },\n            update: function (eventInfo) {\n                for (var field in eventInfo) {\n                    this.set(field, eventInfo[field]);\n                }\n                if (this._startTime) {\n                    this.set('_startTime', kendo.date.toUtcTime(this.start));\n                }\n                if (this._endTime) {\n                    this.set('_endTime', kendo.date.toUtcTime(this.end));\n                }\n            },\n            isMultiDay: function () {\n                return this.isAllDay || this.duration() >= kendo.date.MS_PER_DAY;\n            },\n            isException: function () {\n                return !this.isNew() && this.recurrenceId;\n            },\n            isOccurrence: function () {\n                return this.isNew() && this.recurrenceId;\n            },\n            isRecurring: function () {\n                return !!(this.recurrenceRule || this.recurrenceId);\n            },\n            isRecurrenceHead: function () {\n                return !!(this.id && this.recurrenceRule);\n            },\n            toOccurrence: function (options) {\n                options = $.extend(options, {\n                    recurrenceException: null,\n                    recurrenceRule: null,\n                    recurrenceId: this.id || this.recurrenceId\n                });\n                options[this.idField] = this.defaults[this.idField];\n                return this.clone(options, true);\n            },\n            toJSON: function () {\n                var obj = kendo.data.Model.fn.toJSON.call(this);\n                obj.uid = this.uid;\n                delete obj._startTime;\n                delete obj._endTime;\n                return obj;\n            },\n            shouldSerialize: function (field) {\n                return kendo.data.Model.fn.shouldSerialize.call(this, field) && field !== '_defaultId';\n            },\n            set: function (key, value) {\n                var isAllDay = this.isAllDay || false;\n                kendo.data.Model.fn.set.call(this, key, value);\n                if (key == 'isAllDay' && value != isAllDay) {\n                    var start = kendo.date.getDate(this.start);\n                    var end = new Date(this.end);\n                    var milliseconds = kendo.date.getMilliseconds(end);\n                    if (milliseconds === 0 && value) {\n                        milliseconds = MS_PER_DAY;\n                    }\n                    this.set('start', start);\n                    if (value === true) {\n                        kendo.date.setTime(end, -milliseconds);\n                        if (end < start) {\n                            end = start;\n                        }\n                    } else {\n                        kendo.date.setTime(end, MS_PER_DAY - milliseconds);\n                    }\n                    this.set('end', end);\n                }\n            },\n            id: 'id',\n            fields: {\n                id: { type: 'number' },\n                title: {\n                    defaultValue: '',\n                    type: 'string'\n                },\n                start: {\n                    type: 'date',\n                    validation: {\n                        required: true,\n                        validDate: { value: validDateValidator }\n                    }\n                },\n                startTimezone: { type: 'string' },\n                end: {\n                    type: 'date',\n                    validation: {\n                        required: true,\n                        validDate: { value: validDateValidator },\n                        dateCompare: { value: dateCompareValidator }\n                    }\n                },\n                endTimezone: { type: 'string' },\n                recurrenceRule: {\n                    defaultValue: '',\n                    type: 'string',\n                    validation: {\n                        validDate: { value: validDateValidator },\n                        untilDateCompare: { value: untilDateCompareValidator }\n                    }\n                },\n                recurrenceException: {\n                    defaultValue: '',\n                    type: 'string'\n                },\n                isAllDay: {\n                    type: 'boolean',\n                    defaultValue: false\n                },\n                description: { type: 'string' }\n            }\n        });\n        var SchedulerDataSource = DataSource.extend({\n            init: function (options) {\n                DataSource.fn.init.call(this, extend(true, {}, {\n                    schema: {\n                        modelBase: SchedulerEvent,\n                        model: SchedulerEvent\n                    }\n                }, options));\n                this.reader = new SchedulerDataReader(this.options.schema, this.reader);\n            },\n            expand: function (start, end) {\n                var data = this.view(), filter = {}, endOffset;\n                if (start && end) {\n                    endOffset = end.getTimezoneOffset();\n                    end = new Date(end.getTime() + MS_PER_DAY - 1);\n                    if (end.getTimezoneOffset() !== endOffset) {\n                        end = kendo.timezone.apply(end, endOffset);\n                    }\n                    filter = {\n                        logic: 'or',\n                        filters: [\n                            {\n                                logic: 'and',\n                                filters: [\n                                    {\n                                        field: 'start',\n                                        operator: 'gte',\n                                        value: start\n                                    },\n                                    {\n                                        field: 'end',\n                                        operator: 'gte',\n                                        value: start\n                                    },\n                                    {\n                                        field: 'start',\n                                        operator: 'lte',\n                                        value: end\n                                    }\n                                ]\n                            },\n                            {\n                                logic: 'and',\n                                filters: [\n                                    {\n                                        field: 'start',\n                                        operator: 'lte',\n                                        value: new Date(start.getTime() + MS_PER_DAY - 1)\n                                    },\n                                    {\n                                        field: 'end',\n                                        operator: 'gte',\n                                        value: start\n                                    }\n                                ]\n                            }\n                        ]\n                    };\n                    data = new kendo.data.Query(expandAll(data, start, end, this.reader.timezone)).filter(filter).toArray();\n                }\n                return data;\n            },\n            cancelChanges: function (model) {\n                if (model && model.isOccurrence()) {\n                    this._removeExceptionDate(model);\n                }\n                DataSource.fn.cancelChanges.call(this, model);\n            },\n            insert: function (index, model) {\n                if (!model) {\n                    return;\n                }\n                if (!(model instanceof SchedulerEvent)) {\n                    var eventInfo = model;\n                    model = this._createNewModel();\n                    model.accept(eventInfo);\n                }\n                if (!this._pushCreated && model.isRecurrenceHead() || model.recurrenceId) {\n                    model = model.recurrenceId ? model : model.toOccurrence();\n                    this._addExceptionDate(model);\n                }\n                return DataSource.fn.insert.call(this, index, model);\n            },\n            pushCreate: function (items) {\n                this._pushCreated = true;\n                DataSource.fn.pushCreate.call(this, items);\n                this._pushCreated = false;\n            },\n            remove: function (model) {\n                if (model.isRecurrenceHead()) {\n                    this._removeExceptions(model);\n                } else if (model.isRecurring()) {\n                    this._addExceptionDate(model);\n                }\n                return DataSource.fn.remove.call(this, model);\n            },\n            _removeExceptions: function (model) {\n                var data = this.data().slice(0), item = data.shift(), id = model.id;\n                while (item) {\n                    if (item.recurrenceId === id) {\n                        DataSource.fn.remove.call(this, item);\n                    }\n                    item = data.shift();\n                }\n                model.set(RECURRENCE_EXCEPTION, '');\n            },\n            _removeExceptionDate: function (model) {\n                if (model.recurrenceId) {\n                    var head = this.get(model.recurrenceId);\n                    if (head) {\n                        var start = model.defaults.start;\n                        var replaceRegExp = new RegExp('(\\\\' + EXCEPTION_SEPARATOR + '?)' + recurrence.toExceptionString(start, this.reader.timezone));\n                        var recurrenceException = (head.recurrenceException || '').replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, '');\n                        if (replaceRegExp.test(recurrenceException)) {\n                            head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, ''));\n                        } else {\n                            start = model.start;\n                            replaceRegExp = new RegExp('(\\\\' + EXCEPTION_SEPARATOR + '?)' + recurrence.toExceptionString(start, this.reader.timezone));\n                            head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, ''));\n                        }\n                    }\n                }\n            },\n            _addExceptionDate: function (model) {\n                var start = model.start;\n                var zone = this.reader.timezone;\n                var head = this.get(model.recurrenceId);\n                var recurrenceException = (head.recurrenceException || '').replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, '');\n                if (!recurrence.isException(recurrenceException, start, zone)) {\n                    var newException = recurrence.toExceptionString(start, zone);\n                    model.defaults.start = start;\n                    head.set(RECURRENCE_EXCEPTION, recurrenceException + (recurrenceException && newException ? EXCEPTION_SEPARATOR : '') + newException);\n                }\n            }\n        });\n        function expandAll(events, start, end, zone) {\n            var length = events.length, data = [], idx = 0;\n            for (; idx < length; idx++) {\n                data = data.concat(events[idx].expand(start, end, zone));\n            }\n            return data;\n        }\n        SchedulerDataSource.create = function (options) {\n            if (isArray(options) || options instanceof kendo.data.ObservableArray) {\n                options = { data: options };\n            }\n            var dataSource = options || {}, data = dataSource.data;\n            dataSource.data = data;\n            if (!(dataSource instanceof SchedulerDataSource) && dataSource instanceof kendo.data.DataSource) {\n                throw new Error('Incorrect DataSource type. Only SchedulerDataSource instances are supported');\n            }\n            return dataSource instanceof SchedulerDataSource ? dataSource : new SchedulerDataSource(dataSource);\n        };\n        extend(true, kendo.data, {\n            SchedulerDataSource: SchedulerDataSource,\n            SchedulerDataReader: SchedulerDataReader,\n            SchedulerEvent: SchedulerEvent\n        });\n        var defaultCommands = {\n            update: {\n                text: 'Save',\n                className: 'k-button-solid-primary k-scheduler-update'\n            },\n            canceledit: {\n                text: 'Cancel',\n                className: 'k-scheduler-cancel'\n            },\n            destroy: {\n                text: 'Delete',\n                imageClass: 'k-i-close',\n                className: 'k-button-solid-primary k-scheduler-delete',\n                iconClass: 'k-icon'\n            }\n        };\n        function trimOptions(options, overrideOptions) {\n            delete options.name;\n            delete options.prefix;\n            delete options.remove;\n            delete options.edit;\n            delete options.add;\n            delete options.navigate;\n            for (var key in overrideOptions) {\n                options[key] = overrideOptions[key];\n            }\n            return options;\n        }\n        function descriptionEditor(options) {\n            var attr = createValidationAttributes(options.model, options.field);\n            return function (container, model) {\n                $('<textarea name=\"description\" class=\"k-input-inner\" title=\"' + model.title + '\"/>').attr(attr).appendTo(container).wrap('<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"></span>');\n            };\n        }\n        function createValidationAttributes(model, field) {\n            var modelField = (model.fields || model)[field];\n            var specialRules = [\n                'url',\n                'email',\n                'number',\n                'date',\n                'boolean'\n            ];\n            var validation = modelField ? modelField.validation : {};\n            var datatype = kendo.attr('type');\n            var inArray = $.inArray;\n            var ruleName;\n            var rule;\n            var attr = {};\n            for (ruleName in validation) {\n                rule = validation[ruleName];\n                if (inArray(ruleName, specialRules) >= 0) {\n                    attr[datatype] = ruleName;\n                } else if (!kendo.isFunction(rule)) {\n                    attr[ruleName] = isPlainObject(rule) ? rule.value || ruleName : rule;\n                }\n                attr[kendo.attr(ruleName + '-msg')] = rule.message;\n            }\n            return attr;\n        }\n        function filterResourceEditorData(editor, parentValue, parentValueField, valueField) {\n            var editorValue = editor.value(), isMs = Array.isArray(editorValue), valueArray;\n            if (isMs) {\n                valueArray = JSON.parse(JSON.stringify(editorValue));\n            } else {\n                valueArray = [editorValue.toString()];\n            }\n            editor.dataSource.data().forEach(function (item) {\n                if (item[parentValueField] === null || item[parentValueField] === undefined || item[parentValueField] == parentValue) {\n                    item.set(DISABLED, false);\n                } else {\n                    var currentValue = item.get(valueField);\n                    item.set(DISABLED, true);\n                    if (valueArray.indexOf(currentValue) >= 0 || valueArray.indexOf(currentValue.toString()) >= 0) {\n                        if (isMs) {\n                            valueArray.splice(valueArray.indexOf(currentValue), 1);\n                        } else {\n                            editor.value(null);\n                            editor.trigger(CHANGE);\n                        }\n                    }\n                }\n            });\n            if (isMs && valueArray.length < editorValue.length) {\n                editor.value(valueArray);\n                editor.trigger(CHANGE);\n            }\n        }\n        function bindParentValueChangeHandler(container, currentEditor, resource, parent) {\n            var parentElement = container.closest('.k-edit-form-container').find('[data-' + kendo.ns + 'bind=\\'value:' + parent + '\\']');\n            var parentWidget = parentElement.getKendoDropDownList();\n            if (parentWidget) {\n                parentWidget.bind(CHANGE, function (ev) {\n                    var parentValue = ev.sender.value();\n                    filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n                });\n            } else {\n                parentElement.on(CHANGE, function (ev) {\n                    var parentValue = ev.target.value;\n                    filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n                });\n            }\n        }\n        function filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue) {\n            var options = currentEditor.find(OPTION), editorValue = currentEditor.val(), isMs = Array.isArray(editorValue), valueArray;\n            if (isMs) {\n                valueArray = JSON.parse(JSON.stringify(editorValue));\n            } else {\n                valueArray = [editorValue];\n            }\n            resource.dataSource.view().forEach(function (item, index) {\n                var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n                var valid = itemParentValue === null || itemParentValue === undefined || itemParentValue == parentSelectedValue;\n                if (valid) {\n                    options[index].removeAttribute(DISABLED);\n                } else {\n                    options[index].setAttribute(DISABLED, DISABLED);\n                    var currentValue = '' + item.get(resource.dataValueField);\n                    if (valueArray.indexOf(currentValue) >= 0) {\n                        if (isMs) {\n                            valueArray.splice(valueArray.indexOf(currentValue), 1);\n                        } else {\n                            currentEditor.val(null);\n                            currentEditor.trigger(CHANGE);\n                        }\n                    }\n                }\n            });\n            if (isMs && valueArray.length < editorValue.length) {\n                currentEditor.val(valueArray);\n                currentEditor.trigger(CHANGE);\n            }\n        }\n        function dropDownResourceEditor(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n                var currentEditor;\n                if (parent) {\n                    setTimeout(function () {\n                        filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                        bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                    });\n                }\n                currentEditor = $(kendo.format('<select data-{0}bind=\"value:{1}\" title=\"' + model.title + '\">', kendo.ns, resource.field)).appendTo(container).attr(attr).kendoDropDownList({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource.data(),\n                    valuePrimitive: resource.valuePrimitive,\n                    optionLabel: 'None',\n                    template: kendo.format('<span #= data.disabled ? \"data-disabled\": \"\"#><span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#</span>', resource.dataColorField, resource.dataTextField),\n                    select: function (e) {\n                        if (e.dataItem.disabled) {\n                            e.preventDefault();\n                        }\n                    },\n                    dataBound: function (e) {\n                        var options = e.sender.list.find('li');\n                        options.each(function (i, el) {\n                            var element = $(el);\n                            if (element.find('[data-disabled]').length > 0) {\n                                element.addClass('k-state-disabled');\n                            }\n                        });\n                    }\n                }).data('kendoDropDownList');\n            };\n        }\n        function dropDownResourceEditorMobile(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n                var options = '';\n                var view = resource.dataSource.view();\n                for (var idx = 0, length = view.length; idx < length; idx++) {\n                    options += kendo.format('<option value=\"{0}\">{1}</option>', kendo.getter(resource.dataValueField)(view[idx]), kendo.getter(resource.dataTextField)(view[idx]));\n                }\n                var currentEditor = $(kendo.format('<select data-{0}bind=\"value:{1}\">{2}</select>', kendo.ns, resource.field, options)).appendTo(container).attr(attr);\n                if (parent) {\n                    setTimeout(function () {\n                        var parentElement = container.closest('.k-stretched-view').find('[data-' + kendo.ns + 'bind=\\'value:' + parent + '\\']');\n                        var parentSelectedValue = model[parent];\n                        filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n                        parentElement.on(CHANGE, function (ev) {\n                            var parentValue = ev.target.value;\n                            filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                        });\n                    });\n                }\n            };\n        }\n        function multiSelectResourceEditor(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n                var currentEditor;\n                if (parent) {\n                    setTimeout(function () {\n                        filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                        bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                    });\n                }\n                currentEditor = $(kendo.format('<select data-{0}bind=\"value:{1}\">', kendo.ns, resource.field)).appendTo(container).attr(attr).kendoMultiSelect({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource.data(),\n                    valuePrimitive: resource.valuePrimitive,\n                    itemTemplate: kendo.format('<span #= data.disabled ? \"data-disabled\": \"\" #><span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#</span>', resource.dataColorField, resource.dataTextField),\n                    tagTemplate: kendo.format('<span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#', resource.dataColorField, resource.dataTextField),\n                    select: function (e) {\n                        if (e.dataItem.disabled) {\n                            e.preventDefault();\n                        }\n                    },\n                    dataBound: function (e) {\n                        var options = e.sender.list.find('li');\n                        options.each(function (i, el) {\n                            var element = $(el);\n                            if (element.find('[data-disabled]').length > 0) {\n                                element.addClass('k-state-disabled');\n                            }\n                        });\n                    }\n                }).data('kendoMultiSelect');\n            };\n        }\n        function multiSelectResourceEditorMobile(resource, model, parent) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n                var options = '';\n                var view = resource.dataSource.view();\n                for (var idx = 0, length = view.length; idx < length; idx++) {\n                    options += kendo.format('<option value=\"{0}\">{1}</option>', kendo.getter(resource.dataValueField)(view[idx]), kendo.getter(resource.dataTextField)(view[idx]));\n                }\n                var currentEditor = $(kendo.format('<select data-{0}bind=\"value:{1}\" multiple=\"multiple\">{2}</select>', kendo.ns, resource.field, options)).appendTo(container).attr(attr);\n                if (parent) {\n                    setTimeout(function () {\n                        var parentElement = container.closest('.k-stretched-view').find('[data-' + kendo.ns + 'bind=\\'value:' + parent + '\\']');\n                        var parentSelectedValue = model[parent];\n                        filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n                        parentElement.on(CHANGE, function (ev) {\n                            var parentValue = ev.target.value;\n                            filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                        });\n                    });\n                }\n            };\n        }\n        function moveEventRange(event, distance) {\n            var duration = event.end.getTime() - event.start.getTime();\n            var start = new Date(event.start.getTime());\n            kendo.date.setTime(start, distance);\n            var end = new Date(start.getTime());\n            kendo.date.setTime(end, duration, true);\n            return {\n                start: start,\n                end: end\n            };\n        }\n        var editors = {\n            mobile: {\n                dateRange: MOBILEDATERANGEEDITOR,\n                timezonePopUp: MOBILETIMEZONEPOPUP,\n                timezone: MOBILETIMEZONEEDITOR,\n                recurrence: MOBILERECURRENCEEDITOR,\n                description: descriptionEditor,\n                multipleResources: multiSelectResourceEditorMobile,\n                resources: dropDownResourceEditorMobile,\n                isAllDay: MOBILEISALLDAYEDITOR\n            },\n            desktop: {\n                dateRange: DATERANGEEDITOR,\n                timezonePopUp: TIMEZONEPOPUP,\n                timezone: TIMEZONEEDITOR,\n                recurrence: RECURRENCEEDITOR,\n                description: descriptionEditor,\n                multipleResources: multiSelectResourceEditor,\n                resources: dropDownResourceEditor\n            }\n        };\n        var Editor = kendo.Observable.extend({\n            init: function (element, options) {\n                kendo.Observable.fn.init.call(this);\n                this.element = element;\n                this.options = extend(true, {}, this.options, options);\n                this.createButton = this.options.createButton;\n                this.toggleDateValidationHandler = proxy(this._toggleDateValidation, this);\n            },\n            _toggleDateValidation: function (e) {\n                if (e.field == 'isAllDay') {\n                    var container = this.container, isAllDay = this.editable.options.model.isAllDay, bindAttribute = kendo.attr('bind'), element, isDateTimeInput, shouldValidate;\n                    container.find('[' + bindAttribute + '*=end],[' + bindAttribute + '*=start]').each(function () {\n                        element = $(this);\n                        if (valueStartEndBoundRegex.test(element.attr(bindAttribute))) {\n                            isDateTimeInput = element.is('[' + kendo.attr('role') + '=datetimepicker],[type*=datetime]');\n                            shouldValidate = isAllDay !== isDateTimeInput;\n                            element.attr(kendo.attr('validate'), shouldValidate);\n                        }\n                    });\n                }\n            },\n            fields: function (editors, model) {\n                var that = this;\n                var messages = that.options.messages;\n                var timezone = that.options.timezone;\n                var click = function (e) {\n                    e.preventDefault();\n                    that._initTimezoneEditor(model, this);\n                };\n                var fields = [\n                    {\n                        field: 'title',\n                        title: messages.editor.title\n                    },\n                    {\n                        field: 'start',\n                        title: messages.editor.start,\n                        editor: editors.dateRange,\n                        timezone: timezone\n                    },\n                    {\n                        field: 'end',\n                        title: messages.editor.end,\n                        editor: editors.dateRange,\n                        timezone: timezone\n                    },\n                    {\n                        field: 'isAllDay',\n                        title: messages.editor.allDayEvent,\n                        editor: editors.isAllDay\n                    }\n                ];\n                var checkHierarchical = function (item) {\n                    return !!item[resource.dataParentValueField];\n                };\n                if (kendo.timezone.windows_zones) {\n                    fields.push({\n                        field: 'timezone',\n                        title: messages.editor.timezone,\n                        editor: editors.timezonePopUp,\n                        click: click,\n                        messages: messages.editor,\n                        model: model\n                    });\n                    fields.push({\n                        field: 'startTimezone',\n                        title: messages.editor.startTimezone,\n                        editor: editors.timezone,\n                        noTimezone: messages.editor.noTimezone\n                    });\n                    fields.push({\n                        field: 'endTimezone',\n                        title: messages.editor.endTimezone,\n                        editor: editors.timezone,\n                        noTimezone: messages.editor.noTimezone\n                    });\n                }\n                if (!model.recurrenceId) {\n                    fields.push({\n                        field: 'recurrenceRule',\n                        title: messages.editor.repeat,\n                        editor: editors.recurrence,\n                        timezone: timezone,\n                        messages: messages.recurrenceEditor,\n                        pane: this.pane\n                    });\n                }\n                if ('description' in model) {\n                    fields.push({\n                        field: 'description',\n                        title: messages.editor.description,\n                        editor: editors.description({\n                            model: model,\n                            field: 'description'\n                        })\n                    });\n                }\n                for (var resourceIndex = 0; resourceIndex < this.options.resources.length; resourceIndex++) {\n                    var resource = this.options.resources[resourceIndex];\n                    var resourceView = resource.dataSource.view();\n                    var hasParent = resourceView.some(checkHierarchical);\n                    var parentResource, parent;\n                    if (hasParent) {\n                        parentResource = this.options.resources[resourceIndex - 1];\n                        if (parentResource) {\n                            parent = parentResource.field;\n                        }\n                    }\n                    fields.push({\n                        field: resource.field,\n                        title: resource.title,\n                        editor: resource.multiple ? editors.multipleResources(resource, model, parent) : editors.resources(resource, model, parent)\n                    });\n                }\n                return fields;\n            },\n            end: function () {\n                return this.editable.end();\n            },\n            _buildDesktopEditTemplate: function (model, fields, editableFields) {\n                var messages = this.options.messages;\n                var settings = extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var html = '';\n                for (var idx = 0, length = fields.length; idx < length; idx++) {\n                    var field = fields[idx];\n                    if (field.field === 'startTimezone') {\n                        html += '<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" style=\"display:none\">';\n                        html += '<div class=\"k-edit-form-container\">';\n                        html += '<div class=\"k-edit-label\"></div>';\n                        html += '<div class=\"k-edit-field\"><label class=\"k-check\"><input class=\"k-timezone-toggle k-checkbox k-checkbox-md k-rounded-md\" type=\"checkbox\"/>' + messages.editor.separateTimezones + '</label></div>';\n                    }\n                    html += '<div class=\"k-edit-label\"><label for=\"' + field.field + '\">' + (field.title || field.field || '') + '</label></div>';\n                    if (!model.editable || model.editable(field.field)) {\n                        editableFields.push(field);\n                        html += '<div ' + kendo.attr('container-for') + '=\"' + field.field + '\" class=\"k-edit-field\"></div>';\n                    } else {\n                        var tmpl = '#:';\n                        if (field.field) {\n                            field = kendo.expr(field.field, paramName);\n                            tmpl += field + '==null?\\'\\':' + field;\n                        } else {\n                            tmpl += '\\'\\'';\n                        }\n                        tmpl += '#';\n                        tmpl = kendo.template(tmpl, settings);\n                        html += '<div class=\"k-edit-field\">' + tmpl(model) + '</div>';\n                    }\n                    if (field.field === 'endTimezone') {\n                        html += this._createEndTimezoneButton();\n                    }\n                }\n                return html;\n            },\n            _buildMobileEditTemplate: function (model, fields, editableFields) {\n                var messages = this.options.messages;\n                var settings = extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var html = '';\n                html += '<ul class=\"k-listgroup k-listgroup-flush\">';\n                for (var idx = 0, length = fields.length; idx < length; idx++) {\n                    var field = fields[idx];\n                    if (field.field === 'timezone' || field.field === 'recurrenceRule') {\n                        html += '</ul><ul class=\"k-listgroup k-listgroup-flush\">';\n                    }\n                    if (field.field === 'startTimezone') {\n                        html += '<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" style=\"display:none\">';\n                        html += '<ul class=\"k-listgroup k-listgroup-flush\">';\n                        html += '<li class=\"k-item k-listgroup-item\">';\n                        html += '<label class=\"k-label k-listgroup-form-row\">';\n                        html += '<span class=\"k-item-title k-listgroup-form-row\">' + messages.editor.separateTimezones + '</span>';\n                        html += '<span class=\"k-listgroup-form-field-wrapper\">';\n                        html += '<input class=\"k-timezone-toggle\" data-role=\"switch\" type=\"checkbox\" />';\n                        html += '</span>';\n                        html += '</label>';\n                        html += '</li>';\n                    }\n                    if (!model.editable || model.editable(field.field)) {\n                        html += '<li class=\"k-item k-listgroup-item\">';\n                        if (field.field === 'timezone') {\n                            html += '<label class=\"k-label k-listgroup-form-row\" data-bind=\"css: { k-state-disabled: isAllDay }\">';\n                        } else {\n                            html += '<label class=\"k-label k-listgroup-form-row\">';\n                        }\n                        html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (field.title || field.field || '') + '</span>';\n                        editableFields.push(field);\n                        html += '<div class=\"k-listgroup-form-field-wrapper\" ' + kendo.attr('container-for') + '=\"' + field.field + '\"></div>';\n                        html += '</label></li>';\n                    } else {\n                        var tmpl = '#:';\n                        html += '<li class=\"k-item k-listgroup-item\">';\n                        html += '<label class=\"k-label k-no-click k-listgroup-form-row\">';\n                        html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (field.title || field.field || '') + '</span>';\n                        if (field.field) {\n                            field = kendo.expr(field.field, paramName);\n                            tmpl += field + '==null?\\'\\':' + field;\n                        } else {\n                            tmpl += '\\'\\'';\n                        }\n                        tmpl += '#';\n                        tmpl = kendo.template(tmpl, settings);\n                        html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                        html += '</label></li>';\n                    }\n                    if (field.field === 'recurrenceRule') {\n                        html += '</ul><ul class=\"k-listgroup k-listgroup-flush\">';\n                    }\n                    if (field.field === 'endTimezone') {\n                        html += '</ul></div>';\n                    }\n                }\n                html += '</ul>';\n                return html;\n            },\n            _buildEditTemplate: function (model, fields, editableFields, isMobile) {\n                var settings = extend({}, kendo.Template, this.options.templateSettings);\n                var template = this.options.editable.template;\n                var html = '';\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = kendo.unescape(template);\n                    }\n                    html += kendo.template(template, settings)(model);\n                } else if (isMobile) {\n                    html += '<div data-role=\"content\">' + this._buildMobileEditTemplate(model, fields, editableFields) + '</div>';\n                } else {\n                    html += this._buildDesktopEditTemplate(model, fields, editableFields);\n                }\n                return html;\n            },\n            _createEndTimezoneButton: function () {\n                return '</ul></div>';\n            },\n            _revertTimezones: function (model) {\n                model.set('startTimezone', this._startTimezone);\n                model.set('endTimezone', this._endTimezone);\n                delete this._startTimezone;\n                delete this._endTimezone;\n            }\n        });\n        var MobileEditor = Editor.extend({\n            init: function () {\n                Editor.fn.init.apply(this, arguments);\n                this.pane = kendo.Pane.wrap(this.element, {\n                    viewEngine: {\n                        viewOptions: {\n                            renderOnInit: true,\n                            wrap: false,\n                            wrapInSections: true,\n                            detachOnHide: false,\n                            detachOnDestroy: false\n                        }\n                    }\n                });\n                this.pane.element.parent().css('height', this.options.height);\n                this.view = this.pane.view();\n            },\n            options: {\n                animations: {\n                    left: 'slide',\n                    right: 'slide:right'\n                }\n            },\n            destroy: function () {\n                this.close();\n                this.unbind();\n                this.pane.destroy();\n            },\n            _initTimezoneEditor: function (model) {\n                var that = this;\n                var pane = that.pane;\n                var messages = that.options.messages;\n                var timezoneView = that.timezoneView;\n                var container = timezoneView ? timezoneView.content.find('.k-scheduler-timezones') : that.container.find('.k-scheduler-timezones');\n                var kSwitch = container.find('input.k-timezone-toggle').data('kendoSwitch');\n                var endTimezoneRow = container.find('li.k-item:not(.k-zonepicker)').last();\n                var startTimezoneChange = function (e) {\n                    if (e.field === 'startTimezone') {\n                        var value = model.startTimezone;\n                        kSwitch.enable(value);\n                        if (!value) {\n                            endTimezoneRow.hide();\n                            model.set('endTimezone', '');\n                            kSwitch.value(false);\n                        }\n                    }\n                };\n                that._startTimezone = model.startTimezone || '';\n                that._endTimezone = model.endTimezone || '';\n                if (!timezoneView) {\n                    var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\">' + '<div data-role=\"header\" class=\"k-header\">' + '<a href=\"\\\\#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + messages.cancel + '\"' + 'aria-label=\"' + messages.cancel + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' + messages.editor.timezoneTitle + '<a href=\"\\\\#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + messages.save + '\" ' + 'aria-label=\"' + messages.save + '\"><span class=\"k-icon k-i-check\"></span></a>' + '</div><div data-role=\"content\"></div>';\n                    this.timezoneView = timezoneView = pane.append(html);\n                    timezoneView.contentElement.append(container.show());\n                    timezoneView.element.on(CLICK + NS, '.k-scheduler-cancel, .k-scheduler-update', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        if ($(this).hasClass('k-scheduler-cancel')) {\n                            that._revertTimezones(model);\n                        }\n                        var editView = that._editPane;\n                        var text = timezoneButtonText(model, messages.editor.noTimezone);\n                        editView.content.find('.k-timezone-label').text(text);\n                        pane.navigate(editView, that.options.animations.right);\n                    });\n                    kSwitch.bind(CHANGE, function (ev) {\n                        endTimezoneRow.toggle(ev.checked);\n                        model.set('endTimezone', '');\n                    });\n                    model.bind(CHANGE, startTimezoneChange);\n                }\n                kSwitch.value(!!model.endTimezone);\n                kSwitch.enable(!!model.startTimezone);\n                if (model.endTimezone) {\n                    endTimezoneRow.show();\n                } else {\n                    endTimezoneRow.hide();\n                }\n                pane.navigate(timezoneView, that.options.animations.left);\n            },\n            showDialog: function (options) {\n                var actions = options.buttons.map(function (button) {\n                    return {\n                        text: button.text,\n                        action: button.click\n                    };\n                });\n                actions.push({\n                    text: this.options.messages.cancel,\n                    primary: true\n                });\n                $('<div />').appendTo(document.body).kendoDialog({\n                    close: function () {\n                        this.destroy();\n                    },\n                    modal: { preventScroll: true },\n                    closable: false,\n                    title: false,\n                    content: options.text,\n                    actions: actions\n                });\n            },\n            editEvent: function (model) {\n                var pane = this.pane;\n                var html = '';\n                var messages = this.options.messages;\n                var updateText = messages.save;\n                var removeText = messages.destroy;\n                var cancelText = messages.cancel;\n                var titleText = messages.editor.editorTitle;\n                var resetSeries = messages.resetSeries;\n                html += '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\"' + kendo.attr('uid') + '=\"' + model.uid + '\">' + '<div data-role=\"header\" class=\"k-header\">' + '<a href=\"\\\\#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + cancelText + '\"' + 'aria-label=\"' + cancelText + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' + titleText + '<a href=\"\\\\#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + updateText + '\" ' + 'aria-label=\"' + updateText + '\"><span class=\"k-icon k-i-check\"></span></a>' + '</div>';\n                var fields = this.fields(editors.mobile, model);\n                var that = this;\n                var editableFields = [];\n                html += this._buildEditTemplate(model, fields, editableFields, true);\n                html += '</div>';\n                var view = pane.append(html);\n                if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                    var resetSeriesBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-resetSeries k-link k-label\" aria-label=\"' + resetSeries + '\">' + resetSeries + '</span></li></ul>';\n                    view.contentElement.append(resetSeriesBtn);\n                }\n                if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false) {\n                    var deleteBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-delete k-link k-label\" aria-label=\"' + removeText + '\">' + removeText + '</span></li></ul>';\n                    view.contentElement.append(deleteBtn);\n                }\n                this._editPane = view;\n                var container = this.container = view.element;\n                this.editable = container.kendoEditable({\n                    fields: editableFields,\n                    model: model,\n                    clearContainer: false,\n                    target: that.options.target,\n                    validateOnBlur: true\n                }).data('kendoEditable');\n                if (!this.trigger('edit', {\n                        container: container,\n                        model: model\n                    })) {\n                    container.on(CLICK + NS, 'a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        var button = $(this);\n                        if (!button.hasClass('k-scheduler-edit')) {\n                            var name = 'cancel';\n                            if (button.hasClass('k-scheduler-update')) {\n                                name = 'save';\n                            } else if (button.hasClass('k-scheduler-delete')) {\n                                name = 'remove';\n                            } else if (button.hasClass('k-scheduler-resetSeries')) {\n                                name = RESET;\n                            }\n                            that.trigger(name, {\n                                container: container,\n                                model: model\n                            });\n                        } else {\n                            pane.navigate(this._editPane, that.options.animations.right);\n                        }\n                    });\n                    pane.navigate(view, that.options.animations.left);\n                    model.bind(CHANGE, that.toggleDateValidationHandler);\n                } else {\n                    this.trigger('cancel', {\n                        container: container,\n                        model: model\n                    });\n                }\n                return this.editable;\n            },\n            _views: function () {\n                return this.pane.element.find(kendo.roleSelector('view')).not(this.view.element);\n            },\n            close: function () {\n                if (this.container) {\n                    this.pane.navigate('', this.options.animations.right);\n                    var views = this._views();\n                    var view;\n                    for (var idx = 0, length = views.length; idx < length; idx++) {\n                        view = views.eq(idx).data('kendoView');\n                        if (view) {\n                            view.purge();\n                        }\n                    }\n                    views.remove();\n                    this.container = null;\n                    if (this.editable) {\n                        this.editable.options.model.unbind(CHANGE, this.toggleDateValidationHandler);\n                        this.editable.destroy();\n                        this.editable = null;\n                    }\n                    this.timezoneView = null;\n                }\n            }\n        });\n        var PopupEditor = Editor.extend({\n            destroy: function () {\n                this.close();\n                this.unbind();\n            },\n            editEvent: function (model) {\n                var that = this;\n                var editable = that.options.editable;\n                var html = '<div ' + kendo.attr('uid') + '=\"' + model.uid + '\" class=\"k-popup-edit-form k-scheduler-edit-form\"><div class=\"k-edit-form-container\">';\n                var messages = that.options.messages;\n                var updateText = messages.save;\n                var cancelText = messages.cancel;\n                var deleteText = messages.destroy;\n                var resetSeries = messages.resetSeries;\n                var fields = this.fields(editors.desktop, model);\n                var editableFields = [];\n                html += this._buildEditTemplate(model, fields, editableFields, false);\n                var attr;\n                var options = isPlainObject(editable) ? editable.window : {};\n                html += '<div class=\"k-edit-buttons\">';\n                html += this.createButton({\n                    name: 'update',\n                    text: updateText,\n                    attr: attr\n                }) + this.createButton({\n                    name: 'canceledit',\n                    text: cancelText,\n                    attr: attr\n                });\n                if (!model.isNew() && editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                    html += this.createButton({\n                        name: 'resetSeries',\n                        text: resetSeries,\n                        attr: attr\n                    });\n                }\n                if ((!model.isNew() || model.isRecurring()) && editable.destroy !== false) {\n                    html += this.createButton({\n                        name: 'delete',\n                        text: deleteText,\n                        attr: attr\n                    });\n                }\n                html += '</div></div></div>';\n                var container = this.container = $(html).appendTo(that.element).eq(0).kendoWindow(extend({\n                    minWidth: 660,\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: messages.editor.editorTitle,\n                    visible: false,\n                    close: function (e) {\n                        if (e.userTriggered) {\n                            if (that.trigger(CANCEL, {\n                                    container: container,\n                                    model: model\n                                })) {\n                                e.preventDefault();\n                            }\n                        }\n                    }\n                }, options));\n                that.editable = container.kendoEditable({\n                    fields: editableFields,\n                    model: model,\n                    clearContainer: false,\n                    validateOnBlur: true,\n                    target: that.options.target\n                }).data('kendoEditable');\n                if (!that.trigger(EDIT, {\n                        container: container,\n                        model: model\n                    })) {\n                    container.data('kendoWindow').center().open();\n                    container.on(CLICK + NS, 'button.k-scheduler-cancel', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger(CANCEL, {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    container.on(CLICK + NS, 'button.k-scheduler-update', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger('save', {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    container.on(CLICK + NS, 'button.k-scheduler-delete', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger(REMOVE, {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    container.on(CLICK + NS, 'button.k-scheduler-resetSeries', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger(RESET, {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    kendo.cycleForm(container);\n                    model.bind(CHANGE, that.toggleDateValidationHandler);\n                } else {\n                    that.trigger(CANCEL, {\n                        container: container,\n                        model: model\n                    });\n                }\n                return that.editable;\n            },\n            close: function () {\n                var that = this;\n                var destroy = function () {\n                    if (that.editable) {\n                        that.editable.options.model.unbind(CHANGE, that.toggleDateValidationHandler);\n                        that.editable.destroy();\n                        that.editable = null;\n                        that.container = null;\n                    }\n                    if (that.popup) {\n                        that.popup.destroy();\n                        that.popup = null;\n                    }\n                };\n                if (that.editable) {\n                    if (that._timezonePopup && that._timezonePopup.data('kendoWindow')) {\n                        that._timezonePopup.data('kendoWindow').destroy();\n                        that._timezonePopup = null;\n                    }\n                    if (that.container.is(':visible')) {\n                        that.container.data('kendoWindow').bind('deactivate', destroy).close();\n                    } else {\n                        destroy();\n                    }\n                } else {\n                    destroy();\n                }\n            },\n            _createEndTimezoneButton: function () {\n                var messages = this.options.messages;\n                var html = '';\n                html += '<div class=\"k-edit-buttons\">';\n                html += this.createButton({\n                    name: 'savetimezone',\n                    text: messages.save\n                }) + this.createButton({\n                    name: 'canceltimezone',\n                    text: messages.cancel\n                });\n                html += '</div></div></div>';\n                return html;\n            },\n            showDialog: function (options) {\n                var html = kendo.format('<div class=\\'k-popup-edit-form\\'><div class=\\'k-edit-form-container\\'><p class=\\'k-popup-message\\'>{0}</p>', options.text);\n                html += '<div class=\"k-edit-buttons\">';\n                for (var buttonIndex = 0; buttonIndex < options.buttons.length; buttonIndex++) {\n                    html += this.createButton(options.buttons[buttonIndex]);\n                }\n                html += '</div></div></div>';\n                var wrapper = this.element;\n                if (this.popup) {\n                    this.popup.destroy();\n                }\n                var popup = this.popup = $(html).appendTo(wrapper).eq(0).on(CLICK, '.k-button', function (e) {\n                    e.preventDefault();\n                    popup.close();\n                    var buttonIndex = $(e.currentTarget).index();\n                    options.buttons[buttonIndex].click();\n                }).kendoWindow({\n                    modal: true,\n                    resizable: false,\n                    draggable: false,\n                    title: options.title,\n                    visible: false,\n                    close: function () {\n                        this.destroy();\n                        wrapper.trigger('focus');\n                    }\n                }).getKendoWindow();\n                popup.center().open();\n            },\n            _initTimezoneEditor: function (model, activator) {\n                var that = this;\n                var container = that.container.find('.k-scheduler-timezones');\n                var checkbox = container.find('input.k-timezone-toggle');\n                var endTimezoneRow = container.find('.k-edit-label').last().add(container.find('.k-edit-field').last());\n                var saveButton = container.find('.k-scheduler-savetimezone');\n                var cancelButton = container.find('.k-scheduler-canceltimezone');\n                var timezonePopup = that._timezonePopup;\n                var startTimezoneChange = function (e) {\n                    if (e.field === 'startTimezone') {\n                        var value = model.startTimezone;\n                        checkbox.prop(DISABLED, !value);\n                        if (!value) {\n                            endTimezoneRow.hide();\n                            model.set('endTimezone', '');\n                            checkbox.prop('checked', false);\n                        }\n                    }\n                };\n                var wnd;\n                that._startTimezone = model.startTimezone;\n                that._endTimezone = model.endTimezone;\n                if (!timezonePopup) {\n                    that._timezonePopup = timezonePopup = container.kendoWindow({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: that.options.messages.editor.timezoneEditorTitle,\n                        visible: false,\n                        close: function (e) {\n                            model.unbind(CHANGE, startTimezoneChange);\n                            if (e.userTriggered) {\n                                that._revertTimezones(model);\n                            }\n                            if (activator) {\n                                activator.focus();\n                            }\n                        }\n                    });\n                    checkbox.on('click', function () {\n                        endTimezoneRow.toggle(checkbox.prop('checked'));\n                        model.set('endTimezone', '');\n                    });\n                    saveButton.on('click', function (e) {\n                        e.preventDefault();\n                        wnd.close();\n                    });\n                    cancelButton.on('click', function (e) {\n                        e.preventDefault();\n                        that._revertTimezones(model);\n                        wnd.close();\n                    });\n                    model.bind(CHANGE, startTimezoneChange);\n                }\n                checkbox.prop('checked', model.endTimezone).prop(DISABLED, !model.startTimezone);\n                if (model.endTimezone) {\n                    endTimezoneRow.show();\n                } else {\n                    endTimezoneRow.hide();\n                }\n                wnd = timezonePopup.data('kendoWindow');\n                wnd.center().open();\n            }\n        });\n        var Scheduler = DataBoundWidget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                if (!that.options.views || !that.options.views.length) {\n                    that.options.views = [\n                        'day',\n                        'week'\n                    ];\n                }\n                that.resources = [];\n                that._initModel();\n                that._wrapper();\n                that._views();\n                that._toolbar();\n                that._dataSource();\n                that._resources();\n                that._resizeHandler = function () {\n                    that.resize();\n                };\n                that.wrapper.on(MOUSEDOWN + NS + ' selectstart' + NS, function (e) {\n                    if (!$(e.target).is(':kendoFocusable')) {\n                        e.preventDefault();\n                    }\n                });\n                if (that.options.editable && that.options.editable.resize !== false) {\n                    that._resizable();\n                }\n                that._movable();\n                that._bindResize();\n                if (that.options.messages && that.options.messages.recurrence) {\n                    recurrence.options = that.options.messages.recurrence;\n                }\n                that._selectable();\n                that._touchHandlers();\n                that._ariaId = kendo.guid();\n                that._createEditor();\n            },\n            _bindResize: function () {\n                $(window).on('resize' + NS, this._resizeHandler);\n            },\n            _unbindResize: function () {\n                $(window).off('resize' + NS, this._resizeHandler);\n            },\n            dataItems: function () {\n                var that = this;\n                var items = that.items();\n                var events = that._data;\n                var eventsUids = $.map(items, function (item) {\n                    return $(item).attr('data-uid');\n                });\n                var i;\n                var key;\n                var dict = {};\n                var eventsUidsLength = eventsUids.length;\n                for (i = 0; i < eventsUidsLength; i++) {\n                    dict[eventsUids[i]] = null;\n                }\n                var eventsCount = events.length;\n                for (i = 0; i < eventsCount; i++) {\n                    var event = events[i];\n                    if (dict[event.uid] !== undefined) {\n                        dict[event.uid] = event;\n                    }\n                }\n                var sortedData = [];\n                for (key in dict) {\n                    sortedData.push(dict[key]);\n                }\n                return sortedData;\n            },\n            _isMobile: function () {\n                var options = this.options;\n                return options.mobile === true && kendo.support.mobileOS || options.mobile === 'phone' || options.mobile === 'tablet';\n            },\n            _isTouch: function (event) {\n                return /touch/.test(event.type) || event.originalEvent && /touch/.test(event.originalEvent.pointerType);\n            },\n            _isInverseColor: function (eventElement) {\n                return eventElement.hasClass(INVERSECOLORCLASS);\n            },\n            _groupsByResource: function (resources, groupIndex, groupsArray, parentFieldValue, parentField) {\n                if (!groupsArray) {\n                    groupsArray = [];\n                }\n                var resource = resources[0];\n                if (resource) {\n                    var group;\n                    var data = resource.dataSource.view();\n                    var prevIndex = 0;\n                    for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                        var fieldValue = kendo.getter(resource.dataValueField)(data[dataIndex]);\n                        var currentGroupIndex = groupIndex + prevIndex + dataIndex;\n                        group = this._groupsByResource(resources.slice(1), currentGroupIndex, groupsArray, fieldValue, resource.field);\n                        group[resource.field] = fieldValue;\n                        prevIndex = group.groupIndex;\n                        if (parentField && parentFieldValue) {\n                            group[parentField] = parentFieldValue;\n                        }\n                        if (resources.length === 1) {\n                            group.groupIndex = groupIndex + dataIndex;\n                            groupsArray.push(group);\n                        }\n                    }\n                    return group;\n                } else {\n                    return {};\n                }\n            },\n            data: function () {\n                return this._data;\n            },\n            select: function (options) {\n                var that = this;\n                var view = that.view();\n                var selection = that._selection;\n                var groups = view.groups;\n                var selectedGroups;\n                if (options === undefined) {\n                    var selectedEvents;\n                    var slots = view._selectedSlots;\n                    if (!selection) {\n                        return [];\n                    }\n                    if (selection && selection.events) {\n                        selectedEvents = that._selectedEvents();\n                    }\n                    return {\n                        start: selection.start,\n                        end: selection.end,\n                        events: selectedEvents,\n                        slots: slots,\n                        resources: view._resourceBySlot(selection)\n                    };\n                }\n                if (!options) {\n                    that._selection = null;\n                    that._old = null;\n                    view.clearSelection();\n                    return;\n                }\n                if (Array.isArray(options)) {\n                    options = { events: options.splice(0) };\n                }\n                if (options.resources) {\n                    var fieldName;\n                    var filters = [];\n                    var groupsByResource = [];\n                    if (view.groupedResources) {\n                        that._groupsByResource(view.groupedResources, 0, groupsByResource);\n                    }\n                    for (fieldName in options.resources) {\n                        filters.push({\n                            field: fieldName,\n                            operator: 'eq',\n                            value: options.resources[fieldName]\n                        });\n                    }\n                    selectedGroups = new kendo.data.Query(groupsByResource).filter(filters).toArray();\n                }\n                if (options.events && options.events.length) {\n                    that._selectEvents(options.events, selectedGroups);\n                    that._select();\n                    return;\n                }\n                if (groups && (options.start && options.end)) {\n                    var rangeStart = getDate(view._startDate);\n                    var rangeEnd = kendo.date.addDays(getDate(view._endDate), 1);\n                    var group;\n                    var ranges;\n                    if (options.start < rangeEnd && rangeStart <= options.end) {\n                        if (selectedGroups && selectedGroups.length) {\n                            group = groups[selectedGroups[0].groupIndex];\n                        } else {\n                            group = groups[0];\n                        }\n                        if (!group.timeSlotCollectionCount()) {\n                            options.isAllDay = true;\n                        }\n                        ranges = group.ranges(options.start, options.end, options.isAllDay, false);\n                        if (ranges.length) {\n                            that._selection = {\n                                start: kendo.timezone.toLocalDate(ranges[0].start.start),\n                                end: kendo.timezone.toLocalDate(ranges[ranges.length - 1].end.end),\n                                groupIndex: ranges[0].start.groupIndex,\n                                index: ranges[0].start.index,\n                                isAllDay: ranges[0].start.isDaySlot,\n                                events: []\n                            };\n                            that._select();\n                        }\n                    }\n                }\n            },\n            _selectEvents: function (eventsUids, selectedGroups) {\n                var that = this;\n                var idx;\n                var view = that.view();\n                var groups = view.groups;\n                var eventsLength = eventsUids.length;\n                var isGrouped = selectedGroups && selectedGroups.length;\n                var ctrlKey = that._ctrlKey;\n                that._ctrlKey = true;\n                for (idx = 0; idx < eventsLength; idx++) {\n                    if (groups && isGrouped) {\n                        var currentGroup = groups[selectedGroups[0].groupIndex];\n                        var events = [];\n                        var timeSlotCollectionCount = currentGroup.timeSlotCollectionCount();\n                        var daySlotCollectionCount = currentGroup.daySlotCollectionCount();\n                        for (var collIdx = 0; collIdx < timeSlotCollectionCount; collIdx++) {\n                            events = events.concat(currentGroup.getTimeSlotCollection(collIdx).events());\n                        }\n                        for (var dayCollIdx = 0; dayCollIdx < daySlotCollectionCount; dayCollIdx++) {\n                            events = events.concat(currentGroup.getDaySlotCollection(dayCollIdx).events());\n                        }\n                        events = new kendo.data.Query(events).filter({\n                            field: 'element[0].getAttribute(\\'data-uid\\')',\n                            operator: 'eq',\n                            value: eventsUids[idx]\n                        }).toArray();\n                        if (events[0]) {\n                            that._createSelection(events[0].element);\n                        }\n                    } else {\n                        var element = view.element.find(kendo.format('.k-event[data-uid={0}], .k-task[data-uid={0}]', eventsUids[idx]));\n                        if (element.length) {\n                            that._createSelection(element[0]);\n                        }\n                    }\n                }\n                that._ctrlKey = ctrlKey;\n            },\n            _touchHandlers: function () {\n                var that = this;\n                var startX;\n                var startY;\n                var endX;\n                var endY;\n                var timeStamp;\n                var wrapper = that.wrapper;\n                var touchMoveHandler = $.proxy(that._touchMove, that);\n                wrapper.on(TOUCHSTART + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event', function (e) {\n                    var content = that.wrapper.find('.k-scheduler-content');\n                    if (!that._isTouch(e)) {\n                        return;\n                    }\n                    content.stop(true, false);\n                    that._touchPosX = startX = that._tapPosition(e, 'X');\n                    that._touchPosY = startY = that._tapPosition(e, 'Y');\n                    that._userTouched = true;\n                    that.view()._scrolling = false;\n                    timeStamp = Date.now();\n                    wrapper.on(TOUCHMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event', touchMoveHandler);\n                });\n                wrapper.on(TOUCHEND + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event', function (e) {\n                    if (!that._isTouch(e)) {\n                        return;\n                    }\n                    var delta = Date.now() - timeStamp;\n                    var content = that.wrapper.find('.k-scheduler-content');\n                    var amplitude = -that._amplitude * (3000 / delta);\n                    endX = that._tapPosition(e, 'X');\n                    endY = that._tapPosition(e, 'Y');\n                    if (that._dragging) {\n                        return;\n                    }\n                    if (that.options.selectable && (Math.abs(endX - startX) <= 10 || Math.abs(endY - startY) <= 10)) {\n                        that._mouseDownSelection(e);\n                    }\n                    if (!kendo.support.kineticScrollNeeded && delta < 200 && Math.abs(endX - startX) > 10) {\n                        content.animate({ scrollTop: content[0].scrollTop + amplitude });\n                    }\n                    wrapper.off(TOUCHMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', touchMoveHandler);\n                });\n            },\n            _selectable: function () {\n                var that = this;\n                var wrapper = that.wrapper;\n                if (!that.options.selectable) {\n                    return;\n                }\n                that._tabindex();\n                wrapper.on(MOUSEDOWN + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event, .k-scheduler-body td .k-link', function (e) {\n                    if (that._isTouch(e)) {\n                        return;\n                    }\n                    that._mouseDownSelection(e);\n                });\n                var mouseMoveHandler = $.proxy(that._mouseMove, that);\n                wrapper.on(MOUSEDOWN + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', function (e) {\n                    var which = e.which;\n                    var button = e.button;\n                    var isRight = which && which === 3 || button && button == 2;\n                    if (that._isTouch(e)) {\n                        return;\n                    }\n                    if (!isRight) {\n                        wrapper.on(MOUSEMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', mouseMoveHandler);\n                    }\n                });\n                wrapper.on('mouseup' + NS + ' mousecancel' + NS, function () {\n                    wrapper.off(MOUSEMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', mouseMoveHandler);\n                });\n                wrapper.on('focus' + NS, function () {\n                    if (!that._selection && !that._userTouched) {\n                        that._selectFirstSlot();\n                    }\n                    that._select();\n                });\n                wrapper.on('focusout' + NS, function (e) {\n                    that._ctrlKey = that._shiftKey = false;\n                    if (!$(e.relatedTarget).closest(VIEWSSELECTOR).length) {\n                        that.toolbar.find(VIEWSSELECTOR).removeClass(EXPANDEDSTATE);\n                    }\n                });\n                wrapper.on('keydown' + NS, proxy(that._keydown, that));\n                wrapper.on('keyup' + NS, function (e) {\n                    that._ctrlKey = e.ctrlKey;\n                    that._shiftKey = e.shiftKey;\n                });\n            },\n            _mouseDownSelection: function (e) {\n                var which = e.which;\n                var button = e.button;\n                var isRight = which && which === 3 || button && button == 2;\n                if (!isRight) {\n                    if (e.ctrlKey) {\n                        this._ctrlKey = e.ctrlKey;\n                    }\n                    if (e.shiftKey) {\n                        this._shiftKey = e.shiftKey;\n                    }\n                    this._createSelection(e.currentTarget);\n                }\n                if (kendo._activeElement() !== this.wrapper.get(0)) {\n                    kendo.focusElement(this.wrapper);\n                } else {\n                    this._select();\n                }\n                if (this.toolbar) {\n                    this.toolbar.find('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                }\n            },\n            _selectFirstSlot: function () {\n                var firstSlot = this.wrapper.find('.k-scheduler-content').find('td').first() || this.wrapper.find('.k-scheduler-body').find('.k-link').first();\n                this._createSelection(firstSlot);\n            },\n            _select: function () {\n                var that = this;\n                var view = that.view();\n                var wrapper = that.wrapper;\n                var current = view.current();\n                var selection = that._selection;\n                var oldSelection = that._old ? that._old.selection : null;\n                var oldEventsLength = that._old ? that._old.eventsLength : null;\n                if (!selection) {\n                    return;\n                }\n                if (current) {\n                    current.removeAttribute('id');\n                    current.removeAttribute('aria-label');\n                    wrapper.removeAttr('aria-activedescendant');\n                }\n                view.select(selection);\n                current = view.current();\n                if (current && (oldSelection !== current || selection.events && oldEventsLength !== selection.events.length)) {\n                    var currentUid = $(current).data('uid');\n                    if (that._old && currentUid && currentUid === $(that._old.selection).data('uid') && (selection.events && that._old.eventsLength === selection.events.length)) {\n                        return;\n                    }\n                    var labelFormat;\n                    var data = selection;\n                    var events = that._selectedEvents();\n                    var slots = view._selectedSlots;\n                    if (events[0]) {\n                        data = events[0] || selection;\n                        labelFormat = kendo.format(that.options.messages.ariaEventLabel, data.title, data.start, data.start);\n                    } else {\n                        labelFormat = kendo.format(that.options.messages.ariaSlotLabel, data.start, data.end);\n                    }\n                    current.setAttribute('id', that._ariaId);\n                    current.setAttribute('aria-label', labelFormat);\n                    wrapper.attr('aria-activedescendant', that._ariaId);\n                    that._old = {\n                        selection: current,\n                        eventsLength: events.length\n                    };\n                    that.trigger(CHANGE, {\n                        start: selection.start,\n                        end: selection.end,\n                        events: events,\n                        slots: slots,\n                        resources: view._resourceBySlot(selection)\n                    });\n                }\n            },\n            _selectedEvents: function () {\n                var uids = this._selection.events;\n                var length = uids.length;\n                var idx = 0;\n                var event;\n                var events = [];\n                for (; idx < length; idx++) {\n                    event = this.occurrenceByUid(uids[idx]);\n                    if (event) {\n                        events.push(event);\n                    }\n                }\n                return events;\n            },\n            _tapPosition: function (event, coordinate) {\n                return /touch/.test(event.type) ? (event.originalEvent || event).changedTouches[0]['page' + coordinate] : event['page' + coordinate];\n            },\n            _touchMove: function (e) {\n                var that = this;\n                var content = that.wrapper.find('.k-scheduler-content');\n                var verticalScroll = content[0].scrollHeight > content[0].clientHeight;\n                var horizontalScroll = content[0].scrollWidth > content[0].clientWidth;\n                var endY = that._tapPosition(e, 'Y');\n                var endX = that._tapPosition(e, 'X');\n                var scrollTop = content[0].scrollTop - Math.round(endY - that._touchPosY);\n                var scrollLeft = content[0].scrollLeft - Math.round(endX - that._touchPosX);\n                var applyVerticalScroll = verticalScroll && Math.abs(endY - that._touchPosY) > 10;\n                var applyhorizontalScroll = horizontalScroll && Math.abs(endY - that._touchPosY) > 10;\n                if (that._dragging || kendo.support.kineticScrollNeeded || !that._isTouch(e)) {\n                    return;\n                }\n                if (applyVerticalScroll || applyhorizontalScroll) {\n                    that._amplitude = Math.round(endY - that._touchPosY);\n                    that._touchPosY = endY;\n                    that._touchPosX = endX;\n                    content.animate({\n                        scrollTop: scrollTop,\n                        scrollLeft: scrollLeft\n                    }, 0);\n                    that.view()._scrolling = true;\n                }\n            },\n            _mouseMove: function (e) {\n                var that = this;\n                clearTimeout(that._moveTimer);\n                if (that._isTouch(e)) {\n                    return;\n                }\n                that._moveTimer = setTimeout(function () {\n                    var view = that.view();\n                    var selection = that._selection;\n                    if (selection) {\n                        var slot = view.selectionByElement($(e.currentTarget));\n                        if (slot && selection.groupIndex === slot.groupIndex) {\n                            var startDate = slot.startDate();\n                            var endDate = slot.endDate();\n                            if (startDate >= selection.end) {\n                                selection.backward = false;\n                            } else if (endDate <= selection.start) {\n                                selection.backward = true;\n                            }\n                            if (selection.backward) {\n                                selection.start = startDate;\n                            } else {\n                                selection.end = endDate;\n                            }\n                            that._select();\n                        }\n                    }\n                }, 5);\n            },\n            _viewByIndex: function (index) {\n                var view, views = this.views;\n                for (view in views) {\n                    if (!index) {\n                        return view;\n                    }\n                    index--;\n                }\n            },\n            _keydown: function (e) {\n                var that = this, key = e.keyCode, view = that.view(), editable = view.options.editable, selection = that._selection, prevSelection = $.extend(selection), isModifier = key === 16 || key === 18 || key === 17 || key === 91 || key === 92, focusableToolBarSelector = '> .k-button,' + '.k-scheduler-navigation > .k-button,' + '.k-nav-current,' + '.k-views-dropdown:visible,' + '.k-scheduler-views > .k-button', focusableItems = that.toolbar.find(focusableToolBarSelector), viewsWrapper = that.toolbar.find(VIEWSSELECTOR), shouldNavigate = $(e.target).closest(VIEWSSELECTOR).length || that.toolbar.find('.k-scheduler-views .k-focus').length, focusedViewIndex = viewsWrapper.children().index(that.toolbar.find('.' + FOCUSEDSTATE)), isRtl = kendo.support.isRtl(that.element), isViewsDropDown = $(e.target).is('.k-views-dropdown'), direction = isRtl ? -1 : 1;\n                if (focusedViewIndex == -1) {\n                    focusedViewIndex = viewsWrapper.children().index(that.toolbar.find('.k-selected'));\n                }\n                that._ctrlKey = e.ctrlKey;\n                that._shiftKey = e.shiftKey;\n                if (key === keys.F10) {\n                    that._focusToolbar();\n                    e.preventDefault();\n                    return;\n                } else if (key === keys.TAB) {\n                    if (that.toolbar.find('.' + FOCUSEDSTATE).length) {\n                        var idx = focusableItems.index(that.toolbar.find('.' + FOCUSEDSTATE));\n                        var itemToFocus = e.shiftKey ? focusableItems[idx - 1] : focusableItems[idx + 1];\n                        that.toolbar.find('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                        if (itemToFocus) {\n                            $(itemToFocus).addClass(FOCUSEDSTATE).trigger('focus');\n                            that._focusedView = null;\n                            e.preventDefault();\n                            return;\n                        } else {\n                            that.element.trigger('focus');\n                            e.preventDefault();\n                            return;\n                        }\n                    }\n                } else if (key === keys.ENTER || key === keys.SPACEBAR) {\n                    if (shouldNavigate && that._focusedView && !that._focusedView.hasClass('k-selected')) {\n                        var focusedViewName = that._focusedView.data().name;\n                        if (!that.trigger('navigate', {\n                                view: focusedViewName,\n                                action: 'changeView',\n                                date: that.date()\n                            })) {\n                            that.view(focusedViewName);\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n                    if (that.toolbar.find('.' + FOCUSEDSTATE + ':visible').length) {\n                        that.toolbar.find('.' + FOCUSEDSTATE + ':visible').click();\n                        e.preventDefault();\n                        return;\n                    }\n                } else if (e.altKey && key === keys.DOWN && !isViewsDropDown) {\n                    if (that.toolbar.find('.' + FOCUSEDSTATE + ':visible').length) {\n                        that.toolbar.find('.' + FOCUSEDSTATE + ':visible').click();\n                        e.preventDefault();\n                        return;\n                    }\n                } else if (key === keys.RIGHT && shouldNavigate) {\n                    $(that.toolbar.find('.' + FOCUSEDSTATE)).removeClass(FOCUSEDSTATE);\n                    if (isRtl) {\n                        that._focusedView = focusedViewIndex - 1 === 0 ? $(viewsWrapper.children().last()) : $(viewsWrapper.children()[focusedViewIndex + 1 * direction]);\n                    } else {\n                        that._focusedView = focusedViewIndex + 1 === viewsWrapper.children().length ? $(viewsWrapper.children().first()) : $(viewsWrapper.children()[focusedViewIndex + 1 * direction]);\n                    }\n                    that._focusedView.trigger('focus').addClass(FOCUSEDSTATE);\n                    e.preventDefault();\n                    return;\n                } else if (key === keys.LEFT && shouldNavigate) {\n                    $(that.toolbar.find('.' + FOCUSEDSTATE)).removeClass(FOCUSEDSTATE);\n                    if (isRtl) {\n                        that._focusedView = focusedViewIndex + 1 === viewsWrapper.children().length ? $(viewsWrapper.children().first()) : $(viewsWrapper.children()[focusedViewIndex - 1 * direction]);\n                    } else {\n                        that._focusedView = focusedViewIndex - 1 < 0 ? $(viewsWrapper.children().last()) : $(viewsWrapper.children()[focusedViewIndex - 1 * direction]);\n                    }\n                    that._focusedView.trigger('focus').addClass(FOCUSEDSTATE);\n                    e.preventDefault();\n                    return;\n                } else if (e.altKey && key === keys.DOWN && that.toolbar.find('.k-nav-current').hasClass(FOCUSEDSTATE)) {\n                    that._showCalendar();\n                    e.preventDefault();\n                    return;\n                } else if (e.altKey && key === keys.DOWN && isViewsDropDown) {\n                    return;\n                } else if (key === keys.ESC && that.popup && that.popup.visible()) {\n                    that.popup.close();\n                    e.preventDefault();\n                    return;\n                }\n                if (isModifier) {\n                    return;\n                }\n                if (!selection) {\n                    that._selectFirstSlot();\n                    that._select();\n                    that.element.trigger('focus');\n                    return;\n                }\n                if (that._selectedViewName === 'year') {\n                    if (view.move(selection, key)) {\n                        that.toolbar.find('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                        that._select();\n                    }\n                    if (selection) {\n                        that._adjustSelectedDate();\n                    }\n                    e.preventDefault();\n                    return;\n                }\n                if (key === keys.TAB) {\n                    if (view.moveToEvent(selection, e.shiftKey)) {\n                        that._select();\n                        if (document.activeElement.getAttribute('id') !== that.element.attr('id')) {\n                            that.element.trigger('focus');\n                        }\n                        e.preventDefault();\n                    } else {\n                        that._focusToolbar();\n                        e.preventDefault();\n                        return;\n                    }\n                } else if (key === keys.ENTER || key === keys.SPACEBAR) {\n                    if (selection.events.length && editable) {\n                        if (editable.update !== false) {\n                            that.editEvent(selection.events[0]);\n                        }\n                    } else if (editable && editable.create !== false) {\n                        if (selection.isAllDay) {\n                            selection = $.extend({}, selection, { end: kendo.date.addDays(selection.end, -1) });\n                        }\n                        e.preventDefault();\n                        that.addEvent(extend({}, selection, view._resourceBySlot(selection)));\n                    }\n                } else if (key === keys.DELETE && editable !== false && editable.destroy !== false) {\n                    that.removeEvent(selection.events[0]);\n                } else if (key >= 49 && key <= 57) {\n                    var viewByIndex = that._viewByIndex(key - 49);\n                    if (viewByIndex && !that.trigger('navigate', {\n                            view: viewByIndex,\n                            action: 'changeView',\n                            date: that.date()\n                        })) {\n                        that.view(viewByIndex);\n                    }\n                } else if (view.move(selection, key, e.shiftKey)) {\n                    if (view.inRange(selection)) {\n                        that._select();\n                        $(document.activeElement).trigger('blur');\n                        that.toolbar.find('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                        that.wrapper.trigger('focus');\n                    } else {\n                        var action = that.date().getTime() > selection.start.getTime() ? 'previous' : 'next';\n                        if (!that.trigger('navigate', {\n                                view: that._selectedViewName,\n                                action: action,\n                                date: selection.start\n                            })) {\n                            that.date(selection.start);\n                        } else {\n                            selection.start = prevSelection.start;\n                            selection.end = prevSelection.end;\n                        }\n                    }\n                    e.preventDefault();\n                }\n                that._adjustSelectedDate();\n            },\n            _focusToolbar: function () {\n                this.toolbar.find('.k-button').first().trigger('focus').addClass(FOCUSEDSTATE);\n            },\n            _createSelection: function (item) {\n                var selection = this._selection;\n                var uid;\n                var slot;\n                item = $(item);\n                if (item.is('.k-event')) {\n                    uid = item.attr(kendo.attr('uid'));\n                    if (selection && selection.events.indexOf(uid) !== -1 && !this._ctrlKey) {\n                        return;\n                    }\n                }\n                if (!selection || !this._ctrlKey && !this._shiftKey) {\n                    selection = this._selection = {\n                        events: [],\n                        groupIndex: 0\n                    };\n                }\n                slot = this.view().selectionByElement(item);\n                if (slot) {\n                    selection.groupIndex = slot.groupIndex || 0;\n                }\n                if (uid) {\n                    slot = getOccurrenceByUid(this._data, uid);\n                }\n                if (slot && slot.uid) {\n                    uid = [slot.uid];\n                }\n                this._updateSelection(slot, uid);\n                this._adjustSelectedDate();\n            },\n            _updateSelection: function (dataItem, events, groupIndex) {\n                var selection = this._selection;\n                if (dataItem && selection) {\n                    var view = this.view();\n                    if (dataItem.uid) {\n                        dataItem = view._updateEventForSelection(dataItem);\n                    }\n                    if (this._shiftKey && selection.start && selection.end) {\n                        var backward = dataItem.end < selection.end;\n                        selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                        if (backward && view._timeSlotInterval) {\n                            kendo.date.setTime(selection.end, -view._timeSlotInterval());\n                        }\n                    } else {\n                        selection.start = dataItem.startDate ? dataItem.startDate() : dataItem.start;\n                        selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                    }\n                    if ('isDaySlot' in dataItem) {\n                        selection.isAllDay = dataItem.isDaySlot;\n                    } else {\n                        selection.isAllDay = dataItem.isAllDay;\n                    }\n                    if (groupIndex !== null && groupIndex !== undefined) {\n                        selection.groupIndex = groupIndex;\n                    }\n                    selection.index = dataItem.index;\n                    if (this._ctrlKey) {\n                        var indexOfEvent = events && events.length ? selection.events.indexOf(events[0]) : -1;\n                        if (indexOfEvent > -1) {\n                            selection.events.splice(indexOfEvent, 1);\n                        } else {\n                            selection.events = selection.events.concat(events || []);\n                        }\n                    } else {\n                        selection.events = events || [];\n                    }\n                }\n            },\n            options: {\n                name: 'Scheduler',\n                date: TODAY,\n                editable: true,\n                autoBind: true,\n                snap: true,\n                mobile: false,\n                timezone: '',\n                allDaySlot: true,\n                min: new Date(1900, 0, 1),\n                max: new Date(2099, 11, 31),\n                toolbar: null,\n                workWeekStart: 1,\n                workWeekEnd: 5,\n                workDays: null,\n                showWorkHours: false,\n                startTime: TODAY,\n                endTime: TODAY,\n                currentTimeMarker: {\n                    updateInterval: 10000,\n                    useLocalTimezone: true\n                },\n                footer: {},\n                messages: {\n                    today: 'Today',\n                    pdf: 'Export to PDF',\n                    save: 'Save',\n                    cancel: 'Cancel',\n                    destroy: 'Delete',\n                    resetSeries: 'Reset Series',\n                    deleteWindowTitle: 'Delete event',\n                    next: 'Next',\n                    previous: 'Previous',\n                    ariaSlotLabel: 'Selected from {0:t} to {1:t}',\n                    ariaEventLabel: '{0} on {1:D} at {2:t}',\n                    search: 'Search...',\n                    views: {\n                        day: 'Day',\n                        week: 'Week',\n                        workWeek: 'Work Week',\n                        agenda: 'Agenda',\n                        month: 'Month',\n                        timeline: 'Timeline',\n                        timelineWeek: 'Timeline Week',\n                        timelineWorkWeek: 'Timeline Work Week',\n                        timelineMonth: 'Timeline Month',\n                        year: 'Year'\n                    },\n                    recurrenceMessages: {\n                        deleteWindowTitle: 'Delete Recurring Item',\n                        resetSeriesWindowTitle: 'Reset Series',\n                        deleteWindowOccurrence: 'Delete current occurrence',\n                        deleteWindowSeries: 'Delete the series',\n                        editWindowTitle: 'Edit Recurring Item',\n                        editWindowOccurrence: 'Edit current occurrence',\n                        editWindowSeries: 'Edit the series'\n                    },\n                    editable: { confirmation: DELETECONFIRM },\n                    editor: {\n                        title: 'Title',\n                        start: 'Start',\n                        end: 'End',\n                        allDayEvent: 'All day event',\n                        description: 'Description',\n                        repeat: 'Repeat',\n                        timezone: 'Timezone',\n                        startTimezone: 'Start timezone',\n                        endTimezone: 'End timezone',\n                        separateTimezones: 'Use separate start and end time zones',\n                        timezoneEditorTitle: 'Timezones',\n                        timezoneEditorButton: 'Time zone',\n                        timezoneTitle: 'Time zones',\n                        noTimezone: 'No timezone',\n                        editorTitle: 'Event'\n                    }\n                },\n                height: null,\n                width: null,\n                resources: [],\n                group: {\n                    resources: [],\n                    orientation: 'horizontal'\n                },\n                views: [],\n                selectable: false\n            },\n            events: [\n                REMOVE,\n                EDIT,\n                CANCEL,\n                SAVE,\n                'add',\n                'dataBinding',\n                'dataBound',\n                'moveStart',\n                'move',\n                'moveEnd',\n                'resizeStart',\n                'resize',\n                'resizeEnd',\n                'navigate',\n                CHANGE\n            ],\n            destroy: function () {\n                var that = this, element;\n                Widget.fn.destroy.call(that);\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                    that.dataSource.unbind(PROGRESS, that._progressHandler);\n                    that.dataSource.unbind(ERROR, that._errorHandler);\n                }\n                if (that._resourceRefreshHandler) {\n                    for (var idx = 0; idx < that.resources.length; idx++) {\n                        var resourceDS = that.resources[idx].dataSource;\n                        resourceDS.unbind(CHANGE, that._resourceRefreshHandler);\n                        resourceDS.unbind(PROGRESS, that._resourceProgressHandler);\n                        resourceDS.unbind(ERROR, that._resourceErrorHandler);\n                    }\n                }\n                if (that.calendar) {\n                    that.calendar.destroy();\n                    that.popup.destroy();\n                }\n                if (that.view()) {\n                    that.view().destroy();\n                }\n                if (that._editor) {\n                    that._editor.destroy();\n                }\n                if (this._moveDraggable) {\n                    this._moveDraggable.destroy();\n                }\n                if (this._resizeDraggable) {\n                    this._resizeDraggable.destroy();\n                }\n                element = that.element.add(that.wrapper).add(that.toolbar).add(that.popup);\n                element.off(NS);\n                clearTimeout(that._moveTimer);\n                that._model = null;\n                that.toolbar = null;\n                that.element = null;\n                $(window).off('resize' + NS, that._resizeHandler);\n                kendo.destroy(that.wrapper);\n            },\n            setDataSource: function (dataSource) {\n                this.options.dataSource = dataSource;\n                this._dataSource();\n                if (this.options.autoBind && dataSource.fetch) {\n                    dataSource.fetch();\n                } else if (isArray(dataSource)) {\n                    this.view(this._selectedView);\n                }\n            },\n            items: function () {\n                var content = this.wrapper.find('.k-scheduler-content');\n                var view = this.view();\n                if (view && view.options.name === 'agenda') {\n                    return content.find('.k-task');\n                } else {\n                    return content.find('.k-event').add(this.wrapper.find('.k-scheduler-header-wrap').find('.k-scheduler-header-all-day').siblings());\n                }\n            },\n            _movable: function () {\n                var startSlot;\n                var endSlot;\n                var startResources;\n                var startTime;\n                var endTime;\n                var event;\n                var clonedEvent;\n                var that = this;\n                var originSlot;\n                var originStartTime;\n                var originalEvent;\n                var distance = 0;\n                var clonedEvents = [];\n                var cachedEvents = [];\n                var isMobile = that._isMobile();\n                var movable = that.options.editable && that.options.editable.move !== false;\n                var resizable = that.options.editable && that.options.editable.resize !== false;\n                if (movable || resizable && isMobile) {\n                    that._dragging = false;\n                    if (isMobile && kendo.support.mobileOS.android) {\n                        distance = 5;\n                    }\n                    that._moveDraggable = new kendo.ui.Draggable(that.element, {\n                        distance: distance,\n                        filter: '.k-event',\n                        ignore: '.k-resize-handle',\n                        holdToDrag: isMobile,\n                        autoScroll: true\n                    });\n                    if (movable) {\n                        that._moveDraggable.bind('dragstart', function (e) {\n                            var view = that.view();\n                            var eventElement = e.currentTarget;\n                            var isTouch = that._isTouch(e);\n                            that._dragging = true;\n                            if (!view.options.editable || view.options.editable.move === false) {\n                                that._dragging = false;\n                                e.preventDefault();\n                                return;\n                            }\n                            if (isTouch && !eventElement.hasClass('k-event-active')) {\n                                that._dragging = false;\n                                that.element.find('.k-event-active').removeClass('k-event-active');\n                                e.preventDefault();\n                                return;\n                            }\n                            event = that.occurrenceByUid(eventElement.attr(kendo.attr('uid')));\n                            clonedEvent = event.clone();\n                            originalEvent = event.clone();\n                            clonedEvent.update(view._eventOptionsForMove(clonedEvent));\n                            clonedEvent.inverseColor = that._isInverseColor(eventElement);\n                            clonedEvents = [];\n                            if (that._selection) {\n                                var events = that._selection.events;\n                                for (var i = 0; i < events.length; i++) {\n                                    var evtClone = that.occurrenceByUid(events[i]).clone();\n                                    var evtCloneElement = this.element.find('div.k-event[data-uid=\"' + evtClone.uid + '\"]').eq(0);\n                                    evtClone.update(view._eventOptionsForMove(evtClone));\n                                    if (evtCloneElement.length) {\n                                        evtClone.inverseColor = that._isInverseColor(evtCloneElement);\n                                    }\n                                    clonedEvents.push(evtClone);\n                                }\n                            } else {\n                                clonedEvents.push(clonedEvent);\n                            }\n                            startSlot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                            startResources = view._resourceBySlot(startSlot);\n                            originStartTime = startTime = startSlot.startOffset(e.x.startLocation, e.y.startLocation, that.options.snap);\n                            endSlot = startSlot;\n                            originSlot = startSlot;\n                            if (!startSlot || that.trigger('moveStart', { event: event })) {\n                                e.preventDefault();\n                            }\n                        }).bind('drag', function (e) {\n                            var view = that.view();\n                            var slot = view._slotByPosition(e.x.location, e.y.location);\n                            var distance;\n                            var range;\n                            var i;\n                            if (!slot) {\n                                return;\n                            }\n                            endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            if (slot.isDaySlot !== startSlot.isDaySlot) {\n                                if (slot.isDaySlot !== originSlot.isDaySlot) {\n                                    var slotIndex = $(startSlot.element).index();\n                                    var targetSlotElement = $(slot.element).parent().children().eq(slotIndex);\n                                    startSlot = view._slotByPosition(targetSlotElement.offset().left, targetSlotElement.offset().top);\n                                    startTime = startSlot.startOffset(e.x.location, e.y.location, true);\n                                    cachedEvents = clonedEvents.map(function (event) {\n                                        return event.clone();\n                                    });\n                                    for (i = 0; i < clonedEvents.length; i++) {\n                                        if (clonedEvents[i].isAllDay != slot.isDaySlot) {\n                                            clonedEvents[i].isAllDay = slot.isDaySlot;\n                                            clonedEvents[i].end = kendo.date.getDate(clonedEvents[i].start);\n                                            clonedEvents[i].start = kendo.date.getDate(clonedEvents[i].start);\n                                            if (!slot.isDaySlot) {\n                                                kendo.date.setTime(clonedEvents[i].start, kendo.date.getMilliseconds(view.startTime()));\n                                                kendo.date.setTime(clonedEvents[i].end, kendo.date.getMilliseconds(view.startTime()) + view._timeSlotInterval());\n                                            }\n                                        }\n                                    }\n                                } else {\n                                    startSlot = $.extend(true, {}, originSlot);\n                                    startTime = originStartTime;\n                                    clonedEvents = cachedEvents;\n                                }\n                            }\n                            distance = endTime - startTime;\n                            for (i = 0; i < clonedEvents.length; i++) {\n                                view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                            }\n                            range = moveEventRange(clonedEvent, distance);\n                            if (!that.trigger('move', {\n                                    event: event,\n                                    slot: {\n                                        element: slot.element,\n                                        start: slot.startDate(),\n                                        end: slot.endDate(),\n                                        isDaySlot: slot.isDaySlot\n                                    },\n                                    resources: view._resourceBySlot(slot),\n                                    start: range.start,\n                                    end: range.end\n                                })) {\n                                endSlot = slot;\n                            } else {\n                                for (i = 0; i < clonedEvents.length; i++) {\n                                    view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                                }\n                            }\n                        }).bind('dragend', function (e) {\n                            that.view()._removeMoveHint();\n                            var distance = endTime - startTime;\n                            var range = moveEventRange(clonedEvent, distance);\n                            var start = range.start;\n                            var end = range.end;\n                            that._dragging = false;\n                            var endResources = that.view()._resourceBySlot(endSlot);\n                            var prevented = that.trigger('moveEnd', {\n                                event: event,\n                                slot: {\n                                    element: endSlot.element,\n                                    start: endSlot.startDate(),\n                                    end: endSlot.endDate()\n                                },\n                                start: start,\n                                end: end,\n                                resources: endResources\n                            });\n                            if (!prevented && (event.start.getTime() !== start.getTime() || event.end.getTime() !== end.getTime() || originSlot.isDaySlot !== endSlot.isDaySlot || kendo.stringify(endResources) !== kendo.stringify(startResources))) {\n                                that._isMultiDrag = clonedEvents.length > 1;\n                                for (var i = 0; i < clonedEvents.length; i++) {\n                                    var evt = clonedEvents[i];\n                                    range = moveEventRange(evt, distance);\n                                    var updatedEventOptions = that.view()._eventOptionsForMove(evt);\n                                    var eventOptions = $.extend({\n                                        isAllDay: evt.isAllDay,\n                                        start: range.start,\n                                        end: range.end\n                                    }, updatedEventOptions, endResources);\n                                    that._updateEvent(null, evt, eventOptions);\n                                }\n                                if (that._isMultiDrag) {\n                                    that.dataSource.sync();\n                                    that._isMultiDrag = false;\n                                }\n                            }\n                            e.currentTarget.removeClass('k-event-active');\n                            this.cancelHold();\n                            clonedEvents = [];\n                            cachedEvents = [];\n                        }).bind('dragcancel', function () {\n                            that.view()._removeMoveHint();\n                            this.cancelHold();\n                            clonedEvents = [];\n                            cachedEvents = [];\n                        });\n                    }\n                    that._moveDraggable.bind('hold', function (e) {\n                        if (that._isTouch(e)) {\n                            that.element.find('.k-event-active').removeClass('k-event-active');\n                            if (that.options.selectable) {\n                                that._createSelection(e.currentTarget);\n                            }\n                            e.currentTarget.addClass('k-event-active');\n                        }\n                    });\n                }\n            },\n            _resizable: function () {\n                var startTime;\n                var endTime;\n                var event;\n                var clonedEvent;\n                var slot;\n                var that = this;\n                var distance = 0;\n                function direction(handle) {\n                    var directions = {\n                        'k-resize-e': 'east',\n                        'k-resize-w': 'west',\n                        'k-resize-n': 'north',\n                        'k-resize-s': 'south'\n                    };\n                    for (var key in directions) {\n                        if (handle.hasClass(key)) {\n                            return directions[key];\n                        }\n                    }\n                }\n                if (that._isMobile() && kendo.support.mobileOS.android) {\n                    distance = 5;\n                }\n                that._resizeDraggable = new kendo.ui.Draggable(that.element, {\n                    distance: distance,\n                    filter: '.k-resize-handle',\n                    autoScroll: true,\n                    dragstart: function (e) {\n                        var dragHandle = $(e.currentTarget);\n                        var eventElement = dragHandle.closest('.k-event');\n                        var uid = eventElement.attr(kendo.attr('uid'));\n                        var view = that.view();\n                        that._dragging = true;\n                        event = that.occurrenceByUid(uid);\n                        clonedEvent = event.clone();\n                        view._updateEventForResize(clonedEvent);\n                        slot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                        if (that.trigger('resizeStart', { event: event })) {\n                            e.preventDefault();\n                        }\n                        startTime = kendo.date.toUtcTime(clonedEvent.start);\n                        endTime = kendo.date.toUtcTime(clonedEvent.end);\n                    },\n                    drag: function (e) {\n                        if (!slot) {\n                            return;\n                        }\n                        var dragHandle = $(e.currentTarget);\n                        var dir = direction(dragHandle);\n                        var view = that.view();\n                        var currentSlot = view._slotByPosition(e.x.location, e.y.location);\n                        if (!currentSlot || slot.groupIndex != currentSlot.groupIndex) {\n                            return;\n                        }\n                        slot = currentSlot;\n                        var originalStart = startTime;\n                        var originalEnd = endTime;\n                        if (dir == 'south') {\n                            if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                                if (clonedEvent.isAllDay) {\n                                    endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                                } else {\n                                    endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                                }\n                            }\n                        } else if (dir == 'north') {\n                            if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (dir == 'east') {\n                            if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(slot.endDate())) >= kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.start))) {\n                                if (clonedEvent.isAllDay) {\n                                    endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                                } else {\n                                    endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                                }\n                            } else if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (dir == 'west') {\n                            if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.end)) >= kendo.date.toUtcTime(kendo.date.getDate(slot.startDate()))) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        }\n                        if (!that.trigger('resize', {\n                                event: event,\n                                slot: {\n                                    element: slot.element,\n                                    start: slot.startDate(),\n                                    end: slot.endDate()\n                                },\n                                start: kendo.timezone.toLocalDate(startTime),\n                                end: kendo.timezone.toLocalDate(endTime),\n                                resources: view._resourceBySlot(slot)\n                            })) {\n                            view._updateResizeHint(clonedEvent, slot.groupIndex, startTime, endTime);\n                        } else {\n                            startTime = originalStart;\n                            endTime = originalEnd;\n                        }\n                    },\n                    dragend: function (e) {\n                        var dragHandle = $(e.currentTarget);\n                        var start = new Date(clonedEvent.start.getTime());\n                        var end = new Date(clonedEvent.end.getTime());\n                        var dir = direction(dragHandle);\n                        that._dragging = false;\n                        that.view()._removeResizeHint();\n                        if (dir == 'south') {\n                            end = kendo.timezone.toLocalDate(endTime);\n                        } else if (dir == 'north') {\n                            start = kendo.timezone.toLocalDate(startTime);\n                        } else if (dir == 'east') {\n                            if (slot.isDaySlot) {\n                                end = kendo.date.getDate(kendo.timezone.toLocalDate(endTime));\n                            } else {\n                                end = kendo.timezone.toLocalDate(endTime);\n                            }\n                        } else if (dir == 'west') {\n                            if (slot.isDaySlot) {\n                                start = new Date(kendo.timezone.toLocalDate(startTime));\n                                start.setHours(0);\n                                start.setMinutes(0);\n                            } else {\n                                start = kendo.timezone.toLocalDate(startTime);\n                            }\n                        }\n                        var prevented = that.trigger('resizeEnd', {\n                            event: event,\n                            slot: {\n                                element: slot.element,\n                                start: slot.startDate(),\n                                end: slot.endDate()\n                            },\n                            start: start,\n                            end: end,\n                            resources: that.view()._resourceBySlot(slot)\n                        });\n                        if (!prevented && end.getTime() >= start.getTime()) {\n                            if (clonedEvent.start.getTime() != start.getTime() || clonedEvent.end.getTime() != end.getTime()) {\n                                that.view()._updateEventForResize(event);\n                                that._updateEvent(dir, event, {\n                                    start: start,\n                                    end: end\n                                });\n                            }\n                        }\n                        slot = null;\n                        event = null;\n                    },\n                    dragcancel: function () {\n                        that._dragging = false;\n                        that.view()._removeResizeHint();\n                        slot = null;\n                        event = null;\n                    }\n                });\n            },\n            _updateEvent: function (dir, event, eventInfo) {\n                var that = this;\n                var updateEvent = function (event, callback) {\n                    var start;\n                    try {\n                        that._preventRefresh = true;\n                        event.update(eventInfo);\n                        that._convertDates(event);\n                        start = event.start;\n                        if (dir && event.duration() % MS_PER_DAY === 0 && start.getHours() === 0 && start.getMinutes() === 0 && start.getSeconds() === 0 && start.getMilliseconds() === 0) {\n                            event.set('isAllDay', true);\n                        }\n                    } finally {\n                        that._preventRefresh = false;\n                    }\n                    if (!that.trigger(SAVE, { event: event })) {\n                        if (callback) {\n                            callback();\n                        }\n                        if (!that._isMultiDrag) {\n                            that.dataSource.sync();\n                        }\n                    }\n                };\n                var recurrenceHead = function (event) {\n                    if (event.recurrenceRule) {\n                        return that.dataSource.getByUid(event.uid);\n                    } else {\n                        return that.dataSource.get(event.recurrenceId);\n                    }\n                };\n                var updateSeries = function () {\n                    var head = recurrenceHead(event);\n                    if (dir == 'south' || dir == 'north') {\n                        if (eventInfo.start) {\n                            var start = kendo.date.getDate(head.start);\n                            kendo.date.setTime(start, getMilliseconds(eventInfo.start));\n                            eventInfo.start = start;\n                        }\n                        if (eventInfo.end) {\n                            var end = kendo.date.getDate(head.end);\n                            kendo.date.setTime(end, getMilliseconds(eventInfo.end));\n                            eventInfo.end = end;\n                        }\n                    }\n                    that.dataSource._removeExceptions(head);\n                    updateEvent(head);\n                };\n                var updateOccurrence = function () {\n                    var head = recurrenceHead(event);\n                    var eventUid;\n                    var callback = function () {\n                        that._convertDates(head);\n                        if (that._selection) {\n                            that._selection.events.push(eventUid);\n                        }\n                    };\n                    var exception = head.toOccurrence({\n                        start: event.start,\n                        end: event.end\n                    });\n                    eventUid = exception.uid;\n                    updateEvent(that.dataSource.add(exception), callback);\n                };\n                if (event.recurrenceRule || event.isOccurrence()) {\n                    var recurrenceMessages = that.options.messages.recurrenceMessages;\n                    that._showRecurringDialog(event, updateOccurrence, updateSeries, {\n                        title: recurrenceMessages.editWindowTitle,\n                        text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                        occurrenceText: recurrenceMessages.editWindowOccurrence,\n                        seriesText: recurrenceMessages.editWindowSeries\n                    });\n                } else {\n                    updateEvent(that.dataSource.getByUid(event.uid));\n                }\n            },\n            _modelForContainer: function (container) {\n                container = $(container).closest('[' + kendo.attr('uid') + ']');\n                return this.dataSource.getByUid(container.attr(kendo.attr('uid')));\n            },\n            showDialog: function (options) {\n                this._editor.showDialog(options);\n            },\n            focus: function () {\n                this.wrapper.trigger('focus');\n            },\n            _confirmation: function (callback, model, isResetSeries) {\n                var editable = this.options.editable;\n                if (editable === true || editable.confirmation !== false) {\n                    var messages = this.options.messages;\n                    var title = messages.deleteWindowTitle;\n                    var text = typeof editable.confirmation === STRING ? editable.confirmation : messages.editable.confirmation;\n                    if (this._isEditorOpened() && model.isRecurring()) {\n                        var recurrenceMessages = this.options.messages.recurrenceMessages;\n                        title = recurrenceMessages.deleteWindowTitle;\n                        if (model.isException() || model.isNew()) {\n                            text = recurrenceMessages.deleteRecurringConfirmation ? recurrenceMessages.deleteRecurringConfirmation : DELETERECURRINGCONFIRM;\n                        } else {\n                            text = recurrenceMessages.deleteSeriesConfirmation ? recurrenceMessages.deleteSeriesConfirmation : DELETESERIESCONFIRM;\n                        }\n                        if (isResetSeries) {\n                            title = recurrenceMessages.resetSeriesWindowTitle;\n                            text = recurrenceMessages.resetSeriesConfirmation ? recurrenceMessages.resetSeriesConfirmation : RESETSERIESCONFIRM;\n                        }\n                    }\n                    var buttons = [{\n                            name: 'destroy',\n                            text: isResetSeries ? messages.resetSeries : messages.destroy,\n                            click: function () {\n                                callback();\n                            }\n                        }];\n                    if (!(this._isMobile() && kendo.Pane)) {\n                        buttons.push({\n                            name: 'canceledit',\n                            text: messages.cancel,\n                            click: function () {\n                                callback(true);\n                            }\n                        });\n                    }\n                    this._unbindResize();\n                    this.showDialog({\n                        model: model,\n                        text: text,\n                        title: title,\n                        buttons: buttons\n                    });\n                    this._bindResize();\n                } else {\n                    callback();\n                }\n            },\n            addEvent: function (eventInfo) {\n                var editable = this._editor.editable;\n                var dataSource = this.dataSource;\n                var event;\n                eventInfo = eventInfo || {};\n                var prevented = this.trigger('add', { event: eventInfo });\n                if (!prevented && (editable && editable.end() || !editable)) {\n                    this.cancelEvent();\n                    if (eventInfo && eventInfo.toJSON) {\n                        eventInfo = eventInfo.toJSON();\n                    }\n                    event = dataSource.add(eventInfo);\n                    if (event) {\n                        this.cancelEvent();\n                        this._editEvent(event);\n                    }\n                }\n            },\n            saveEvent: function () {\n                var that = this;\n                var editor = that._editor;\n                var dataSource = that.dataSource;\n                if (!editor) {\n                    return;\n                }\n                var editable = editor.editable;\n                var container = editor.container;\n                var model = that._modelForContainer(container);\n                var events, i, event;\n                if (container && editable && editable.end() && !that.trigger(SAVE, {\n                        container: container,\n                        event: model\n                    })) {\n                    if (!model.isOccurrence() && !!model.recurrenceException && !model.recurrenceRule) {\n                        events = dataSource.data();\n                        for (i = events.length - 1; i >= 0; i -= 1) {\n                            event = events[i];\n                            if (event && event.recurrenceId === model.id) {\n                                dataSource.remove(event);\n                            }\n                        }\n                        model.set('recurrenceException', '');\n                    }\n                    if (!model.dirty && !model.isOccurrence()) {\n                        that._convertDates(model, 'remove');\n                    }\n                    dataSource.sync();\n                }\n            },\n            cancelEvent: function () {\n                var editor = this._editor;\n                var container = editor.container;\n                var model;\n                if (container) {\n                    model = this._modelForContainer(container);\n                    if (model && model.isOccurrence()) {\n                        this._convertDates(model, 'remove');\n                        this._convertDates(this.dataSource.get(model.recurrenceId), 'remove');\n                    }\n                    this.dataSource.cancelChanges(model);\n                    editor.close();\n                }\n            },\n            editEvent: function (uid) {\n                var model = typeof uid == 'string' ? this.occurrenceByUid(uid) : uid;\n                if (!model) {\n                    return;\n                }\n                this.cancelEvent();\n                if (model.isRecurring()) {\n                    this._editRecurringDialog(model);\n                } else {\n                    this._editEvent(model);\n                }\n            },\n            _editEvent: function (model) {\n                this._preventRefresh = true;\n                this._unbindResize();\n                this._createPopupEditor(model);\n                this._bindResize();\n            },\n            _editRecurringDialog: function (model) {\n                var that = this;\n                var editOccurrence = function () {\n                    if (model.isException()) {\n                        that._editEvent(model);\n                    } else {\n                        that.addEvent(model);\n                    }\n                };\n                var editSeries = function () {\n                    if (model.recurrenceId) {\n                        model = that.dataSource.get(model.recurrenceId);\n                    }\n                    that._editEvent(model);\n                };\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n                that._showRecurringDialog(model, editOccurrence, editSeries, {\n                    title: recurrenceMessages.editWindowTitle,\n                    text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                    occurrenceText: recurrenceMessages.editWindowOccurrence,\n                    seriesText: recurrenceMessages.editWindowSeries\n                });\n            },\n            _showRecurringDialog: function (model, editOccurrence, editSeries, messages) {\n                var editable = this.options.editable;\n                var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : 'dialog';\n                if (editRecurringMode === 'occurrence' || this._isMultiDrag) {\n                    editOccurrence();\n                } else if (editRecurringMode === 'series') {\n                    editSeries();\n                } else {\n                    this._unbindResize();\n                    this.showDialog({\n                        model: model,\n                        title: messages.title,\n                        text: messages.text,\n                        buttons: [\n                            {\n                                text: messages.occurrenceText,\n                                click: editOccurrence\n                            },\n                            {\n                                text: messages.seriesText,\n                                click: editSeries\n                            }\n                        ]\n                    });\n                    this._bindResize();\n                }\n            },\n            _createButton: function (command) {\n                var template = command.template || COMMANDBUTTONTMPL, commandName = typeof command === STRING ? command : command.name || command.text, options = {\n                        className: 'k-scheduler-' + (commandName || '').replace(/\\s/g, ''),\n                        text: commandName,\n                        attr: ''\n                    };\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error('Custom commands should have name specified');\n                }\n                if (isPlainObject(command)) {\n                    if (command.className) {\n                        command.className += ' ' + options.className;\n                    }\n                    if (commandName === 'edit' && isPlainObject(command.text)) {\n                        command = extend(true, {}, command);\n                        command.text = command.text.edit;\n                    }\n                    options = extend(true, options, defaultCommands[commandName], command);\n                } else {\n                    options = extend(true, options, defaultCommands[commandName]);\n                }\n                if (!options.className) {\n                    options.className = 'k-button-solid-base';\n                } else if (options.className.indexOf('k-button-solid-primary') === -1) {\n                    options.className += ' k-button-solid-base';\n                }\n                return kendo.template(template)(options);\n            },\n            _convertDates: function (model, method) {\n                var timezone = this.dataSource.reader.timezone;\n                var startTimezone = model.startTimezone;\n                var endTimezone = model.endTimezone;\n                var start = model.start;\n                var end = model.start;\n                method = method || 'apply';\n                startTimezone = startTimezone || endTimezone;\n                endTimezone = endTimezone || startTimezone;\n                if (startTimezone) {\n                    if (timezone) {\n                        if (method === 'apply') {\n                            start = kendo.timezone.convert(model.start, timezone, startTimezone);\n                            end = kendo.timezone.convert(model.end, timezone, endTimezone);\n                        } else {\n                            start = kendo.timezone.convert(model.start, startTimezone, timezone);\n                            end = kendo.timezone.convert(model.end, endTimezone, timezone);\n                        }\n                    } else {\n                        start = kendo.timezone[method](model.start, startTimezone);\n                        end = kendo.timezone[method](model.end, endTimezone);\n                    }\n                    model._set('start', start);\n                    model._set('end', end);\n                }\n            },\n            _createEditor: function () {\n                var that = this;\n                var editor;\n                if (this._isMobile() && kendo.Pane) {\n                    editor = that._editor = new MobileEditor(this.wrapper, extend({}, this.options, {\n                        target: this,\n                        timezone: that.dataSource.reader.timezone,\n                        resources: that.resources,\n                        createButton: proxy(this._createButton, this)\n                    }));\n                } else {\n                    editor = that._editor = new PopupEditor(this.wrapper, extend({}, this.options, {\n                        target: this,\n                        createButton: proxy(this._createButton, this),\n                        timezone: that.dataSource.reader.timezone,\n                        resources: that.resources\n                    }));\n                }\n                editor.bind('cancel', function (e) {\n                    if (that.trigger('cancel', {\n                            container: e.container,\n                            event: e.model\n                        })) {\n                        e.preventDefault();\n                        return;\n                    }\n                    that._preventRefresh = false;\n                    that.cancelEvent();\n                    if (that._attemptRefresh) {\n                        that.refresh();\n                    }\n                    that.focus();\n                });\n                editor.bind('edit', function (e) {\n                    if (that.trigger(EDIT, {\n                            container: e.container,\n                            event: e.model\n                        })) {\n                        e.preventDefault();\n                    }\n                });\n                editor.bind('save', function () {\n                    that._preventRefresh = false;\n                    that.saveEvent();\n                });\n                editor.bind('remove', function (e) {\n                    that._preventRefresh = false;\n                    that.removeEvent(e.model);\n                });\n                editor.bind('resetSeries', function (e) {\n                    that._confirmation(function (cancel) {\n                        that._preventRefresh = false;\n                        if (!cancel) {\n                            that.dataSource._removeExceptions(e.model);\n                            that.saveEvent();\n                        }\n                    }, e.model, true);\n                });\n            },\n            _createPopupEditor: function (model) {\n                var editor = this._editor;\n                if (!model.isNew() || model.isOccurrence()) {\n                    if (model.isOccurrence()) {\n                        this._convertDates(model.recurrenceId ? this.dataSource.get(model.recurrenceId) : model);\n                    }\n                    this._convertDates(model);\n                }\n                this.editable = editor.editEvent(model);\n            },\n            removeEvent: function (uid) {\n                var that = this, model = typeof uid == 'string' ? that.occurrenceByUid(uid) : uid;\n                if (!model) {\n                    return;\n                }\n                if (model.isRecurring()) {\n                    that._deleteRecurringDialog(model);\n                } else {\n                    that._confirmation(function (cancel) {\n                        if (!cancel) {\n                            that._removeEvent(model);\n                        }\n                    }, model);\n                }\n            },\n            occurrenceByUid: function (uid) {\n                var occurrence = this.dataSource.getByUid(uid);\n                if (!occurrence) {\n                    occurrence = getOccurrenceByUid(this._data, uid);\n                }\n                return occurrence;\n            },\n            occurrencesInRange: function (start, end) {\n                return new kendo.data.Query(this._data).filter({\n                    logic: 'or',\n                    filters: [\n                        {\n                            logic: 'and',\n                            filters: [\n                                {\n                                    field: 'start',\n                                    operator: 'gte',\n                                    value: start\n                                },\n                                {\n                                    field: 'end',\n                                    operator: 'gte',\n                                    value: start\n                                },\n                                {\n                                    field: 'start',\n                                    operator: 'lt',\n                                    value: end\n                                }\n                            ]\n                        },\n                        {\n                            logic: 'and',\n                            filters: [\n                                {\n                                    field: 'start',\n                                    operator: 'lte',\n                                    value: start\n                                },\n                                {\n                                    field: 'end',\n                                    operator: 'gt',\n                                    value: start\n                                }\n                            ]\n                        }\n                    ]\n                }).toArray();\n            },\n            _removeEvent: function (model) {\n                if (!this.trigger(REMOVE, { event: model })) {\n                    if (this.dataSource.remove(model)) {\n                        this.dataSource.sync();\n                    }\n                }\n            },\n            _deleteRecurringDialog: function (model) {\n                var that = this;\n                var currentModel = model;\n                var editable = that.options.editable;\n                var deleteOccurrence;\n                var deleteSeries;\n                var createException;\n                var deleteOccurrenceConfirmation;\n                var deleteSeriesConfirmation;\n                var createExceptionConfirmation;\n                var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : 'dialog';\n                deleteOccurrence = function () {\n                    var occurrence = currentModel.recurrenceId ? currentModel : currentModel.toOccurrence();\n                    var head = that.dataSource.get(occurrence.recurrenceId);\n                    that._convertDates(head);\n                    that._removeEvent(occurrence);\n                };\n                deleteSeries = function () {\n                    if (currentModel.recurrenceId) {\n                        currentModel = that.dataSource.get(currentModel.recurrenceId);\n                    }\n                    that._removeEvent(currentModel);\n                };\n                createException = function () {\n                    that.dataSource.remove(currentModel);\n                    that.dataSource.sync();\n                };\n                if (editRecurringMode != 'dialog' || that._isEditorOpened()) {\n                    deleteOccurrenceConfirmation = function () {\n                        that._confirmation(function (cancel) {\n                            if (!cancel) {\n                                deleteOccurrence();\n                            }\n                        }, currentModel);\n                    };\n                    deleteSeriesConfirmation = function () {\n                        that._confirmation(function (cancel) {\n                            if (!cancel) {\n                                deleteSeries();\n                            }\n                        }, currentModel);\n                    };\n                    createExceptionConfirmation = function () {\n                        that._confirmation(function (cancel) {\n                            if (!cancel) {\n                                createException();\n                            }\n                        }, currentModel);\n                    };\n                }\n                var seriesCallback = deleteSeriesConfirmation || deleteSeries;\n                var occurrenceCallback = deleteOccurrenceConfirmation || deleteOccurrence;\n                var exeptionCallback = createExceptionConfirmation || createException;\n                if (that._isEditorOpened()) {\n                    if (model.isException()) {\n                        occurrenceCallback();\n                    } else if (model.isNew()) {\n                        exeptionCallback();\n                    } else {\n                        seriesCallback();\n                    }\n                } else {\n                    var recurrenceMessages = that.options.messages.recurrenceMessages;\n                    that._showRecurringDialog(model, occurrenceCallback, seriesCallback, {\n                        title: recurrenceMessages.deleteWindowTitle,\n                        text: recurrenceMessages.deleteRecurring ? recurrenceMessages.deleteRecurring : DELETERECURRING,\n                        occurrenceText: recurrenceMessages.deleteWindowOccurrence,\n                        seriesText: recurrenceMessages.deleteWindowSeries\n                    });\n                }\n            },\n            _isEditorOpened: function () {\n                return !!this._editor.container;\n            },\n            _unbindView: function (view) {\n                var that = this;\n                that.angular('cleanup', function () {\n                    return { elements: that.items() };\n                });\n                view.destroy();\n            },\n            _bindView: function (view) {\n                var that = this;\n                if (that.options.editable) {\n                    if (that._viewRemoveHandler) {\n                        view.unbind(REMOVE, that._viewRemoveHandler);\n                    }\n                    that._viewRemoveHandler = function (e) {\n                        that.removeEvent(e.uid);\n                    };\n                    view.bind(REMOVE, that._viewRemoveHandler);\n                    if (that._viewAddHandler) {\n                        view.unbind(ADD, that._viewAddHandler);\n                    }\n                    that._viewAddHandler = function (e) {\n                        that.addEvent(e.eventInfo);\n                    };\n                    view.bind(ADD, this._viewAddHandler);\n                    if (that._viewEditHandler) {\n                        view.unbind(EDIT, that._viewEditHandler);\n                    }\n                    that._viewEditHandler = function (e) {\n                        that.editEvent(e.uid);\n                    };\n                    view.bind(EDIT, this._viewEditHandler);\n                }\n                if (that._viewNavigateHandler) {\n                    view.unbind('navigate', that._viewNavigateHandler);\n                }\n                that._viewNavigateHandler = function (e) {\n                    if (e.action) {\n                        if (!that.trigger('navigate', {\n                                view: e.view,\n                                isWorkDay: e.isWorkDay,\n                                action: e.action,\n                                date: e.date\n                            })) {\n                            that.date(e.date);\n                        }\n                    } else if (e.view) {\n                        var switchWorkDay = 'isWorkDay' in e;\n                        var action = switchWorkDay ? 'changeWorkDay' : 'changeView';\n                        if (!that.trigger('navigate', {\n                                view: e.view,\n                                isWorkDay: e.isWorkDay,\n                                action: action,\n                                date: e.date\n                            })) {\n                            if (switchWorkDay) {\n                                that._workDayMode = e.isWorkDay;\n                            }\n                            that._selectView(e.view);\n                            that.date(e.date);\n                        }\n                    }\n                };\n                view.bind('navigate', that._viewNavigateHandler);\n                if (that._viewActivateHandler) {\n                    view.unbind('activate', that._viewActivateHandler);\n                }\n                that._viewActivateHandler = function () {\n                    var view = this;\n                    if (that._selection) {\n                        view.constrainSelection(that._selection);\n                        that._select();\n                        that._adjustSelectedDate();\n                    }\n                };\n                view.bind('activate', that._viewActivateHandler);\n            },\n            _selectView: function (name) {\n                var that = this;\n                if (name && that.views[name]) {\n                    if (that._selectedView) {\n                        that._unbindView(that._selectedView);\n                    }\n                    that._selectedView = that._renderView(name);\n                    that._selectedViewName = name;\n                    if (that._viewsCount > 1 && !that._isMobile()) {\n                        var viewsDropdown = that.toolbar.find('.k-views-dropdown');\n                        var viewButtons = that.toolbar.find('.k-scheduler-views > .k-button');\n                        if (that.toolbar.find('.k-views-dropdown').length === 0) {\n                            that.toolbar.find('.k-scheduler-views-wrapper').prepend(VIEWS_DROPDOWN_TEMPLATE({\n                                views: that.views,\n                                view: name,\n                                ns: kendo.ns\n                            }));\n                            viewsDropdown = that.toolbar.find('.k-views-dropdown');\n                        }\n                        viewsDropdown.val(name);\n                        viewButtons.removeClass('k-selected');\n                        viewButtons.filter('.k-view-' + name.replace(/\\./g, '\\\\.').toLowerCase()).addClass('k-selected');\n                    } else {\n                        var viewSelect = that.toolbar.find('.k-scheduler-mobile-views');\n                        viewSelect.find('[value=' + name.replace(/\\./g, '\\\\.') + ']').prop('selected', 'selected');\n                    }\n                }\n            },\n            view: function (name) {\n                var that = this;\n                if (name) {\n                    that._selectView(name);\n                    that.rebind();\n                    return;\n                }\n                return that._selectedView;\n            },\n            viewName: function () {\n                return this.view().name;\n            },\n            _renderView: function (name) {\n                var view = this._initializeView(name);\n                this._bindView(view);\n                if (kendo.support.mouseAndTouchPresent || kendo.support.pointers) {\n                    view.content.css('-ms-touch-action', 'pinch-zoom');\n                    view.content.css('touch-action', 'pinch-zoom');\n                }\n                this._model.set('formattedDate', view.dateForTitle());\n                this._model.set('formattedShortDate', view.shortDateForTitle());\n                this._model.set('formattedMobileDate', view.mobileDateForTitle ? view.mobileDateForTitle() : view.shortDateForTitle());\n                this._model.set('formattedYear', kendo.format('{0:yyyy}', view.startDate()));\n                return view;\n            },\n            resize: function (force) {\n                var size = this.getSize();\n                var currentSize = this._size;\n                var view = this.view();\n                if (!view || !view.groups) {\n                    return;\n                }\n                if (force || !currentSize || size.width !== currentSize.width || size.height !== currentSize.height) {\n                    this.refresh({ action: 'resize' });\n                    this._size = size;\n                }\n            },\n            _adjustSelectedDate: function () {\n                var date = this._model.selectedDate, selection = this._selection, start = selection.start;\n                if (start && !kendo.date.isInDateRange(date, getDate(start), getDate(selection.end))) {\n                    date.setFullYear(start.getFullYear(), start.getMonth(), start.getDate());\n                }\n            },\n            _initializeView: function (name) {\n                var view = this.views[name];\n                if (view) {\n                    var isSettings = isPlainObject(view), overrideOptions = {}, type = view.type;\n                    if (typeof type === STRING) {\n                        type = kendo.getter(view.type)(window);\n                    }\n                    if (isSettings && view.workDays && view.workDays.length) {\n                        overrideOptions.workDays = view.workDays;\n                    }\n                    if (type) {\n                        view = new type(this.wrapper, trimOptions(extend(true, {}, this.options, isSettings ? view : {}, {\n                            resources: this.resources,\n                            date: this.date(),\n                            startTime: kendo.parseDate(view.startTime) || kendo.parseDate(this.options.startTime),\n                            endTime: kendo.parseDate(view.endTime) || kendo.parseDate(this.options.endTime),\n                            showWorkHours: this._workDayMode\n                        }), overrideOptions));\n                    } else {\n                        throw new Error('There is no such view');\n                    }\n                }\n                return view;\n            },\n            _views: function () {\n                var views = this.options.views;\n                var view;\n                var defaultView;\n                var selected;\n                var isSettings;\n                var name;\n                var type;\n                var idx;\n                var length;\n                this.views = {};\n                this._viewsCount = 0;\n                for (idx = 0, length = views.length; idx < length; idx++) {\n                    var hasType = false;\n                    view = views[idx];\n                    isSettings = isPlainObject(view);\n                    if (isSettings) {\n                        type = name = view.type ? view.type : view;\n                        if (typeof type !== STRING) {\n                            name = view.name || view.title;\n                            hasType = true;\n                        }\n                    } else {\n                        type = name = view;\n                    }\n                    defaultView = defaultViews[name];\n                    if (defaultView && !hasType) {\n                        view.type = defaultView.type;\n                        defaultView.title = this.options.messages.views[name];\n                        if (defaultView.type === 'day') {\n                            defaultView.messages = { allDay: this.options.messages.allDay };\n                        } else if (defaultView.type === 'agenda') {\n                            defaultView.messages = {\n                                event: this.options.messages.event,\n                                date: this.options.messages.date,\n                                time: this.options.messages.time\n                            };\n                        }\n                    }\n                    view = extend({ title: name }, defaultView, isSettings ? view : {});\n                    if (name) {\n                        this.views[name] = view;\n                        this._viewsCount++;\n                        if (!selected || view.selected) {\n                            selected = name;\n                        }\n                    }\n                }\n                if (selected) {\n                    this._selectedViewName = selected;\n                }\n            },\n            rebind: function () {\n                var that = this, resources = that.resources, resourceFetchArray = [];\n                if (that._preventRebind) {\n                    that._preventRebind = false;\n                    return;\n                }\n                if (that.options.autoBind === false && resources && resources.length > 0) {\n                    resources.forEach(function (resource) {\n                        if (resource.dataSource.data().length === 0) {\n                            that._preventRebind = true;\n                            resourceFetchArray.push(resource.dataSource.fetch());\n                        }\n                    });\n                    $.when.apply(null, resourceFetchArray).then(function () {\n                        that.dataSource.fetch();\n                        that._preventRebind = false;\n                    });\n                } else {\n                    that.dataSource.fetch();\n                }\n            },\n            _dataSource: function () {\n                var that = this, options = that.options, dataSource = options.dataSource;\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n                if (options.timezone && !(dataSource instanceof SchedulerDataSource)) {\n                    dataSource = extend(true, dataSource, { schema: { timezone: options.timezone } });\n                } else if (dataSource instanceof SchedulerDataSource) {\n                    options.timezone = dataSource.options.schema ? dataSource.options.schema.timezone : '';\n                }\n                if (that.dataSource && that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler);\n                } else {\n                    that._refreshHandler = proxy(that.refresh, that);\n                    that._progressHandler = proxy(that._requestStart, that);\n                    that._errorHandler = proxy(that._error, that);\n                }\n                that.dataSource = kendo.data.SchedulerDataSource.create(dataSource).bind(CHANGE, that._refreshHandler).bind(PROGRESS, that._progressHandler).bind(ERROR, that._errorHandler);\n                that.options.dataSource = that.dataSource;\n            },\n            _error: function () {\n                this._progress(false);\n            },\n            _requestStart: function () {\n                this._progress(true);\n            },\n            _progress: function (toggle) {\n                var element = this.element.find('.k-scheduler-content');\n                kendo.ui.progress(element, toggle);\n            },\n            _resources: function () {\n                var that = this;\n                var resources = that.options.resources;\n                var resourcePromises = [];\n                for (var idx = 0; idx < resources.length; idx++) {\n                    var resource = resources[idx];\n                    var field = resource.field;\n                    var name = resource.name || field;\n                    var dataSource = resource.dataSource;\n                    if (!field || !dataSource) {\n                        throw new Error('The \"field\" and \"dataSource\" options of the scheduler resource are mandatory.');\n                    }\n                    that.resources.push({\n                        field: field,\n                        name: name,\n                        title: resource.title || field,\n                        dataTextField: resource.dataTextField || 'text',\n                        dataValueField: resource.dataValueField || 'value',\n                        dataColorField: resource.dataColorField || 'color',\n                        dataParentValueField: resource.dataParentValueField || 'parentValue',\n                        valuePrimitive: resource.valuePrimitive != null ? resource.valuePrimitive : true,\n                        multiple: resource.multiple || false,\n                        dataSource: that._resourceDataSource(dataSource, name, resourcePromises)\n                    });\n                }\n                if (!that.options.autoBind) {\n                    that._selectView(that._selectedViewName);\n                } else {\n                    $.when.apply(null, resourcePromises).then(function () {\n                        that.view(that._selectedViewName);\n                    });\n                }\n            },\n            _resourceDataSource: function (resourceDS, groupName, promises) {\n                var that = this;\n                var dataSource = isArray(resourceDS) ? { data: resourceDS } : resourceDS;\n                var dataSourceInstance = kendo.data.DataSource.create(dataSource);\n                if (that.options.autoBind) {\n                    promises.push(dataSourceInstance.fetch(function () {\n                        that._bindResourceEvents(this, groupName);\n                    }));\n                } else {\n                    that._bindResourceEvents(dataSourceInstance, groupName);\n                }\n                return dataSourceInstance;\n            },\n            _bindResourceEvents: function (resourceDS, groupName) {\n                var that = this;\n                var isGrouped = that.options.group && that.options.group.resources.length;\n                var isResourceGrouped = isGrouped && that.options.group.resources.indexOf(groupName) > -1;\n                if (!that._resourceRefreshHandler && isResourceGrouped) {\n                    that._resourceRefreshHandler = proxy(that._refreshResource, that);\n                    that._resourceErrorHandler = proxy(that._error, that);\n                }\n                if (isResourceGrouped) {\n                    resourceDS.bind(CHANGE, that._resourceRefreshHandler).bind(ERROR, that._resourceErrorHandler);\n                }\n            },\n            _refreshResource: function () {\n                var that = this;\n                var preventRefresh = that._editor && that._editor.editable || that._preventRefresh;\n                if (!preventRefresh) {\n                    that.view(that._selectedViewName);\n                }\n            },\n            _initModel: function () {\n                var that = this;\n                that._model = kendo.observable({\n                    selectedDate: new Date(this.options.date),\n                    formattedDate: '',\n                    formattedShortDate: ''\n                });\n                that._model.bind(CHANGE, function (e) {\n                    if (e.field === 'selectedDate') {\n                        that.view(that._selectedViewName);\n                    }\n                });\n            },\n            _wrapper: function () {\n                var that = this;\n                var options = that.options;\n                var height = options.height;\n                var width = options.width;\n                that.wrapper = that.element.addClass('k-widget k-scheduler k-floatwrap').attr('role', 'grid').attr('aria-multiselectable', true);\n                if (that._isMobile()) {\n                    that.wrapper.addClass('k-scheduler-mobile');\n                }\n                if (height) {\n                    that.wrapper.height(height);\n                }\n                if (width) {\n                    that.wrapper.width(width);\n                }\n            },\n            date: function (value) {\n                if (value != null && getDate(value) >= getDate(this.options.min) && getDate(value) <= getDate(this.options.max)) {\n                    this._model.set('selectedDate', value);\n                }\n                return getDate(this._model.get('selectedDate'));\n            },\n            _toolbar: function () {\n                var that = this;\n                var options = that.options;\n                var commands = [];\n                if (options.toolbar) {\n                    commands = Array.isArray(options.toolbar) ? options.toolbar : [options.toolbar];\n                }\n                var template = this._isMobile() ? MOBILETOOLBARTEMPLATE : TOOLBARTEMPLATE;\n                var toolbar = $(template({\n                    messages: options.messages,\n                    pdf: $.grep(commands, function (item) {\n                        return item == 'pdf' || item.name == 'pdf';\n                    }).length > 0,\n                    search: $.grep(commands, function (item) {\n                        return item == 'search' || item.name == 'search';\n                    }).length > 0,\n                    ns: kendo.ns,\n                    view: that._selectedViewName,\n                    views: that.views,\n                    viewsCount: that._viewsCount,\n                    editable: that.options.editable\n                }));\n                that.wrapper.append(toolbar);\n                that.toolbar = toolbar;\n                kendo.bind(that.toolbar, that._model);\n                toolbar.on(CLICK + NS, '.k-pdf', function (e) {\n                    e.preventDefault();\n                    that.saveAsPDF();\n                });\n                toolbar.on('input' + NS, '.k-scheduler-search-input', kendo.throttle(function (e) {\n                    that.dataSource.filter({\n                        logic: 'or',\n                        filters: [\n                            {\n                                field: 'title',\n                                operator: 'contains',\n                                value: e.target.value\n                            },\n                            {\n                                field: 'description',\n                                operator: 'contains',\n                                value: e.target.value\n                            }\n                        ]\n                    });\n                }, 250));\n                toolbar.on(CLICK + NS, '.k-create-event', function (e) {\n                    e.preventDefault();\n                    that.addEvent();\n                });\n                toolbar.on(CLICK + NS, '.k-nav-calendar', function (e) {\n                    e.preventDefault();\n                    that._showCalendar(e.target);\n                });\n                toolbar.on(CLICK + NS, '.k-scheduler-navigation > .k-button', function (e) {\n                    var button = $(this);\n                    var date = new Date(that.date());\n                    var action = '';\n                    var currentDate = new Date();\n                    var timezone = that.options.timezone;\n                    if ($(e.target).is('input')) {\n                        return;\n                    }\n                    e.preventDefault();\n                    if (button.hasClass('k-nav-today')) {\n                        action = 'today';\n                        if (timezone) {\n                            var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                            date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                        } else {\n                            date = currentDate;\n                        }\n                    } else if (button.hasClass('k-nav-next')) {\n                        action = 'next';\n                        date = that.view().nextDate();\n                    } else if (button.hasClass('k-nav-prev')) {\n                        action = 'previous';\n                        date = that.view().previousDate();\n                    }\n                    if (!that.trigger('navigate', {\n                            view: that._selectedViewName,\n                            action: action,\n                            date: date\n                        })) {\n                        that.date(date);\n                    }\n                });\n                toolbar.on(CLICK + NS, '.k-nav-current', function (e) {\n                    e.preventDefault();\n                    if (!that._isMobile()) {\n                        that._showCalendar();\n                    }\n                });\n                toolbar.on(CLICK + NS, '.k-scheduler-views > .k-button, .k-scheduler-refresh', function (e) {\n                    e.preventDefault();\n                    var name = $(this).attr(kendo.attr('name'));\n                    that.toolbar.find('.k-scheduler-views > .k-button').removeClass(FOCUSEDSTATE);\n                    if (!that.trigger('navigate', {\n                            view: name,\n                            action: 'changeView',\n                            date: that.date()\n                        })) {\n                        that.view(name);\n                    }\n                });\n                toolbar.on(CHANGE + NS, '.k-views-dropdown, .k-scheduler-mobile-views', function () {\n                    var name = this.value;\n                    if (!that.trigger('navigate', {\n                            view: name,\n                            action: 'changeView',\n                            date: that.date()\n                        })) {\n                        that.view(name);\n                    }\n                });\n            },\n            _showCalendar: function (targetElm) {\n                var that = this, target = targetElm || that.toolbar.find('.k-nav-current'), html = $('<div class=\"k-calendar-container\"><div class=\"k-scheduler-calendar\"></div></div>');\n                if (!that.popup) {\n                    that.popup = new Popup(html, {\n                        anchor: target,\n                        activate: function () {\n                            if (that.popup && that.calendar) {\n                                that.popup._toggleResize(false);\n                                that.calendar.element.find('table').trigger('focus');\n                                that.popup._toggleResize(true);\n                            }\n                        },\n                        open: function () {\n                            if (!that.calendar) {\n                                that.calendar = new Calendar(this.element.find('.k-scheduler-calendar'), {\n                                    change: function () {\n                                        var date = this.value();\n                                        if (!that.trigger('navigate', {\n                                                view: that._selectedViewName,\n                                                action: 'changeDate',\n                                                date: date\n                                            })) {\n                                            that.date(date);\n                                            that.popup.close();\n                                        }\n                                        if (!that._isMobile()) {\n                                            that._selectedView.element.trigger('focus');\n                                            that.toolbar.find('.k-nav-current').trigger('focus').addClass(FOCUSEDSTATE);\n                                        }\n                                    },\n                                    min: that.options.min,\n                                    max: that.options.max\n                                });\n                            }\n                            that.calendar.element.on('keydown' + NS, function (e) {\n                                if (e.keyCode === keys.ESC || e.keyCode === keys.TAB) {\n                                    that.popup.close();\n                                    that._selectedView.element.trigger('focus');\n                                    that.toolbar.find('.k-nav-current').trigger('focus').addClass(FOCUSEDSTATE);\n                                }\n                            });\n                            that.calendar.setOptions({\n                                start: that._selectedViewName === 'year' ? 'decade' : 'month',\n                                depth: that._selectedViewName === 'year' ? 'decade' : 'month'\n                            });\n                            that.calendar.value(that.date());\n                        },\n                        copyAnchorStyles: false\n                    });\n                }\n                that.popup.open();\n            },\n            refresh: function (e) {\n                var that = this;\n                var view = this.view();\n                var preventRefresh = e && e.action === 'itemchange' && (this._editor.editable || this._preventRefresh) || this.dataSource.options.type === 'signalr' && this._preventRefresh;\n                this._progress(false);\n                this.angular('cleanup', function () {\n                    return { elements: that.items() };\n                });\n                e = e || {};\n                if (!view) {\n                    return;\n                }\n                if (preventRefresh) {\n                    this._attemptRefresh = true && this.dataSource.options.type === 'signalr';\n                    return;\n                }\n                if (this.trigger('dataBinding', {\n                        action: e.action || 'rebind',\n                        index: e.index,\n                        items: e.items\n                    })) {\n                    return;\n                }\n                if (!(e && e.action === 'resize') && this._editor) {\n                    this._editor.close();\n                }\n                this._data = this.dataSource.expand(view.startDate(), view.visibleEndDate());\n                view.refreshLayout();\n                view.render(this._data);\n                this.trigger('dataBound');\n                this._attemptRefresh = false;\n            },\n            slotByPosition: function (x, y) {\n                var view = this.view();\n                if (!view._slotByPosition) {\n                    return null;\n                }\n                var slot = view._slotByPosition(x, y);\n                if (!slot) {\n                    return null;\n                }\n                return {\n                    startDate: slot.startDate(),\n                    endDate: slot.endDate(),\n                    groupIndex: slot.groupIndex,\n                    element: slot.element,\n                    isDaySlot: slot.isDaySlot\n                };\n            },\n            slotByElement: function (element) {\n                var offset = $(element).offset();\n                return this.slotByPosition(offset.left, offset.top);\n            },\n            resourcesBySlot: function (slot) {\n                return this.view()._resourceBySlot(slot);\n            }\n        });\n        var defaultViews = {\n            day: { type: 'kendo.ui.DayView' },\n            week: { type: 'kendo.ui.WeekView' },\n            workWeek: { type: 'kendo.ui.WorkWeekView' },\n            agenda: { type: 'kendo.ui.AgendaView' },\n            month: { type: 'kendo.ui.MonthView' },\n            timeline: { type: 'kendo.ui.TimelineView' },\n            timelineWeek: { type: 'kendo.ui.TimelineWeekView' },\n            timelineWorkWeek: { type: 'kendo.ui.TimelineWorkWeekView' },\n            timelineMonth: { type: 'kendo.ui.TimelineMonthView' },\n            year: { type: 'kendo.ui.YearView' }\n        };\n        ui.plugin(Scheduler);\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Scheduler.prototype);\n            var SCHEDULER_EXPORT = 'k-scheduler-pdf-export';\n            Scheduler.fn._drawPDF = function (progress) {\n                var wrapper = this.wrapper;\n                var styles = wrapper[0].style.cssText;\n                wrapper.css({\n                    width: wrapper.width(),\n                    height: wrapper.height()\n                });\n                wrapper.addClass(SCHEDULER_EXPORT);\n                var scheduler = this;\n                var promise = new $.Deferred();\n                var table = wrapper.find('.k-scheduler-content').find('table').css('table-layout', 'auto');\n                setTimeout(function () {\n                    table.css('table-layout', 'fixed');\n                    scheduler.resize(true);\n                    scheduler._drawPDFShadow({}, { avoidLinks: scheduler.options.pdf.avoidLinks }).done(function (group) {\n                        var args = {\n                            page: group,\n                            pageNumber: 1,\n                            progress: 1,\n                            totalPages: 1\n                        };\n                        progress.notify(args);\n                        promise.resolve(args.page);\n                    }).fail(function (err) {\n                        promise.reject(err);\n                    }).always(function () {\n                        wrapper[0].style.cssText = styles;\n                        wrapper.removeClass(SCHEDULER_EXPORT);\n                        scheduler.resize(true);\n                        scheduler.resize(true);\n                    });\n                });\n                return promise;\n            };\n        }\n        var TimezoneEditor = Widget.extend({\n            init: function (element, options) {\n                var that = this, zones = kendo.timezone.windows_zones;\n                if (!zones || !kendo.timezone.zones_titles) {\n                    throw new Error('kendo.timezones.min.js is not included.');\n                }\n                Widget.fn.init.call(that, element, options);\n                that.wrapper = that.element;\n                that._zonesQuery = new kendo.data.Query(zones);\n                that._zoneTitleId = kendo.guid();\n                that._zoneTitlePicker();\n                that._zonePicker();\n                that._zoneTitle.bind('cascade', function () {\n                    if (!this.value()) {\n                        that._zone.wrapper.hide();\n                    }\n                });\n                that._zone.bind('cascade', function () {\n                    that._value = this.value();\n                    that.trigger(CHANGE);\n                });\n                that.value(that.options.value);\n            },\n            options: {\n                name: 'TimezoneEditor',\n                value: '',\n                optionLabel: 'No timezone'\n            },\n            events: [CHANGE],\n            _zoneTitlePicker: function () {\n                var that = this, zoneTitle = $('<input id=\"' + that._zoneTitleId + '\" aria-label=\"' + that.options.title + '\"/>').appendTo(that.wrapper);\n                that._zoneTitle = new kendo.ui.DropDownList(zoneTitle, {\n                    dataSource: kendo.timezone.zones_titles,\n                    dataValueField: 'other_zone',\n                    dataTextField: 'name',\n                    optionLabel: that.options.optionLabel\n                });\n            },\n            _zonePicker: function () {\n                var that = this, zone = $('<input aria-label=\"' + that.options.title + '\"/>').appendTo(this.wrapper);\n                that._zone = new kendo.ui.DropDownList(zone, {\n                    dataValueField: 'zone',\n                    dataTextField: 'territory',\n                    dataSource: that._zonesQuery.data,\n                    cascadeFrom: that._zoneTitleId,\n                    dataBound: function () {\n                        that._value = this.value();\n                        this.wrapper.toggle(this.dataSource.view().length > 1);\n                    }\n                });\n                that._zone.wrapper.hide();\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                kendo.destroy(this.wrapper);\n            },\n            value: function (value) {\n                var that = this, zone;\n                if (value === undefined) {\n                    return that._value;\n                }\n                zone = that._zonesQuery.filter({\n                    field: 'zone',\n                    operator: 'eq',\n                    value: value\n                }).data[0];\n                if (zone) {\n                    that._zoneTitle.value(zone.other_zone);\n                    that._zone.value(zone.zone);\n                } else {\n                    that._zoneTitle.select(0);\n                }\n            }\n        });\n        ui.plugin(TimezoneEditor);\n        var ZONETITLEOPTIONTEMPLATE = kendo.template('<option value=\"#=other_zone#\">#=name#</option>');\n        var ZONEOPTIONTEMPLATE = kendo.template('<option value=\"#=zone#\">#=territory#</option>');\n        var MobileTimezoneEditor = Widget.extend({\n            init: function (element, options) {\n                var that = this, zones = kendo.timezone.windows_zones;\n                if (!zones || !kendo.timezone.zones_titles) {\n                    throw new Error('kendo.timezones.min.js is not included.');\n                }\n                Widget.fn.init.call(that, element, options);\n                that.wrapper = that.element;\n                that._zonesQuery = new kendo.data.Query(zones);\n                that._zoneTitlePicker();\n                that._zonePicker();\n                that.value(that.options.value);\n            },\n            options: {\n                name: 'MobileTimezoneEditor',\n                optionLabel: 'No timezone',\n                value: ''\n            },\n            events: [CHANGE],\n            _bindZones: function (value) {\n                var data = value ? this._filter(value) : [];\n                this._zone.html(this._options(data, ZONEOPTIONTEMPLATE));\n            },\n            _filter: function (value) {\n                return this._zonesQuery.filter({\n                    field: 'other_zone',\n                    operator: 'eq',\n                    value: value\n                }).data;\n            },\n            _options: function (data, template, optionLabel) {\n                var idx = 0;\n                var html = '';\n                var length = data.length;\n                if (optionLabel) {\n                    html += template({\n                        other_zone: '',\n                        name: optionLabel\n                    });\n                }\n                for (; idx < length; idx++) {\n                    html += template(data[idx]);\n                }\n                return html;\n            },\n            _zoneTitlePicker: function () {\n                var that = this;\n                var options = that._options(kendo.timezone.zones_titles, ZONETITLEOPTIONTEMPLATE, that.options.optionLabel);\n                that._zoneTitle = $('<select>' + options + '</select>').appendTo(that.wrapper).on('change', function () {\n                    var value = this.value;\n                    var zone = that._zonePickerLabel;\n                    var zoneSelect = zone.find('select');\n                    that._bindZones(value);\n                    if (value && zoneSelect.children().length > 1) {\n                        zone.show();\n                    } else {\n                        zone.hide();\n                    }\n                    that._value = that._zone[0].value;\n                    that.trigger(CHANGE);\n                });\n            },\n            _zonePicker: function () {\n                var that = this;\n                that._zonePickerLabel = $('<li class=\\'k-item k-listgroup-item k-zonepicker\\' style=\\'display:none\\'>' + '<label class=\\'k-label k-listgroup-form-row\\'>' + '<span class=\\'k-item-title k-listgroup-form-field-label\\'></span>' + '<div class=\\'k-listgroup-form-field-wrapper\\'></div>' + '</label>' + '</li>');\n                that._zone = $('<select></select>').appendTo(that._zonePickerLabel.find('div')).on('change', function () {\n                    that._value = this.value;\n                    that.trigger(CHANGE);\n                });\n                this.wrapper.closest('.k-item').after(that._zonePickerLabel);\n                that._bindZones(that._zoneTitle.val());\n                that._value = that._zone[0].value;\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                kendo.destroy(this.wrapper);\n            },\n            value: function (value) {\n                var that = this;\n                var zonePicker = that._zone;\n                var other_zone = '';\n                var zone_value = '';\n                var zone;\n                if (value === undefined) {\n                    return that._value;\n                }\n                zone = that._zonesQuery.filter({\n                    field: 'zone',\n                    operator: 'eq',\n                    value: value\n                }).data[0];\n                if (zone) {\n                    zone_value = zone.zone;\n                    other_zone = zone.other_zone;\n                }\n                that._zoneTitle.val(other_zone);\n                that._bindZones(other_zone);\n                zonePicker.val(zone_value);\n                zone_value = zonePicker[0].value;\n                if (zone_value && zonePicker.children.length > 1) {\n                    that._zonePickerLabel.show();\n                } else {\n                    that._zonePickerLabel.hide();\n                }\n                that._value = zone_value;\n            }\n        });\n        ui.plugin(MobileTimezoneEditor);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}