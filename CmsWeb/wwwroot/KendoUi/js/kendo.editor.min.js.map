{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","UndoTool","emptyElementContent","emptyTableCellContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","REFRESH_INTERVAL","DEFAULT_LANGUAGE","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","iconTextButtonTemplate","tableWizardButtonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","cssClass","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","replace","retrieveComments","messages","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","alignment","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","lists","indenting","formatPainter","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","deserializedRoot","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","defaultValue","trim","Serializer","htmlToDom","deserialization","getAllComments","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","resize","notify","setOptions","_initializePlaceholder","_togglePlaceholder","show","body","$body","placeholder","toggleClass","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","draggableElement","resizableWidget","resizable","isResizable","isPlainObject","insertAfter","kendoResizable","start","currentTarget","initialSize","last","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","getKendoResizable","draggable","ignore","_initializeElementResizing","ElementResizingFactory","current","create","_showElementResizeHandlesProxy","_showElementResizeHandles","bind","_destroyElementResizing","elementResizing","destroy","unbind","parentNode","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","lang","hide","title","frameBorder","tabIndex","location","hostname","contentWindow","contentDocument","one","decorateFrom","getElementsByTagName","getAttribute","open","write","isRtl","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","eventNames","t","NS","_handlers","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","interval","createElement","setAttribute","appendChild","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","mouseover dragenter","htmlHeight","parentElement","target","nodeName","_cachedHeight","mouseout dragleave drop contextmenu","restoreHeight","range","left","container","offset","direction","next","nextChar","keyCode","BACKSPACE","DELETE","F10","preventPopupHide","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","createRange","selectNode","cut copy paste drop dragover","focusin","hasAttribute","focusout","toolbarContainerElement","active","get","contains","focused","removeClass","$head","head","immutables","Immutables","parents","stopPropagation","gecko","which","is","tagName","o","cmd","toolsFromShortcut","changesContent","refresh","_destroyResizings","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","msie","tempInput","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","domToXhtml","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","scrollHeight","clientHeight","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","async","change","managesUndoRedo","plugin","initialize","unselectable","aria-label","commandArguments","noop","nodes","key","ctrl","edge","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","selfClosing","inlineElements","inline","fillAttrs","normalize","node","version","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","isPrevBlock","isNextBlock","el","isBlock","isSelfClosing","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","wrap","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","each","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","removeAttr","rowIndex","cells","colIndex","cellIndex","cell","registeredColumns","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","row","col","colspan","rowspan","k","l","timestamp","Date","getTime","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","_getNumberOfHeaderColumns","numberOfHeaderRows","thead","number","self","supportsLeadingWhitespace","isFunction","TD","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","children","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tag","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","htmlEncode","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","jqNode","serialize","hasClass","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","b","u","styleObj","item","splice","face","script","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","select","selectBox","view","dataSource","decorate","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","ImmutablesRangeIterator","ImmutablesRangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","traverse","callback","nodeIndex","inStartContainer","inEndContainer","getSubRange","subRange","movedStart","movedEnd","enumerate","visit","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","isBomSelected","collapsedToStart","startParent","endParent","startIndex","endIndex","charAt","editableTextNodes","immutableParent","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","complexBlocks","toolsToBeUpdated","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","expandImmutablesIn","startImmutableParent","endImmutableParent","immutablesContext","editableNodes","randomId","chars","round","random","serialized","replaceWith","deletingKey","updateToolOptions","_initOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","cancelDeleting","closestSelectionLi","closestImmutableLi","backspace","del","nextImmutable","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","finishUpdate","endRestorePoint","GenericCommand","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-list-roman-upper","k-i-list-roman-lower","k-i-import","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table-insert","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-table-position-left","k-i-table-position-center","k-i-table-position-right","k-i-clear-css","k-i-cells-merge-horizontally","k-i-cells-merge-vertically","k-i-cell-split-horizontally","k-i-cell-split-vertically","k-i-copy-format","k-i-apply-format",".k-i-undo","k-i-redo","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","anchor","copyAnchorStyles","activate","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_getWindowWidth","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","not","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","dropdown","colorpicker","editorTools","move","constrain","focusableItems","focusElement","currentContainer","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","display","uiData","widget","groupUi","uiElement","trackImmutables","_resize","containerWidth","toolbarWindow","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","groupWidth","ViewHtmlCommand","dialog","center","FormatCommand","FormatTool","MOUSEDOWN_NS","KEYDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","newRange","ColorTool","palette","_widget","ColorPicker","closeOnSelect","views","preview","toolIcon","storedRange","_inputFocused","picker","sender","_popup","_value","toCssRgba","fontWeight","fontStyle","lastIndexOfRegExp","str","indexOfRegExp","r","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","_initialText","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","detection","startNode","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","listElements","BlockFormatFinder","candidate","suitable","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","images","imageFormat","imageAttributes","nonImages","_handleImmutables","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","immutalbeParent","blockFormatter","formatTag","ListFormatter","BlockFormatTool","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","addLastSection","lastSection","sections","lastNodes","ul","fragment","ListCommand","ListTool","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","keyDown","dialogHeight","isIE","ImageBrowser","transport","read","_imageBrowser","ev","selected","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","genericCommand","postProcess","InsertHtmlTool","_selectBox","selectbox","initialValue","defaultExportAsItems","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","displayName","unshift","valueTemplate","_exec","indentDirection","IndentFormatter","targets","parentList","siblingList","nestedList","targetIndex","mapImmutables","getListTypeAttr","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","parentChildrenLength","emptyParagraphContent","_insertParagraphAfter","NewLineCommand","filler","oldIE","kbrParent","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","twTool","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","InsertTableTool","cols","tableFromLocation","floor","clientY","cellHeight","clientX","scrollLeft","cellWidth","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_valid","status","selectedRows","selectedColumns","changed","tableSize","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","prop","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","rowSpanIndex","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","after","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardRange","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","splittable","fragmentsHtml","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","applicable","elm","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","bulletRgx","extractListLevels","msoListRegExp","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","listIndex","levelType","blockChildren","lastMargin","levels","acceptedNameTags","isParentTable","removeAttributes","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","removeTextNodes","trs","currentNode","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","tbody","cleaner","tdCleaner","cellText","getSibling","PREVIOUS_SIBLING","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","removeTableContent","backspaceHandler","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","chrome","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","isEndOfLink","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","inlineStyles","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","isEmptyInline","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","lowerBound","upperBound","getScrollBarWidth","calculatePercentageRatio","total","inPercentages","STRING","REGEX_NUMBER_IN_PERCENTAGES","inPixels","REGEX_NUMBER_IN_PIXELS","toPercentages","PERCENTAGE","toPixels","PIXEL","global","math","ResizingUtils","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","WIDTH","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","handleOffset","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","HandlePositioningStrategy","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","HandleDraggingStrategy","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","rootLeft","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","isUndefined","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","ELEMENT_RESIZING_CLASS","DROP","COLUMN","IMG","ELEMENT_TYPES","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_onResizeHandleMouseOver","_onResizeHandleMouseOut","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","isWidthInPercentages","parentColumn","columnsLength","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","Number","MAX_SAFE_INTEGER","factory","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","HEADERS","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","tableProperties","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","associatedCells","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","cellPropToAll","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","tds","swapCell","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","tStyle","captionClone","tableAlignment","numberOfHeaderColumns","tableJson","_getAlignment","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","vAlign","hAlign","collection","TableWizardEditTool","numericTextBoxSettings","borderStyles","DEFAULT_NUMBER_OF_COLS_AND_ROWS","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","okHandler","collectDialogValues","tableData","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","onColumnsNumberChange","onRowsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initBorderStyleDropDown","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initAssociationDropDown","valuePrimitive","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","optionLabel","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents"],"mappings":"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","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var SELECT = 'select';\n        var SELECT_OVERLAY_SELECTOR = 'select.k-select-overlay';\n        var PLACEHOLDER_CLASS = 'k-placeholder';\n        var PLACEHOLDER_TAG_ID = 'placeholder';\n        var REFRESH_INTERVAL = 200;\n        var DEFAULT_LANGUAGE = 'en';\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"0\" cellpadding=\"0\" class=\"k-widget k-editor\" role=\"presentation\">' + '<tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\"></ul></td></tr>' + '<tr><td class=\"k-editable-area k-editor-content\"></td></tr>' + '</tbody>' + '</table>',\n            buttonTemplate: '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' + '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-tool\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' + '<span class=\"#= iconCssClass #\"></span>' + '<span class=\"k-tool-text k-button-text\">#= data.title #</span>' + '</button>',\n            iconTextButtonTemplate: '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' + '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-i-import k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' + '<span class=\"k-button-icon #= iconCssClass #\"></span>' + '<span class=\"k-button-text\">#= data.title #</span>' + '</button>',\n            tableWizardButtonTemplate: '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' + '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-tool k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' + '<span class=\"#= iconCssClass #\"></span>' + '<span class=\"k-tool-text\">#= data.title #</span>' + '</button>',\n            colorPickerTemplate: '<input class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select>',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select></span>',\n            separatorTemplate: '<span class=\"k-separator\"></span>',\n            overflowAnchorTemplate: '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-tool k-overflow-anchor\" data-popup' + ' title=\"#= data.title #\" aria-label=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' + '<span class=\"k-icon k-i-more-vertical k-button-icon\"></span>' + '</button>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            getToolCssClass: function (name) {\n                var toolCssClassNames = {\n                    superscript: 'sup-script',\n                    subscript: 'sub-script',\n                    justifyLeft: 'align-left',\n                    justifyCenter: 'align-center',\n                    justifyRight: 'align-right',\n                    justifyFull: 'align-justify',\n                    insertUnorderedList: 'list-unordered',\n                    insertOrderedList: 'list-ordered',\n                    insertUpperRomanList: 'list-roman-upper',\n                    insertLowerRomanList: 'list-roman-lower',\n                    'import': 'import',\n                    indent: 'indent-increase',\n                    outdent: 'indent-decrease',\n                    createLink: 'link-horizontal',\n                    unlink: 'unlink-horizontal',\n                    insertImage: 'image',\n                    insertFile: 'file-add',\n                    viewHtml: 'html',\n                    foreColor: 'foreground-color',\n                    backColor: 'paint',\n                    createTable: 'table-insert',\n                    addColumnLeft: 'table-column-insert-left',\n                    addColumnRight: 'table-column-insert-right',\n                    addRowAbove: 'table-row-insert-above',\n                    addRowBelow: 'table-row-insert-below',\n                    deleteRow: 'table-row-delete',\n                    deleteColumn: 'table-column-delete',\n                    mergeCellsHorizontally: 'cells-merge-horizontally',\n                    mergeCellsVertically: 'cells-merge-vertically',\n                    splitCellHorizontally: 'cell-split-horizontally',\n                    splitCellVertically: 'cell-split-vertically',\n                    tableWizard: 'table-properties',\n                    tableWizardInsert: 'table-wizard',\n                    tableAlignLeft: 'table-position-left',\n                    tableAlignCenter: 'table-position-center',\n                    tableAlignRight: 'table-position-right',\n                    cleanFormatting: 'clear-css',\n                    copyFormat: 'copy-format',\n                    applyFormat: 'apply-format'\n                };\n                var cssClass = toolCssClassNames[name];\n                if (cssClass) {\n                    return cssClass;\n                }\n                return name;\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + EditorUtils.getToolCssClass(toolName);\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            },\n            cacheComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace(comments[index], '{' + index + '}');\n                }\n                return content;\n            },\n            retrieveComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace('{' + index + '}', comments[index]);\n                }\n                return content;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            overflowAnchor: 'More tools',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            fileText: 'Text',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogOk: 'Ok',\n            dialogCancel: 'Cancel',\n            cleanFormatting: 'Clean formatting',\n            createTable: 'Create a table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column',\n            mergeCellsHorizontally: 'Merge cells horizontally',\n            mergeCellsVertically: 'Merge cells vertically',\n            splitCellHorizontally: 'Split cells horizontally',\n            splitCellVertically: 'Split cells vertically',\n            tableAlignLeft: 'Table Align Left',\n            tableAlignCenter: 'Table Align Center',\n            tableAlignRight: 'Table Align Right',\n            tableWizard: 'Table Wizard',\n            tableTab: 'Table',\n            cellTab: 'Cell',\n            accessibilityTab: 'Accessibility',\n            caption: 'Caption',\n            summary: 'Summary',\n            width: 'Width',\n            height: 'Height',\n            units: 'Units',\n            cellSpacing: 'Cell Spacing',\n            cellPadding: 'Cell Padding',\n            cellMargin: 'Cell Margin',\n            alignment: 'Alignment',\n            background: 'Background',\n            cssClass: 'CSS Class',\n            id: 'ID',\n            border: 'Border',\n            borderStyle: 'Border Style',\n            collapseBorders: 'Collapse borders',\n            wrapText: 'Wrap text',\n            associateCellsWithHeaders: 'Associate headers',\n            alignLeft: 'Align Left',\n            alignCenter: 'Align Center',\n            alignRight: 'Align Right',\n            alignLeftTop: 'Align Left Top',\n            alignCenterTop: 'Align Center Top',\n            alignRightTop: 'Align Right Top',\n            alignLeftMiddle: 'Align Left Middle',\n            alignCenterMiddle: 'Align Center Middle',\n            alignRightMiddle: 'Align Right Middle',\n            alignLeftBottom: 'Align Left Bottom',\n            alignCenterBottom: 'Align Center Bottom',\n            alignRightBottom: 'Align Right Bottom',\n            alignRemove: 'Remove Alignment',\n            columns: 'Columns',\n            rows: 'Rows',\n            selectAllCells: 'Select All Cells',\n            exportAs: 'Export As',\n            'import': 'Import',\n            print: 'Print',\n            headerRows: 'Header Rows',\n            headerColumns: 'Header Cols',\n            tableSummaryPlaceholder: 'Summary attribute is not HTML5 compatible.',\n            associateNone: 'None',\n            associateScope: 'Associate using \\'scope\\' attribute',\n            associateIds: 'Associate using Ids',\n            copyFormat: 'Copy format',\n            applyFormat: 'Apply format',\n            borderNone: 'None',\n            undo: 'Undo',\n            redo: 'Redo'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            formatPainter: [\n                'copyFormat',\n                'applyFormat'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'tableWizard',\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn',\n                'mergeCellsHorizontally',\n                'mergeCellsVertically',\n                'splitCellHorizontally',\n                'splitCellVertically',\n                'tableAlignLeft',\n                'tableAlignCenter',\n                'tableAlignRight'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type, comments;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (!value.replace(/\\s/g, '').length) {\n                        value = value.replace(/\\s/g, '');\n                    }\n                    if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                        value = domElement.defaultValue;\n                    }\n                    var deserializedRoot = editorNS.Serializer.htmlToDom(value, $('<div></div>')[0], that.options.deserialization);\n                    comments = dom.getAllComments(deserializedRoot);\n                    value = EditorUtils.cacheComments(value, comments);\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                    value = EditorUtils.retrieveComments(value, comments);\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || '\\uFEFF');\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function (e) {\n                        that._mouseup(e);\n                    }\n                });\n                that._initializeImmutables();\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n                this._initializePlaceholder();\n            },\n            _togglePlaceholder: function (show) {\n                var that = this, body = that.body, $body = $(body), placeholder = that.options.placeholder;\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n                $body.attr('aria-label', function () {\n                    return show ? placeholder : '';\n                });\n                $body.toggleClass(PLACEHOLDER_CLASS, show);\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    var draggableElement = $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-i-arrow-45-down-right\\'></span></div>').insertAfter(this.textarea);\n                    this.wrapper.addClass('k-resizable');\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        draggableElement: draggableElement,\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td').last().append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n            _initializeElementResizing: function () {\n                var editor = this;\n                kendo.ui.editor.ElementResizingFactory.current.create(editor);\n                editor._showElementResizeHandlesProxy = proxy(editor._showElementResizeHandles, editor);\n                editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n            },\n            _destroyElementResizing: function () {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n                if (elementResizing) {\n                    elementResizing.destroy();\n                    editor.elementResizing = null;\n                }\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            },\n            _showElementResizeHandles: function () {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n                if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                    elementResizing.showResizeHandles();\n                } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                    editor._destroyElementResizing();\n                }\n            },\n            _initializeColumnResizing: function () {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n            _destroyColumnResizing: function () {\n                var editor = this;\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n            _initializeRowResizing: function () {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n            _destroyRowResizing: function () {\n                var editor = this;\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                var lang = '';\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content k-iframe').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                    iframe.src = src;\n                }\n                if (!iframe.src) {\n                    iframe.src = '';\n                }\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                lang = document.getElementsByTagName('html')[0].getAttribute('lang') || DEFAULT_LANGUAGE;\n                doc.open();\n                doc.write('<!DOCTYPE html><html lang=\\'' + lang + '\\'><head>' + '<meta charset=\\'utf-8\\' />' + '<title>Kendo UI Editor content</title>' + '<style>' + 'html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}' + 'body{padding:0;margin:0;}' + 'body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + (os.ios ? 'word-break:keep-all;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table th{outline:0;border: 1px dotted #999;}' + '.k-table p{margin:0;padding:0;}' + '.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}' + '.k-column-resize-handle {width: 100%; height: 100%;}' + '.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}' + '.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}' + '.k-row-resize-handle {display: table; width: 100%; height: 100%;}' + '.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}' + '.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}' + '.k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}' + '.k-element-resize-handle {width: 100%; height: 100%;}' + '.k-element-resize-handle.k-resize-east{cursor:e-resize;}' + '.k-element-resize-handle.k-resize-north{cursor:n-resize;}' + '.k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}' + '.k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}' + '.k-element-resize-handle.k-resize-south{cursor:s-resize;}' + '.k-element-resize-handle.k-resize-southeast{cursor:se-resize;}' + '.k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}' + '.k-element-resize-handle.k-resize-west{cursor:w-resize;}' + '.k-table.k-element-resizing{opacity:0.6;}' + '.k-placeholder{color:grey}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                    if (textarea) {\n                        textarea.trigger('change');\n                    }\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var editor = this;\n                var NS = '.kendoEditor';\n                var eventNames;\n                var i;\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        eventNames = kendo.applyEventMap(type).split(' ');\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    if (!doc.body) {\n                        var body = doc.createElement('body');\n                        body.setAttribute('contenteditable', 'true');\n                        body.setAttribute('autocorrect', 'off');\n                        doc.getElementsByTagName('html')[0].appendChild(body);\n                        var interval = setInterval(function () {\n                            if ($(editor.document).find('body').length > 1) {\n                                $(editor.document).find('body').last().remove();\n                                window.clearInterval(interval);\n                            }\n                        }, 10);\n                    }\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                editor._registerHandler(mousedownTrigger, 'down', proxy(editor._mousedown, editor));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._initializePlaceholder();\n                this._spellCorrect(editor);\n                this._registerHandler(editor.document, {\n                    'mouseover dragenter': function (e) {\n                        var height = $(editor.body).height();\n                        var htmlHeight = $(editor.body.parentElement).height();\n                        if (htmlHeight > height && e.target.nodeName.toLowerCase() === 'html') {\n                            editor._cachedHeight = '' + editor.body.style.height;\n                            editor.body.style.height = '100%';\n                        }\n                    },\n                    'mouseout dragleave drop contextmenu': function (e) {\n                        var restoreHeight = function () {\n                            if (editor._cachedHeight !== undefined && e.target === editor.body) {\n                                editor.body.style.height = editor._cachedHeight;\n                                delete editor._cachedHeight;\n                            }\n                        };\n                        if (e.type === 'contextmenu') {\n                            setTimeout(function () {\n                                restoreHeight();\n                            }, 10);\n                        } else {\n                            restoreHeight();\n                        }\n                    }\n                });\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            editor.toolbar.preventPopupHide = true;\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == '\\uFEFF') {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showElementResizeHandles();\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            keys.BACKSPACE,\n                            keys.TAB,\n                            keys.PAGEUP,\n                            keys.PAGEDOWN,\n                            keys.END,\n                            keys.HOME,\n                            keys.LEFT,\n                            keys.UP,\n                            keys.RIGHT,\n                            keys.DOWN,\n                            keys.INSERT,\n                            keys.DELETE\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            window.clearTimeout(this._refreshInterval);\n                            this._refreshInterval = window.setTimeout(function () {\n                                editor._selectionChange();\n                            }, REFRESH_INTERVAL);\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste drop dragover': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                            editor._togglePlaceholder(false);\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n                            if (active != body && !$.contains(body, active) && !toolbar.focused() && !toolbar.preventPopupHide) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                            editor._togglePlaceholder(!editor.value().trim());\n                        }, 10);\n                    }\n                });\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            },\n            _initializePlaceholder: function () {\n                var that = this, placeholder = that.options.placeholder, style, $head;\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n                style = '<style id=\\'' + PLACEHOLDER_TAG_ID + '\\'>.' + PLACEHOLDER_CLASS + ':before { content: \\'' + placeholder + '\\'; }' + '</style>';\n                $head = $(that.document.head);\n                $head.find('#' + PLACEHOLDER_TAG_ID).remove();\n                $head.append(style);\n                that._togglePlaceholder(!that.value().trim());\n            },\n            _initializeImmutables: function () {\n                var that = this, editorNS = kendo.ui.editor;\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n            _mousedown: function (e) {\n                var editor = this;\n                editor._selectionStarted = true;\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n                if (browser.gecko) {\n                    return;\n                }\n                var target = $(e.target).closest('a[href]');\n                if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target && target.is('a[href]')) {\n                    window.open(target.attr('href'), '_new');\n                }\n                if (e.target.tagName && e.target.tagName.toLowerCase() === 'html') {\n                    setTimeout(function () {\n                        editor.body.focus();\n                    }, 0);\n                }\n            },\n            _mouseup: function (e) {\n                var that = this;\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that._destroyResizings();\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                placeholder: '',\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial, Helvetica, sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\"Courier New\", Courier, monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia, serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact, Charcoal, sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\"Lucida Console\", Monaco, monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma, Geneva, sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\"Times New Roman\", Times, serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\"Trebuchet MS\", Helvetica, sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana, Geneva, sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, [\n                    'undo',\n                    'redo'\n                ], toolGroups.alignment, toolGroups.formatPainter, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var editor = this;\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                editor._destroyUploadWidget();\n                editor._destroyResizings();\n                kendo.destroy(this.wrapper);\n            },\n            _destroyResizings: function () {\n                var editor = this;\n                editor._destroyElementResizing();\n                kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).trigger('focus');\n                    tempInput.trigger('blur').remove();\n                }\n            },\n            _destroyUploadWidget: function () {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n                if (!iframe && body.scrollHeight > body.clientHeight) {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n                } else if (activeElement != body && activeElement != iframe) {\n                    scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                    this._togglePlaceholder(!value.trim());\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            _containsRange: function (range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) && dom.isAncestorOrSelf(body, range.endContainer);\n            },\n            _deleteSavedRange: function () {\n                if ('_range' in this) {\n                    delete this._range;\n                }\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf' && name !== 'exportAs') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({\n                            range: range,\n                            body: that.body,\n                            immutables: !!that.immutables\n                        }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            },\n            execCommand: function (command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n                command.editor = this;\n                command.exec();\n            }\n        });\n        Editor.defaultTools = {};\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title,\n                    'aria-label': options.title\n                });\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        var UndoTool = Tool.extend({\n            command: $.noop,\n            update: function (ui, nodes, undoRedoStack) {\n                var that = this, name = that.options.name;\n                switch (name) {\n                case 'undo':\n                    ui.attr('disabled', !undoRedoStack.canUndo());\n                    break;\n                case 'redo':\n                    ui.attr('disabled', !undoRedoStack.canRedo());\n                    break;\n                default:\n                    break;\n                }\n            }\n        });\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        EditorUtils.registerTool('undo', new UndoTool({\n            key: 'Z',\n            ctrl: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Undo'\n            })\n        }));\n        EditorUtils.registerTool('redo', new UndoTool({\n            key: 'Y',\n            ctrl: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Redo'\n            })\n        }));\n        var emptyElementContent = '\\uFEFF';\n        var emptyTableCellContent = emptyElementContent;\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = '&nbsp;';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), selfClosing = makeMap('area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr'.split(',')), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    normalize(node);\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        normalize(node);\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getAllComments: function (rootElem) {\n                var comments = [];\n                var iterator = document.createNodeIterator(rootElem, NodeFilter.SHOW_COMMENT, function () {\n                    return NodeFilter.FILTER_ACCEPT;\n                }, false);\n                var curNode = iterator.nextNode();\n                while (curNode) {\n                    comments.push(curNode.nodeValue);\n                    curNode = iterator.nextNode();\n                }\n                return comments;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            nodeTypes: {\n                ELEMENT_NODE: 1,\n                ATTRIBUTE_NODE: 2,\n                TEXT_NODE: 3,\n                CDATA_SECTION_NODE: 4,\n                ENTITY_REFERENCE_NODE: 5,\n                ENTITY_NODE: 6,\n                PROCESSING_INSTRUCTION_NODE: 7,\n                COMMENT_NODE: 8,\n                DOCUMENT_NODE: 9,\n                DOCUMENT_TYPE_NODE: 10,\n                DOCUMENT_FRAGMENT_NODE: 11,\n                NOTATION_NODE: 12\n            },\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            isBom: function (node) {\n                return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (Dom.isBom(node)) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node) || Dom.is(node, 'span') && node.className == 'k-br';\n            },\n            tableCell: function (node) {\n                return Dom.is(node, 'td') || Dom.is(node, 'th');\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (Dom.emptyTextNode(child)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyTextNode: function (node) {\n                return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return node && Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            allWhitespaceContent: function (node) {\n                var child = node.firstChild;\n                while (child && Dom.isWhitespace(child)) {\n                    child = child.nextSibling;\n                }\n                return !child;\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            htmlIndentSpace: function (node) {\n                if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                    return false;\n                }\n                if (emptyspace.test(node.nodeValue)) {\n                    return true;\n                }\n                var sibling = function (el, direction) {\n                    while (el[direction]) {\n                        el = el[direction];\n                        if (Dom.significantNodes([el]).length > 0) {\n                            return el;\n                        }\n                    }\n                };\n                var parent = node.parentNode;\n                var prev = sibling(node, 'previousSibling');\n                var next = sibling(node, 'nextSibling');\n                if (bom.test(node.nodeValue)) {\n                    return !!(prev || next);\n                }\n                if ($(parent).is('tr,tbody,thead,tfoot,table,ol,ul')) {\n                    return true;\n                }\n                if (Dom.isBlock(parent) || Dom.is(parent, 'body')) {\n                    var isPrevBlock = prev && Dom.isBlock(prev);\n                    var isNextBlock = next && Dom.isBlock(next);\n                    if (!next && isPrevBlock || !prev && isNextBlock || isPrevBlock && isNextBlock) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isSelfClosing: function (node) {\n                return selfClosing[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            isBr: function (node) {\n                return Dom.name(node) == 'br';\n            },\n            list: function (node) {\n                var name = node ? Dom.name(node) : '';\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node, toStart) {\n                var doc = node.ownerDocument;\n                var wnd = Dom.windowFromDocument(doc);\n                var windowHeight = wnd.innerHeight;\n                var scrollContainer = Dom.scrollContainer(doc);\n                var element, elementTop, elementHeight, marker;\n                if (Dom.isDataNode(node)) {\n                    if (toStart) {\n                        marker = Dom.create(doc, 'span', { 'innerHTML': '&#xfeff;' });\n                        Dom.insertBefore(marker, node);\n                        element = $(marker);\n                    } else {\n                        element = $(node.parentNode);\n                    }\n                } else {\n                    element = $(node);\n                }\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (toStart || !elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (marker) {\n                    Dom.remove(marker);\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            offset: function (target, offsetParent) {\n                var result = {\n                    top: target.offsetTop,\n                    left: target.offsetLeft\n                };\n                var parent = target.offsetParent;\n                while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                    result.top += parent.offsetTop;\n                    result.left += parent.offsetLeft;\n                    parent = parent.offsetParent;\n                }\n                return result;\n            },\n            restoreScrollTop: function (doc) {\n                if (typeof persistedScrollTop == 'number') {\n                    Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                    persistedScrollTop = undefined;\n                }\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                if (node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            removeChildren: function (node) {\n                while (node.firstChild) {\n                    node.removeChild(node.firstChild);\n                }\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (!Dom.isEmpty(node) && node.childNodes.length === 0 || Dom.isBlock(node) && Dom.allWhitespaceContent(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tags) {\n                if (typeof tags === 'string') {\n                    tags = [tags];\n                }\n                while (node && tags.indexOf(Dom.name(node)) < 0) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            closestBy: function (node, condition, rootCondition) {\n                while (node && !condition(node)) {\n                    if (rootCondition && rootCondition(node)) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            wrapper: function (node) {\n                var wrapper = Dom.closestBy(node, function (el) {\n                    return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n                });\n                return $(wrapper).is('body,.k-editor') ? undefined : wrapper;\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            createEmptyNode: function (document, tagName, attributes) {\n                var node = Dom.attr(document.createElement(tagName), attributes);\n                node.innerHTML = '\\uFEFF';\n                return node;\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            mergeAttributes: function (origin, target, traverseCss) {\n                if (!origin.attributes.length) {\n                    return;\n                }\n                $.each(origin.attributes, function () {\n                    if (this.name !== 'contenteditable' && (!traverseCss || this.name !== STYLE)) {\n                        $(target).attr(this.name, this.value);\n                    }\n                    if (traverseCss && this.name === STYLE) {\n                        $.each(origin.style, function () {\n                            target.style[this] = origin.style[this];\n                        });\n                    }\n                });\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color') || '';\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = kendo.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types) && !$(editable).is('.k-editor')) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var filterFn = function (node) {\n                    return Dom.name(node) == tagName;\n                };\n                return Dom.filterBy(nodes, filterFn, invert);\n            },\n            filterBy: function (nodes, condition, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var match;\n                for (; i < len; i++) {\n                    match = condition(nodes[i]);\n                    if (match && !invert || !match && invert) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            },\n            reMapTableColumns: function (table, colAttr) {\n                Dom._mapColIndices(table, colAttr);\n            },\n            clearTableMappings: function (table, colAttr) {\n                $(table).find('[' + colAttr + ']').removeAttr(colAttr);\n            },\n            _mapColIndices: function (table, colAttr) {\n                var registeredColumns = {};\n                for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n                    var cells = table.rows[rowIndex].cells;\n                    var colIndex = 0;\n                    for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                        var cell = cells[cellIndex];\n                        if (cell.rowSpan > 1) {\n                            this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                        }\n                        if (registeredColumns[rowIndex]) {\n                            while (registeredColumns[rowIndex][colIndex]) {\n                                colIndex++;\n                            }\n                        }\n                        cell.setAttribute(colAttr, colIndex);\n                        if (cell.colSpan > 1) {\n                            colIndex = colIndex + cell.colSpan - 1;\n                        }\n                    }\n                }\n            },\n            _mapColspan: function (cell, rowIndex, colIndex, registeredColumns) {\n                var rowSpan = cell.rowSpan, colSpan = cell.colSpan, index;\n                for (var ci = 0; ci < colSpan; ci++) {\n                    index = colIndex + ci;\n                    for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n                        if (!registeredColumns[ri]) {\n                            registeredColumns[ri] = {};\n                            registeredColumns[ri].length = 0;\n                        }\n                        if (registeredColumns[rowIndex]) {\n                            while (registeredColumns[rowIndex][index]) {\n                                index++;\n                            }\n                        }\n                        registeredColumns[ri][index] = true;\n                        registeredColumns[ri].length++;\n                    }\n                }\n            },\n            associateWithIds: function (table) {\n                var that = this;\n                var numberOfTheadRows = 0;\n                var tableRows = table.rows;\n                var numberOfTableRows = tableRows.length;\n                var theadMatrix = [];\n                var tbodyMatrix = [];\n                var theadRows, i;\n                if (table.tHead) {\n                    theadRows = table.tHead.rows;\n                    numberOfTheadRows = theadRows.length;\n                } else {\n                    numberOfTheadRows = that._getNumberOfHeaderRows(table);\n                    theadRows = [];\n                    for (i = 0; i < numberOfTheadRows; i++) {\n                        theadRows.push(tableRows[i]);\n                    }\n                }\n                for (i = 0; i < numberOfTheadRows; i++) {\n                    theadMatrix.push([]);\n                }\n                for (i = 0; i < numberOfTableRows; i++) {\n                    tbodyMatrix.push([]);\n                }\n                that._generateIdsForColumns(theadMatrix, theadRows);\n                that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n                that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n            },\n            _generateIdsForColumns: function (theadMatrix, theadRows) {\n                var timestamp = new Date().getTime();\n                var numberOfTheadRows = theadRows ? theadRows.length : 0;\n                var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n                for (i = 0; i < numberOfTheadRows; i++) {\n                    row = theadRows[i];\n                    cells = row.cells;\n                    col = 0;\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        id = 'table' + i + j + ++timestamp;\n                        cell.setAttribute('id', id);\n                        colspan = cell.getAttribute('colspan') || 1;\n                        rowspan = cell.getAttribute('rowspan') || 1;\n                        while (theadMatrix[i][j + col]) {\n                            col += 1;\n                        }\n                        for (k = 0; k < rowspan; k++) {\n                            for (l = 0; l < colspan; l++) {\n                                theadMatrix[i + k][j + col + l] = id;\n                            }\n                        }\n                    }\n                }\n            },\n            _generateIdsForRows: function (theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n                var that = this;\n                var timestamp = new Date().getTime();\n                var numberOfTableRows = tableRows.length;\n                var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n                var pushHeaderId = function (row) {\n                    headers.push(row[colIndex]);\n                };\n                for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                    row = tableRows[i];\n                    cells = $(row.cells).filter('th');\n                    col = 0;\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        id = 'table' + i + j + ++timestamp;\n                        cell.setAttribute('id', id);\n                        colspan = cell.getAttribute('colspan') || 1;\n                        rowspan = cell.getAttribute('rowspan') || 1;\n                        while (tbodyMatrix[i][j + col]) {\n                            col += 1;\n                        }\n                        for (k = 0; k < rowspan; k++) {\n                            for (l = 0; l < colspan; l++) {\n                                tbodyMatrix[i + k][j + col + l] = id;\n                            }\n                        }\n                        colIndex = cell.getAttribute('col-index');\n                        headers = [];\n                        theadMatrix.forEach(pushHeaderId);\n                        headers = headers.filter(that._onlyUnique);\n                        cell.setAttribute('headers', headers.join(' ').trim());\n                    }\n                }\n            },\n            _assignIds: function (theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n                var that = this;\n                var numberOfTableRows = tableRows.length;\n                var row, cells, cell, i, j, colIndex, headers;\n                var pushHeaderId = function (row) {\n                    headers.push(row[colIndex]);\n                };\n                for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                    row = tableRows[i];\n                    cells = $(row.cells).filter('td');\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        colIndex = cell.getAttribute('col-index');\n                        headers = tbodyMatrix[i].slice();\n                        theadMatrix.forEach(pushHeaderId);\n                        headers = headers.filter(that._onlyUnique);\n                        cell.setAttribute('headers', headers.join(' ').trim());\n                    }\n                }\n            },\n            _getNumberOfColumns: function (table) {\n                var cells = $(table).find('th, td');\n                var numberOfCols = 0;\n                var cell, i, currentIndex;\n                for (i = 0; i < cells.length; i++) {\n                    cell = cells[i];\n                    currentIndex = Number(cell.getAttribute('col-index')) + 1;\n                    if (currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n                return numberOfCols;\n            },\n            _getNumberOfHeaderColumns: function (table, numberOfHeaderRows) {\n                var rows = table.rows;\n                var numberOfCols = 0;\n                var currentIndex, row, i, j, cell;\n                for (i = numberOfHeaderRows; i < rows.length; i++) {\n                    row = rows[i];\n                    for (j = 0; j < row.cells.length; j++) {\n                        cell = row.cells[j];\n                        if (this.is(cell, 'th')) {\n                            currentIndex = Number(cell.getAttribute('col-index')) + 1;\n                            if (currentIndex > numberOfCols) {\n                                numberOfCols = currentIndex;\n                            }\n                        }\n                    }\n                }\n                return numberOfCols;\n            },\n            _getNumberOfHeaderRows: function (table) {\n                var rows = table.rows;\n                var thead = table.tHead;\n                var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n                var j, row, cell, length;\n                if (number === 0) {\n                    row = rows[0];\n                    length = row.cells && row.cells.length;\n                    while (row && length && this.is(row.cells[0], 'th')) {\n                        for (j = 0; j < length; j++) {\n                            cell = row ? row.cells[j] : null;\n                            if (!this.is(cell, 'th')) {\n                                row = null;\n                            }\n                        }\n                        if (row) {\n                            number += 1;\n                            row = this.next(row);\n                            length = row && row.cells && row.cells.length;\n                        }\n                    }\n                }\n                return number;\n            },\n            _onlyUnique: function (value, index, self) {\n                return self.indexOf(value) === index;\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var br = '<br class=\"k-br\">';\n        var bomSpan = '<span class=\\'k-br\\'>\\uFEFF</span>';\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = kendo.isFunction;\n        var TD = 'td';\n        var Serializer = {\n            toEditableHtml: function (html) {\n                return (html || '').replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _toEditableImmutables: function (body) {\n                var immutable = Editor.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(bomSpan).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(bomSpan).appendTo(body);\n                }\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.children[0] && node.children[0].nodeType != 3) {\n                            node = node.children[0];\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            if (dom.is(node, 'td')) {\n                                node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                            } else {\n                                node.innerHTML = kendo.ui.editor.emptyElementContent;\n                            }\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    var attributesToRemove = [];\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            attributesToRemove.push(name);\n                        }\n                    }\n                    for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                        this.removeAttribute(attributesToRemove[i]);\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var o = options || {};\n                var immutables = o.immutables;\n                html = Serializer.toEditableHtml(html);\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (immutables) {\n                    immutables.deserialize(root);\n                }\n                if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                Serializer._toEditableImmutables(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                var immutables = options && options.immutables;\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                function mapStart(node, tag) {\n                    result.push('<' + tag);\n                    attr(node);\n                    result.push('>');\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            mapStart(node, 'iframe');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            mapStart(node, 'script');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'b');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'i');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'strong');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'em');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span');\n                            var attributes = specifiedAttributes(node);\n                            var style = $(attributes).filter(function (i, item) {\n                                return item.name == 'style';\n                            })[0];\n                            var styleObj = {\n                                nodeName: 'style',\n                                value: 'text-decoration:underline;'\n                            };\n                            if (style) {\n                                styleObj.value = style.value;\n                                if (!/text-decoration/i.test(styleObj.value)) {\n                                    styleObj.value = 'text-decoration:underline;' + styleObj.value;\n                                }\n                                attributes.splice($.inArray(style, attributes), 1);\n                            }\n                            attributes.push(styleObj);\n                            attr(node, attributes);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = kendo.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, 'tr') || dom.is(node, 'td'))) {\n                            specified = false;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (dom.isBom(node)) {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, TD) && node.childNodes.length === 1) {\n                                return true;\n                            }\n                            if (node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous, jqNode;\n                    if (immutables && Editor.Immutables.immutable(node)) {\n                        result.push(immutables.serialize(node));\n                    } else if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        jqNode = $(node);\n                        if (jqNode.hasClass('k-element-resize-handle-wrapper') || jqNode.hasClass('k-column-resize-handle-wrapper') || jqNode.hasClass('k-row-resize-handle-wrapper')) {\n                            return;\n                        }\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if (kendo.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/serializer'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.element.attr('title', that.options.title);\n                that.wrapper.attr('title', that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth > 0) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/components'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!window) {\n                    return;\n                }\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                return new RangeIterator(this.getSubRange());\n            },\n            getSubRange: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return subRange;\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var ImmutablesRangeIterator = RangeIterator.extend({\n            hasPartialSubtree: function () {\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n            },\n            getSubtreeIterator: function () {\n                return new ImmutablesRangeIterator(this.getSubRange());\n            }\n        });\n        var ImmutablesRangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                    function visit(node) {\n                        if (immutable && !immutable(node)) {\n                            if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                                nodes.push(node);\n                            } else {\n                                node = node.firstChild;\n                                while (node) {\n                                    visit(node);\n                                    node = node.nextSibling;\n                                }\n                            }\n                        }\n                    }\n                    new ImmutablesRangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body, options) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n                that.immutables = options && options.immutables;\n                if (that.immutables) {\n                    that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n                }\n                that.html = that.body.innerHTML;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == 'false'))) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                var that = this;\n                dom.removeChildren(that.body);\n                that.body.innerHTML = that.html;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length-- && node) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(caret);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                range.selectNode(caret);\n                return caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var isBomSelected = start === end && dom.isBom(start);\n                if (isBomSelected && start.length > 1) {\n                    start.nodeValue = start.nodeValue.charAt(0);\n                }\n                var collapsed = isBomSelected;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            editableTextNodes: function (range) {\n                var nodes = [], immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n                if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                    nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                }\n                return nodes;\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/immutables', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, dom = Editor.Dom, template = kendo.template, RangeUtils = Editor.RangeUtils, complexBlocks = [\n                'ul',\n                'ol',\n                'tbody',\n                'thead',\n                'table'\n            ], toolsToBeUpdated = [\n                'bold',\n                'italic',\n                'underline',\n                'strikethrough',\n                'superscript',\n                'subscript',\n                'forecolor',\n                'backcolor',\n                'fontname',\n                'fontsize',\n                'createlink',\n                'unlink',\n                'autolink',\n                'addcolumnleft',\n                'addcolumnright',\n                'addrowabove',\n                'addrowbelow',\n                'deleterow',\n                'deletecolumn',\n                'mergecells',\n                'formatting',\n                'cleanformatting'\n            ], IMMUTABALE = 'k-immutable', IMMUTABALE_MARKER_SELECTOR = '[' + IMMUTABALE + ']', IMMUTABLE_SELECTOR = '[contenteditable=\\'false\\']';\n        var rootCondition = function (node) {\n            return $(node).is('body,.k-editor');\n        };\n        var immutable = function (node) {\n            return node.getAttribute && node.getAttribute('contenteditable') == 'false';\n        };\n        var immutableParent = function (node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n        var expandImmutablesIn = function (range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n        var immutablesContext = function (range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var randomId = function (length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n        var removeImmutables = function (root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n            $(root).find(IMMUTABLE_SELECTOR).each(function (i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = '<' + nodeName + ' ' + IMMUTABALE + '=\\'' + id + '\\'></' + nodeName + '>';\n                serializedImmutables[id] = {\n                    node: node,\n                    style: $(node).attr('style')\n                };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n            return serializedImmutables;\n        };\n        var restoreImmutables = function (root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function (i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr('style')) {\n                    $(immutable.node).removeAttr('style').attr('style', immutable.style);\n                }\n            });\n        };\n        var deletingKey = function (keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function (tool) {\n            var options = tool ? tool.options : undefined;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n        var Immutables = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n            serialize: function (node) {\n                var result = this._toHtml(node), id;\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n            _toHtml: function (node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n                switch (serializationType) {\n                case 'string':\n                    return template(serialization)(node);\n                case 'function':\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return '<' + nodeName + '></' + nodeName + '>';\n                }\n            },\n            deserialize: function (node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function () {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n                that.serializedImmutables = {};\n            },\n            randomId: function (length) {\n                return randomId(length);\n            },\n            keydown: function (e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = isDeleting && this._cancelDeleting(e, range) || !isDeleting && this._cancelTyping(e, range);\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n            _cancelTyping: function (e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n                return range.collapsed && !keyboard.typingInProgress && keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n            _cancelDeleting: function (e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, 'li');\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, 'li');\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n            nextImmutable: function (range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || (forwards && RangeUtils.isEndOf(range, commonContainer) || !forwards && RangeUtils.isStartOf(range, commonContainer))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n            _removeImmutable: function (immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n            _nextNode: function (node, forwards) {\n                var sibling = forwards ? 'nextSibling' : 'previousSibling';\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n        Editor.Immutables = Immutables;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/command', ['editor/immutables'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, extend = $.extend;\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            editor.toolbar.refreshTools();\n            return endRestorePoint;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            expandImmutablesIn: function (range) {\n                if (this.immutables()) {\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    this.restorePoint = new RestorePoint(range, this.editor.body);\n                }\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = editorNS.EditorUtils;\n        var ToolTemplate = editorNS.ToolTemplate;\n        var Tool = editorNS.Tool;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible .k-tool:not(.k-disabled):not([disabled]),' + '.k-tool.k-overflow-anchor:visible,' + '.k-tool-group:visible .k-colorpicker:not(input),' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input-inner';\n        var toolNamesByCssClass = {\n            'k-i-sup-script': 'superscript',\n            'k-i-sub-script': 'subscript',\n            'k-i-align-left': 'justifyLeft',\n            'k-i-align-center': 'justifyCenter',\n            'k-i-align-right': 'justifyRight',\n            'k-i-align-justify': 'justifyFull',\n            'k-i-list-unordered': 'insertUnorderedList',\n            'k-i-list-ordered': 'insertOrderedList',\n            'k-i-list-roman-upper': 'insertUpperRomanList',\n            'k-i-list-roman-lower': 'insertLowerRomanList',\n            'k-i-import': 'import',\n            'k-i-indent-increase': 'indent',\n            'k-i-indent-decrease': 'outdent',\n            'k-i-link-horizontal': 'createLink',\n            'k-i-unlink-horizontal': 'unlink',\n            'k-i-image': 'insertImage',\n            'k-i-file-add': 'insertFile',\n            'k-i-html': 'viewHtml',\n            'k-i-foreground-color': 'foreColor',\n            'k-i-paint': 'backColor',\n            'k-i-table-insert': 'createTable',\n            'k-i-table-column-insert-left': 'addColumnLeft',\n            'k-i-table-column-insert-right': 'addColumnRight',\n            'k-i-table-row-insert-above': 'addRowAbove',\n            'k-i-table-row-insert-below': 'addRowBelow',\n            'k-i-table-row-delete': 'deleteRow',\n            'k-i-table-column-delete': 'deleteColumn',\n            'k-i-table-properties': 'tableWizard',\n            'k-i-table-wizard': 'tableWizardInsert',\n            'k-i-table-position-left': 'tableAlignLeft',\n            'k-i-table-position-center': 'tableAlignCenter',\n            'k-i-table-position-right': 'tableAlignRight',\n            'k-i-clear-css': 'cleanFormatting',\n            'k-i-cells-merge-horizontally': 'mergeCellsHorizontally',\n            'k-i-cells-merge-vertically': 'mergeCellsVertically',\n            'k-i-cell-split-horizontally': 'splitCellHorizontally',\n            'k-i-cell-split-vertically': 'splitCellVertically',\n            'k-i-copy-format': 'copyFormat',\n            'k-i-apply-format': 'applyFormat',\n            '.k-i-undo': 'undo',\n            'k-i-redo': 'redo'\n        };\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                var toolbar = options.editor.toolbar;\n                ui.attr('aria-controls', options.editor.element.attr('id')).on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize(true);\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                undo: [\n                    'undo',\n                    'redo'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'insertUpperRomanList',\n                    'insertLowerRomanList',\n                    'indent',\n                    'outdent'\n                ],\n                tablesInsert: ['createTable'],\n                tablesAddDelete: [\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                tablesMerge: [\n                    'mergeCellsHorizontally',\n                    'mergeCellsVertically',\n                    'splitCellHorizontally',\n                    'splitCellVertically'\n                ],\n                tablesPosition: [\n                    'tableAlignLeft',\n                    'tableAlignCenter',\n                    'tableAlignRight'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf',\n                    'exportAs',\n                    'import'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ],\n                formatPainter: [\n                    'copyFormat',\n                    'applyFormat'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                var that = this;\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow\\' />').parent().prepend('<span class=\\'k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-handler-drag\\'></span></span>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        that.preventPopupHide = true;\n                    }\n                }).on('focusout', function () {\n                    that.options.editor.element.focusout();\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('> li').toggleClass('k-item', show).find('.k-tool:not(.k-disabled), .k-overflow-button').toggleClass('k-overflow-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: kendo.support.isRtl(that.element) ? 'bottom left' : 'bottom right',\n                    position: kendo.support.isRtl(that.element) ? 'top left' : 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                        ui.attr('aria-expanded', true);\n                    },\n                    close: function () {\n                        ui.attr('aria-expanded', false);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                var active = kendo._activeElement(), popup = this.window, overflowPopup = this.overflowPopup;\n                return popup && $(active).closest(popup.wrapper).length || overflowPopup && overflowPopup.visible();\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input-inner').on('keydown', function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'moreVertical' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input-inner').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset, browser = kendo.support.browser;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(this._getWindowWidth());\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                            setTimeout(function () {\n                                window.open();\n                            }, 0);\n                        } else {\n                            window.open();\n                        }\n                    }\n                }\n            },\n            _getWindowWidth: function () {\n                var that = this, wrapper = that.window.wrapper, editorElement = that.options.editor.element;\n                return outerWidth(editorElement) - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10);\n            },\n            _overlaps: function (box) {\n                var toolbarWrapper = this.window.wrapper, toolbarWrapperOffset = toolbarWrapper.offset(), toolbarWrapperLeft = toolbarWrapperOffset.left, toolbarWrapperTop = toolbarWrapperOffset.top, boxOffset = box.offset(), boxOffsetLeft = boxOffset.left, boxOffsetTop = boxOffset.top;\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft || boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() || boxOffsetTop + box.height() < toolbarWrapperTop || boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).trigger('focus').find(focusable).first().trigger('focus');\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().trigger('focus');\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-gear',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + options.name;\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result = '';\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!kendo.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return kendo.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' role=\\'presentation\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    if (toolName == OVERFLOWANCHOR) {\n                        template.options.title = that.options.messages.overflowAnchor;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.on('click', proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').not('.k-overflow-tools').addClass('k-button-group');\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().not('.k-overflow-tools').each(function () {\n                    $(this).children().removeClass('k-group-start k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end();\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n            attachToolsEvents: function (element) {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-disabled)' + ', [role=button].k-i-import:not(.k-disabled)', disabledButtons = buttons + '.k-disabled', dropdown = '.k-dropdown', colorpicker = '.k-colorpicker', editorTools = [\n                        buttons,\n                        dropdown,\n                        colorpicker\n                    ].join(',');\n                element.off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-hover');\n                }).on('mousedown' + NS, editorTools, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function () {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement || $(focusElement).closest('.k-overflow-tools').css('visibility') === 'hidden') {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && ($(current).is('button') || $(current).is('a')) && !$(current).attr('href')) {\n                        that._executeToolCommand(current, e);\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    that._executeToolCommand(this, e);\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _executeToolCommand: function (toolElement, e) {\n                var that = this;\n                var button = $(toolElement);\n                e.preventDefault();\n                e.stopPropagation();\n                button.removeClass('k-hover');\n                if (!button.is('[data-popup]')) {\n                    that._editor.exec(that._toolName(toolElement));\n                }\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolNamesByCssClass[toolname]) {\n                        toolname = toolNamesByCssClass[toolname];\n                    }\n                    if (toolname.indexOf('k-i-') >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf('k-i-') + 4));\n                    } else {\n                        return toolname.substring(toolname.lastIndexOf('-') + 1);\n                    }\n                }\n                return 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editor = that._editor, range = editor.getRange(), nodes = editorNS.RangeUtils.textNodes(range), immutables = editor.options.immutables, immutablesContext = that._immutablesContext(range);\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes, editor.undoRedoStack);\n                        }\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n            _immutablesContext: function (range) {\n                if (this._editor.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n            _updateImmutablesState: function (tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n                if (trackImmutables) {\n                    var display = immutablesContext ? 'none' : '';\n                    if (!ui.is('.k-tool')) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css('display', display);\n                    var groupUi = uiElement.closest('li');\n                    if (groupUi.children(':visible').length === 0) {\n                        groupUi.css('display', display);\n                    }\n                }\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                var editorElement = this.options.editor.element;\n                var toolbarWindow = this.window;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (toolbarWindow) {\n                    toolbarWindow.wrapper.width(this._getWindowWidth());\n                    if (!toolbarWindow._moved) {\n                        toolbarWindow.wrapper.css({ left: Math.max(0, parseInt(editorElement.offset().left, 10)) });\n                    }\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', outerWidth(group, true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.addClass('k-hidden');\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous, groupWidth;\n                if (group.hasClass('k-disabled')) {\n                    return true;\n                }\n                if (group.hasClass('k-overflow-tool-group')) {\n                    groupWidth = group.data('outerWidth');\n                } else {\n                    group.removeClass('k-hidden');\n                    groupWidth = outerWidth(group, true);\n                    group.addClass('k-hidden');\n                }\n                if (group.length && width > this._groupsWidth() + groupWidth) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.removeClass('k-hidden');\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/viewhtml', ['editor/command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, dom = Editor.Dom;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, options = editor.options, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), textarea = '.k-editor-textarea > textarea', content, comments;\n                options.serialization.immutables = editor.immutables;\n                comments = dom.getAllComments(editor.body);\n                content = EditorUtils.cacheComments(editor.value(), comments);\n                content = ViewHtmlCommand.indent(content);\n                content = EditorUtils.retrieveComments(content, comments);\n                options.serialization.immutables = undefined;\n                function apply(e) {\n                    options.deserialization.immutables = editor.immutables;\n                    editor.value(dialog.find(textarea).val());\n                    options.deserialization.immutables = undefined;\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    if (editor.immutables) {\n                        editor.immutables.serializedImmutables = {};\n                    }\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    width: 600,\n                    height: 400,\n                    resizable: true,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').on('click', apply).end().find('.k-dialog-close').on('click', close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).trigger('focus');\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '' + '<div class=\\'k-editor-dialog k-popup-edit-form k-viewhtml-dialog\\'>' + '<span class=\\'k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea\\'><textarea class=\\'k-input-inner !k-overflow-auto !k-resize-none\\'></textarea></span>' + '<div class=\\'k-edit-buttons\\'>' + '<button class=\\'k-dialog-update k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\\'><span class=\\'k-button-text\\'>#: dialogUpdate #</span></button>' + '<button class=\\'k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\\'><span class=\\'k-button-text\\'>#: dialogCancel #</span></button>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/format', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, Tool = Editor.Tool, Command = Editor.Command, EditorUtils = Editor.EditorUtils;\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                var finder = options.formatter.finder;\n                if (finder && EditorUtils.formatByName('immutable', finder.format)) {\n                    finder._initOptions({ immutables: options.immutables });\n                }\n                Command.fn.init.call(this, options);\n            }\n        });\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        $.extend(Editor, {\n            FormatCommand: FormatCommand,\n            FormatTool: FormatTool\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/inlineformat', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, MOUSEDOWN_NS = 'mousedown.kendoEditor', KEYDOWN_NS = 'keydown.kendoEditor', KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n                var nodes = textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                if (nodes.length > 1) {\n                    for (i = 0, l = nodes.length; i < l; i++) {\n                        node = nodes[i];\n                        formatNode = this.format(node, true);\n                        formatNodes.push(formatNode);\n                    }\n                } else {\n                    node = nodes[0];\n                    formatNode = this.format(node, false);\n                }\n                this.consolidate(formatNodes);\n            },\n            format: function (node, outerMostInline) {\n                var formatNode = this.finder.findSuitable(node);\n                var attributes = this.attributes;\n                var styleAttr = attributes ? attributes.style || {} : {};\n                if (formatNode) {\n                    if (dom.is(formatNode, 'font')) {\n                        if (styleAttr.color) {\n                            formatNode.removeAttribute('color');\n                        }\n                        if (styleAttr.fontName) {\n                            formatNode.removeAttribute('face');\n                        }\n                        if (styleAttr.fontSize) {\n                            formatNode.removeAttribute('size');\n                        }\n                    }\n                    dom.attr(formatNode, attributes);\n                } else {\n                    while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                        node = node.parentNode;\n                    }\n                    formatNode = this.wrap(node);\n                }\n                return formatNode;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText && node.className === last.className) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty, fontAttr) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                this.fontAttr = fontAttr;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = kendo.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                    if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                        property = attribute.nodeValue;\n                        value = attribute.nodeValue;\n                        return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, range, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        editor._range = range;\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    close: function () {\n                        setTimeout(function () {\n                            editor._deleteSavedRange();\n                        }, 0);\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                var widget = ui.data(this.type);\n                widget.value('inherit');\n                widget.wrapper.on(MOUSEDOWN_NS, '.k-select,.k-input', function () {\n                    var newRange = editor.getRange();\n                    range = editor._containsRange(newRange) ? newRange : range;\n                }).on(KEYDOWN_NS, function (e) {\n                    if (e.keyCode === kendo.keys.ENTER) {\n                        editor._deleteSavedRange();\n                        e.preventDefault();\n                    }\n                });\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: {\n                palette: 'websafe',\n                columns: 18\n            },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var that = this, editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette, columns = options.columns;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    closeOnSelect: true,\n                    views: ['palette'],\n                    preview: false,\n                    input: false,\n                    buttons: false,\n                    toolIcon: 'k-icon k-i-' + EditorUtils.getToolCssClass(options.name),\n                    palette: palette,\n                    columns: columns,\n                    change: function () {\n                        var color = ui.value();\n                        if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                            editor.selectRange(that.storedRange);\n                        }\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        delete that.storedRange;\n                        delete that._inputFocused;\n                        editor.focus();\n                    },\n                    open: function (e) {\n                        var picker = e.sender;\n                        that.storedRange = editor.getRange();\n                        picker._popup.element.on(MOUSEDOWN_NS, function (e) {\n                            if (!$(e.target).is('input.k-color-value')) {\n                                e.preventDefault();\n                            }\n                        });\n                        if (!picker._popup.element.is('[unselectable=\\'on\\']')) {\n                            picker._popup.element.attr({ unselectable: 'on' }).find('*:not(input)').attr('unselectable', 'on').end().find('input').on('focus', function () {\n                                that._inputFocused = true;\n                            });\n                        }\n                    },\n                    close: function (e) {\n                        e.sender._popup.element.off(MOUSEDOWN_NS);\n                        if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                            editor.selectRange(that.storedRange);\n                        }\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        if (e.sender._value.toCssRgba() === 'rgba(255, 255, 255, 0)') {\n                            return;\n                        }\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*:not(input)').attr('unselectable', 'on');\n                ui.value('transparent');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            fontAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            fontAttr: 'face',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            fontAttr: 'size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/link', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, editableTextNodes = RangeUtils.editableTextNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerText) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1] || markers[0]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1] || markers[0]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: function (range) {\n                        var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                        new InlineFormatter([{ tags: ['a'] }]).remove(nodes);\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                var that;\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.immutables = that && that.immutables();\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerText: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\\'text\\' class=\\'k-input-inner\\' id=\\'k-editor-link-url\\'></span>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\\'text\\' class=\\'k-input-inner\\' id=\\'k-editor-link-text\\'></span>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\\'text\\' class=\\'k-input-inner\\' id=\\'k-editor-link-title\\'></span>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox k-checkbox-md k-rounded-md\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons\\'>' + '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' + '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' + '</div>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                this.formatter.immutables = this.immutables();\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').on('click', proxy(this._apply, this)).end().find('.k-dialog-close').on('click', proxy(this._close, this)).end().find('.k-edit-field input').on('keydown', proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).trigger('focus').select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = kendo.trim(textInput.val());\n                        if (!text && !this._initialText) {\n                            this.attributes.innerText = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerText = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var startNode = range.startContainer;\n                var startOffset = range.startOffset;\n                var prev = startNode.previousSibling;\n                if (!prev && (dom.isBom(startNode) && !startNode.nextSibling || !startOffset && dom.isDataNode(startNode))) {\n                    startNode = startNode.parentNode;\n                    startOffset = 0;\n                }\n                var traverser = new LeftDomTextTraverser({\n                    node: startNode,\n                    offset: startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-disabled', !this.finder.isFormatted(nodes)).removeClass('k-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatblock', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                this._resolveListsItems(suitable);\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            _resolveListsItems: function (nodes) {\n                var i, node, wrapper;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    wrapper = dom.is(node, 'li') ? node : dom.wrapper(node);\n                    wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                    if (dom.is(wrapper, 'li')) {\n                        node = nodes[i] = wrapper;\n                    }\n                }\n            },\n            findFormat: function (sourceNode, until) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                var immutables = this.options && this.options.immutables;\n                var ImmutablesNS = Editor.Immutables;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (immutables && tags && tags[0] == 'immutable') {\n                        var immutable = ImmutablesNS.immutableParent(node);\n                        if (immutable && dom.attrEquals(immutable, attributes)) {\n                            return node;\n                        }\n                    }\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        if (until && until(node)) {\n                            break;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes, until) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i], until)) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                this._handleImmutables(nodes, true);\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            _handleImmutables: function (nodes, applyFormatting) {\n                if (!this.immutables()) {\n                    return;\n                }\n                var immutableFormat = EditorUtils.formatByName('immutable', this.format);\n                if (!immutableFormat) {\n                    return;\n                }\n                var ImmutablesNS = Editor.Immutables;\n                var l = nodes.length - 1;\n                for (var i = l; i >= 0; i--) {\n                    var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                    if (!immutableParent) {\n                        continue;\n                    }\n                    if (immutableParent !== nodes[i + 1]) {\n                        if (applyFormatting) {\n                            dom.attr(immutableParent, immutableFormat.attr);\n                        } else {\n                            dom.unstyle(immutableParent, immutableFormat.attr.style);\n                        }\n                    }\n                    nodes.splice(i, 1);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                this._handleImmutables(nodes, false);\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        namedFormat = EditorUtils.formatByName(name, this.format);\n                        if (namedFormat.attr.style) {\n                            dom.unstyle(formatNode, namedFormat.attr.style);\n                        }\n                        if (namedFormat.attr.className) {\n                            dom.removeClass(formatNode, namedFormat.attr.className);\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                var block;\n                var immutalbeParent;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        block = blocks[i];\n                        immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n                        if (!immutalbeParent) {\n                            tagName = dom.name(block);\n                            if (tagName == 'li') {\n                                list = block.parentNode;\n                                formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                                range = this.editor.createRange();\n                                range.selectNode(blocks[i]);\n                                formatter.toggle(range);\n                            } else if (formatTag && (tagName == 'td' || block.attributes.contentEditable)) {\n                                new BlockFormatter(format, this.values).apply(block.childNodes);\n                            } else {\n                                element = dom.changeTag(block, formatTag);\n                                dom.attr(element, format[0].attr);\n                            }\n                        }\n                    }\n                } else {\n                    var blockFormatter = new BlockFormatter(format, this.values);\n                    blockFormatter.editor = this.editor;\n                    blockFormatter.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/lists', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (options) {\n                this.tag = options.tag;\n                this.attr = options.attr;\n                this.altAttr = options.altAttr;\n                var tags = this.tags = [\n                    this.tag == 'ul' ? 'ol' : 'ul',\n                    this.tag\n                ];\n                var format = [{\n                        tags: tags,\n                        attr: this.attr\n                    }];\n                if (this.altAttr) {\n                    format.push({\n                        tags: tags,\n                        attr: this.altAttr\n                    });\n                }\n                BlockFormatFinder.fn.init.call(this, format);\n            },\n            matchesType: function (node) {\n                return dom.attrEquals(node, this.attr) || this.altAttr && dom.attrEquals(node, this.altAttr);\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i], this.isList);\n                    if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0], this.isList);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (options, unwrapTag) {\n                var that = this;\n                options = $.isPlainObject(options) ? options : {\n                    tag: options,\n                    attr: null\n                };\n                that.tag = options.tag;\n                that.attr = options.attr;\n                that.finder = new ListFormatFinder(options);\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            immutables: function () {\n                return this.editor && !!this.editor.options.immutables;\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node, isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        if (!isImmutable(node)) {\n                            dom.unwrap(node);\n                        }\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|thead|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            findSuitableNode: function (nodes) {\n                var that = this, finder = that.finder, tag = that.tag, formatNode;\n                formatNode = finder.findSuitable(nodes);\n                if (!formatNode) {\n                    finder = new ListFormatFinder({ tag: tag == 'ul' ? 'ol' : 'ul' });\n                    formatNode = finder.findSuitable(nodes);\n                }\n                if (!formatNode) {\n                    finder = new ListFormatFinder({ tag: tag });\n                    formatNode = finder.findSuitable(nodes);\n                    formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n                }\n                return formatNode;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var attr = this.attr;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.findSuitableNode(nodes);\n                var childNodes;\n                if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.children, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n                    if (dom.isBlock(ancestors[0])) {\n                        dom.mergeAttributes(ancestors[0], formatNode);\n                    }\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                while (dom.isBom(formatNode.nextSibling)) {\n                    dom.remove(formatNode.nextSibling);\n                }\n                if (!this.finder.matchesType(formatNode)) {\n                    formatNode.removeAttribute('type');\n                    formatNode.style.listStyleType = '';\n                    dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n                }\n                if (formatNode && formatNode.getAttribute('type') === '') {\n                    formatNode.removeAttribute('type');\n                }\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section, node, l = nodes.length, immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n                function addLastSection() {\n                    if (lastSection) {\n                        sections.push({\n                            section: lastSection,\n                            nodes: lastNodes\n                        });\n                    }\n                }\n                for (i = 0; i < l; i++) {\n                    node = immutableParent(nodes[i]) || nodes[i];\n                    section = dom.closestEditable(node, [\n                        'td',\n                        'th',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        addLastSection();\n                        lastNodes = [node];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(node);\n                    }\n                }\n                addLastSection();\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter({\n                    tag: options.tag,\n                    attr: options.attr\n                });\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, {\n                    tag: this.options.tag,\n                    attr: this.options.attr\n                }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            attr: {\n                style: { listStyleType: '' },\n                type: ''\n            },\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            attr: {\n                style: { listStyleType: '' },\n                type: ''\n            },\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n        registerTool('insertUpperRomanList', new ListTool({\n            tag: 'ol',\n            attr: { style: { listStyleType: 'upper-roman' } },\n            altAttr: { type: 'I' },\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert upper roman list'\n            })\n        }));\n        registerTool('insertLowerRomanList', new ListTool({\n            tag: 'ol',\n            attr: { style: { listStyleType: 'lower-roman' } },\n            altAttr: { type: 'i' },\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert lower roman list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatting', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var that = this;\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        formatter.editor = that.editor;\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                var selectBox;\n                that.editor = editor;\n                ui.width(options.width);\n                selectBox = ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                }).data('kendoSelectBox');\n                ui.attr('title', initOptions.title);\n                selectBox.wrapper.attr('title', initOptions.title);\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    var node = nodes[c];\n                    if (!this.immutableParent(node)) {\n                        this.clean(node);\n                    }\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/image', [\n        'kendo.imagebrowser',\n        'editor/command'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-url\"></span>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-title\"></span>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-width\"></span>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-height\"></span>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons\">' + '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' + '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').on('click', apply).end().find('.k-dialog-close').on('click', close).end().find('.k-edit-field input').on('keydown', keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(element.find('.k-imagebrowser'), extend({}, imageBrowser));\n                    this._imageBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORIMAGEURL).val(this.value());\n                        }\n                    });\n                    this._imageBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORIMAGEURL).trigger('focus').select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/import', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n        var ImportCommand = Command.extend({\n            exec: function () {\n                (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n            },\n            _initializeUploadWidget: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var importOptions = editor.options['import'];\n                var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                    success: proxy(cmd._onUploadSuccess, cmd),\n                    progress: proxy(cmd._onUploadProgress, cmd),\n                    select: proxy(cmd._onUploadSelect, cmd),\n                    error: proxy(cmd._onUploadError, cmd),\n                    complete: proxy(cmd._onUploadComplete, cmd),\n                    showFileList: false,\n                    multiple: false,\n                    async: {\n                        saveUrl: importOptions.proxyURL,\n                        autoUpload: true,\n                        saveField: 'file'\n                    },\n                    validation: {\n                        allowedExtensions: importOptions.allowedExtensions,\n                        maxFileSize: importOptions.maxFileSize\n                    }\n                }).getKendoUpload();\n                editor._uploadWidget = upload;\n                return upload;\n            },\n            _onUploadComplete: function (ev) {\n                this._trigger('complete', ev);\n                ev.sender.clearAllFiles();\n                this._removeLoadingOverlay();\n            },\n            _onUploadSuccess: function (ev) {\n                this.editor.value(ev.response.html.replace(/<\\/?body>/gi, ''));\n                this._trigger('success', ev);\n            },\n            _onUploadProgress: function (ev) {\n                this._trigger('progress', ev);\n            },\n            _onUploadSelect: function (ev) {\n                this._trigger('select', ev);\n                if (!ev.files[0].validationErrors) {\n                    this._initLoadingOverlay();\n                }\n            },\n            _onUploadError: function (ev) {\n                this._trigger('error', ev);\n            },\n            _trigger: function (eventType, uploadEvent) {\n                var editor = this.editor;\n                var importOptions = editor.options['import'];\n                if (typeof importOptions[eventType] === 'function') {\n                    importOptions[eventType].call(editor, uploadEvent);\n                }\n            },\n            _initLoadingOverlay: function () {\n                var editable = this.editor.body;\n                if (Editor.Dom.is(editable, 'body')) {\n                    this._iframeWrapper = this._container = this.editor.wrapper.find('iframe').parent().css({ position: 'relative' }).append(loadingOverlay);\n                } else {\n                    this._container = $(editable).append(loadingOverlay);\n                }\n                kendo.ui.progress(this._container, true);\n            },\n            _removeLoadingOverlay: function () {\n                kendo.ui.progress(this._container, false);\n                $(this._iframeWrapper).css({ position: '' });\n                delete this._container;\n                delete this._iframeWrapper;\n            }\n        });\n        extend(Editor, { ImportCommand: ImportCommand });\n        registerTool('import', new Tool({\n            command: ImportCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.iconTextButtonTemplate,\n                title: 'Import'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/insert', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, GenericCommand = editorNS.GenericCommand, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, extend = $.extend;\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n                ui.attr('title', initOptions.title);\n                this._selectBox.wrapper.attr('title', initOptions.title);\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        extend(editorNS, {\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/export', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, defaultExportAsItems = [\n                {\n                    text: 'Docx',\n                    value: 'docx'\n                },\n                {\n                    text: 'Rtf',\n                    value: 'rtf'\n                },\n                {\n                    text: 'Pdf',\n                    value: 'pdf'\n                },\n                {\n                    text: 'Html',\n                    value: 'html'\n                },\n                {\n                    text: 'Plain Text',\n                    value: 'txt'\n                }\n            ];\n        var ExportAsCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.exportType = options.exportType;\n            },\n            exec: function () {\n                var cmd = this;\n                var range = this.lockRange(true);\n                cmd.postToProxy();\n                cmd.releaseRange(range);\n            },\n            postToProxy: function () {\n                this.generateForm().appendTo('body').submit().remove();\n            },\n            generateForm: function () {\n                var cmd = this;\n                var exportAsOptions = cmd.editor.options.exportAs;\n                var form = $('<form>').attr({\n                    action: exportAsOptions && exportAsOptions.proxyURL || '',\n                    method: 'POST'\n                });\n                form.append([\n                    cmd.valueInput(),\n                    cmd.exportTypeInput(),\n                    cmd.fileNameInput()\n                ]);\n                return form;\n            },\n            valueInput: function () {\n                var editor = this.editor;\n                return $('<input>').attr({\n                    value: editor.encodedValue(),\n                    name: 'value',\n                    type: 'hidden'\n                });\n            },\n            exportTypeInput: function () {\n                var cmd = this;\n                return $('<input>').attr({\n                    value: cmd.exportType,\n                    name: 'exportType',\n                    type: 'hidden'\n                });\n            },\n            fileNameInput: function () {\n                var editor = this.editor;\n                var exportAsOptions = editor.options.exportAs;\n                var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr('id') || 'editor';\n                return $('<input>').attr({\n                    value: fileName,\n                    name: 'fileName',\n                    type: 'hidden'\n                });\n            }\n        });\n        var ExportAsTool = Tool.extend({\n            init: function (options) {\n                var tool = this;\n                Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n                tool.type = 'kendoSelectBox';\n            },\n            options: {\n                items: defaultExportAsItems,\n                width: 140\n            },\n            command: function (args) {\n                var value = args.value;\n                return new Editor.ExportAsCommand({\n                    range: args.range,\n                    exportType: value.exportType\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var tool = this;\n                var editor = initOptions.editor;\n                var options = tool.options;\n                var toolName = options.name;\n                var changeHandler = proxy(tool.changeHandler, tool);\n                var dataSource = options.items || editor.options[toolName];\n                var displayName = editor.options.messages[toolName];\n                var selectBox;\n                dataSource.unshift({\n                    text: displayName,\n                    value: ''\n                });\n                tool.editor = editor;\n                ui.width(options.width);\n                selectBox = ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    autoSize: true,\n                    change: changeHandler,\n                    open: function (e) {\n                        var sender = e.sender;\n                        sender.items()[0].style.display = 'none';\n                        sender.unbind('open');\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>'),\n                    valueTemplate: '<span class=\"k-editor-export\"><span class=\"k-icon k-i-export\"></span><span class=\"k-export-tool-text\">' + displayName + '</span></span>'\n                }).data('kendoSelectBox');\n                ui.attr('title', initOptions.title);\n                selectBox.wrapper.attr('title', initOptions.title);\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            changeHandler: function (e) {\n                var sender = e.sender;\n                var dataItem = sender.dataItem();\n                var value = dataItem && dataItem.value;\n                this._exec(value);\n                sender.value('');\n            },\n            _exec: function (value) {\n                if (value) {\n                    Tool.exec(this.editor, this.options.name, { exportType: value });\n                }\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        extend(Editor, {\n            ExportAsTool: ExportAsTool,\n            ExportAsCommand: ExportAsCommand\n        });\n        registerTool('exportAs', new ExportAsTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Export As'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/indent', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                formatNodes = this.mapImmutables(formatNodes);\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            getListTypeAttr: function (list) {\n                var type = list.getAttribute('type');\n                var styleType = list.style.listStyleType;\n                return type ? { type: type } : { style: { listStyleType: styleType } };\n            },\n            mapImmutables: function (nodes) {\n                if (!this.immutables) {\n                    return nodes;\n                } else {\n                    var immutables = [];\n                    return $.map(nodes, function (node) {\n                        var immutable = Editor.Immutables.immutableParent(node);\n                        if (immutable) {\n                            if ($.inArray(immutable, immutables) === -1) {\n                                immutables.push(immutable);\n                            } else {\n                                return null;\n                            }\n                        }\n                        return immutable || node;\n                    });\n                }\n            },\n            remove: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                formatNodes = this.mapImmutables(formatNodes);\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.apply(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.remove(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                $.extend(this.options, { immutables: options.editor && options.editor.options.immutables });\n                ui.addClass('k-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitableNodes = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n                for (i = 0, len = suitableNodes.length; i < len; i++) {\n                    suitable = suitableNodes[i];\n                    if (this.options.immutables) {\n                        immutableParent = Editor.Immutables.immutableParent(suitable);\n                        if (immutableParent) {\n                            suitable = immutableParent;\n                        }\n                    }\n                    isOutdentable = indent(suitable);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable, 'li') && (listParentsCount > 1 || indent(suitable.parentNode)) || dom.ofType(suitable, [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-disabled').removeClass('k-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/linebreak', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        var startNode = focusNode.firstChild || focusNode;\n                        if (dom.isDataNode(startNode)) {\n                            range.setStart(startNode, 0);\n                        } else {\n                            range.setStartBefore(startNode);\n                        }\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, tableNode, rng, shouldTrim;\n                this.expandImmutablesIn(range);\n                shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (dom.next(li)) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        var br = $('br', li);\n                        if (br.length == 1) {\n                            br.remove();\n                        }\n                        var parentNode = li.parentNode;\n                        var parentChildrenLength = li.parentNode.children.length;\n                        var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n                        dom.insertAfter(paragraph, parentNode);\n                        dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n                        if (firstChild && firstChild !== marker) {\n                            paragraph.appendChild(firstChild);\n                            paragraph.appendChild(marker);\n                        } else {\n                            paragraph.innerHTML = emptyParagraphContent;\n                        }\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = this._insertParagraphAfter(heading);\n                    dom.remove(marker);\n                    next = paragraph;\n                } else if (tableNode) {\n                    paragraph = this._insertParagraphAfter(tableNode);\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous, { links: true });\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next, true);\n                RangeUtils.selectRange(range);\n            },\n            _insertParagraphAfter: function (node) {\n                var range = this.getRange();\n                var doc = RangeUtils.documentFromRange(range);\n                var emptyElementContent = editorNS.emptyElementContent;\n                var paragraph = dom.create(doc, 'p');\n                dom.insertAfter(paragraph, node);\n                paragraph.innerHTML = emptyElementContent;\n                return paragraph;\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && node.className != 'k-br' && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                this.expandImmutablesIn(range);\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var node = range.startContainer;\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                var tableNode = dom.is(node, 'table') && node;\n                var kbrParent;\n                range.deleteContents();\n                if (tableNode) {\n                    dom.insertAfter(br, tableNode);\n                } else {\n                    kbrParent = $(node).closest('.k-br');\n                    range.insertNode(br);\n                    if (kbrParent.length) {\n                        dom.unwrap(kbrParent[0]);\n                    }\n                }\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                        $(br.nextSibling).remove();\n                    }\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br, true);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/file', [\n        'kendo.filebrowser',\n        'editor/plugins/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETEXT = '#k-editor-file-text', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        file.title = attributes.title;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-url\"></span>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-text\"></span>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-title\"></span>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons\">' + '<button class=\"k-dialog-insert k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' + '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETEXT).val(), title = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href,\n                        title: title\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').on('click', apply).end().find('.k-dialog-close').on('click', close).end().find('.k-edit-field input').on('keydown', keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETEXT).val(file ? file.innerText : '').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(element.find('.k-filebrowser'), extend({}, fileBrowser));\n                    that._fileBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORFILEURL).val(this.value());\n                        }\n                    });\n                    that._fileBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORFILEURL).trigger('focus').select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/tables', [\n        'editor/plugins/formatblock',\n        'editor/plugins/insert'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', SCOPE = 'scope', ROW = 'row', COL = 'col', ROWGROUP = 'rowgroup', COLGROUP = 'colgroup', COLSPAN = 'colspan', ROWSPAN = 'rowspan', TABLE = 'table', THEAD = 'thead', TBODY = 'tbody', TR = 'tr', TD = 'td', TH = 'th', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatTool = Editor.BlockFormatTool, FormatCommand = Editor.FormatCommand, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, formats = kendo.ui.Editor.fn.options.formats, getTouches = kendo.getTouches;\n        var template = kendo.template;\n        var columnTemplate = '<td style=\\'width:#=width#%;\\'>#=content#</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            init: function (options) {\n                var o = $.extend({\n                    postProcess: this.postProcess,\n                    skipCleaners: true\n                }, options || {});\n                InsertHtmlCommand.fn.init.call(this, o);\n            },\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                var columnHtml = template(columnTemplate)({\n                    width: 100 / columns,\n                    content: Editor.emptyTableCellContent\n                });\n                var rowHeight = 100 / rows;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr style=\\'height:' + rowHeight + '%;\\'>' + new Array(columns + 1).join(columnHtml) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find(TD)[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.on('click', proxy(this._toggle, this)).on('keydown', proxy(this._keydown, this));\n                var editor = this._editor = options.editor;\n                this._popup = popup;\n                var tableWizard = new Editor.TableWizardTool({\n                    template: new ToolTemplate({\n                        template: EditorUtils.tableWizardButtonTemplate,\n                        title: editor.options.messages.tableWizard\n                    }),\n                    command: Editor.TableWizardCommand,\n                    insertNewTable: true\n                });\n                registerTool('tableWizardInsert', tableWizard);\n                var twTool = $('<div>' + tableWizard.options.template.getHtml() + '</div>');\n                twTool.appendTo(popup.element);\n                if (editor.toolbar) {\n                    editor.toolbar.attachToolsEvents(twTool);\n                }\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + '<div>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\'></span>') + '</div>' + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', '.k-ct-cell', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', '.k-ct-cell', function () {\n                    that._setTableSize();\n                }).on('down', '.k-ct-cell', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.createTable);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.createTable).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            }\n        });\n        var TableModificationCommand = Command.extend({\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                $(this.editor.body).find('.k-element-resize-handle-wrapper').each(function (index, el) {\n                    el.remove();\n                });\n                this.editor.selectRange(point.toRange());\n            },\n            _clearColIndexAttr: function (table) {\n                dom.clearTableMappings(table, 'col-index');\n            },\n            _mapColIndices: function (table) {\n                dom.reMapTableColumns(table, 'col-index');\n            },\n            _findRowSpanCell: function (parent, rowIndex, colIndex) {\n                var row, cell;\n                for (var i = rowIndex; i >= 0; i--) {\n                    row = parent.rows[i];\n                    cell = $(row).find('[col-index=' + colIndex + ']');\n                    if (cell.length) {\n                        return cell;\n                    }\n                }\n            },\n            _resetElementResizing: function (editor) {\n                editor._destroyResizings();\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            },\n            _findNextTdInRow: function (row, colIndex) {\n                var lastTd = row.find('td:last-child'), lastIndex = parseInt(lastTd.attr('col-index'), 10) + lastTd.prop('colSpan') - 1, td;\n                for (var i = colIndex; i <= lastIndex; i++) {\n                    td = row.find('[col-index=' + i + ']');\n                    if (td.length) {\n                        return td;\n                    }\n                }\n            },\n            _adjustColgroups: function (row, table) {\n                var colElements = table.getElementsByTagName(COL), colgroupElements = table.getElementsByTagName(COLGROUP), cells = row.cells, numberOfCells = cells.length, i, colgroup, cell;\n                while (colElements.length > 0) {\n                    colElements[0].remove();\n                }\n                while (colgroupElements.length > 0) {\n                    colgroupElements[0].remove();\n                }\n                for (i = numberOfCells - 1; i >= 0; i--) {\n                    cell = cells[i];\n                    if (cell.getAttribute(SCOPE) === COLGROUP) {\n                        colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                        colgroup.setAttribute('span', cell.getAttribute(COLSPAN));\n                        table.prepend(colgroup);\n                    } else {\n                        table.prepend(dom.createEmptyNode(this.editor.document, COL));\n                    }\n                }\n            },\n            _associateHeaderIds: function (table) {\n                dom.clearTableMappings(table, 'col-index');\n                dom.reMapTableColumns(table, 'col-index');\n                $(table).find('th, td').removeAttr('id headers');\n                dom.associateWithIds(table);\n            },\n            _getNumberOfColumns: function (table) {\n                return dom._getNumberOfColumns(table, 'td, th');\n            }\n        });\n        var InsertRowCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table = dom.closest(td, TABLE), position = this.options.position || 'after', cellCount, row, cell, newRow, rowIndex, rowSpanIndex, createdCell;\n                if (!table || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                row = td.parentNode;\n                rowIndex = dom.findNodeIndex(row, true);\n                if (td.rowSpan > 1 && position === 'after') {\n                    row = table.rows[rowIndex + td.rowSpan - 1];\n                }\n                cellCount = this._getNumberOfColumns(table);\n                newRow = row.cloneNode(true);\n                $(newRow).empty();\n                for (var i = 0; i < cellCount; i = i + cell.prop('colSpan')) {\n                    cell = $(row).find('[col-index=' + i + ']');\n                    if (cell.length) {\n                        if (cell.prop('rowSpan') > 1 && position === 'after' && cell) {\n                            cell.attr(ROWSPAN, cell.prop('rowSpan') + 1);\n                        } else {\n                            this._appendCell(newRow, cell);\n                        }\n                    } else {\n                        rowIndex = dom.findNodeIndex(row, true);\n                        cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                        rowSpanIndex = cell.closest(TR).index();\n                        if (rowSpanIndex + cell.prop('rowSpan') - 1 === rowIndex && position === 'after') {\n                            this._appendCell(newRow, cell);\n                        } else {\n                            cell.attr(ROWSPAN, cell.prop('rowSpan') + 1);\n                        }\n                    }\n                    createdCell = $(newRow).find('[col-index=' + i + ']');\n                    if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                        createdCell.attr(SCOPE, ROW);\n                    }\n                }\n                if (position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetElementResizing(this.editor);\n            },\n            _appendCell: function (row, cell) {\n                var newCell;\n                newCell = cell.clone();\n                newCell.html(Editor.emptyTableCellContent);\n                newCell.removeAttr(ROWSPAN);\n                newCell.appendTo(row);\n            }\n        });\n        var InsertColumnCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table = dom.closest(td, TABLE), colElements = table.getElementsByTagName(COL), colgroupElements = table.getElementsByTagName(COLGROUP), columnIndex, i, rows = table && table.rows, cell, newCell, position = this.options.position || 'after';\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = parseInt(td.getAttribute('col-index'), 10);\n                if (td.colSpan > 1 && position === 'after') {\n                    td.setAttribute('col-index', columnIndex + td.colSpan - 1);\n                    columnIndex = columnIndex + td.colSpan - 1;\n                }\n                for (i = 0; i < rows.length; i++) {\n                    cell = this._processForColSpan(rows[i], columnIndex, position, td);\n                    if (!cell) {\n                        continue;\n                    }\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyTableCellContent;\n                    newCell.removeAttribute(COLSPAN);\n                    if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                        newCell.setAttribute(SCOPE, COL);\n                    }\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                    this._resizeCells(newCell, cell);\n                }\n                if (colElements.length > 0 || colgroupElements.length > 0) {\n                    this._adjustColgroups(rows[0], table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetElementResizing(this.editor);\n            },\n            _processForColSpan: function (row, columnIndex, position, selectedCell) {\n                var cell, colSpanEffect, index = columnIndex - 1;\n                cell = $(row).find('[col-index=' + columnIndex + ']')[0];\n                if (cell && cell.colSpan > 1 && position === 'after' && cell !== selectedCell) {\n                    cell.colSpan += 1;\n                    return;\n                }\n                if (cell) {\n                    return cell;\n                }\n                for (index; index >= 0; index--) {\n                    cell = $(row).find('[col-index=' + index + ']')[0];\n                    if (cell && cell.colSpan > 1) {\n                        break;\n                    }\n                }\n                if (!cell) {\n                    return;\n                }\n                colSpanEffect = parseInt(cell.getAttribute('col-index'), 10) + cell.colSpan - 1;\n                if (colSpanEffect === columnIndex && position === 'after') {\n                    return cell;\n                } else if (columnIndex <= colSpanEffect) {\n                    cell.setAttribute(COLSPAN, cell.colSpan + 1);\n                }\n            },\n            _resizeCells: function (newCell, cell) {\n                var width = newCell.style.width, parsedWidth, unit, calculatedWidth;\n                if (!width) {\n                    return;\n                }\n                parsedWidth = parseFloat(width);\n                unit = width.slice(parsedWidth.toString().length);\n                calculatedWidth = parsedWidth / 2 + unit;\n                newCell.style.width = calculatedWidth;\n                cell.style.width = calculatedWidth;\n            }\n        });\n        var DeleteRowCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest(TR)[0];\n                });\n                var td = dom.closest(range.endContainer, [\n                    TD,\n                    TH\n                ]);\n                var row = rows[0];\n                var rowSpan = td ? td.rowSpan : 1;\n                var rowIndex = $(rows[0]).index();\n                var table = dom.closest(row, TABLE);\n                var rowParent = row.parentElement;\n                var focusElement;\n                if (!table || this.immutables() && Editor.Immutables.immutableParent(row)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                for (var x = 0; x < rowSpan; x++) {\n                    if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                        rows.push(rowParent.rows[rowIndex + x]);\n                    }\n                }\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    if (focusElement && focusElement.rows) {\n                        focusElement = focusElement.rows[0].cells[0];\n                    }\n                    dom.remove(table);\n                    this._resetElementResizing(this.editor);\n                } else if (rowParent.rows.length <= rows.length) {\n                    focusElement = rowParent.nextSibling;\n                    if (!focusElement) {\n                        focusElement = rowParent.previousSibling;\n                    }\n                    dom.remove(rowParent);\n                } else {\n                    this._mapColIndices(table);\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        this._focusElement(range, focusElement);\n                        focusElement = null;\n                        this._handleRowSpanCells(table, row);\n                        dom.remove(row);\n                    }\n                    this._clearColIndexAttr(table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                } else if (dom.is(rowParent, THEAD) && $(table).find('[scope]').length > 0) {\n                    this._adjustColgroups(rowParent.rows[0], table);\n                }\n                if (focusElement) {\n                    this._focusElement(range, focusElement);\n                }\n                this._resetElementResizing(this.editor);\n            },\n            _focusElement: function (range, node) {\n                range.setStart(node, 0);\n                range.collapse(true);\n                this.editor.selectRange(range);\n            },\n            _handleRowSpanCells: function (table, row) {\n                var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true), firstRow = table.rows[0], lastCell = firstRow.cells[firstRow.cells.length - 1], lastIndex = parseInt(lastCell.getAttribute('col-index'), 10) + lastCell.colSpan - 1;\n                for (index = 0; index <= lastIndex; index = index + cell.prop('colSpan')) {\n                    cell = $(row).find('[col-index=' + index + ']');\n                    if (cell.length && cell.prop('rowSpan') > 1) {\n                        nextRow = table.rows[rowIndex + 1];\n                        adjacentCell = $(nextRow).find('[col-index=' + (index + 1) + ']');\n                        if (adjacentCell.length) {\n                            adjacentCell.before(cell);\n                        } else {\n                            $(nextRow).append(cell);\n                        }\n                        this._reduceRowSpan(cell);\n                    }\n                    if (!cell.length) {\n                        cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                        this._reduceRowSpan(cell);\n                    }\n                }\n            },\n            _reduceRowSpan: function (td) {\n                var rowSpanValue = td.prop('rowSpan') - 1;\n                if (rowSpanValue <= 1) {\n                    td.removeAttr(ROWSPAN);\n                    if (td.attr(SCOPE) === ROWGROUP) {\n                        td.attr(SCOPE, ROW);\n                    }\n                } else {\n                    td.attr(ROWSPAN, rowSpanValue);\n                }\n            }\n        });\n        var DeleteColumnCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table = dom.closest(td, TABLE), rows = table && table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows && rows[0].cells.length, colElements = table.getElementsByTagName(COL), colgroupElements = table.getElementsByTagName(COLGROUP), focusElement, i, cell, x;\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                if (columnCount == 1 || td.colSpan == columnCount) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    if (focusElement && focusElement.rows) {\n                        focusElement = focusElement.rows[0].cells[0];\n                    }\n                    dom.remove(table);\n                    this._resetElementResizing(this.editor);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    this._mapColIndices(table);\n                    columnIndex = parseInt(td.getAttribute('col-index'), 10);\n                    for (x = 0; x < td.colSpan; x++) {\n                        for (i = 0; i < rows.length; i = i + (cell.prop('rowSpan') || 1)) {\n                            cell = $(rows[i]).find('[col-index=' + (columnIndex + x) + ']');\n                            if (cell.length && cell.prop('colSpan') <= 1) {\n                                cell.remove();\n                            } else {\n                                this._handleColSpanCells(rows[i], columnIndex + x);\n                            }\n                        }\n                    }\n                    this._clearColIndexAttr(table);\n                }\n                if (colElements.length > 0 || colgroupElements.length > 0) {\n                    this._adjustColgroups(rows[0], table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n                this._resetElementResizing(this.editor);\n            },\n            _handleColSpanCells: function (row, colIndex) {\n                var cell = $(row).find('[col-index=' + colIndex + ']');\n                if (cell.length && cell.prop('colSpan') > 1) {\n                    var clone = cell.clone(true);\n                    cell.after(clone);\n                    this._reduceColSpan(clone);\n                    clone.attr('col-index', parseInt(cell.attr('col-index'), 10) + 1);\n                    cell.remove();\n                    return;\n                }\n                for (var i = colIndex; i >= 0; i--) {\n                    cell = $(row).find('[col-index=' + i + ']');\n                    if (cell.length) {\n                        this._reduceColSpan(cell);\n                        cell.attr('col-index', parseInt(cell.attr('col-index'), 10) + 1);\n                        return;\n                    }\n                }\n            },\n            _reduceColSpan: function (td) {\n                var colSpanValue = td.prop('colSpan') - 1;\n                if (colSpanValue <= 1) {\n                    td.removeAttr(COLSPAN);\n                    if (td.attr(SCOPE) === COLGROUP) {\n                        td.attr(SCOPE, COL);\n                    }\n                } else {\n                    td.attr(COLSPAN, colSpanValue);\n                }\n            }\n        });\n        var MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), table, row, columnIndex, nextTd, colspan;\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n                table = dom.closest(td, TABLE);\n                row = td.parentNode;\n                columnIndex = dom.findNodeIndex(td, true);\n                nextTd = row.children[columnIndex + 1];\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = parseInt($(td).attr('col-index'), 10);\n                nextTd = $(row).find('[col-index=' + (columnIndex + 1 + this._getColspan(td) - 1) + ']').get(0);\n                if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n                colspan = this._getColspan(td) + this._getColspan(nextTd);\n                $(td).prop(COLSPAN, colspan).append(dom.emptyNode(nextTd) ? '' : '<br/>' + nextTd.innerHTML);\n                $(td).width(td.offsetWidth);\n                $(nextTd).remove();\n                if (td.getAttribute(SCOPE) === COL) {\n                    td.setAttribute(SCOPE, COLGROUP);\n                }\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    this._adjustColgroups(row, table);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetElementResizing(this.editor);\n            },\n            _getColspan: function (td) {\n                return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n            }\n        });\n        var MergeCellsVerticallyCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n                tr = dom.closest(td, TR);\n                parent = dom.closest(td, [\n                    THEAD,\n                    TBODY\n                ]);\n                table = dom.closest(td, TABLE);\n                columnIndex = dom.findNodeIndex(td, true);\n                rowIndex = dom.findNodeIndex(tr, true);\n                if (rowIndex + 1 === parent.rows.length) {\n                    this.releaseRange(range);\n                    return;\n                }\n                targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n                bottomTd = targetRow && targetRow.children[columnIndex];\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = $(td).attr('col-index');\n                bottomTd = $(targetRow).find('[col-index=' + columnIndex + ']').get(0);\n                if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n                $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd)).append(dom.emptyNode(bottomTd) ? '' : '<br/>' + bottomTd.innerHTML);\n                if (td.getAttribute(SCOPE) === ROW) {\n                    td.setAttribute(SCOPE, ROWGROUP);\n                }\n                $(bottomTd).remove();\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n            },\n            _getRowspan: function (td) {\n                return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n            }\n        });\n        var SplitCellCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), type = this.options.type, attr = type === 'row' ? COLSPAN : ROWSPAN, td = dom.closest(range.endContainer, [\n                        TD,\n                        TH\n                    ]), parent = dom.closest(td, [\n                        THEAD,\n                        TBODY\n                    ]), table = dom.closest(td, TABLE), emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n                this._mapColIndices(table);\n                if (type === 'row' && $(td).is('[' + attr + ']')) {\n                    this._splitCellHorizontally(td, parent, attr, emptyTd);\n                } else if (type === 'column' && $(td).is('[' + attr + ']')) {\n                    this._splitCellVertically(td, parent, attr, emptyTd);\n                }\n                if ($(td).prop(attr.toLowerCase()) <= 1) {\n                    $(td).removeAttr(attr);\n                }\n                if ($(table).find('[headers]').length > 0) {\n                    this._associateHeaderIds(table);\n                }\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n            },\n            _getRowspanValue: function (td) {\n                return parseInt(td.getAttribute(ROWSPAN), 10);\n            },\n            _getColspanValue: function (td) {\n                return parseInt(td.getAttribute(COLSPAN), 10);\n            },\n            _splitCellHorizontally: function (td, parent, attr, emptyTd) {\n                var rowSpan = td.rowSpan, colSpan = td.colSpan, tdToAdd = $(emptyTd), colSpanResult = Math.floor(colSpan / 2);\n                if (colSpanResult > 1) {\n                    tdToAdd.attr(COLSPAN, colSpanResult);\n                }\n                if (rowSpan > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpan);\n                }\n                $(td).prop(attr, colSpan - colSpanResult).after(tdToAdd);\n                $(td).width(td.offsetWidth);\n                tdToAdd.width(tdToAdd[0].offsetWidth);\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === COLGROUP) {\n                        tdToAdd.attr(SCOPE, COL);\n                        if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === '1') {\n                            td.setAttribute(SCOPE, COL);\n                        }\n                        this._adjustColgroups(td.parentNode, parent.parentNode);\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n            },\n            _splitCellVertically: function (td, parent, attr, emptyTd) {\n                var tr = dom.closest(td, TR), columnIndex = parseInt($(td).attr('col-index'), 10), rowIndex = dom.findNodeIndex(tr, true), rowSpan = td.rowSpan, colSpan = td.colSpan, rowSpanResult = Math.floor(rowSpan / 2), targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult), nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan), tdToAdd = $(emptyTd);\n                if (rowSpanResult > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpanResult);\n                }\n                if (colSpan > 1) {\n                    tdToAdd.attr(COLSPAN, colSpan);\n                }\n                if (nextTd && nextTd.length) {\n                    nextTd.before(tdToAdd);\n                } else {\n                    targetRow.append(tdToAdd);\n                }\n                $(td).prop(attr, rowSpan - rowSpanResult);\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === ROWGROUP) {\n                        tdToAdd.attr(SCOPE, ROW);\n                        if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === '1') {\n                            td.setAttribute(SCOPE, ROW);\n                        }\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                var commandsMap = {\n                    row: {\n                        insert: InsertRowCommand,\n                        'delete': DeleteRowCommand,\n                        merge: MergeCellsHorizontallyCommand,\n                        split: SplitCellCommand\n                    },\n                    column: {\n                        insert: InsertColumnCommand,\n                        'delete': DeleteColumnCommand,\n                        merge: MergeCellsVerticallyCommand,\n                        split: SplitCellCommand\n                    }\n                };\n                options = extend(options, this.options);\n                options.action = options.action || 'insert';\n                return new commandsMap[options.type][options.action](options);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-disabled');\n                ui.attr('disabled', 'disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                if (isFormatted === true) {\n                    ui.parent().addClass('k-hidden k-disabled');\n                    ui.attr('disabled', 'disabled');\n                    ui.addClass('k-disabled');\n                } else {\n                    ui.parent().removeClass('k-hidden k-disabled');\n                    ui.prop('disabled', false);\n                    ui.removeClass('k-disabled');\n                }\n            }\n        });\n        var TableFormatCommand = FormatCommand.extend({\n            exec: function () {\n                var that = this;\n                var editor = that.editor;\n                FormatCommand.fn.exec.call(this);\n                if (editor.elementResizing) {\n                    editor.elementResizing._showResizeHandles();\n                }\n            }\n        });\n        var TableFormatTool = BlockFormatTool.extend({\n            initialize: function (ui, options) {\n                BlockFormatTool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-disabled');\n                ui.attr('disabled', 'disabled');\n            },\n            update: function (ui, nodes) {\n                var isTable = !tableFormatFinder.isFormatted(nodes);\n                var isFormatted = this.options.finder.isFormatted(nodes, this.isTable);\n                if (isTable === true) {\n                    ui.parent().addClass('k-hidden k-disabled');\n                    ui.attr('disabled', 'disabled');\n                    ui.addClass('k-disabled');\n                } else {\n                    ui.parent().removeClass('k-hidden k-disabled');\n                    ui.prop('disabled', false);\n                    ui.removeClass('k-disabled');\n                }\n                ui.toggleClass('k-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new TableFormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            isTable: function (node) {\n                return dom.is(node, 'table');\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableFormatTool: TableFormatTool,\n            TableFormatCommand: TableFormatCommand,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand,\n            MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n            MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n            SplitCellCommand: SplitCellCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n        registerTool('mergeCellsHorizontally', new TableModificationTool({\n            type: 'row',\n            action: 'merge',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Merge Cell Right'\n            })\n        }));\n        registerTool('mergeCellsVertically', new TableModificationTool({\n            type: 'column',\n            action: 'merge',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Merge Cell Down'\n            })\n        }));\n        registerTool('splitCellHorizontally', new TableModificationTool({\n            type: 'row',\n            action: 'split',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Split Cell'\n            })\n        }));\n        registerTool('splitCellVertically', new TableModificationTool({\n            type: 'column',\n            action: 'split',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Split Cell'\n            })\n        }));\n        registerFormat('tableAlignLeft', [\n            {\n                tags: ['table'],\n                attr: {\n                    style: {\n                        marginLeft: '',\n                        marginRight: 'auto'\n                    }\n                }\n            },\n            {\n                tags: ['table'],\n                attr: { align: 'left' }\n            }\n        ]);\n        registerTool('tableAlignLeft', new TableFormatTool({\n            format: formats.tableAlignLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Align Left'\n            })\n        }));\n        registerFormat('tableAlignCenter', [\n            {\n                tags: ['table'],\n                attr: {\n                    style: {\n                        marginLeft: 'auto',\n                        marginRight: 'auto'\n                    }\n                }\n            },\n            {\n                tags: ['table'],\n                attr: { align: 'center' }\n            }\n        ]);\n        registerTool('tableAlignCenter', new TableFormatTool({\n            format: formats.tableAlignCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Align Center'\n            })\n        }));\n        registerFormat('tableAlignRight', [\n            {\n                tags: ['table'],\n                attr: {\n                    style: {\n                        marginLeft: 'auto',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['table'],\n                attr: { align: 'right' }\n            }\n        ]);\n        registerTool('tableAlignRight', new TableFormatTool({\n            format: formats.tableAlignRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Align Left'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/clipboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, extend = $.extend;\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range, editor.body);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window) || browser.msie && browser.version > 10) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                return this._insertImages(items);\n            },\n            _insertImages: function (items) {\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this.editor.body.contentEditable === 'false') {\n                    return;\n                }\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this.expandImmutablesIn();\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n                    this._decoreateClipboardNode(clipboardNode, body);\n                    body.appendChild(clipboardNode);\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).off('paste');\n                        textRange.execCommand('Paste');\n                        $(body).on('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            ondragover: function (e) {\n                if (browser.msie || browser.edge) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            },\n            ondrop: function (e) {\n                if (!('FileReader' in window)) {\n                    return;\n                }\n                var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n                var items = dataTransfer.items || dataTransfer.files;\n                if (this._insertImages(items)) {\n                    e.preventDefault();\n                }\n            },\n            _decoreateClipboardNode: function (node, body) {\n                if (!browser.msie && !browser.webkit) {\n                    return;\n                }\n                node = $(node);\n                node.css({\n                    borderWidth: '0px',\n                    width: '0px',\n                    height: '0px',\n                    overflow: 'hidden',\n                    margin: '0',\n                    padding: '0'\n                });\n                if (browser.msie) {\n                    var documentElement = $(body.ownerDocument.documentElement);\n                    node.css({\n                        fontVariant: 'normal',\n                        fontWeight: 'normal',\n                        lineSpacing: 'normal',\n                        lineHeight: 'normal',\n                        textDecoration: 'none'\n                    });\n                    var color = documentElement.css('color');\n                    if (color) {\n                        node.css('color', color);\n                    }\n                    var fontFamily = documentElement.css('fontFamily');\n                    if (fontFamily) {\n                        node.css('fontFamily', fontFamily);\n                    }\n                    var fontSize = documentElement.css('fontSize');\n                    if (fontSize) {\n                        node.css('fontSize', fontSize);\n                    }\n                }\n            },\n            _moveToCaretPosition: function (node, range) {\n                var that = this;\n                var body = that.editor.body;\n                var nodeOffset = dom.offset(node, body);\n                var caretOffset = that._caretOffset(range, body);\n                var translateX = caretOffset.left - nodeOffset.left;\n                var translateY = caretOffset.top - nodeOffset.top;\n                var translate = 'translate(' + translateX + 'px,' + translateY + 'px)';\n                $(node).css({\n                    '-webkit-transform': translate,\n                    'transform': translate\n                });\n            },\n            _caretOffset: function (range, body) {\n                var editor = this.editor;\n                var caret = dom.create(editor.document, 'span', { innerHTML: '\\uFEFF' });\n                var startContainer = range.startContainer;\n                var rangeChanged;\n                if (range.collapsed) {\n                    var isStartTextNode = dom.isDataNode(startContainer);\n                    if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                        dom.insertBefore(caret, startContainer);\n                    } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                        dom.insertAfter(caret, startContainer);\n                    } else {\n                        range.insertNode(caret);\n                        rangeChanged = true;\n                    }\n                } else {\n                    startContainer = startContainer === body ? startContainer.childNodes[range.startOffset] : startContainer;\n                    dom.insertBefore(caret, startContainer);\n                }\n                var offset = dom.offset(caret, body);\n                var prev = caret.previousSibling;\n                var next = caret.nextSibling;\n                dom.remove(caret);\n                if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                    var prevLength = prev.length;\n                    next.data = prev.data + next.data;\n                    range.setStart(next, prevLength);\n                    dom.remove(prev);\n                    range.collapse(true);\n                    editor.selectRange(range);\n                }\n                return offset;\n            },\n            expandImmutablesIn: function (range) {\n                var editor = this.editor;\n                if (editor && editor.options.immutables) {\n                    var body = editor.body;\n                    range = range || editor.getRange();\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    if (range.startContainer === body && range.startOffset === 0) {\n                        var doc = body.ownerDocument;\n                        var bomNode = doc.createTextNode('\\uFEFF');\n                        body.insertBefore(bomNode, body.childNodes[0]);\n                        range.setStartBefore(bomNode);\n                    }\n                    editor.selectRange(range);\n                }\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l, childNodes;\n                this.expandImmutablesIn();\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                if (!options.skipCleaners) {\n                    for (i = 0, l = this.cleaners.length; i < l; i++) {\n                        if (this.cleaners[i].applicable(html)) {\n                            html = this.cleaners[i].clean(html);\n                        }\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/gi, '<$1$2>&nbsp;</$1>');\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                childNodes = fragment.childNodes;\n                $(childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                $(childNodes).each(function (index, elm) {\n                    if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === '') {\n                        elm.appendChild(editor.document.createTextNode('\\uFEFF'));\n                    }\n                });\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody' || range.collapsed && dom.name(rangeEnd) == 'thead') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                var focusedTable = $(range.commonAncestorContainer.parentNode).closest('table');\n                if (focusedTable.get(0)) {\n                    var siblingNodes = focusedTable.parent().contents();\n                    var lastSiblingIndex = siblingNodes.length - 1;\n                    var lastSibling = siblingNodes.get(lastSiblingIndex);\n                    while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                        lastSiblingIndex -= 1;\n                        lastSibling = siblingNodes.get(lastSiblingIndex);\n                    }\n                    if (lastSibling === focusedTable.get(0) && !focusedTable.parents('table').length) {\n                        dom.insertAfter(dom.createEmptyNode(editor.document, 'p'), focusedTable[0]);\n                    }\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content;\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                    content = this._checkForBullet(content);\n                } else {\n                    content = this._getHtmlNoBullet(p);\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _checkForBullet: function (html) {\n                var p = dom.create(document, 'p', { innerHTML: html });\n                var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n                if (bulletRgx.test(p.innerText)) {\n                    return this._getHtmlNoBullet(p);\n                }\n                return html;\n            },\n            _getHtmlNoBullet: function (element) {\n                var content, name = dom.name(element);\n                dom.remove(element.firstChild);\n                if (element.firstChild.nodeType == 3) {\n                    if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                        dom.remove(element.firstChild);\n                    }\n                }\n                if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n                    dom.remove(element.firstChild);\n                }\n                if (name != 'p') {\n                    content = '<' + name + '>' + element.innerHTML + '</' + name + '>';\n                } else {\n                    content = element.innerHTML;\n                }\n                return content;\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            _createList: function (type, styleType) {\n                return dom.create(document, type, { style: { listStyleType: styleType } });\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li, rootMargin, rootIndex, lastRootLi, isLastRootLi, rootList, i, p, type, margin, list, listData, acceptedNameTags = [\n                        'p',\n                        'h1',\n                        'h2',\n                        'h3',\n                        'h4',\n                        'h5',\n                        'h6'\n                    ], isParentTable = false;\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    isParentTable = !!$(p).parents('table').length;\n                    if (isParentTable) {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || acceptedNameTags.indexOf(name) < 0) {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else if (li && !isLastRootLi) {\n                            li.appendChild(p);\n                        }\n                        continue;\n                    }\n                    if (browser.msie) {\n                        continue;\n                    }\n                    margin = listData.level || parseFloat(p.style.marginLeft || 0);\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    if (!rootMargin || rootMargin < 0) {\n                        rootMargin = margin;\n                        rootIndex = listIndex;\n                        lastRootLi = $(placeholder).find('[data-list=\\'' + rootIndex + '\\']').last()[0];\n                        rootList = this._createList(type, listType.style);\n                        dom.insertBefore(rootList, p);\n                        lastMargin = margin;\n                        levels[margin][levelType] = rootList;\n                    }\n                    isLastRootLi = lastRootLi === p;\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = this._createList(type, listType.style);\n                        levels[margin][levelType] = list;\n                        li.appendChild(list);\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    if (isLastRootLi) {\n                        rootMargin = lastMargin = -1;\n                    } else {\n                        lastMargin = margin;\n                    }\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            removeTextNodes: function (trs) {\n                var i, j, childNodes, currentNode, row;\n                for (i = 0; i < trs.length; i++) {\n                    row = trs[i];\n                    childNodes = row.childNodes;\n                    for (j = 0; j < childNodes.length; j++) {\n                        currentNode = childNodes[j];\n                        if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                            row.removeChild(currentNode);\n                        }\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                    that.removeTextNodes(tables.eq(i).find('tr'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = filters.msConvertLists ? this.extractListLevels(html) : html;\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                } else if (dom.isBr(node)) {\n                    this.htmlLines.appendText(this.separators.line);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        extend(editorNS, {\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/keyboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, bomSpan = '<span  class=\\'k-br\\'>\\uFEFF</span>', extend = $.extend;\n        var nodeTypes = dom.nodeTypes;\n        var PREVIOUS_SIBLING = 'previousSibling';\n        function selected(node, range) {\n            return range.startContainer === node && range.endContainer === node && range.startOffset === 0 && range.endOffset == node.childNodes.length;\n        }\n        function getSibling(node, direction, condition) {\n            var sibling = node ? node[direction] : null;\n            while (sibling && !condition(sibling)) {\n                sibling = sibling[direction];\n            }\n            return sibling;\n        }\n        var tableCells = 'td,th,caption';\n        var tableCellsWrappers = 'table,tbody,thead,tfoot,tr';\n        var tableElements = tableCellsWrappers + ',' + tableCells;\n        var inTable = function (range) {\n            return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers);\n        };\n        var RemoveTableContent = Class.extend({\n            remove: function (range) {\n                var that = this;\n                var marker = new Marker();\n                marker.add(range, false);\n                var nodes = RangeUtils.getAll(range, function (node) {\n                    return $(node).is(tableElements);\n                });\n                var doc = RangeUtils.documentFromRange(range);\n                var start = marker.start;\n                var end = marker.end;\n                var cellsTypes = tableCells.split(',');\n                var startCell = dom.parentOfType(start, cellsTypes);\n                var endCell = dom.parentOfType(end, cellsTypes);\n                that._removeContent(start, startCell, true);\n                that._removeContent(end, endCell, false);\n                $(nodes).each(function (i, node) {\n                    node = $(node);\n                    (node.is(tableCells) ? node : node.find(tableCells)).each(function (j, cell) {\n                        cell.innerHTML = '&#65279;';\n                    });\n                });\n                if (startCell && !start.previousSibling) {\n                    dom.insertBefore(doc.createTextNode('\\uFEFF'), start);\n                }\n                if (endCell && !end.nextSibling) {\n                    dom.insertAfter(doc.createTextNode('\\uFEFF'), end);\n                }\n                if (startCell) {\n                    range.setStartBefore(start);\n                } else if (nodes[0]) {\n                    startCell = $(nodes[0]);\n                    startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                    if (startCell.length) {\n                        range.setStart(startCell.get(0), 0);\n                    }\n                }\n                range.collapse(true);\n                dom.remove(start);\n                dom.remove(end);\n            },\n            _removeContent: function (start, top, forwards) {\n                if (top) {\n                    var sibling = forwards ? 'nextSibling' : 'previousSibling', next, getNext = function (node) {\n                            while (node && !node[sibling]) {\n                                node = node.parentNode;\n                            }\n                            return node && $.contains(top, node) ? node[sibling] : null;\n                        };\n                    start = getNext(start);\n                    while (start) {\n                        next = getNext(start);\n                        dom.remove(start);\n                        start = next;\n                    }\n                }\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    var body = editor.body;\n                    that.startRestorePoint = new RestorePoint(range, body);\n                    if (inTable(range)) {\n                        var removeTableContent = new RemoveTableContent(editor);\n                        removeTableContent.remove(range);\n                        editor.selectRange(range);\n                    }\n                    if (browser.webkit && !range.collapsed && selected(body, range)) {\n                        body.innerHTML = '';\n                    }\n                    if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                        var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                        backspaceHandler.deleteSelection(range);\n                    }\n                    keyboard.startTyping(function () {\n                        that._removeBomSpan();\n                        that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            },\n            _removeBomSpan: function () {\n                var node = this.editor.getRange().commonAncestorContainer;\n                if (!dom.emptyNode(node)) {\n                    if (node.nodeType === 3) {\n                        node = node.parentNode;\n                    }\n                    if (dom.insignificant(node)) {\n                        node.textContent = dom.stripBom(node.textContent);\n                        dom.unwrap(node);\n                    }\n                }\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                if (!kendo.support.browser.chrome && container.firstChild && container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n                    container = container.firstChild;\n                }\n                dom.insertAt(container, caret, 0);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                    range.setStart(caret.previousSibling, caret.previousSibling.length);\n                } else {\n                    range.setStartAfter(caret);\n                }\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caretPlaceholder = dom.significantChildNodes(next)[0];\n                    caretPlaceholder = caretPlaceholder && dom.isInline(caretPlaceholder) ? caretPlaceholder : next;\n                    var caret = this._addCaret(caretPlaceholder);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                var editor = this.editor;\n                var previousSibling;\n                if (dom.isDataNode(node)) {\n                    if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                        range.setStart(node, 0);\n                        range.setEnd(node, node.length);\n                        editor.selectRange(range);\n                        return false;\n                    }\n                    this._cleanBomBefore(range);\n                }\n                previousSibling = getSibling(block, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.htmlIndentSpace(sibling);\n                });\n                if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                    range.startOffset = 0;\n                    range.endOffset = 0;\n                    editor.selectRange(range);\n                }\n                var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n                var liIndex = li && $(li).index();\n                var startAtNonFirstLi = startAtLi && liIndex > 0;\n                if (startAtNonFirstLi) {\n                    block = li;\n                    previousSibling = dom.prev(li);\n                }\n                if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                    if (block.innerText === '') {\n                        block.innerHTML = '\\uFEFF';\n                    }\n                    return true;\n                }\n                if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft, 10) > 0) {\n                    editor.exec('outdent');\n                    return true;\n                }\n                if (block && previousSibling && editorNS.RangeUtils.isStartOf(range, block) || startAtNonFirstLi) {\n                    var caretPlaceholder = dom.significantChildNodes(block)[0];\n                    caretPlaceholder = caretPlaceholder && dom.isInline(caretPlaceholder) ? caretPlaceholder : block;\n                    var caret = this._addCaret(caretPlaceholder);\n                    this._merge(previousSibling, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (startAtLi && liIndex === 0) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    editor.selectRange(range);\n                    return true;\n                }\n                var rangeStartNode = node.childNodes[range.startOffset - 1];\n                var linkRange = range;\n                var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n                var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.isDataNode(sibling) || !dom.isBom(sibling) && sibling.length > 0;\n                });\n                if (anchor || (range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, 'a')) {\n                    anchor = anchor || previousNode;\n                    linkRange = editor.createRange();\n                    linkRange.setStart(anchor, anchor.childNodes.length);\n                    linkRange.collapse(true);\n                }\n                anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n                var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n                if (isEndOfLink) {\n                    var command = new editorNS.UnlinkCommand({\n                        range: linkRange,\n                        body: editor.body,\n                        immutables: !!editor.immutables\n                    });\n                    editor.execCommand(command);\n                    editor._selectionChange();\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                var editor = this.editor;\n                var parentElementOrNode;\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                    return true;\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                if (range.commonAncestorContainer === editor.body) {\n                    this._surroundFullyContent(marker, range);\n                }\n                if (editor.immutables) {\n                    this._handleImmutables(marker);\n                }\n                this._surroundFullySelectedAnchor(marker, range);\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (end.tagName.toLocaleLowerCase() === 'li' && dom.emptyNode(end)) {\n                    range.selectNode(end);\n                    range.deleteContents();\n                }\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                editor.selectRange(range);\n                parentElementOrNode = start.parentElement || start.parentNode;\n                if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n                    this._cleanBomBefore(range);\n                }\n                return true;\n            },\n            _handleImmutables: function (marker) {\n                var immutableParent = editorNS.Immutables.immutableParent;\n                var startImmutable = immutableParent(marker.start);\n                var endImmutable = immutableParent(marker.start);\n                if (startImmutable) {\n                    dom.insertBefore(marker.start, startImmutable);\n                }\n                if (endImmutable) {\n                    dom.insertAfter(marker.end, endImmutable);\n                }\n                if (startImmutable) {\n                    dom.remove(startImmutable);\n                }\n                if (endImmutable && endImmutable.parentNode) {\n                    dom.remove(endImmutable);\n                }\n            },\n            _surroundFullyContent: function (marker, range) {\n                var children = range.commonAncestorContainer.children, startParent = children[0], endParent = children[children.length - 1];\n                this._moveMarker(marker, range, startParent, endParent);\n            },\n            _surroundFullySelectedAnchor: function (marker, range) {\n                var start = marker.start, startParent = $(start).closest('a').get(0), end = marker.end, endParent = $(end).closest('a').get(0);\n                this._moveMarker(marker, range, startParent, endParent);\n            },\n            _moveMarker: function (marker, range, startParent, endParent) {\n                var start = marker.start, end = marker.end;\n                if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                    dom.insertBefore(start, startParent);\n                }\n                if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                    dom.insertAfter(end, endParent);\n                }\n            },\n            _root: function (node) {\n                while (node && dom.name(node) != 'body' && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (dest && src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n                        if (dest) {\n                            dest.appendChild(src.firstChild);\n                        }\n                    } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                        this._mergeWithTextNode(dest, src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            _mergeWithTextNode: function (textNode, appendedNode) {\n                if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                    if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                        dom.insertAfter(appendedNode, textNode.nextSibling);\n                    } else {\n                        dom.insertAfter(appendedNode, textNode);\n                    }\n                }\n            },\n            _isCaret: function (element) {\n                return $(element).is('a');\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var editor = this.editor;\n                var range = editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if (editor.immutables && editor.immutables.keydown(e, range)) {\n                    return;\n                }\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range, editor.body);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    editorNS._finishUpdate(editor, startRestorePoint);\n                }\n            },\n            deleteSelection: function (range) {\n                this._handleSelection(range);\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var SelectAllHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                if (!browser.webkit || e.isDefaultPrevented() || !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                    return;\n                }\n                if (this.editor.options.immutables) {\n                    this._toSelectableImmutables();\n                }\n                this._selectEditorBody();\n            },\n            _selectEditorBody: function () {\n                var editor = this.editor;\n                var range = editor.getRange();\n                range.selectNodeContents(editor.body);\n                setTimeout(function () {\n                    editor.selectRange(range);\n                });\n            },\n            _toSelectableImmutables: function () {\n                var editor = this.editor, body = editor.body, immutable = editorNS.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(bomSpan).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(bomSpan).appendTo(body);\n                }\n            },\n            keyup: $.noop\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions, modifier = this._getShortcutModifier(e, navigator.platform);\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == modifier && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            _getShortcutModifier: function (e, platform) {\n                var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n                return mac ? e.metaKey : e.ctrlKey;\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        extend(editorNS, {\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            SelectAllHandler: SelectAllHandler,\n            Keyboard: Keyboard\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/exportpdf', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = that.lockRange(true);\n                var editor = that.editor;\n                editor._destroyResizings();\n                editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                    editor._initializeColumnResizing();\n                    editor._initializeRowResizing();\n                    editor._initializeElementResizing();\n                });\n            }\n        });\n        extend(editorNS, { ExportPdfCommand: ExportPdfCommand });\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/print', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        extend(editorNS, { PrintCommand: PrintCommand });\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatpainter', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var CopyFormatCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.inlineStyles = [];\n                this.blockStyles = [];\n                this.collectStyles(range);\n                this.editor.inlineStyles = this.inlineStyles;\n                this.editor.blockStyles = this.blockStyles;\n                this.releaseRange(range);\n            },\n            collectStyles: function (range) {\n                var rangeNodes = RangeUtils.nodes(range);\n                var node;\n                if (rangeNodes.length === 1) {\n                    node = rangeNodes[0].parentNode;\n                } else {\n                    node = range.startContainer;\n                }\n                while (node && !dom.is(node, 'body') && node.getAttribute('data-role') !== 'editor') {\n                    if (dom.isBlock(node)) {\n                        this.populateStyles(node, 'blockStyles');\n                        if (dom.is(node, 'li')) {\n                            node = node.parentNode;\n                        } else {\n                            node = null;\n                        }\n                    } else {\n                        this.populateStyles(node, 'inlineStyles');\n                        node = node.parentNode;\n                    }\n                }\n            },\n            populateStyles: function (node, destination) {\n                var styles = node.style;\n                var attributes = node.attributes;\n                var nodeStyles = {\n                    tags: [node.tagName],\n                    attr: { style: {} }\n                };\n                var styleValue, styleKey, attributeKey, attributeValue, i;\n                for (i = 0; styles && i < styles.length; i++) {\n                    styleKey = styles[i];\n                    styleValue = styles[styleKey];\n                    nodeStyles.attr.style[styleKey] = styleValue;\n                }\n                for (i = 0; attributes && i < attributes.length; i++) {\n                    attributeKey = attributes[i].nodeName;\n                    attributeValue = attributes[i].nodeValue;\n                    if (attributeKey === 'style') {\n                        continue;\n                    } else if (attributeKey === 'class') {\n                        nodeStyles.attr.className = attributeValue;\n                    } else {\n                        nodeStyles.attr[attributeKey] = attributeValue;\n                    }\n                }\n                this[destination].push(nodeStyles);\n            }\n        });\n        var ApplyFormatCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                var markers = RangeUtils.getMarkers(range);\n                var editor = this.editor;\n                var inlineStyles = editor.inlineStyles;\n                var blockStyles = editor.blockStyles;\n                var nodes;\n                if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n                    return;\n                }\n                if (markers.length === 3) {\n                    this.marker.removeCaret(range);\n                    this.marker.caret = null;\n                }\n                this.removeEmptyElementsFromRange(range);\n                nodes = RangeUtils.nodes(range);\n                this.cleanInlineParents(nodes);\n                dom.normalize(range.commonAncestorContainer);\n                if (markers.length === 2) {\n                    range.setStartAfter(markers[0]);\n                    range.setEndBefore(markers[1]);\n                } else {\n                    range.setStartBefore(nodes[0]);\n                    range.setEndAfter(nodes[0]);\n                }\n                nodes = RangeUtils.nodes(range);\n                if (nodes && blockStyles && blockStyles.length) {\n                    this.applyBlockStyles(nodes, blockStyles);\n                }\n                if (nodes && inlineStyles && inlineStyles.length) {\n                    this.applyInlineStyles(nodes, inlineStyles);\n                }\n                this.releaseRange(range);\n            },\n            removeEmptyElementsFromRange: function (range) {\n                var isEmptyInline = function (node) {\n                    return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n                };\n                var emptyElements, i;\n                emptyElements = RangeUtils.getAll(range, isEmptyInline);\n                if (emptyElements && emptyElements.length > 0) {\n                    for (i = 0; i < emptyElements.length; i++) {\n                        emptyElements[i].parentNode.removeChild(emptyElements[i]);\n                    }\n                }\n            },\n            cleanInlineParents: function (nodes) {\n                var i, node, parent, children, j, child, newNode;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    parent = node.parentNode;\n                    if (this.immutableParent(node)) {\n                        continue;\n                    }\n                    while (parent && dom.isInline(parent)) {\n                        children = parent.childNodes;\n                        for (j = 0; j < children.length; j++) {\n                            child = children[j];\n                            if (!dom.isMarker(child) && child !== node) {\n                                newNode = parent.cloneNode(true);\n                                newNode.innerHTML = '';\n                                dom.wrap(child, newNode);\n                            }\n                        }\n                        dom.unwrap(parent);\n                        parent = node.parentNode;\n                    }\n                }\n            },\n            applyBlockStyles: function (nodes, blockStyles) {\n                var formatTag = blockStyles[0].tags[0];\n                var attr = blockStyles[0].attr;\n                var document = this.editor.document;\n                var i, len, node, wrapper, blockParent, outerWrapper;\n                var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    node = nodes[i];\n                    if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                        continue;\n                    }\n                    blockParent = dom.blockParentOrBody(node);\n                    if (blockParent.tagName !== 'BODY' && blockParent.tagName !== formatTag) {\n                        if (blockParent.tagName !== 'LI' && blockParent.tagName !== 'TD' && blockParent.tagName !== 'TH') {\n                            previousNodes = [];\n                            nextNodes = [];\n                            previous = node.previousSibling;\n                            next = node.nextSibling;\n                            while (previous) {\n                                if (!dom.isMarker(previous)) {\n                                    previousNodes.push(previous);\n                                }\n                                previous = previous.previousSibling;\n                            }\n                            if (previousNodes.length) {\n                                prevWrapper = blockParent.cloneNode(true);\n                                prevWrapper.innerHTML = '';\n                                dom.insertBefore(prevWrapper, previousNodes[0]);\n                                for (j = 0; j < previousNodes.length; j++) {\n                                    child = previousNodes[j];\n                                    dom.insertAt(prevWrapper, child, 0);\n                                }\n                            }\n                            while (next) {\n                                if (!dom.isMarker(next)) {\n                                    nextNodes.push(next);\n                                }\n                                next = next.nextSibling;\n                            }\n                            if (nextNodes.length) {\n                                nextWrapper = blockParent.cloneNode(true);\n                                nextWrapper.innerHTML = '';\n                                dom.insertBefore(nextWrapper, nextNodes[0]);\n                                for (j = 0; j < nextNodes.length; j++) {\n                                    child = nextNodes[j];\n                                    nextWrapper.appendChild(child);\n                                }\n                            }\n                            dom.unwrap(blockParent);\n                        }\n                        wrapper = dom.create(document, formatTag, attr);\n                        dom.wrap(node, wrapper);\n                    } else if (blockParent.tagName === formatTag) {\n                        dom.attr(blockParent, attr);\n                    }\n                }\n                if (blockParent && blockStyles.length === 2 && blockParent.tagName !== 'LI' && formatTag === 'LI') {\n                    listItems = [];\n                    while (dom.is(wrapper, 'li')) {\n                        listItems.push(wrapper);\n                        wrapper = dom.prev(wrapper);\n                    }\n                    outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                    dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n                    outerWrapper.appendChild(listItems[0]);\n                    for (i = 1, len = listItems.length; i < len; i++) {\n                        dom.insertBefore(listItems[i], outerWrapper.firstChild);\n                    }\n                } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== 'LI') {\n                    outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                    dom.wrap(wrapper, outerWrapper);\n                }\n            },\n            applyInlineStyles: function (nodes, inlineStyles) {\n                var document = this.editor.document;\n                var currentStyle, createdNode, topNode, i, newNode, node;\n                for (i = 0; i < inlineStyles.length; i++) {\n                    currentStyle = inlineStyles[i];\n                    createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n                    if (topNode) {\n                        createdNode.appendChild(topNode);\n                    }\n                    topNode = createdNode;\n                }\n                if (topNode) {\n                    for (i = 0; i < nodes.length; i++) {\n                        node = nodes[i];\n                        if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                            continue;\n                        }\n                        newNode = topNode.cloneNode(true);\n                        dom.insertBefore(newNode, node);\n                        while (newNode.children && newNode.children.length) {\n                            newNode = newNode.children[0];\n                        }\n                        newNode.appendChild(node);\n                    }\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        var CopyFormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                return new CopyFormatCommand(commandArguments);\n            }\n        });\n        var ApplyFormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                return new ApplyFormatCommand(commandArguments);\n            }\n        });\n        $.extend(Editor, {\n            CopyFormatCommand: CopyFormatCommand,\n            ApplyFormatCommand: ApplyFormatCommand,\n            CopyFormatTool: CopyFormatTool,\n            ApplyFormatTool: ApplyFormatTool\n        });\n        registerTool('copyFormat', new CopyFormatTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Copy format'\n            })\n        }));\n        registerTool('applyFormat', new ApplyFormatTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Apply format'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/resizing-utils', ['editor/main'], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var PERCENTAGE = '%';\n        var PIXEL = 'px';\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = 'string';\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is('body') && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n            return 0;\n        }\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            } else {\n                return parseFloat(value) / total * 100;\n            }\n        }\n        function inPercentages(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value);\n        }\n        function inPixels(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PIXELS.test(value);\n        }\n        function toPercentages(value) {\n            return parseFloat(value) + PERCENTAGE;\n        }\n        function toPixels(value) {\n            return parseFloat(value) + PIXEL;\n        }\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n        extend(Editor, { ResizingUtils: ResizingUtils });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-element-resizing', [\n        'editor/main',\n        'kendo.resizable',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_ENTER = 'mouseenter';\n        var MOUSE_LEAVE = 'mouseleave';\n        var MOUSE_MOVE = 'mousemove';\n        var MOUSE_UP = 'mouseup';\n        var COMMA = ',';\n        var DOT = '.';\n        var LAST_CHILD = ':last-child';\n        var TABLE = 'table';\n        var TableElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n            destroy: function () {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n                that._destroyResizeHandle();\n            },\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: '',\n                rtl: false,\n                handle: {\n                    dataAttribute: '',\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: ''\n                }\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n            },\n            resizingInProgress: function () {\n                var that = this;\n                var resizable = that._resizable;\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n                return false;\n            },\n            resize: noop,\n            detectElementBorderHovering: function (e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        } else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    } else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n            elementBorderHovered: noop,\n            showResizeHandle: function (tableElement, e) {\n                var that = this;\n                if (e.buttons !== 0) {\n                    return;\n                }\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n                that._initResizable(tableElement);\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n            _initResizeHandle: function () {\n                var that = this;\n                var options = that.options;\n                that._destroyResizeHandle();\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n            setResizeHandlePosition: noop,\n            setResizeHandleDimensions: noop,\n            setResizeHandleDataAttributes: function (tableElement) {\n                var that = this;\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n            _attachResizeHandleEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n                that.resizeHandle.on(MOUSE_DOWN + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).show();\n                }).on(MOUSE_UP + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n            },\n            _hideResizeMarker: function () {\n                var that = this;\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n            _destroyResizeHandle: function () {\n                var that = this;\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n            _initResizable: function (tableElement) {\n                var that = this;\n                if (!that.resizeHandle) {\n                    return;\n                }\n                that._destroyResizable();\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: proxy(that.onResizeStart, that),\n                    resize: proxy(that.onResize, that),\n                    resizeend: proxy(that.onResizeEnd, that)\n                });\n            },\n            _destroyResizable: function () {\n                var that = this;\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n            onResizeStart: function () {\n                this._disableKeyboard();\n            },\n            onResize: function (e) {\n                this.setResizeHandleDragPosition(e);\n            },\n            setResizeHandleDragPosition: noop,\n            onResizeEnd: function (e) {\n                var that = this;\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n            _disableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _forceResizing: function (e) {\n                var resizable = this._resizable;\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n        var ResizingFactory = Class.extend({\n            create: function (editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n                $(editor.body).on(MOUSE_ENTER + NS, TABLE, function (e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    } else {\n                        that._initResizing(editor, table, options);\n                    }\n                }).on(MOUSE_LEAVE + NS, TABLE, function (e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                }).on(MOUSE_LEAVE + NS, function () {\n                    var resizing = editor[resizingName];\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                }).on(MOUSE_UP + NS, function (e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n            },\n            dispose: function (editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n            _initResizing: function (editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n            _destroyResizing: function (editor, options) {\n                var resizingName = options.name;\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n        TableElementResizing.create = function (editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n        TableElementResizing.dispose = function (editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n        extend(Editor, { TableElementResizing: TableElementResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/column-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing',\n        'editor/dom'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var NS = '.kendoEditorColumnResizing';\n        var RESIZE_HANDLE_CLASS = 'k-column-resize-handle';\n        var RESIZE_MARKER_CLASS = 'k-column-resize-marker';\n        var BODY = 'body';\n        var TBODY = 'tbody';\n        var THEAD = 'thead';\n        var TD = 'td';\n        var TH = 'th';\n        var TR = 'tr';\n        var COLATTR = 'col-index';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [\n                    TD,\n                    TH\n                ],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'column',\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n                if (mousePosition > borderOffset - handleWidth && mousePosition < borderOffset + handleWidth) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (column) {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var columnOffsetLeft = column.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(column.css('marginLeft'));\n                var innerElementOffsetTop = tableInnerElement.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(tableInnerElement.css('marginTop'));\n                var browser = kendo.support.browser;\n                if (rtl && (browser.mozilla || browser.webkit && browser.version >= 85)) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n                that.resizeHandle.css({\n                    top: innerElementOffsetTop + scrollTopOffset,\n                    left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - handleWidth / 2,\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: fullHeight\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rootElement = $(options.rootElement);\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(column.css('marginLeft'));\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var resizeHandleOffsetLeft = resizeHandle.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(resizeHandle.css('marginLeft'));\n                var browser = kendo.support.browser;\n                if (rtl && (browser.mozilla || browser.webkit && browser.version >= 85)) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n                resizeHandle.css({ left: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? -1 : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                var colIndex;\n                var nextColumn;\n                dom.reMapTableColumns(that.element, COLATTR);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n                if (column.prop('colSpan') > 1) {\n                    column = $(that.element).find('[' + COLATTR + '=' + (colIndex + column.prop('colSpan') - 1) + ']').eq(0);\n                    colIndex = parseInt(column.attr(COLATTR), 10);\n                }\n                nextColumn = $(that.element).find('[' + COLATTR + '=' + (colIndex + 1) + ']:not([colspan])');\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(nextColumn);\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(parseInt(column.attr(COLATTR), 10), initialAdjacentColumnWidth, initialColumnWidth, initialColumnWidth - newWidth);\n                dom.clearTableMappings(that.element, COLATTR);\n            },\n            _setTableComputedWidth: function () {\n                var element = this.element;\n                if (element.style[WIDTH] === '') {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n            _setColumnsComputedWidth: function () {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var innerElementWidth = outerWidth(tableInnerElement);\n                var columns = tableInnerElement.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function () {\n                    return outerWidth($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                    } else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n            _resizeTopAndBottomColumns: function (column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).attr(COLATTR);\n                var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    var cell = this;\n                    return $(cell).attr(COLATTR) === columnIndex && cell !== column;\n                });\n                var length = topAndBottomColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n            _resizeColumn: function (column, newWidth) {\n                var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n                } else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n            _resizeAdjacentColumns: function (columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    return parseInt($(this).attr(COLATTR), 10) === columnIndex + 1;\n                });\n                var length = adjacentColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n            _resizeAdjacentColumn: function (adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n        ColumnResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'columnResizing',\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n        ColumnResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { ColumnResizing: ColumnResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/row-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var math = window.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorRowResizing';\n        var RESIZE_HANDLE_CLASS = 'k-row-resize-handle';\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = 'k-row-resize-marker-wrapper';\n        var RESIZE_MARKER_CLASS = 'k-row-resize-marker';\n        var BODY = 'body';\n        var TR = 'tr';\n        var TBODY = 'tbody';\n        var THEAD = 'thead';\n        var COMMA = ',';\n        var HEIGHT = 'height';\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'row',\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n                if (mousePosition > borderOffset - handleHeight && mousePosition < borderOffset + handleHeight) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var rowOffsetLeft = row.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(row.css('marginLeft'));\n                var rowOffsetTop = row.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(row.css('marginTop'));\n                var browser = kendo.support.browser;\n                if (options.rtl && (browser.mozilla || browser.webkit && browser.version >= 85)) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n                that.resizeHandle.css({\n                    top: rowOffsetTop + outerHeight(row) + scrollTopOffset - handleHeight / 2,\n                    left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n                that.resizeHandle.css({\n                    width: innerTableElement.width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var $row = $(row);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var tableTopOffset = topInnerTableElement.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(topInnerTableElement.css('marginTop'));\n                var rowOffsetTop = $row.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat($row.css('marginTop'));\n                var resizeHandleOffsetTop = resizeHandle.offset().top - (Math.max(0, rootElement.offset().top) + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(resizeHandle.css('marginTop'));\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                    min: rowOffsetTop + scrollTopOffset + min,\n                    max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n                resizeHandle.css({ top: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableHead = element.children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableHeadHeight + tableBodyHeight - options.min)\n                });\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n                if (inPercentages(initialStyleHeight)) {\n                    that._setRowsHeightInPercentages();\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n            _setTableHeight: function (newHeight) {\n                var element = this.element;\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                } else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n        RowResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'rowResizing',\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n        RowResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { RowResizing: RowResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/element-resize-handle', [\n        'editor/main',\n        'kendo.draganddrop',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorElementResizeHandle';\n        var RESIZE_HANDLE_CLASS = 'k-element-resize-handle';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var HALF_INSIDE = 'halfInside';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var BODY = 'body';\n        var TABLE = 'table';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        var ElementResizeHandle = Observable.extend({\n            init: function (options) {\n                var that = this;\n                Observable.fn.init.call(that);\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS).remove();\n                that.element = null;\n                that._destroyDraggable();\n                that.unbind();\n            },\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template: '<div class=\\'k-element-resize-handle-wrapper\\' unselectable=\\'on\\' contenteditable=\\'false\\'>' + '<div class=\\'' + RESIZE_HANDLE_CLASS + '\\'></div>' + '</div>'\n            },\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n            show: function () {\n                this._setPosition();\n            },\n            _setPosition: function () {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: 'absolute'\n                });\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                $(that.element).on(MOUSE_OVER + NS, proxy(that._onMouseOver, that)).on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n            },\n            _onMouseOver: function () {\n                this.trigger(MOUSE_OVER);\n            },\n            _onMouseOut: function () {\n                this.trigger(MOUSE_OUT);\n            },\n            _addStyles: function () {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass('k-resize-' + that.options.direction);\n            },\n            _initPositioningStrategy: function () {\n                var that = this;\n                var options = that.options;\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n            _initDraggable: function () {\n                var that = this;\n                var element = that.element;\n                if (that._draggable || !element) {\n                    return;\n                }\n                that._draggable = new Draggable(element, {\n                    dragstart: proxy(that._onDragStart, that),\n                    drag: proxy(that._onDrag, that),\n                    dragend: proxy(that._onDragEnd, that)\n                });\n            },\n            _onDragStart: function () {\n                this.trigger(DRAG_START);\n            },\n            _onDrag: function (e) {\n                var that = this;\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n            _onDragEnd: function () {\n                this.trigger(DRAG_END);\n            },\n            _destroyDraggable: function () {\n                var that = this;\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n            _initDraggingStrategy: function () {\n                var that = this;\n                that._draggingStrategy = HandleDraggingStrategy.create({ name: that.options.direction });\n            }\n        });\n        var StrategyFactory = Class.extend({\n            init: function () {\n                this._items = [];\n            },\n            register: function (name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n            create: function (options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : '';\n                var match;\n                var item;\n                var i;\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n        var HandlePositioningStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n            getPosition: function () {\n                var that = this;\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n                return scrollOffsetPosition;\n            },\n            calculatePosition: noop,\n            applyHandleOffset: function (position) {\n                var options = this.options;\n                var handle = $(options.handle);\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - outerHeight(handle) / 2,\n                        left: position.left - outerWidth(handle) / 2\n                    };\n                }\n                return position;\n            },\n            applyScrollOffset: function (position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var browser = kendo.support.browser;\n                var rootLeft;\n                if (!rootElement.is(BODY)) {\n                    rootLeft = kendo.scrollLeft(rootElement) || 0;\n                    if (options.rtl && (browser.mozilla || browser.webkit && browser.version >= 85)) {\n                        rootLeft = rootLeft * -1;\n                    }\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + rootLeft - scrollBarWidth\n                    };\n                }\n                return position;\n            }\n        });\n        HandlePositioningStrategy.create = function (options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) / 2 + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top,\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) / 2 + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css('marginLeft'), 10);\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n        var HandleDraggingStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n            adjustDragDelta: function (deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n        HandleDraggingStrategy.create = function (options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n        extend(Editor, { ElementResizeHandle: ElementResizeHandle });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/element-resizing', [\n        'editor/main',\n        'editor/resizing/element-resize-handle',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var ElementResizeHandle = Editor.ElementResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var RangeUtils = Editor.RangeUtils;\n        var NS = '.kendoEditorElementResizing';\n        var RESIZE_HANDLE_WRAPPER_CLASS = 'k-element-resize-handle-wrapper';\n        var TABLE_CLASS = 'k-table';\n        var ELEMENT_RESIZING_CLASS = 'k-element-resizing';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var SELECT = 'select';\n        var DROP = 'drop';\n        var COLUMN = 'td';\n        var ROW = 'tr';\n        var TBODY = 'tbody';\n        var THEAD = 'thead';\n        var TABLE = 'table';\n        var IMG = 'img';\n        var ELEMENT_TYPES = [\n            'TABLE',\n            'IMG'\n        ];\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var HEIGHT = 'height';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        var ElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n                if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                    that.element = element;\n                }\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS);\n                that.element = null;\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n                that._destroyResizeHandles();\n            },\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [\n                    { direction: NORTHWEST },\n                    { direction: NORTH },\n                    { direction: NORTHEAST },\n                    { direction: EAST },\n                    { direction: SOUTHEAST },\n                    { direction: SOUTH },\n                    { direction: SOUTHWEST },\n                    { direction: WEST }\n                ]\n            },\n            resize: function (args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                that.showResizeHandles();\n            },\n            _resizeWidth: function () {\n                return false;\n            },\n            _resizeHeight: function () {\n                return false;\n            },\n            _getMaxDimensionValue: function (dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? -1 : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n                if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === '' && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    } else {\n                        return parentDimension + parentScrollOffset;\n                    }\n                } else {\n                    return parentDimension + parentScrollOffset;\n                }\n            },\n            showResizeHandles: function () {\n                var that = this;\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n            _initResizeHandles: function () {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n                if (handles && handles.length > 0) {\n                    return;\n                }\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new ElementResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n                that._bindToResizeHandlesEvents();\n            },\n            _destroyResizeHandles: function () {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n                that.handles = [];\n            },\n            _showResizeHandles: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n            _bindToResizeHandlesEvents: function () {\n                return false;\n            },\n            _onResizeHandleDragStart: function () {\n                var that = this;\n                var element = $(that.element);\n                element.addClass(ELEMENT_RESIZING_CLASS);\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n            _onResizeHandleDrag: function (e) {\n                this.resize(e);\n            },\n            _onResizeHandleDragEnd: function () {\n                var that = this;\n                $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n            _disableKeyboard: function () {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function (e) {\n                    e.preventDefault();\n                });\n            }\n        });\n        var TableResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _hasRowsInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === '' || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n                if (inPercentages(styleWidth)) {\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    } else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n                that._setColumnsWidth();\n                element[0].style[WIDTH] = newWidth;\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPercentages();\n                }\n                if (inPercentages(styleHeight)) {\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    } else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n                element[0].style[HEIGHT] = newHeight;\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPixels();\n                }\n            },\n            _setColumnsWidth: function () {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n                    if (styleWidth !== '') {\n                        return inPercentages(styleWidth) ? true : false;\n                    } else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === '') {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            }\n        });\n        var ImageResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    if (handle.options.direction === 'north' || handle.options.direction === 'south') {\n                        handle.bind(DRAG, proxy(that._onResizeHandleDragVertical, that));\n                    } else if (handle.options.direction === 'east' || handle.options.direction === 'west') {\n                        handle.bind(DRAG, proxy(that._onResizeHandleDragHorizontal, that));\n                    } else {\n                        handle.bind(DRAG, proxy(that._onResizeHandleDragLocked, that));\n                    }\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _getDeltas: function (args) {\n                return extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n            },\n            _onResizeHandleDragVertical: function (args) {\n                var deltas = this._getDeltas(args);\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                this.showResizeHandles();\n            },\n            _onResizeHandleDragHorizontal: function (args) {\n                var deltas = this._getDeltas(args);\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this.showResizeHandles();\n            },\n            _onResizeHandleDragLocked: function (args) {\n                var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)), initialWidth = this._initialElementWidth, initialHeight = this._initialElementHeight, deltas;\n                if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                    args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                    args.deltaY = args.deltaX;\n                } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                    args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                    args.deltaX = args.deltaY;\n                }\n                deltas = this._getDeltas(args);\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                this.showResizeHandles();\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentWidth = outerWidth(element);\n                var newWidth;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: that._getMaxDimensionValue(WIDTH)\n                });\n                newWidth = toPixels(constrainedWidth);\n                element[0].style[WIDTH] = newWidth;\n                element.attr(WIDTH, Math.floor(constrainedWidth));\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentHeight = outerHeight(element);\n                var newHeight;\n                var constrainedHeight;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: that.options.minHeight,\n                    max: Number.MAX_SAFE_INTEGER\n                });\n                newHeight = toPixels(constrainedHeight);\n                element[0].style[HEIGHT] = newHeight;\n                element.attr(HEIGHT, Math.floor(constrainedHeight));\n            }\n        });\n        var ElementResizingFactory = Class.extend({\n            create: function (editor) {\n                var factory = this;\n                $(editor.body).on('dragstart' + NS, function () {\n                    var nodes = RangeUtils.nodes(editor.getRange()), hasImg = false;\n                    nodes.forEach(function (node) {\n                        if (node.nodeName === 'IMG') {\n                            hasImg = true;\n                        }\n                    });\n                    if (hasImg && nodes.length > 1) {\n                        editor.elementResizing._destroyResizeHandles();\n                    }\n                }).on(DROP + NS, function () {\n                    setTimeout(function () {\n                        var image = RangeUtils.image(editor.getRange());\n                        if (image) {\n                            editor.elementResizing._destroyResizeHandles();\n                            editor.elementResizing.element = image;\n                            editor.elementResizing.showResizeHandles();\n                        }\n                    });\n                }).on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function (e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n                    if (elementResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                return;\n                            } else {\n                                if (element !== eventTarget) {\n                                    editor._destroyElementResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    } else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n                    editor._showElementResizeHandles();\n                }).on(MOUSE_DOWN + NS, function (e) {\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n                    if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyElementResizing();\n                    }\n                });\n            },\n            dispose: function (editor) {\n                $(editor.body).off(NS);\n            },\n            _initResizing: function (editor, element) {\n                if (!browser.msie) {\n                    if ($(element).is(TABLE)) {\n                        editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body\n                        });\n                    } else if ($(element).is(IMG)) {\n                        editor.elementResizing = new ImageResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body\n                        });\n                    }\n                    if (editor._showElementResizeHandlesProxy) {\n                        editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                        editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                    }\n                }\n            }\n        });\n        ElementResizingFactory.current = new ElementResizingFactory();\n        extend(Editor, {\n            TableResizing: TableResizing,\n            ImageResizing: ImageResizing,\n            ElementResizing: ElementResizing,\n            ElementResizingFactory: ElementResizingFactory\n        });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-command', ['editor/plugins/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, Command = Editor.Command;\n        var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: ['table'] }]);\n        var cellsFormatFinder = new Editor.BlockFormatFinder([{\n                tags: [\n                    'td',\n                    'th'\n                ]\n            }]);\n        var reUnit = /([a-z]+|%)$/i;\n        var COL = 'col';\n        var ROW = 'row';\n        var COLGROUP = 'colgroup';\n        var SCOPE = 'scope';\n        var COL_INDEX = 'col-index';\n        var TH = 'th';\n        var TD = 'td';\n        var THEAD = 'thead';\n        var HEADERS = 'headers';\n        var TABLE = 'table';\n        var TableWizardCommand = Command.extend({\n            exec: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var range = cmd.range = cmd.lockRange();\n                var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n                var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n                var options = {\n                    visible: false,\n                    messages: editor.options.messages,\n                    closeCallback: $.proxy(cmd.onDialogClose, cmd),\n                    table: cmd.parseTable(selectedTable, selectedCells),\n                    dialogOptions: editor.options.dialogOptions,\n                    isRtl: kendo.support.isRtl(editor.wrapper)\n                };\n                var dialog = new Editor.TableWizardDialog(options);\n                dialog.open();\n            },\n            onDialogClose: function (data) {\n                var cmd = this;\n                cmd.releaseRange(cmd.range);\n                if (data) {\n                    if (cmd.options.insertNewTable) {\n                        cmd.insertTable(cmd.createNewTable(data));\n                    } else {\n                        cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                    }\n                }\n            },\n            releaseRange: function (range) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                dom.windowFromDocument(doc).focus();\n                Command.fn.releaseRange.call(cmd, range);\n            },\n            insertTable: function (table) {\n                var range = this.range;\n                range.insertNode(table);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                this._ensureFocusableAfterTable(table);\n            },\n            _ensureFocusableAfterTable: function (table) {\n                var siblingNodes = $(table).parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n                if (lastSibling === table) {\n                    dom.insertAfter(dom.createEmptyNode(this.editor.document, 'p'), table);\n                }\n            },\n            updateTable: function (data, table, selectedCells) {\n                var cmd = this;\n                var tableRows = $(table.rows).toArray();\n                var tableProp = data.tableProperties;\n                var rows = tableProp.rows;\n                var tHead = table.tHead;\n                var last = cmd._lastInCollection;\n                var lastSelectedRow, cellProp;\n                while (selectedCells.length > 1) {\n                    selectedCells.pop();\n                }\n                lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n                cmd._deleteTableRows(tableRows, tableRows.length - rows);\n                if (tableRows.length < rows) {\n                    cmd._addRows(lastSelectedRow, rows, tableRows);\n                }\n                dom.reMapTableColumns(table, COL_INDEX);\n                cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n                cmd._updateTableProperties(table, tableProp);\n                cellProp = data.cellProperties;\n                if (selectedCells[0]) {\n                    dom.attr(selectedCells[0], { id: cellProp.id || null });\n                }\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function (i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n                cmd._updateCaption(table, tableProp);\n                if (tHead) {\n                    cmd._updateHeadersWithThead(table, data);\n                } else {\n                    cmd._updateHeadersNoThead(table, data);\n                }\n                cmd._updateHeaderAssociates(table, tableProp);\n                dom.clearTableMappings(table, COL_INDEX);\n            },\n            _isHeadingRow: function (row) {\n                return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n            },\n            _isHeadingCell: function (cell) {\n                return dom.is(cell, TH);\n            },\n            cellsWithHeadersAssociated: function (table) {\n                var cells = $(table.rows).children();\n                var headingIds = [];\n                var checkHeader = function (header) {\n                    return headingIds.indexOf(header) > -1;\n                };\n                cells.each(function (c, cell) {\n                    if (cell.id && dom.is(cell, TH)) {\n                        headingIds.push(cell.id);\n                    }\n                });\n                var associatedCells = cells.filter(function (c, cell) {\n                    var headersAttr = cell.getAttribute(HEADERS);\n                    var headersArray;\n                    if (headersAttr && !dom.is(cell, TH)) {\n                        headersArray = headersAttr.split(' ');\n                        if (headersArray && headersArray.length > 0) {\n                            return headersArray.some(checkHeader);\n                        }\n                    }\n                    return false;\n                });\n                return !!associatedCells.length;\n            },\n            _insertCells: function (count, row, index) {\n                index = isNaN(index) ? -1 : index;\n                for (var i = 0, cell; i < count; i++) {\n                    cell = row.insertCell(index);\n                    cell.innerHTML = '&nbsp;';\n                }\n            },\n            _deleteTableRows: function (rows, count) {\n                for (var i = 0, row, rowParent; i < count; i++) {\n                    row = rows.pop();\n                    rowParent = row.parentNode;\n                    rowParent.removeChild(row);\n                    if (!rowParent.rows.length) {\n                        dom.remove(rowParent);\n                    }\n                }\n            },\n            createNewTable: function (data) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                var tableProp = data.tableProperties;\n                var table = dom.create(doc, TABLE);\n                var rowIndex = 0;\n                var thead;\n                cmd._updateTableProperties(table, tableProp);\n                cmd._updateCaption(table, tableProp);\n                if (tableProp.headerRows && tableProp.headerRows > 0) {\n                    thead = table.createTHead();\n                    cmd._createTableRows(data, thead, rowIndex, true);\n                    rowIndex += tableProp.headerRows;\n                }\n                var tbody = table.createTBody();\n                cmd._createTableRows(data, tbody, rowIndex, false);\n                dom.reMapTableColumns(table, COL_INDEX);\n                if (tableProp.cellsWithHeaders === 'ids') {\n                    dom.associateWithIds(table);\n                } else if (tableProp.cellsWithHeaders === 'scope') {\n                    cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n                }\n                dom.clearTableMappings(table, COL_INDEX);\n                return table;\n            },\n            _createTableRows: function (data, container, initialIndex, headerRows) {\n                var cmd = this;\n                var tableProp = data.tableProperties;\n                var cellProp = data.cellProperties;\n                var columns = tableProp.columns;\n                var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n                var cellPropToAll = cellProp.selectAllCells;\n                var headerColumns = tableProp.headerColumns;\n                for (var r = initialIndex, row; r < rows; r++) {\n                    row = container.insertRow();\n                    for (var c = 0, cell; c < columns; c++) {\n                        if (headerRows || headerColumns > c) {\n                            cell = document.createElement(TH);\n                        } else {\n                            cell = document.createElement(TD);\n                        }\n                        row.appendChild(cell);\n                        cell.innerHTML = '&nbsp;';\n                        if (r === 0 && c === 0 && cellProp.id) {\n                            cell.id = cellProp.id;\n                        }\n                        cmd._updateCellProperties(cell, cellPropToAll || r === 0 && c === 0 ? cellProp : {});\n                    }\n                }\n            },\n            _addRows: function (lastSelectedRow, rows, tableRows) {\n                var cmd = this;\n                var rowIndex = $(lastSelectedRow).index();\n                var cellsLength = lastSelectedRow.cells.length;\n                var newRowsCount = rows - tableRows.length;\n                var parent = lastSelectedRow.parentNode;\n                var row;\n                while (newRowsCount) {\n                    row = parent.insertRow(rowIndex + 1);\n                    cmd._insertCells(cellsLength - row.cells.length, row);\n                    newRowsCount--;\n                }\n            },\n            _updateColumns: function (tableRows, columns, selectedCells, lastSelectedRow) {\n                var cmd = this;\n                var last = cmd._lastInCollection;\n                var firstRowLastCell = last(tableRows[0].cells);\n                var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n                if (numberOfColumns > columns) {\n                    $(tableRows).each(function (i, row) {\n                        var lastCurrentCell = last(row.cells);\n                        var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                        while (rowColumns > columns) {\n                            if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                                lastCurrentCell.colSpan -= 1;\n                            } else {\n                                row.deleteCell(-1);\n                            }\n                            lastCurrentCell = last(row.cells);\n                            rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                        }\n                    });\n                }\n                if (numberOfColumns < columns) {\n                    var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                    $(tableRows).each(function (i, row) {\n                        var lastCurrentCell = last(row.cells);\n                        cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n                    });\n                }\n            },\n            _updateTableProperties: function (table, data) {\n                var style = this._getStylesData(data);\n                dom.attr(table, {\n                    cellSpacing: data.cellSpacing || null,\n                    cellPadding: data.cellPadding || null,\n                    className: data.className || null,\n                    id: data.id || null,\n                    summary: data.summary || null,\n                    style: style || null\n                });\n                $(table).addClass('k-table');\n            },\n            _updateCellProperties: function (cell, data) {\n                var style = this._getStylesData(data);\n                style.padding = data.cellPadding || null;\n                style.margin = data.cellMargin || null;\n                dom.attr(cell, {\n                    style: style || null,\n                    className: data.className || null\n                });\n            },\n            _updateCaption: function (table, data) {\n                if (table.caption && !data.captionContent) {\n                    table.deleteCaption();\n                } else if (data.captionContent) {\n                    var caption = table.createCaption();\n                    caption.innerHTML = data.captionContent;\n                    var alignment = this._getAlignmentData(data.captionAlignment);\n                    dom.attr(caption, {\n                        style: {\n                            textAlign: alignment.textAlign,\n                            verticalAlign: alignment.verticalAlign\n                        }\n                    });\n                }\n            },\n            _updateHeadersNoThead: function (table, data) {\n                var cmd = this;\n                var tableProp = data.tableProperties;\n                var rows = table.rows;\n                var row, cells, cell, i, j;\n                for (i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    cells = row.cells;\n                    for (j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                            dom.changeTag(cell, TH, false);\n                        } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                            dom.changeTag(cell, TD, false);\n                        }\n                    }\n                }\n            },\n            _updateHeadersWithThead: function (table, data) {\n                var cmd = this;\n                var tableProp = data.tableProperties;\n                var thead = table.tHead;\n                var rowIndex = 0;\n                var tbody = table.tBodies[0];\n                var row, cell, i;\n                if (!tbody) {\n                    tbody = table.createTBody();\n                }\n                if (tableProp.headerRows && tableProp.headerRows > 0) {\n                    if (!thead) {\n                        thead = table.createTHead();\n                    }\n                    while (thead.rows.length < tableProp.headerRows) {\n                        thead.appendChild(tbody.rows[0]);\n                    }\n                    while (thead.rows.length > tableProp.headerRows) {\n                        tbody.appendChild(thead.rows[0]);\n                    }\n                    cmd._swapToHeaderCells(thead);\n                } else if (thead) {\n                    while (thead.rows.length > 0) {\n                        tbody.appendChild(thead.rows[thead.rows.length - 1]);\n                    }\n                    table.deleteTHead();\n                }\n                while (tbody.rows.length > rowIndex) {\n                    row = tbody.rows[rowIndex];\n                    for (i = 0; i < row.cells.length; i++) {\n                        cell = row.cells[i];\n                        if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                            dom.changeTag(cell, TD, false);\n                        } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                            dom.changeTag(cell, TH, false);\n                        }\n                    }\n                    rowIndex += 1;\n                }\n            },\n            _updateHeaderAssociates: function (table, tableProp) {\n                var cmd = this;\n                if (tableProp.cellsWithHeaders === 'ids') {\n                    if (!cmd.cellsWithHeadersAssociated(table)) {\n                        cmd._removeScopes(table);\n                    }\n                    dom.associateWithIds(table);\n                } else if (tableProp.cellsWithHeaders === 'scope') {\n                    if (cmd.cellsWithHeadersAssociated(table)) {\n                        cmd._removeAssociates(table);\n                    }\n                    cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n                } else {\n                    if (cmd.cellsWithHeadersAssociated(table)) {\n                        cmd._removeAssociates(table);\n                    } else {\n                        cmd._removeScopes(table);\n                    }\n                }\n            },\n            _addScopes: function (table, headerRows, headerCols) {\n                var rows = table.rows;\n                var i, j, row, cell;\n                for (i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    for (j = 0; j < row.cells.length; j++) {\n                        cell = row.cells[j];\n                        if (i < headerRows) {\n                            cell.setAttribute(SCOPE, COL);\n                        } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                            cell.setAttribute(SCOPE, ROW);\n                        }\n                    }\n                }\n            },\n            _removeScopes: function (table) {\n                $(table).find(TH).removeAttr(SCOPE);\n                $(table).find(COL).remove();\n                $(table).find(COLGROUP).remove();\n            },\n            _removeAssociates: function (table) {\n                $(table).find('th, td').removeAttr('id headers');\n            },\n            _swapToHeaderCells: function (thead) {\n                var tds = $(thead).find('td');\n                var swapCell = function (index, cell) {\n                    dom.changeTag(cell, TH, false);\n                };\n                tds.each(swapCell);\n            },\n            _getStylesData: function (data) {\n                var alignment = this._getAlignmentData(data.alignment);\n                var whiteSpace = 'wrapText' in data ? data.wrapText ? '' : 'nowrap' : null;\n                return {\n                    width: data.width ? data.width + data.widthUnit : null,\n                    height: data.height ? data.height + data.heightUnit : null,\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign,\n                    backgroundColor: data.bgColor || '',\n                    borderWidth: data.borderWidth,\n                    borderStyle: data.borderStyle,\n                    borderColor: data.borderColor || '',\n                    borderCollapse: data.collapseBorders ? 'collapse' : null,\n                    whiteSpace: whiteSpace\n                };\n            },\n            _getAlignmentData: function (alignment) {\n                var textAlign = '';\n                var verticalAlign = textAlign;\n                if (alignment) {\n                    if (alignment.indexOf(' ') != -1) {\n                        var align = alignment.split(' ');\n                        textAlign = align[0];\n                        verticalAlign = align[1];\n                    } else {\n                        textAlign = alignment;\n                    }\n                }\n                return {\n                    textAlign: textAlign,\n                    verticalAlign: verticalAlign\n                };\n            },\n            parseTable: function (table, selectedCells) {\n                if (!table) {\n                    return {\n                        tableProperties: {},\n                        selectedCells: []\n                    };\n                }\n                var cmd = this;\n                var tStyle = table.style;\n                var rows = table.rows;\n                var caption = table.caption;\n                var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n                captionClone.find('.k-marker').remove();\n                var cssClass = table.className;\n                cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, '');\n                cssClass = cssClass.replace(/\\sk-table\\s/, ' ');\n                cssClass = cssClass.replace(/^k-table$/, '');\n                var tableAlignment = cmd._getAlignment(table, true);\n                var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n                var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n                var cellsWithHeaders;\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cellsWithHeaders = 'ids';\n                } else if ($(table).find('th[scope]').length > 0) {\n                    cellsWithHeaders = 'scope';\n                } else {\n                    cellsWithHeaders = 'none';\n                }\n                dom.reMapTableColumns(table, COL_INDEX);\n                var numberOfColumns = dom._getNumberOfColumns(table);\n                var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n                dom.clearTableMappings(table, COL_INDEX);\n                var tableJson = {\n                    tableProperties: {\n                        width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                        height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                        columns: numberOfColumns,\n                        rows: rows.length,\n                        widthUnit: cmd._getUnit(tStyle.width),\n                        heightUnit: cmd._getUnit(tStyle.height),\n                        cellSpacing: table.cellSpacing,\n                        cellPadding: table.cellPadding,\n                        alignment: tableAlignment.textAlign,\n                        bgColor: tStyle.backgroundColor || table.bgColor,\n                        className: cssClass,\n                        id: table.id,\n                        borderWidth: tStyle.borderWidth || table.border,\n                        borderColor: tStyle.borderColor,\n                        borderStyle: tStyle.borderStyle || '',\n                        collapseBorders: !!tStyle.borderCollapse,\n                        summary: table.summary,\n                        captionContent: caption ? captionClone.html() : '',\n                        captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + ' ' + captionAlignment.verticalAlign : '',\n                        headerRows: numberOfHeaderRows,\n                        headerColumns: numberOfHeaderColumns,\n                        cellsWithHeaders: cellsWithHeaders\n                    },\n                    selectedCells: []\n                };\n                tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n                return tableJson;\n            },\n            parseTableRows: function (rows, selectedCells, tableJson) {\n                var cmd = this;\n                var data = [], row, rowData, cells, cell, cellData;\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    rowData = { cells: [] };\n                    cells = row.cells;\n                    data.push(rowData);\n                    for (var j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        cellData = cmd.parseCell(cell);\n                        if ($.inArray(cell, selectedCells) != -1) {\n                            tableJson.selectedCells.push(cellData);\n                        }\n                        rowData.cells.push(cellData);\n                    }\n                }\n                return data;\n            },\n            parseCell: function (cell) {\n                var cmd = this;\n                var cStyle = cell.style;\n                var alignment = cmd._getAlignment(cell);\n                alignment = alignment.textAlign ? alignment.textAlign + ' ' + alignment.verticalAlign : '';\n                var data = {\n                    width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                    height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                    widthUnit: cmd._getUnit(cStyle.width),\n                    heightUnit: cmd._getUnit(cStyle.height),\n                    cellMargin: cStyle.margin,\n                    cellPadding: cStyle.padding,\n                    alignment: alignment,\n                    bgColor: cStyle.backgroundColor || cell.bgColor,\n                    className: cell.className,\n                    id: cell.id,\n                    borderWidth: cStyle.borderWidth || cell.border,\n                    borderColor: cStyle.borderColor,\n                    borderStyle: cStyle.borderStyle,\n                    wrapText: cStyle.whiteSpace != 'nowrap'\n                };\n                return data;\n            },\n            _getAlignment: function (element, horizontalOnly) {\n                var style = element.style;\n                var hAlign = style.textAlign || element.align || '';\n                if (horizontalOnly) {\n                    return { textAlign: hAlign };\n                }\n                var vAlign = style.verticalAlign || element.vAlign || '';\n                if (hAlign && vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: vAlign\n                    };\n                }\n                if (!hAlign && vAlign) {\n                    return {\n                        textAlign: 'left',\n                        verticalAlign: vAlign\n                    };\n                }\n                if (hAlign && !vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: 'top'\n                    };\n                }\n                return {\n                    textAlign: '',\n                    verticalAlign: ''\n                };\n            },\n            _getUnit: function (value) {\n                var unit = (value || '').match(reUnit);\n                return unit ? unit[0] : 'px';\n            },\n            _selectedTable: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return tableFormatFinder.findSuitable(nodes)[0];\n            },\n            _selectedCells: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return cellsFormatFinder.findSuitable(nodes);\n            },\n            _lastInCollection: function (collection) {\n                return collection[collection.length - 1];\n            }\n        });\n        var TableWizardTool = Editor.Tool.extend({\n            command: function (options) {\n                options.insertNewTable = this.options.insertNewTable;\n                return new TableWizardCommand(options);\n            }\n        });\n        var TableWizardEditTool = TableWizardTool.extend({\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                if (isFormatted === true) {\n                    ui.parent().addClass('k-hidden k-disabled');\n                    ui.attr('disabled', 'disabled');\n                    ui.addClass('k-disabled');\n                } else {\n                    ui.parent().removeClass('k-hidden k-disabled');\n                    ui.prop('disabled', false);\n                    ui.removeClass('k-disabled');\n                }\n            }\n        });\n        kendo.ui.editor.TableWizardTool = TableWizardTool;\n        kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n        registerTool('tableWizard', new TableWizardEditTool({\n            command: TableWizardCommand,\n            insertNewTable: false,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Wizard'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-dialog', [\n        'editor/table-wizard/table-wizard-command',\n        'kendo.tabstrip'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, numericTextBoxSettings = {\n                format: '0',\n                min: 0\n            }, units = [\n                'px',\n                'em'\n            ], borderStyles = [\n                'solid',\n                'dotted',\n                'dashed',\n                'double',\n                'groove',\n                'ridge',\n                'inset',\n                'outset',\n                'initial',\n                'inherit',\n                'none',\n                'hidden'\n            ];\n        var DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n        var tableAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var cellAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var accessibilityAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var dialogTemplate = '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' + '<ul>' + '<li class=\"k-state-active\">#= messages.tableTab #</li>' + '<li>#= messages.cellTab #</li>' + '<li>#= messages.accessibilityTab #</li>' + '</ul>' + '<div id=\"k-table-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-width\" />' + '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-height\" />' + '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-id\" class=\"k-input-inner\" type=\"text\" /></span>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-border-width\" />' + '<input id=\"k-editor-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' + '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' + '</div>' + '</div>' + '<div id=\"k-cell-properties\">' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' + '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-width\" />' + '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-height\" />' + '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-id\" class=\"k-input-inner\" type=\"text\" /></span>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' + '<input id=\"k-editor-cell-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' + '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' + '</div>' + '</div>' + '<div id=\"k-accessibility-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-header-rows\">#= messages.headerRows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-header-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-header-columns\">#= messages.headerColumns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-header-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-table-caption\" class=\"k-input-inner\" type=\"text\"/></span>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"><textarea id=\"k-editor-accessibility-summary\" rows=\"5\" class=\"k-input-inner k-editor-accessibility-summary\" placeholder=\"#= messages.tableSummaryPlaceholder #\"></textarea></span>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cells-headers\">#= messages.associateCellsWithHeaders #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<select id=\"k-editor-cells-headers\">' + '<option value=\"none\">#= messages.associateNone #</option>' + '<option value=\"scope\">#= messages.associateScope #</option>' + '<option value=\"ids\">#= messages.associateIds #</option>' + '</select>' + '</div>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons\">' + '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-dialog-ok\"><span class=\"k-button-text\">#= messages.dialogOk #</span></button>' + '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-dialog-close\"><span class=\"k-button-text\">#= messages.dialogCancel #</span></button>' + '</div>' + '</div>' + '</div>';\n        var TableWizardDialog = kendo.Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            open: function () {\n                var that = this, options = that.options, dialogOptions = options.dialogOptions, tableData = options.table, dialog, messages = options.messages, isIE = kendo.support.browser.msie;\n                function close(e) {\n                    e.preventDefault();\n                    that.destroy();\n                    dialog.destroy();\n                }\n                function okHandler(e) {\n                    that.collectDialogValues(tableData);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    options.closeCallback(tableData);\n                }\n                function closeHandler(e) {\n                    close(e);\n                    options.closeCallback();\n                }\n                dialogOptions.close = closeHandler;\n                dialogOptions.title = messages.tableWizard;\n                dialogOptions.visible = options.visible;\n                dialog = $(that._dialogTemplate(messages)).appendTo(document.body).kendoWindow(dialogOptions).closest('.k-window').toggleClass('k-rtl', options.isRtl).end().find('.k-dialog-ok').on('click', okHandler).end().find('.k-dialog-close').on('click', closeHandler).end().data('kendoWindow');\n                var element = dialog.element;\n                that._initTabStripComponent(element);\n                that._initTableViewComponents(element, tableData);\n                that._initCellViewComponents(element, tableData);\n                that._initAccessibilityViewComponents(element, tableData);\n                dialog.center();\n                dialog.open();\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n            },\n            _initTabStripComponent: function (element) {\n                var components = this.components = {};\n                components.tabStrip = element.find('#k-table-wizard-tabs').kendoTabStrip({ animation: false }).data('kendoTabStrip');\n            },\n            collectDialogValues: function () {\n                var that = this;\n                var data = that.options.table;\n                that._collectTableViewValues(data);\n                that._collectCellViewValues(data);\n                that._collectAccessibilityViewValues(data);\n            },\n            _collectTableViewValues: function (tableData) {\n                var tableView = this.components.tableView;\n                var tableProperties = tableData.tableProperties;\n                tableProperties.width = tableView.width.value();\n                tableProperties.widthUnit = tableView.widthUnit.value();\n                tableProperties.height = tableView.height.value();\n                tableProperties.columns = tableView.columns.value();\n                tableProperties.rows = tableView.rows.value();\n                tableProperties.heightUnit = tableView.heightUnit.value();\n                tableProperties.cellSpacing = tableView.cellSpacing.value();\n                tableProperties.cellPadding = tableView.cellPadding.value();\n                tableProperties.alignment = tableView.alignment.value();\n                tableProperties.bgColor = tableView.bgColor.value();\n                tableProperties.className = tableView.className.value;\n                tableProperties.id = tableView.id.value;\n                tableProperties.borderWidth = tableView.borderWidth.value();\n                tableProperties.borderColor = tableView.borderColor.value();\n                tableProperties.borderStyle = tableView.borderStyle.value();\n                tableProperties.collapseBorders = tableView.collapseBorders.checked;\n            },\n            _collectCellViewValues: function (table) {\n                var cellData = table.cellProperties = {};\n                var cellView = this.components.cellView;\n                cellData.selectAllCells = cellView.selectAllCells.checked;\n                cellData.width = cellView.width.value();\n                cellData.widthUnit = cellView.widthUnit.value();\n                cellData.height = cellView.height.value();\n                cellData.heightUnit = cellView.heightUnit.value();\n                cellData.cellMargin = cellView.cellMargin.value();\n                cellData.cellPadding = cellView.cellPadding.value();\n                cellData.alignment = cellView.alignment.value();\n                cellData.bgColor = cellView.bgColor.value();\n                cellData.className = cellView.className.value;\n                cellData.id = cellView.id.value;\n                cellData.borderWidth = cellView.borderWidth.value();\n                cellData.borderColor = cellView.borderColor.value();\n                cellData.borderStyle = cellView.borderStyle.value();\n                cellData.wrapText = cellView.wrapText.checked;\n                if (!cellData.width) {\n                    cellData.selectAllCells = true;\n                    cellData.width = 100 / table.tableProperties.columns;\n                    cellData.widthUnit = '%';\n                }\n            },\n            _collectAccessibilityViewValues: function (table) {\n                var tableProperties = table.tableProperties;\n                var accessibilityView = this.components.accessibilityView;\n                tableProperties.captionContent = accessibilityView.captionContent.value;\n                tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n                tableProperties.summary = accessibilityView.summary.value;\n                tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n                tableProperties.headerRows = accessibilityView.headerRows.value();\n                tableProperties.headerColumns = accessibilityView.headerColumns.value();\n            },\n            _addUnit: function (units, value) {\n                if (value && $.inArray(value, units) == -1) {\n                    units.push(value);\n                }\n            },\n            _initTableViewComponents: function (element, table) {\n                var that = this;\n                var components = that.components;\n                var tableView = components.tableView = {};\n                var tableProperties = table.tableProperties = table.tableProperties || {};\n                tableProperties.borderStyle = tableProperties.borderStyle || '';\n                var onColumnsNumberChange = function (args) {\n                    var accessibilityView = that.components.accessibilityView;\n                    var headerColumnsNumeric = accessibilityView.headerColumns;\n                    var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n                    var numberOfColumns = args.sender.value();\n                    if (numberOfColumns < currentNumberOfColumnsHeaders) {\n                        headerColumnsNumeric.value(numberOfColumns);\n                    }\n                    headerColumnsNumeric.max(numberOfColumns);\n                };\n                var onRowsNumberChange = function (args) {\n                    var accessibilityView = that.components.accessibilityView;\n                    var headerRowsNumeric = accessibilityView.headerRows;\n                    var currentNumberOfRowHeaders = headerRowsNumeric.value();\n                    var numberOfRows = args.sender.value();\n                    if (numberOfRows < currentNumberOfRowHeaders) {\n                        headerRowsNumeric.value(numberOfRows);\n                    }\n                    headerRowsNumeric.max(numberOfRows);\n                };\n                that._addUnit(units, tableProperties.widthUnit);\n                that._addUnit(units, tableProperties.heightUnit);\n                that._initNumericTextbox(element.find('#k-editor-table-width'), 'width', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-table-height'), 'height', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-table-columns'), 'columns', tableProperties, tableView, {\n                    min: 1,\n                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                    change: onColumnsNumberChange\n                });\n                that._initNumericTextbox(element.find('#k-editor-table-rows'), 'rows', tableProperties, tableView, {\n                    min: 1,\n                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                    change: onRowsNumberChange\n                });\n                that._initDropDownList(element.find('#k-editor-table-width-type'), 'widthUnit', tableProperties, tableView, units);\n                that._initDropDownList(element.find('#k-editor-table-height-type'), 'heightUnit', tableProperties, tableView, units);\n                that._initNumericTextbox(element.find('#k-editor-table-cell-spacing'), 'cellSpacing', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-table-cell-padding'), 'cellPadding', tableProperties, tableView);\n                that._initTableAlignmentDropDown(element.find('#k-editor-table-alignment'), tableProperties);\n                that._initColorPicker(element.find('#k-editor-table-bg'), 'bgColor', tableProperties, tableView);\n                that._initInput(element.find('#k-editor-css-class'), 'className', tableProperties, tableView);\n                that._initInput(element.find('#k-editor-id'), 'id', tableProperties, tableView);\n                that._initNumericTextbox(element.find('#k-editor-border-width'), 'borderWidth', tableProperties, tableView);\n                that._initColorPicker(element.find('#k-editor-border-color'), 'borderColor', tableProperties, tableView);\n                that._initBorderStyleDropDown(element.find('#k-editor-border-style'), 'borderStyle', tableProperties, tableView, borderStyles);\n                that._initCheckbox(element.find('#k-editor-collapse-borders'), 'collapseBorders', tableProperties, tableView);\n            },\n            _initCellViewComponents: function (element, table) {\n                var components = this.components;\n                var cellView = components.cellView = {};\n                table.selectedCells = table.selectedCells = table.selectedCells || [];\n                var cellProperties = table.selectedCells[0] || {\n                    borderStyle: '',\n                    wrapText: true\n                };\n                this._addUnit(units, cellProperties.widthUnit);\n                this._addUnit(units, cellProperties.heightUnit);\n                this._initCheckbox(element.find('#k-editor-selectAllCells'), 'selectAllCells', table.tableProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-width'), 'width', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-height'), 'height', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-width-type'), 'widthUnit', cellProperties, cellView, units);\n                this._initDropDownList(element.find('#k-editor-cell-height-type'), 'heightUnit', cellProperties, cellView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-margin'), 'cellMargin', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-table-cells-padding'), 'cellPadding', cellProperties, cellView);\n                this._initCellAlignmentDropDown(element.find('#k-editor-cell-alignment'), cellProperties);\n                this._initColorPicker(element.find('#k-editor-cell-bg'), 'bgColor', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-css-class'), 'className', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-id'), 'id', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-border-width'), 'borderWidth', cellProperties, cellView);\n                this._initColorPicker(element.find('#k-editor-cell-border-color'), 'borderColor', cellProperties, cellView);\n                this._initBorderStyleDropDown(element.find('#k-editor-cell-border-style'), 'borderStyle', cellProperties, cellView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-wrap-text'), 'wrapText', cellProperties, cellView);\n            },\n            _initAccessibilityViewComponents: function (element, table) {\n                var components = this.components;\n                var accessibilityView = components.accessibilityView = {};\n                var tableProperties = table.tableProperties;\n                this._initInput(element.find('#k-editor-table-caption'), 'captionContent', tableProperties, accessibilityView);\n                this._initAccessibilityAlignmentDropDown(element.find('#k-editor-accessibility-alignment'), tableProperties);\n                this._initInput(element.find('#k-editor-accessibility-summary'), 'summary', tableProperties, accessibilityView);\n                this._initAssociationDropDown(element.find('#k-editor-cells-headers'), 'cellsWithHeaders', { valuePrimitive: true }, tableProperties, accessibilityView);\n                this._initNumericTextbox(element.find('#k-editor-table-header-rows'), 'headerRows', tableProperties, accessibilityView, { max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n                this._initNumericTextbox(element.find('#k-editor-table-header-columns'), 'headerColumns', tableProperties, accessibilityView, { max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n            },\n            _initNumericTextbox: function (element, property, data, storage, settings) {\n                var component = storage[property] = element.kendoNumericTextBox(settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings).data('kendoNumericTextBox');\n                if (property in data) {\n                    component.value(parseInt(data[property], 10));\n                }\n            },\n            _initDropDownList: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({ dataSource: dataSource }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initBorderStyleDropDown: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({\n                    dataSource: dataSource,\n                    optionLabel: this.options.messages.borderNone\n                }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initTableAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var tableView = this.components.tableView;\n                var dataSource = tableAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeft;\n                dataSource[1].tooltip = messages.alignCenter;\n                dataSource[2].tooltip = messages.alignRight;\n                dataSource[3].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, 'alignment', data, tableView);\n            },\n            _initCellAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var cellView = this.components.cellView;\n                var dataSource = cellAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftMiddle;\n                dataSource[4].tooltip = messages.alignCenterMiddle;\n                dataSource[5].tooltip = messages.alignRightMiddle;\n                dataSource[6].tooltip = messages.alignLeftBottom;\n                dataSource[7].tooltip = messages.alignCenterBottom;\n                dataSource[8].tooltip = messages.alignRightBottom;\n                dataSource[9].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, 'alignment', data, cellView);\n            },\n            _initAccessibilityAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var accessibilityView = this.components.accessibilityView;\n                var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftBottom;\n                dataSource[4].tooltip = messages.alignCenterBottom;\n                dataSource[5].tooltip = messages.alignRightBottom;\n                dataSource[6].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, 'captionAlignment', data, accessibilityView);\n            },\n            _initAlignmentDropDown: function (element, settings, name, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                component.list.addClass('k-align').css('width', '110px');\n                this._setComponentValue(component, data, name);\n            },\n            _initAssociationDropDown: function (element, name, settings, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                this._setComponentValue(component, data, name);\n            },\n            _setComponentValue: function (component, data, property) {\n                if (property in data) {\n                    component.value(data[property]);\n                }\n            },\n            _initColorPicker: function (element, property, data, storage) {\n                var component = storage[property] = element.kendoColorPicker({\n                    buttons: false,\n                    clearButton: true\n                }).data('kendoColorPicker');\n                if (data[property]) {\n                    component.value(data[property]);\n                }\n            },\n            _initInput: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.value = data[property];\n                }\n            },\n            _initCheckbox: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.checked = data[property];\n                }\n            },\n            destroy: function () {\n                this._destroyComponents(this.components.tableView);\n                this._destroyComponents(this.components.cellView);\n                this._destroyComponents(this.components.accessibilityView);\n                this._destroyComponents(this.components);\n                delete this.components;\n            },\n            _destroyComponents: function (components) {\n                for (var widget in components) {\n                    if (components[widget].destroy) {\n                        components[widget].destroy();\n                    }\n                    delete components[widget];\n                }\n            },\n            _dialogTemplate: function (messages) {\n                return kendo.template(dialogTemplate)({ messages: messages });\n            }\n        });\n        kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'kendo.numerictextbox',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/command',\n        'editor/components',\n        'editor/toolbar',\n        'editor/immutables',\n        'editor/plugins/viewhtml',\n        'editor/plugins/link',\n        'editor/plugins/lists',\n        'editor/plugins/formatting',\n        'editor/plugins/image',\n        'editor/plugins/import',\n        'editor/plugins/insert',\n        'editor/plugins/export',\n        'editor/plugins/indent',\n        'editor/plugins/linebreak',\n        'editor/plugins/format',\n        'editor/plugins/inlineformat',\n        'editor/plugins/formatblock',\n        'editor/plugins/file',\n        'editor/plugins/tables',\n        'editor/plugins/clipboard',\n        'editor/plugins/keyboard',\n        'editor/plugins/exportpdf',\n        'editor/plugins/print',\n        'editor/plugins/formatpainter',\n        'editor/resizing/column-resizing',\n        'editor/resizing/row-resizing',\n        'editor/resizing/element-resizing',\n        'editor/resizing/element-resize-handle',\n        'editor/table-wizard/table-wizard-command',\n        'editor/table-wizard/table-wizard-dialog'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-tablewizard',\n                name: 'Table wizard dialog',\n                description: 'Support for table properties configuration',\n                depends: [\n                    'tabstrip',\n                    'button',\n                    'numerictextbox'\n                ]\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}