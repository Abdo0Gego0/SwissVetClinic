{"version":3,"sources":["kendo.scheduler.timelineview.js"],"names":["f","define","$","undefined","toInvariantTime","date","staticDate","Date","setTime","getMilliseconds","getWorkDays","options","workDays","dayIndex","workWeekEnd","length","workWeekStart","Math","abs","push","setColspan","columnLevel","i","count","columns","colspan","collidingEvents","elements","left","right","idx","startPosition","overlaps","endPosition","rectLeft","rectRight","eventsForSlot","event","events","TimelineView","kendo","window","ui","SchedulerView","outerWidth","_outerWidth","outerHeight","_outerHeight","extend","proxy","getDate","MS_PER_DAY","MS_PER_MINUTE","CURRENT_TIME_MARKER_CLASS","CURRENT_TIME_MARKER_ARROW_CLASS","SCHEDULER_HEADER_WRAP_CLASS","INVERSE_COLOR_CLASS","BORDER_SIZE_COEFF","NS","EVENT_TEMPLATE","template","DATA_HEADER_TEMPLATE","EVENT_WRAPPER_STRING","TimelineGroupedView","Class","init","view","this","_view","_getTimeSlotByPosition","x","y","groupIndex","group","groups","timeSlotByPosition","_hideHeaders","timesHeader","find","last","hide","datesHeader","_setColspan","timeColumn","_createRowsLayout","resources","rows","groupHeaderTemplate","_createVerticalColumnsLayout","_createColumnsLayout","_getRowCount","_groupCount","_getGroupsCount","_addContent","dates","columnCount","groupsCount","rowCount","start","end","slotTemplate","isVerticalGrouped","rowIdx","groupIdx","html","appendRow","tmplDate","content","classes","_resourceBySlot","isToday","workDayStart","workDayEnd","_isWorkDay","_forTimeRange","_addTimeSlotsCollections","groupCount","datesCount","tableRows","interval","isVerticallyGrouped","rowMultiplier","time","rowIndex","cellMultiplier","cells","cellsPerGroup","cellsPerDay","dateIndex","cellOffset","cellIndex","floor","children","startTime","_addTimeSlotToCollection","_getVerticalGroupCount","_getVerticalRowCount","eventGroups","maxRowCount","_isVerticallyGrouped","_renderEvent","eventGroup","adjustedEvent","range","container","eventObject","element","_createEventElement","occurrence","head","tail","appendTo","css","top","height","eventHeight","_startTime","_endTime","uid","slotRange","offsetTop","_inverseEventColor","addContinuousEvent","isAllDay","_arrangeRows","_verticalCountForLevel","level","_rowCountForLevel","_horizontalCountForLevel","_columnCountForLevel","_updateCurrentVerticalTimeMarker","ranges","currentTime","elementHtml","headerWrap","round","innerRect","getTime","timesTableMarker","prependTo","addClass","_adjustLeftPosition","prev","position","width","scrollHeight","_changeGroup","_prevGroupSlot","slot","isDay","collection","_collection","_nextGroupSlot","first","_verticalSlots","selection","reverse","_verticalMethod","_normalizeVerticalSelection","_horizontalSlots","method","startSlot","endSlot","multiple","result","_isHorizontallyGrouped","_changeVerticalViewPeriod","_changeHorizontalViewPeriod","slots","shift","_changeViewPeriod","_updateDirection","_createMoveHint","rect","hint","snap","offsetHeight","inverseColor","_appendMoveHint","_isRtl","scrollWidth","clientWidth","TimelineGroupedByDateView","times","eq","_createDateLayout","subColumns","isMajorTickColumn","isMiddleColumn","isLastSlotColumn","minorTickColumns","workDateIndex","tempStart","minorTickCount","msMajorInterval","majorTick","msInterval","_dates","startIndex","endIndex","currentSlot","dateRange","eventObjects","index","_timeSlotCollections","_slots","timeSlotRanges","firstTimesCell","lastTimesCell","markerTopPosition","timesTableMarkerCss","previous","_changeDate","collections","_getCollections","tempSlot","slotIdx","startEnd","offsetLeft","offsetWidth","scheduler","that","fn","call","_groupedView","_getGroupedView","title","name","_workDays","_templates","_editable","calculateDateRange","_groups","_currentTime","_isVirtualized","_isGroupedByDate","_getNextEventIndexBySlot","sortedEvents","tempIndex","startDate","_getSelectedSlot","pad","_getSortedEvents","uniqueAllEvents","sort","second","isDaySlot","_currentTimeMarkerUpdater","_updateCurrentTimeMarker","timezone","timezoneOffset","currentGroup","utcCurrentTime","slotElement","remove","_isInDateSlot","currentTimeMarker","useLocalTimezone","dataSource","schema","offset","convert","getTimezoneOffset","orientation","toUtcTime","slotByStartDate","setUpdateTimer","markerOptions","updateInterval","_currentTimeUpdateTimer","setInterval","editable","_isMobile","_touchEditable","_mouseEditable","on","e","trigger","closest","attr","preventDefault","create","resourceInfo","_slotByPosition","pageX","pageY","eventInfo","endDate","update","threshold","support","mobileOS","android","_addUserEvents","UserEvents","useClickAsTap","browser","edge","filter","tap","_scrolling","location","_editUserEvents","eventElement","touchElement","target","touch","initialTouch","hasClass","mozilla","webkit","version","scrollLeft","msie","scrollTop","ceil","selectedDateFormat","selectedShortDateFormat","selectedMobileDateFormat","today","endTime","showWorkHours","eventMinWidth","columnWidth","majorTimeHeaderTemplate","eventTemplate","dateHeaderTemplate","footer","command","messages","defaultRowText","showFullDay","showWorkDay","settings","Template","templateSettings","_eventTmpl","_render","_startDate","_endDate","_calculateSlotRanges","createLayout","_layout","_content","_footer","_setContentWidth","refreshLayout","th","currentTarget","contentWidth","contentTable","minWidth","calculatedWidth","add","slotRanges","rangeStart","rangeEnd","slotStartTime","slotEndTime","_slotRanges","min","max","action","verticalByDate","msMin","msMax","majorTickDivider","isLastMajorSlot","minorTickIndex","timeColumns","text","groupedView","minorTickSlots","className","minorTicks","middleColumn","lastSlotColumn","minorSlotsCount","slice","groupedResources","_groupOrientation","isWorkDay","currentDate","columnLevels","rowLevel","rowLevels","day","getDay","append","_addResourceView","addTimeSlotCollection","addDays","_timeSlotGroups","_timeSlotInterval","cell","getTimeSlotCollection","UTC","getFullYear","getMonth","setAttribute","addTimeSlot","visibleEndDate","nextDate","nextDay","previousDate","previousDay","render","eventsByResource","_headerColumnCount","data","Query","field","dir","toArray","_eventsByResource","_renderEvents","_setRowsHeight","_positionEvents","eventsForGroup","eventUid","eventIndex","Array","isArray","_positionEvent","rowsCount","rowHeight","timesRow","row","eventBottomOffset","_getBottomRowOffset","verticalGroupCount","_refreshSlots","minOffset","maxOffset","isMobile","slotsCollection","lastSlot","offsetRight","eventOffset","refresh","parentValue","itemIdx","value","eventsFilteredByResource","resource","item","itemParentValue","getter","dataParentValueField","_resourceValue","operator","groupEqFilter","_isInTimeSlot","slotIndex","_adjustEvent","eventStartTime","_time","eventEndTime","adjustedStartDate","adjustedEndDate","clone","isMultiDayEvent","duration","_continuousEvents","showDelete","destroy","resizable","resize","eventStartDate","eventEndDate","eventResources","apply","ns","singleDay","angular","dataItem","rowEvents","j","eventLength","addEvent","createRows","_updateEventForSelection","_eventOptionsForMove","_updateEventForResize","set","_updateMoveHint","distance","rangeIndex","clonedEvent","eventDuraton","_removeMoveHint","_moveHint","_updateResizeHint","startRect","format","_removeResizeHint","_createResizeHint","_resizeHint","toString","toLocalDate","selectionByElement","vertical","collectionIndex","backward","prevGroupSlot","nextGroupSlot","newStart","newEnd","_isInRange","move","key","handled","keys","DOWN","UP","LEFT","RIGHT","off","clearInterval","resourceIndex","levels","groupLevel","groupLevelMember","passedChildren","numberOfChildren","groupOptions","_setResourceValue","TimelineWeekView","selectedDate","dayOfWeek","calendarInfo","firstDay","TimelineWorkWeekView","weekStart","map","indexOf","TimelineMonthView","firstDayOfMonth","lastDayOfMonth","jQuery","amd","a1","a2","a3"],"mappings":"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","file":"kendo.scheduler.timelineview.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.scheduler.timelineview', ['kendo.scheduler.view'], f);\n}(function () {\n    var __meta__ = {\n        id: 'scheduler.timelineview',\n        name: 'Scheduler Timeline View',\n        category: 'web',\n        description: 'The Scheduler Timeline View',\n        depends: ['scheduler.view'],\n        hidden: true\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, setTime = kendo.date.setTime, SchedulerView = ui.SchedulerView, outerWidth = kendo._outerWidth, outerHeight = kendo._outerHeight, extend = $.extend, proxy = $.proxy, getDate = kendo.date.getDate, getMilliseconds = kendo.date.getMilliseconds, MS_PER_DAY = kendo.date.MS_PER_DAY, MS_PER_MINUTE = kendo.date.MS_PER_MINUTE, CURRENT_TIME_MARKER_CLASS = 'k-current-time', CURRENT_TIME_MARKER_ARROW_CLASS = 'k-current-time-arrow', SCHEDULER_HEADER_WRAP_CLASS = 'k-scheduler-header-wrap', INVERSE_COLOR_CLASS = 'k-event-inverse', BORDER_SIZE_COEFF = 0.8666, NS = '.kendoTimelineView';\n        var EVENT_TEMPLATE = kendo.template('<div>' + '<div class=\"k-event-template k-event-time\">#:kendo.format(\"{0:t} - {1:t}\", start, end)#</div>' + '<div class=\"k-event-template\">${title}</div></div>'), DATA_HEADER_TEMPLATE = kendo.template('<span class=\\'k-link k-nav-day\\'>#=kendo.format(\\'{0:m}\\', date)#</span>'), EVENT_WRAPPER_STRING = '<div role=\"gridcell\" aria-selected=\"false\" ' + 'data-#=ns#uid=\"#=uid#\"' + '#if (resources[0]) { #' + 'style=\"background-color:#=resources[0].color#; border-color: #=resources[0].color#\"' + 'class=\"k-event\" ' + '#} else {#' + 'class=\"k-event\"' + '#}#' + '>' + '<span class=\"k-event-actions\">' + '# if(data.tail) {#' + '<span class=\"k-icon k-i-arrow-60-left\"></span>' + '#}#' + '# if(data.isException()) {#' + '<span class=\"k-icon k-i-non-recurrence\"></span>' + '# } else if(data.isRecurring()) {#' + '<span class=\"k-icon k-i-reload\"></span>' + '# } #' + '</span>' + '{0}' + '<span class=\"k-event-actions\">' + '#if (showDelete) {#' + '<a href=\"\\\\#\" class=\"k-link k-event-delete\" title=\"${data.messages.destroy}\" aria-label=\"${data.messages.destroy}\"><span class=\"k-icon k-i-close\"></span></a>' + '#}#' + '# if(data.head) {#' + '<span class=\"k-icon k-i-arrow-60-right\"></span>' + '#}#' + '</span>' + '#if(resizable && !data.tail){#' + '<span class=\"k-resize-handle k-resize-w\"></span>' + '#}#' + '#if(resizable && !data.head){#' + '<span class=\"k-resize-handle k-resize-e\"></span>' + '#}#' + '</div>';\n        function toInvariantTime(date) {\n            var staticDate = new Date(1980, 1, 1, 0, 0, 0);\n            setTime(staticDate, getMilliseconds(date));\n            return staticDate;\n        }\n        function getWorkDays(options) {\n            if (options.workDays && options.workDays.length) {\n                return options.workDays;\n            }\n            var workDays = [];\n            var dayIndex = options.workWeekStart % 7;\n            var workWeekEnd = Math.abs(options.workWeekEnd % 7);\n            workDays.push(dayIndex);\n            while (workWeekEnd != dayIndex) {\n                if (dayIndex > 6) {\n                    dayIndex -= 7;\n                } else {\n                    dayIndex++;\n                }\n                workDays.push(dayIndex);\n            }\n            return workDays;\n        }\n        function setColspan(columnLevel) {\n            var count = 0;\n            if (columnLevel.columns) {\n                for (var i = 0; i < columnLevel.columns.length; i++) {\n                    count += setColspan(columnLevel.columns[i]);\n                }\n                columnLevel.colspan = count;\n                return count;\n            } else {\n                columnLevel.colspan = 1;\n                return 1;\n            }\n        }\n        function collidingEvents(elements, left, right) {\n            var idx, startPosition, overlaps, endPosition;\n            for (idx = elements.length - 1; idx >= 0; idx--) {\n                startPosition = elements[idx].rectLeft;\n                endPosition = elements[idx].rectRight;\n                overlaps = startPosition <= left && endPosition >= left;\n                if (overlaps || startPosition >= left && endPosition <= right || left <= startPosition && right >= startPosition) {\n                    if (startPosition < left) {\n                        left = startPosition;\n                    }\n                    if (endPosition > right) {\n                        right = endPosition;\n                    }\n                }\n            }\n            return eventsForSlot(elements, left, right);\n        }\n        function eventsForSlot(elements, left, right) {\n            var events = [];\n            for (var idx = 0; idx < elements.length; idx++) {\n                var event = {\n                    rectLeft: elements[idx].rectLeft,\n                    rectRight: elements[idx].rectRight\n                };\n                if (event.rectLeft < left && event.rectRight > left || event.rectLeft >= left && event.rectRight <= right) {\n                    events.push(elements[idx]);\n                }\n            }\n            return events;\n        }\n        var TimelineGroupedView = kendo.Class.extend({\n            init: function (view) {\n                this._view = view;\n            },\n            _getTimeSlotByPosition: function (x, y, groupIndex) {\n                var group = this._view.groups[groupIndex];\n                return group.timeSlotByPosition(x, y);\n            },\n            _hideHeaders: function () {\n                var view = this._view;\n                view.timesHeader.find('table tr').last().hide();\n                view.datesHeader.find('table tr').last().hide();\n            },\n            _setColspan: function (timeColumn) {\n                setColspan(timeColumn);\n            },\n            _createRowsLayout: function (resources, rows, groupHeaderTemplate) {\n                var view = this._view;\n                return view._createRowsLayout(resources, rows, groupHeaderTemplate);\n            },\n            _createVerticalColumnsLayout: function (resources, rows, groupHeaderTemplate, columns) {\n                return columns;\n            },\n            _createColumnsLayout: function (resources, columns, groupHeaderTemplate) {\n                var view = this._view;\n                return view._createColumnsLayout(resources, columns, groupHeaderTemplate);\n            },\n            _getRowCount: function () {\n                var view = this._view;\n                return view._groupCount();\n            },\n            _getGroupsCount: function () {\n                return 1;\n            },\n            _addContent: function (dates, columnCount, groupsCount, rowCount, start, end, slotTemplate, isVerticalGrouped) {\n                var view = this._view;\n                var html = '';\n                var options = view.options;\n                var appendRow = function (date) {\n                    var content = '';\n                    var classes = '';\n                    var tmplDate;\n                    var resources = function (groupIndex) {\n                        return function () {\n                            return view._resourceBySlot({ groupIndex: groupIndex });\n                        };\n                    };\n                    if (kendo.date.isToday(dates[idx])) {\n                        classes += 'k-today';\n                    }\n                    if (kendo.date.getMilliseconds(date) < kendo.date.getMilliseconds(options.workDayStart) || kendo.date.getMilliseconds(date) >= kendo.date.getMilliseconds(options.workDayEnd) || !view._isWorkDay(dates[idx])) {\n                        classes += ' k-nonwork-hour';\n                    }\n                    content += '<td' + (classes !== '' ? ' class=\"' + classes + '\"' : '') + '>';\n                    tmplDate = kendo.date.getDate(dates[idx]);\n                    kendo.date.setTime(tmplDate, kendo.date.getMilliseconds(date));\n                    content += slotTemplate({\n                        date: tmplDate,\n                        resources: resources(isVerticalGrouped ? rowIdx : groupIdx)\n                    });\n                    content += '</td>';\n                    return content;\n                };\n                for (var rowIdx = 0; rowIdx < rowCount; rowIdx++) {\n                    html += '<tr>';\n                    for (var groupIdx = 0; groupIdx < groupsCount; groupIdx++) {\n                        for (var idx = 0, length = columnCount; idx < length; idx++) {\n                            html += view._forTimeRange(start, end, appendRow);\n                        }\n                    }\n                    html += '</tr>';\n                }\n                return html;\n            },\n            _addTimeSlotsCollections: function (groupCount, datesCount, tableRows, interval, isVerticallyGrouped) {\n                var view = this._view;\n                var rowCount = tableRows.length;\n                if (isVerticallyGrouped) {\n                    rowCount = Math.floor(rowCount / groupCount);\n                }\n                for (var groupIndex = 0; groupIndex < groupCount; groupIndex++) {\n                    var rowMultiplier = 0;\n                    var group = view.groups[groupIndex];\n                    var time;\n                    if (isVerticallyGrouped) {\n                        rowMultiplier = groupIndex;\n                    }\n                    var rowIndex = rowMultiplier * rowCount;\n                    var cellMultiplier = 0;\n                    if (!isVerticallyGrouped) {\n                        cellMultiplier = groupIndex;\n                    }\n                    var cells = tableRows[rowIndex].children;\n                    var cellsPerGroup = cells.length / (!isVerticallyGrouped ? groupCount : 1);\n                    var cellsPerDay = cellsPerGroup / datesCount;\n                    for (var dateIndex = 0; dateIndex < datesCount; dateIndex++) {\n                        var cellOffset = dateIndex * cellsPerDay + cellsPerGroup * cellMultiplier;\n                        time = getMilliseconds(new Date(+view.startTime()));\n                        for (var cellIndex = 0; cellIndex < cellsPerDay; cellIndex++) {\n                            view._addTimeSlotToCollection(group, cells, cellIndex, cellOffset, dateIndex, time, interval);\n                            time += interval;\n                        }\n                    }\n                }\n            },\n            _getVerticalGroupCount: function (groupsCount) {\n                return groupsCount;\n            },\n            _getVerticalRowCount: function (eventGroups, groupIndex, maxRowCount) {\n                var view = this._view;\n                return view._isVerticallyGrouped() ? eventGroups[groupIndex].maxRowCount : maxRowCount;\n            },\n            _renderEvent: function (eventGroup, event, adjustedEvent, group, range, container) {\n                var view = this._view;\n                var element;\n                element = view._createEventElement(adjustedEvent.occurrence, event, range.head || adjustedEvent.head, range.tail || adjustedEvent.tail);\n                element.appendTo(container).css({\n                    top: 0,\n                    height: view.options.eventHeight\n                });\n                var eventObject = {\n                    start: adjustedEvent.occurrence._startTime || adjustedEvent.occurrence.start,\n                    end: adjustedEvent.occurrence._endTime || adjustedEvent.occurrence.end,\n                    element: element,\n                    uid: event.uid,\n                    slotRange: range,\n                    rowIndex: 0,\n                    offsetTop: 0\n                };\n                eventGroup.events[event.uid] = eventObject;\n                view._inverseEventColor(element);\n                view.addContinuousEvent(group, range, element, event.isAllDay);\n                view._arrangeRows(eventObject, range, eventGroup);\n            },\n            _verticalCountForLevel: function (level) {\n                var view = this._view;\n                return view._rowCountForLevel(level);\n            },\n            _horizontalCountForLevel: function (level) {\n                var view = this._view;\n                return view._columnCountForLevel(level);\n            },\n            _updateCurrentVerticalTimeMarker: function (ranges, currentTime) {\n                var view = this._view;\n                var elementHtml = '<div class=\\'' + CURRENT_TIME_MARKER_CLASS + '\\'></div>';\n                var headerWrap = view.datesHeader.find('.' + SCHEDULER_HEADER_WRAP_CLASS);\n                var left = Math.round(ranges[0].innerRect(currentTime, new Date(currentTime.getTime() + 1), false).left);\n                var timesTableMarker = $(elementHtml).prependTo(headerWrap).addClass(CURRENT_TIME_MARKER_ARROW_CLASS + '-down');\n                timesTableMarker.css({\n                    left: view._adjustLeftPosition(left - outerWidth(timesTableMarker) * BORDER_SIZE_COEFF / 2),\n                    top: headerWrap.find('tr').last().prev().position().top\n                });\n                $(elementHtml).prependTo(view.content).css({\n                    left: view._adjustLeftPosition(left),\n                    width: '1px',\n                    height: view.content[0].scrollHeight - 1,\n                    top: 0\n                });\n            },\n            _changeGroup: function () {\n                return undefined;\n            },\n            _prevGroupSlot: function (slot, group, isDay) {\n                var view = this._view;\n                if (view._isVerticallyGrouped()) {\n                    return slot;\n                } else {\n                    var collection = group._collection(0, isDay);\n                    return collection.last();\n                }\n            },\n            _nextGroupSlot: function (slot, group, isDay) {\n                var view = this._view;\n                if (view._isVerticallyGrouped()) {\n                    return slot;\n                } else {\n                    var collection = group._collection(0, isDay);\n                    return collection.first();\n                }\n            },\n            _verticalSlots: function (selection, reverse) {\n                var view = this._view;\n                return view._changeGroup(selection, reverse);\n            },\n            _verticalMethod: function (reverse) {\n                return reverse ? 'leftSlot' : 'rightSlot';\n            },\n            _normalizeVerticalSelection: function () {\n                return undefined;\n            },\n            _horizontalSlots: function (selection, group, method, startSlot, endSlot, multiple, reverse) {\n                var view = this._view;\n                var result = {};\n                result.startSlot = group[method](startSlot);\n                result.endSlot = group[method](endSlot);\n                if (!multiple && view._isHorizontallyGrouped() && (!result.startSlot || !result.endSlot)) {\n                    result.startSlot = result.endSlot = view._changeGroup(selection, reverse);\n                }\n                return result;\n            },\n            _changeVerticalViewPeriod: function () {\n                return false;\n            },\n            _changeHorizontalViewPeriod: function (slots, shift, selection, reverse) {\n                var view = this._view;\n                if ((!slots.startSlot || !slots.endSlot) && !shift && view._changeViewPeriod(selection, reverse, false)) {\n                    return true;\n                }\n                return false;\n            },\n            _updateDirection: function (selection, ranges, shift, reverse) {\n                var view = this._view;\n                view._updateDirection(selection, ranges, shift, reverse, true);\n            },\n            _createMoveHint: function (range, adjustedEvent) {\n                var view = this._view;\n                var startSlot = range.start;\n                var hint = view._createEventElement(adjustedEvent.occurrence, adjustedEvent.occurrence, false, false);\n                hint.addClass('k-event-drag-hint');\n                var rect = range.innerRect(adjustedEvent.occurrence.start, adjustedEvent.occurrence.end, view.options.snap);\n                var width = rect.right - rect.left;\n                if (width < 0) {\n                    width = 0;\n                }\n                var left = view._adjustLeftPosition(rect.left);\n                var css = {\n                    left: left,\n                    top: startSlot.offsetTop,\n                    height: startSlot.offsetHeight,\n                    width: width\n                };\n                hint.css(css);\n                if (adjustedEvent.occurrence.inverseColor) {\n                    hint.addClass(INVERSE_COLOR_CLASS);\n                }\n                view._appendMoveHint(hint);\n            },\n            _adjustLeftPosition: function (left) {\n                var view = this._view;\n                if (view._isRtl) {\n                    left -= view.content[0].scrollWidth - view.content[0].clientWidth;\n                }\n                return left;\n            }\n        });\n        var TimelineGroupedByDateView = kendo.Class.extend({\n            init: function (view) {\n                this._view = view;\n            },\n            _getTimeSlotByPosition: function (x, y, groupIndex) {\n                var group = this._view.groups[groupIndex];\n                return group.timeSlotByPosition(x, y, true);\n            },\n            _hideHeaders: function () {\n                var view = this._view;\n                if (!view._isVerticallyGrouped()) {\n                    view.timesHeader.find('table tr').eq(2).hide();\n                    view.datesHeader.find('table tr').eq(2).hide();\n                } else {\n                    view.times.find('.k-last').hide();\n                }\n            },\n            _setColspan: function () {\n            },\n            _createRowsLayout: function (resources, rows, groupHeaderTemplate, columns) {\n                var view = this._view;\n                return view._createDateLayout(columns, null, true);\n            },\n            _createVerticalColumnsLayout: function (resources, rows, groupHeaderTemplate) {\n                var view = this._view;\n                return view._createColumnsLayout(resources, null, groupHeaderTemplate);\n            },\n            _createColumnsLayout: function (resources, columns, groupHeaderTemplate, subColumns) {\n                var view = this._view;\n                return view._createColumnsLayout(resources, columns, groupHeaderTemplate, subColumns, true);\n            },\n            _getRowCount: function (level) {\n                var view = this._view;\n                return view._rowCountForLevel(level);\n            },\n            _getGroupsCount: function () {\n                var view = this._view;\n                return view._groupCount();\n            },\n            _addContent: function (dates, columnCount, groupsCount, rowCount, start, end, slotTemplate, isVerticalGrouped) {\n                var view = this._view;\n                var html = '';\n                var options = view.options;\n                var appendRow = function (date, isMajorTickColumn, isMiddleColumn, isLastSlotColumn, minorTickColumns, groupIdx) {\n                    var content = '';\n                    var classes = '';\n                    var tmplDate;\n                    var workDateIndex = view._isVerticallyGrouped() ? dateIndex : idx;\n                    var resources = function (groupIndex) {\n                        return function () {\n                            return view._resourceBySlot({ groupIndex: groupIndex });\n                        };\n                    };\n                    if (kendo.date.isToday(dates[idx])) {\n                        classes += 'k-today';\n                    }\n                    if (kendo.date.getMilliseconds(date) < kendo.date.getMilliseconds(options.workDayStart) || kendo.date.getMilliseconds(date) >= kendo.date.getMilliseconds(options.workDayEnd) || !view._isWorkDay(dates[workDateIndex])) {\n                        classes += ' k-nonwork-hour';\n                    }\n                    content += '<td' + (classes !== '' ? ' class=\"' + classes + '\"' : '') + '>';\n                    tmplDate = kendo.date.getDate(dates[idx]);\n                    kendo.date.setTime(tmplDate, kendo.date.getMilliseconds(date));\n                    content += slotTemplate({\n                        date: tmplDate,\n                        resources: resources(groupIdx)\n                    });\n                    content += '</td>';\n                    return content;\n                };\n                var tempStart = new Date(start), minorTickCount = view.options.minorTickCount, msMajorInterval = view.options.majorTick * MS_PER_MINUTE, msInterval = msMajorInterval / minorTickCount || 1, dateIndex;\n                for (var rowIdx = 0; rowIdx < rowCount; rowIdx++) {\n                    html += '<tr>';\n                    if (rowIdx % (rowCount / view._dates.length) === 0) {\n                        dateIndex = rowIdx / (rowCount / view._dates.length);\n                        tempStart = new Date(view._dates[dateIndex]);\n                        kendo.date.setTime(tempStart, kendo.date.getMilliseconds(start));\n                    }\n                    for (var idx = 0, length = columnCount; idx < length; idx++) {\n                        html += view._forTimeRange(tempStart, end, appendRow, isVerticalGrouped, groupsCount);\n                        if (isVerticalGrouped) {\n                            setTime(tempStart, msInterval, false);\n                            break;\n                        }\n                    }\n                    html += '</tr>';\n                }\n                return html;\n            },\n            _addTimeSlotsCollections: function (groupCount, datesCount, tableRows, interval, isVerticallyGrouped) {\n                var view = this._view;\n                var rowCount = tableRows.length;\n                if (isVerticallyGrouped) {\n                    rowCount = rowCount / datesCount;\n                }\n                for (var dateIndex = 0; dateIndex < datesCount; dateIndex++) {\n                    var rowMultiplier = 0;\n                    var time;\n                    if (isVerticallyGrouped) {\n                        rowMultiplier = dateIndex;\n                    }\n                    var rowIndex = rowMultiplier * rowCount;\n                    var cellMultiplier = 0;\n                    var cells = tableRows[rowIndex].children;\n                    var cellsPerGroup = isVerticallyGrouped ? rowCount : cells.length / (datesCount * groupCount);\n                    var cellsPerDay = cells.length / datesCount;\n                    var cellOffset;\n                    time = getMilliseconds(new Date(+view.startTime()));\n                    for (var cellIndex = 0; cellIndex < cellsPerGroup; cellIndex++) {\n                        if (!isVerticallyGrouped) {\n                            cellOffset = dateIndex * cellsPerDay + groupCount * cellIndex;\n                            cellMultiplier++;\n                        } else {\n                            cellOffset = 0;\n                            cells = tableRows[cellIndex + cellsPerGroup * dateIndex].children;\n                        }\n                        for (var groupIndex = 0; groupIndex < groupCount; groupIndex++) {\n                            var group = view.groups[groupIndex];\n                            view._addTimeSlotToCollection(group, cells, groupIndex, cellOffset, dateIndex, time, interval);\n                        }\n                        time += interval;\n                    }\n                }\n            },\n            _getVerticalGroupCount: function () {\n                var view = this._view;\n                return view.content.find('tr').length;\n            },\n            _getVerticalRowCount: function (eventGroups, groupIndex, maxRowCount) {\n                return maxRowCount;\n            },\n            _renderEvent: function (eventGroup, event, adjustedEvent, group, range, container, startIndex, endIndex) {\n                var view = this._view;\n                var element;\n                var eventObjects = [];\n                for (var i = range.start.index; i <= range.end.index; i++) {\n                    element = view._createEventElement(adjustedEvent.occurrence, event, i !== endIndex, i !== startIndex);\n                    element.appendTo(container).css({\n                        top: 0,\n                        height: view.options.eventHeight\n                    });\n                    var currentSlot = group._timeSlotCollections[0]._slots[i];\n                    var dateRange = group.timeSlotRanges(currentSlot.start, currentSlot.end, false)[0];\n                    var eventObject = {\n                        start: i === startIndex ? adjustedEvent.occurrence._startTime || adjustedEvent.occurrence.start : currentSlot.start,\n                        end: i === endIndex ? adjustedEvent.occurrence._endTime || adjustedEvent.occurrence.end : currentSlot.end,\n                        element: element,\n                        uid: event.uid,\n                        slotRange: dateRange,\n                        rowIndex: 0,\n                        offsetTop: 0\n                    };\n                    eventGroup.events[event.uid] = eventObject;\n                    eventObjects.push(eventObject);\n                    view.addContinuousEvent(group, dateRange, element, event.isAllDay);\n                    view._arrangeRows(eventObject, dateRange, eventGroup);\n                }\n                eventGroup.events[event.uid] = eventObjects;\n            },\n            _verticalCountForLevel: function (level) {\n                var view = this._view;\n                return view._columnCountForLevel(level);\n            },\n            _horizontalCountForLevel: function (level, columnLevel) {\n                var view = this._view;\n                return view._columnCountForLevel(columnLevel) / view._columnCountForLevel(2);\n            },\n            _updateCurrentVerticalTimeMarker: function (ranges, currentTime) {\n                var view = this._view;\n                var firstTimesCell = view.times.find('tr').first().find('th').first();\n                var lastTimesCell = view.times.find('tr').first().find('th').last();\n                var elementHtml = '<div class=\\'' + CURRENT_TIME_MARKER_CLASS + '\\'></div>';\n                var timesTableMarker = $(elementHtml).prependTo(view.times);\n                var markerTopPosition = Math.round(ranges[0].innerRect(currentTime, new Date(currentTime.getTime() + 1), false).top);\n                var timesTableMarkerCss = {};\n                if (this._isRtl) {\n                    timesTableMarkerCss.right = firstTimesCell.position().left + outerHeight(firstTimesCell) - outerHeight(lastTimesCell);\n                    timesTableMarker.addClass(CURRENT_TIME_MARKER_ARROW_CLASS + '-left');\n                } else {\n                    timesTableMarkerCss.left = lastTimesCell.position().left;\n                    timesTableMarker.addClass(CURRENT_TIME_MARKER_ARROW_CLASS + '-right');\n                }\n                timesTableMarkerCss.top = markerTopPosition - outerWidth(timesTableMarker) * BORDER_SIZE_COEFF / 2;\n                timesTableMarker.css(timesTableMarkerCss);\n                $(elementHtml).prependTo(view.content).css({\n                    top: markerTopPosition,\n                    height: '1px',\n                    right: '1px',\n                    width: view.content[0].scrollWidth,\n                    left: 0\n                });\n            },\n            _changeGroup: function (selection, previous, slot) {\n                var view = this._view;\n                if (!slot) {\n                    selection.groupIndex = previous ? view.groups.length - 1 : 0;\n                }\n            },\n            _prevGroupSlot: function (slot) {\n                return slot;\n            },\n            _nextGroupSlot: function (slot) {\n                return slot;\n            },\n            _changeDate: function (selection, reverse, slot) {\n                var view = this._view;\n                var group = view.groups[selection.groupIndex];\n                var collections, index;\n                if (reverse) {\n                    collections = group._getCollections(false);\n                    index = slot.index - 1;\n                    if (index >= 0) {\n                        return collections[0]._slots[index];\n                    }\n                } else {\n                    collections = group._getCollections(false);\n                    index = slot.index + 1;\n                    if (collections[0] && collections[0]._slots[index]) {\n                        return collections[0]._slots[index];\n                    }\n                }\n            },\n            _verticalSlots: function (selection, reverse, slot) {\n                return this._changeDate(selection, reverse, slot);\n            },\n            _verticalMethod: function (reverse, multiple) {\n                if (multiple) {\n                    return reverse ? 'upSlot' : 'downSlot';\n                } else {\n                    return reverse ? 'leftSlot' : 'rightSlot';\n                }\n            },\n            _normalizeVerticalSelection: function (selection, ranges, reverse, multiple) {\n                var view = this._view;\n                if (!multiple) {\n                    return view._normalizeVerticalSelection(selection, ranges, reverse);\n                }\n                return undefined;\n            },\n            _horizontalSlots: function (selection, group, method, startSlot, endSlot, multiple, reverse) {\n                var view = this._view;\n                var tempSlot = view._changeGroup(selection, reverse);\n                var result = {};\n                if (!tempSlot) {\n                    if (!view._isVerticallyGrouped()) {\n                        result.startSlot = group[method](startSlot);\n                        result.endSlot = group[method](endSlot);\n                    }\n                } else {\n                    result.startSlot = result.endSlot = tempSlot;\n                }\n                return result;\n            },\n            _changeVerticalViewPeriod: function (slots, shift, selection, reverse) {\n                var view = this._view;\n                if ((!slots.startSlot || !slots.endSlot) && !shift && view._changeViewPeriod(selection, reverse, view._isVerticallyGrouped())) {\n                    return true;\n                }\n                return false;\n            },\n            _changeHorizontalViewPeriod: function (slots, shift, selection, reverse) {\n                var view = this._view;\n                if (view._isVerticallyGrouped()) {\n                    return false;\n                }\n                if ((!slots.startSlot || !slots.endSlot) && !shift && view._changeViewPeriod(selection, reverse, false)) {\n                    return true;\n                }\n                return false;\n            },\n            _updateDirection: function (selection, ranges, shift, reverse) {\n                var view = this._view;\n                view._updateDirection(selection, ranges, shift, reverse, !view._isVerticallyGrouped());\n            },\n            _createMoveHint: function (range, adjustedEvent) {\n                var view = this._view;\n                var startSlot = range.start;\n                var startEnd = range.end;\n                for (var slotIdx = startSlot.index; slotIdx <= startEnd.index; slotIdx++) {\n                    var slot = range.collection._slots[slotIdx];\n                    var hint = view._createEventElement(adjustedEvent.occurrence, adjustedEvent.occurrence, false, false);\n                    hint.addClass('k-event-drag-hint');\n                    var css = {\n                        left: slot.offsetLeft + 2,\n                        top: slot.offsetTop,\n                        height: view.options.eventHeight,\n                        width: slot.offsetWidth\n                    };\n                    hint.css(css);\n                    if (adjustedEvent.occurrence.inverseColor) {\n                        hint.addClass(INVERSE_COLOR_CLASS);\n                    }\n                    view._appendMoveHint(hint);\n                }\n            },\n            _adjustLeftPosition: function (left) {\n                var view = this._view;\n                if (view._isRtl && !view._isVerticallyGrouped()) {\n                    left -= view.content[0].scrollWidth - view.content[0].offsetWidth;\n                }\n                return left;\n            }\n        });\n        kendo.ui.scheduler.TimelineGroupedView = TimelineGroupedView;\n        kendo.ui.scheduler.TimelineGroupedByDateView = TimelineGroupedByDateView;\n        var TimelineView = SchedulerView.extend({\n            init: function (element, options) {\n                var that = this;\n                SchedulerView.fn.init.call(that, element, options);\n                that._groupedView = that._getGroupedView();\n                that.title = that.options.title || that.options.name;\n                that._workDays = getWorkDays(that.options);\n                that._templates();\n                that._editable();\n                that.calculateDateRange();\n                that._groups();\n                that._currentTime(true);\n            },\n            name: 'timeline',\n            _isVirtualized: function () {\n                return false;\n            },\n            _getGroupedView: function () {\n                if (this._isGroupedByDate()) {\n                    return new kendo.ui.scheduler.TimelineGroupedByDateView(this);\n                } else {\n                    return new kendo.ui.scheduler.TimelineGroupedView(this);\n                }\n            },\n            _getNextEventIndexBySlot: function (slot, sortedEvents, groupIndex) {\n                if (this._isVerticallyGrouped()) {\n                    return kendo.ui.SchedulerView.fn._getNextEventIndexBySlot.call(this, slot, sortedEvents, groupIndex);\n                }\n                var tempIndex = 0;\n                for (var i = 0; i < sortedEvents.length; i++) {\n                    if (slot.startDate() > sortedEvents[i].start.startDate()) {\n                        tempIndex++;\n                        continue;\n                    }\n                    if (slot.startDate().getTime() === sortedEvents[i].start.startDate().getTime() && groupIndex > sortedEvents[i].start.groupIndex) {\n                        tempIndex++;\n                        continue;\n                    }\n                    break;\n                }\n                return tempIndex;\n            },\n            _getSelectedSlot: function (slot, sortedEvents, event, idx, pad, prev) {\n                if (this._isVerticallyGrouped()) {\n                    return kendo.ui.SchedulerView.fn._getSelectedSlot.call(this, slot, sortedEvents, event, idx, pad, prev);\n                }\n                return slot;\n            },\n            _getSortedEvents: function (uniqueAllEvents) {\n                if (this._isVerticallyGrouped()) {\n                    return kendo.ui.SchedulerView.fn._getSortedEvents.call(this, uniqueAllEvents);\n                }\n                return uniqueAllEvents.sort(function (first, second) {\n                    var result = first.start.startDate().getTime() - second.start.startDate().getTime();\n                    if (result === 0) {\n                        if (first.start.isDaySlot && !second.start.isDaySlot) {\n                            result = -1;\n                        }\n                        if (!first.start.isDaySlot && second.start.isDaySlot) {\n                            result = 1;\n                        }\n                    }\n                    if (result === 0) {\n                        result = first.start.groupIndex - second.start.groupIndex;\n                    }\n                    if (result === 0) {\n                        result = $(first.element).index() - $(second.element).index();\n                    }\n                    return result;\n                });\n            },\n            _currentTimeMarkerUpdater: function () {\n                this._updateCurrentTimeMarker(new Date());\n            },\n            _updateCurrentTimeMarker: function (currentTime) {\n                var options = this.options;\n                this.datesHeader.find('.' + CURRENT_TIME_MARKER_CLASS).remove();\n                this.times.find('.' + CURRENT_TIME_MARKER_CLASS).remove();\n                this.content.find('.' + CURRENT_TIME_MARKER_CLASS).remove();\n                if (!this._isInDateSlot({\n                        start: currentTime,\n                        end: currentTime\n                    })) {\n                    return;\n                }\n                if (options.currentTimeMarker.useLocalTimezone === false) {\n                    var timezone = options.dataSource.options.schema.timezone;\n                    if (options.dataSource && timezone) {\n                        var timezoneOffset = kendo.timezone.offset(currentTime, timezone);\n                        currentTime = kendo.timezone.convert(currentTime, currentTime.getTimezoneOffset(), timezoneOffset);\n                    }\n                }\n                var groupsCount = !options.group || options.group.orientation == 'vertical' ? 1 : this.groups.length;\n                for (var groupIndex = 0; groupIndex < groupsCount; groupIndex++) {\n                    var currentGroup = this.groups[groupIndex];\n                    if (!currentGroup) {\n                        return;\n                    }\n                    var utcCurrentTime = kendo.date.toUtcTime(currentTime);\n                    var ranges = currentGroup.timeSlotRanges(utcCurrentTime, utcCurrentTime + 1);\n                    if (ranges.length === 0) {\n                        return;\n                    }\n                    var collection = ranges[0].collection;\n                    var slotElement = collection.slotByStartDate(currentTime);\n                    if (slotElement) {\n                        if (this._isVerticallyGrouped()) {\n                            this._groupedView._updateCurrentVerticalTimeMarker(ranges, currentTime);\n                        } else {\n                            var elementHtml = '<div class=\\'' + CURRENT_TIME_MARKER_CLASS + '\\'></div>';\n                            var headerWrap = this.datesHeader.find('.' + SCHEDULER_HEADER_WRAP_CLASS);\n                            var left = Math.round(ranges[0].innerRect(currentTime, new Date(currentTime.getTime() + 1), false).left);\n                            var timesTableMarker = $(elementHtml).prependTo(headerWrap).addClass(CURRENT_TIME_MARKER_ARROW_CLASS + '-down');\n                            timesTableMarker.css({\n                                left: this._adjustLeftPosition(left - outerWidth(timesTableMarker) * BORDER_SIZE_COEFF / 2),\n                                top: headerWrap.find('tr').last().prev().position().top\n                            });\n                            $(elementHtml).prependTo(this.content).css({\n                                left: this._adjustLeftPosition(left),\n                                width: '1px',\n                                height: this.content[0].scrollHeight - 1,\n                                top: 0\n                            });\n                        }\n                    }\n                }\n            },\n            _adjustLeftPosition: function (left) {\n                return this._groupedView._adjustLeftPosition(left);\n            },\n            _currentTime: function (setUpdateTimer) {\n                var that = this;\n                var markerOptions = that.options.currentTimeMarker;\n                if (markerOptions !== false && markerOptions.updateInterval !== undefined) {\n                    that._currentTimeMarkerUpdater();\n                    if (setUpdateTimer) {\n                        that._currentTimeUpdateTimer = setInterval(proxy(this._currentTimeMarkerUpdater, that), markerOptions.updateInterval);\n                    }\n                }\n            },\n            _editable: function () {\n                if (this.options.editable) {\n                    if (this._isMobile()) {\n                        this._touchEditable();\n                    } else {\n                        this._mouseEditable();\n                    }\n                }\n            },\n            _mouseEditable: function () {\n                var that = this;\n                that.element.on('click' + NS, '.k-event a:has(.k-i-close)', function (e) {\n                    that.trigger('remove', { uid: $(this).closest('.k-event').attr(kendo.attr('uid')) });\n                    e.preventDefault();\n                });\n                if (that.options.editable.create !== false) {\n                    that.element.on('dblclick' + NS, '.k-scheduler-content td', function (e) {\n                        var slot = that._slotByPosition(e.pageX, e.pageY);\n                        if (slot) {\n                            var resourceInfo = that._resourceBySlot(slot);\n                            that.trigger('add', {\n                                eventInfo: extend({\n                                    start: slot.startDate(),\n                                    end: slot.endDate()\n                                }, resourceInfo)\n                            });\n                        }\n                        e.preventDefault();\n                    });\n                }\n                if (that.options.editable.update !== false) {\n                    that.element.on('dblclick' + NS, '.k-event', function (e) {\n                        that.trigger('edit', { uid: $(this).closest('.k-event').attr(kendo.attr('uid')) });\n                        e.preventDefault();\n                    });\n                }\n            },\n            _touchEditable: function () {\n                var that = this;\n                var threshold = 0;\n                if (kendo.support.mobileOS.android) {\n                    threshold = 5;\n                }\n                if (that.options.editable.create !== false) {\n                    that._addUserEvents = new kendo.UserEvents(that.element, {\n                        threshold: threshold,\n                        useClickAsTap: !kendo.support.browser.edge,\n                        filter: '.k-scheduler-content td',\n                        tap: function (e) {\n                            if (that._scrolling) {\n                                return;\n                            }\n                            var x = e.x.location !== undefined ? e.x.location : e.x;\n                            var y = e.y.location !== undefined ? e.y.location : e.y;\n                            var slot = that._slotByPosition(x, y);\n                            if (slot) {\n                                var resourceInfo = that._resourceBySlot(slot);\n                                that.trigger('add', {\n                                    eventInfo: extend({\n                                        start: slot.startDate(),\n                                        end: slot.endDate()\n                                    }, resourceInfo)\n                                });\n                            }\n                            e.preventDefault();\n                        }\n                    });\n                }\n                if (that.options.editable.update !== false) {\n                    that._editUserEvents = new kendo.UserEvents(that.element, {\n                        threshold: threshold,\n                        useClickAsTap: !kendo.support.browser.edge,\n                        filter: '.k-event',\n                        tap: function (e) {\n                            if (that._scrolling) {\n                                return;\n                            }\n                            var eventElement = $(e.target).closest('.k-event');\n                            var touchElement = $(e.touch.initialTouch);\n                            if (touchElement.hasClass('k-i-close')) {\n                                that.trigger('remove', { uid: eventElement.attr(kendo.attr('uid')) });\n                            } else if (!eventElement.hasClass('k-event-active')) {\n                                that.trigger('edit', { uid: eventElement.attr(kendo.attr('uid')) });\n                            }\n                            e.preventDefault();\n                        }\n                    });\n                }\n            },\n            _slotByPosition: function (x, y) {\n                var slot;\n                var content = this.content;\n                var offset = content.offset();\n                var groupIndex;\n                x -= offset.left;\n                y -= offset.top;\n                if (this._isRtl) {\n                    var browser = kendo.support.browser;\n                    if (browser.mozilla || browser.webkit && browser.version >= 85) {\n                        x += content[0].scrollWidth - content[0].offsetWidth;\n                        x += content[0].scrollLeft;\n                    } else if (browser.msie) {\n                        x -= kendo.scrollLeft(content);\n                        x += content[0].scrollWidth - content[0].offsetWidth;\n                    } else if (browser.webkit) {\n                        x += content[0].scrollLeft;\n                    }\n                } else {\n                    x += content[0].scrollLeft;\n                }\n                y += content[0].scrollTop;\n                x = Math.ceil(x);\n                y = Math.ceil(y);\n                for (groupIndex = 0; groupIndex < this.groups.length; groupIndex++) {\n                    slot = this._groupedView._getTimeSlotByPosition(x, y, groupIndex);\n                    if (slot) {\n                        return slot;\n                    }\n                }\n                return null;\n            },\n            options: {\n                name: 'TimelineView',\n                title: 'Timeline',\n                selectedDateFormat: '{0:D}',\n                selectedShortDateFormat: '{0:d}',\n                selectedMobileDateFormat: '{0:MMM dd}',\n                date: kendo.date.today(),\n                startTime: kendo.date.today(),\n                endTime: kendo.date.today(),\n                showWorkHours: false,\n                minorTickCount: 2,\n                editable: true,\n                workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n                workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n                workWeekStart: 1,\n                workWeekEnd: 5,\n                majorTick: 60,\n                eventHeight: 25,\n                eventMinWidth: 0,\n                columnWidth: 100,\n                groupHeaderTemplate: '#=text#',\n                majorTimeHeaderTemplate: '#=kendo.toString(date, \\'t\\')#',\n                slotTemplate: '&nbsp;',\n                eventTemplate: EVENT_TEMPLATE,\n                dateHeaderTemplate: DATA_HEADER_TEMPLATE,\n                footer: { command: 'workDay' },\n                currentTimeMarker: {\n                    updateInterval: 10000,\n                    useLocalTimezone: true\n                },\n                messages: {\n                    defaultRowText: 'All events',\n                    showFullDay: 'Show full day',\n                    showWorkDay: 'Show business hours'\n                }\n            },\n            events: [\n                'remove',\n                'add',\n                'edit'\n            ],\n            _templates: function () {\n                var options = this.options, settings = extend({}, kendo.Template, options.templateSettings);\n                this.eventTemplate = this._eventTmpl(options.eventTemplate, EVENT_WRAPPER_STRING);\n                this.majorTimeHeaderTemplate = kendo.template(options.majorTimeHeaderTemplate, settings);\n                this.dateHeaderTemplate = kendo.template(options.dateHeaderTemplate, settings);\n                this.slotTemplate = kendo.template(options.slotTemplate, settings);\n                this.groupHeaderTemplate = kendo.template(options.groupHeaderTemplate, settings);\n            },\n            _render: function (dates) {\n                var that = this;\n                dates = dates || [];\n                that._dates = dates;\n                that._startDate = dates[0];\n                that._endDate = dates[dates.length - 1 || 0];\n                that._calculateSlotRanges();\n                that.createLayout(that._layout(dates));\n                that._content(dates);\n                that._footer();\n                that._setContentWidth();\n                that.refreshLayout();\n                that.datesHeader.on('click' + NS, '.k-nav-day', function (e) {\n                    var th = $(e.currentTarget).closest('th');\n                    var slot = that._slotByPosition(th.offset().left, that.content.offset().top);\n                    that.trigger('navigate', {\n                        view: 'timeline',\n                        date: slot.startDate()\n                    });\n                });\n                that._groupedView._hideHeaders();\n            },\n            _setContentWidth: function () {\n                var content = this.content;\n                var contentWidth = content.width();\n                var contentTable = this.content.find('table');\n                var columnCount = contentTable.find('tr').first().children().length;\n                var minWidth = 100;\n                var calculatedWidth = columnCount * this.options.columnWidth;\n                if (contentWidth < calculatedWidth) {\n                    minWidth = Math.ceil(calculatedWidth / contentWidth * 100);\n                }\n                contentTable.add(this.datesHeader.find('table')).css('width', minWidth + '%');\n            },\n            _calculateSlotRanges: function () {\n                var dates = this._dates;\n                var slotStartTime = this.startTime();\n                var slotEndTime = this.endTime();\n                slotEndTime = getMilliseconds(slotEndTime);\n                slotStartTime = getMilliseconds(slotStartTime);\n                if (slotEndTime === slotStartTime) {\n                    slotEndTime += MS_PER_DAY - 1;\n                } else if (slotEndTime < slotStartTime) {\n                    slotEndTime += MS_PER_DAY;\n                }\n                var slotRanges = [];\n                for (var i = 0; i < dates.length; i++) {\n                    var rangeStart = getDate(dates[i]);\n                    setTime(rangeStart, slotStartTime);\n                    var rangeEnd = getDate(dates[i]);\n                    setTime(rangeEnd, slotEndTime);\n                    slotRanges.push({\n                        start: kendo.date.toUtcTime(rangeStart),\n                        end: kendo.date.toUtcTime(rangeEnd)\n                    });\n                }\n                this._slotRanges = slotRanges;\n            },\n            _forTimeRange: function (min, max, action, verticalByDate, groupsCount) {\n                min = toInvariantTime(min);\n                max = toInvariantTime(max);\n                var that = this, msMin = getMilliseconds(min), msMax = getMilliseconds(max), minorTickCount = that.options.minorTickCount, msMajorInterval = that.options.majorTick * MS_PER_MINUTE, msInterval = msMajorInterval / minorTickCount || 1, start = new Date(+min), idx = 0, length, html = '';\n                length = MS_PER_DAY / msInterval;\n                if (msMin != msMax) {\n                    if (msMin > msMax) {\n                        msMax += MS_PER_DAY;\n                    }\n                    length = (msMax - msMin) / msInterval;\n                }\n                length = verticalByDate ? 1 : Math.round(length);\n                if (groupsCount) {\n                    length = length * groupsCount;\n                }\n                for (; idx < length; idx++) {\n                    var majorTickDivider = idx % (msMajorInterval / msInterval);\n                    var isMajorTickColumn = majorTickDivider === 0;\n                    var isMiddleColumn = majorTickDivider < minorTickCount - 1;\n                    var isLastSlotColumn = majorTickDivider === minorTickCount - 1;\n                    var minorTickColumns = minorTickCount;\n                    if (length % minorTickCount !== 0) {\n                        var isLastMajorSlot = length - (idx + 1) < minorTickCount;\n                        if (isMajorTickColumn && isLastMajorSlot) {\n                            minorTickColumns = length % minorTickCount;\n                        }\n                    }\n                    html += action(start, isMajorTickColumn, isMiddleColumn, isLastSlotColumn, minorTickColumns, idx % groupsCount);\n                    if (!verticalByDate) {\n                        if (groupsCount) {\n                            if (idx % groupsCount === groupsCount - 1) {\n                                setTime(start, msInterval, false);\n                            }\n                        } else {\n                            setTime(start, msInterval, false);\n                        }\n                    }\n                }\n                return html;\n            },\n            _layout: function (dates) {\n                var timeColumns = [];\n                var columns = [];\n                var that = this;\n                var rows = [{ text: that.options.messages.defaultRowText }];\n                var groupedView = that._groupedView;\n                var minorTickSlots = [];\n                for (var minorTickIndex = 0; minorTickIndex < that.options.minorTickCount; minorTickIndex++) {\n                    minorTickSlots.push({\n                        text: '&#8203;',\n                        className: 'k-last',\n                        minorTicks: true\n                    });\n                }\n                this._forTimeRange(that.startTime(), that.endTime(), function (date, majorTick, middleColumn, lastSlotColumn, minorSlotsCount) {\n                    var template = that.majorTimeHeaderTemplate;\n                    if (majorTick) {\n                        var timeColumn = {\n                            text: template({ date: date }),\n                            className: lastSlotColumn ? 'k-slot-cell' : '',\n                            columns: minorTickSlots.slice(0, minorSlotsCount)\n                        };\n                        groupedView._setColspan(timeColumn);\n                        timeColumns.push(timeColumn);\n                    }\n                });\n                for (var idx = 0; idx < dates.length; idx++) {\n                    columns.push({\n                        text: that.dateHeaderTemplate({ date: dates[idx] }),\n                        className: 'k-slot-cell',\n                        columns: timeColumns.slice(0)\n                    });\n                }\n                var resources = this.groupedResources;\n                if (resources.length) {\n                    if (this._groupOrientation() === 'vertical') {\n                        rows = groupedView._createRowsLayout(resources, null, this.groupHeaderTemplate, columns);\n                        columns = groupedView._createVerticalColumnsLayout(resources, null, this.groupHeaderTemplate, columns);\n                    } else {\n                        columns = groupedView._createColumnsLayout(resources, columns, this.groupHeaderTemplate, columns);\n                    }\n                }\n                return {\n                    columns: columns,\n                    rows: rows\n                };\n            },\n            _footer: function () {\n                var options = this.options;\n                if (options.footer !== false) {\n                    var html = '<div class=\"k-scheduler-footer k-toolbar\">';\n                    var command = options.footer.command;\n                    if (this._isMobile()) {\n                        html += '<span class=\"k-scheduler-today\"><a href=\"#\" class=\"k-link\">';\n                        html += options.messages.today + '</a></span>';\n                    }\n                    if (command && command === 'workDay') {\n                        if (this._isMobile()) {\n                            html += '<span class=\"k-scheduler-fullday\"><a href=\"#\" class=\"k-link\">';\n                            html += (options.showWorkHours ? options.messages.showFullDay : options.messages.showWorkDay) + '</a></span>';\n                        } else {\n                            html += '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-scheduler-fullday\">';\n                            html += '<span class=\"k-button-icon k-icon k-i-clock\"></span>';\n                            html += '<span class=\"k-button-text\">';\n                            html += options.showWorkHours ? options.messages.showFullDay : options.messages.showWorkDay;\n                            html += '</span>';\n                            html += '</button>';\n                        }\n                    }\n                    html += '</div>';\n                    this.footer = $(html).appendTo(this.element);\n                    var that = this;\n                    this.footer.on('click' + NS, '.k-scheduler-fullday', function (e) {\n                        e.preventDefault();\n                        that.trigger('navigate', {\n                            view: that.name || options.name,\n                            date: that.startDate(),\n                            isWorkDay: !options.showWorkHours\n                        });\n                    });\n                    this.footer.on('click' + NS, '.k-scheduler-today', function (e) {\n                        e.preventDefault();\n                        var timezone = that.options.timezone;\n                        var action = 'today';\n                        var currentDate = new Date();\n                        var date;\n                        if (timezone) {\n                            var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                            date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                        } else {\n                            date = currentDate;\n                        }\n                        that.trigger('navigate', {\n                            view: that.name || options.name,\n                            action: action,\n                            date: date\n                        });\n                    });\n                }\n            },\n            _columnCountForLevel: function (level) {\n                var columnLevel = this.columnLevels[level];\n                return columnLevel ? columnLevel.length : 0;\n            },\n            _rowCountForLevel: function (level) {\n                var rowLevel = this.rowLevels[level];\n                return rowLevel ? rowLevel.length : 0;\n            },\n            _isWorkDay: function (date) {\n                var day = date.getDay();\n                var workDays = this._workDays;\n                for (var i = 0; i < workDays.length; i++) {\n                    if (workDays[i] === day) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _content: function (dates) {\n                var that = this;\n                var start = that.startTime();\n                var end = this.endTime();\n                var groupsCount = 1;\n                var rowCount = 1;\n                var columnCount = dates.length;\n                var html = '';\n                var resources = this.groupedResources;\n                var slotTemplate = this.slotTemplate;\n                var isVerticalGrouped = false;\n                if (resources.length) {\n                    isVerticalGrouped = that._groupOrientation() === 'vertical';\n                    if (isVerticalGrouped) {\n                        rowCount = that._groupedView._getRowCount(this.rowLevels.length - 1);\n                        groupsCount = that._groupedView._getGroupsCount();\n                    } else {\n                        groupsCount = that._groupCount();\n                    }\n                }\n                html += '<tbody>';\n                html += that._groupedView._addContent(dates, columnCount, groupsCount, rowCount, start, end, slotTemplate, isVerticalGrouped);\n                html += '</tbody>';\n                this.content.find('table').append(html);\n            },\n            _groups: function () {\n                var groupCount = this._groupCount();\n                var dates = this._dates;\n                var columnCount = dates.length;\n                this.groups = [];\n                for (var idx = 0; idx < groupCount; idx++) {\n                    var view = this._addResourceView(idx);\n                    var start = dates[0];\n                    var end = dates[dates.length - 1 || 0];\n                    var startTime = getMilliseconds(this.startTime());\n                    var endTime = getMilliseconds(this.endTime());\n                    if (startTime !== 0 && endTime <= startTime) {\n                        start = getDate(start);\n                        setTime(start, startTime);\n                        end = getDate(end);\n                        setTime(end, endTime);\n                    }\n                    view.addTimeSlotCollection(start, kendo.date.addDays(end, 1));\n                }\n                this._timeSlotGroups(groupCount, columnCount);\n            },\n            _isHorizontallyGrouped: function () {\n                return this.groupedResources.length && this._groupOrientation() === 'horizontal';\n            },\n            _timeSlotGroups: function (groupCount, datesCount) {\n                var interval = this._timeSlotInterval();\n                var isVerticallyGrouped = this._isVerticallyGrouped();\n                var tableRows = this.content.find('tr');\n                tableRows.attr('role', 'row');\n                this._groupedView._addTimeSlotsCollections(groupCount, datesCount, tableRows, interval, isVerticallyGrouped);\n            },\n            _addTimeSlotToCollection: function (group, cells, cellIndex, cellOffset, dateIndex, time, interval) {\n                var cell = cells[cellIndex + cellOffset];\n                var collection = group.getTimeSlotCollection(0);\n                var currentDate = this._dates[dateIndex];\n                var currentTime = Date.UTC(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate());\n                var start = currentTime + time;\n                var end = start + interval;\n                cell.setAttribute('role', 'gridcell');\n                cell.setAttribute('aria-selected', false);\n                collection.addTimeSlot(cell, start, end, true);\n            },\n            startDate: function () {\n                return this._startDate;\n            },\n            endDate: function () {\n                return this._endDate;\n            },\n            visibleEndDate: function () {\n                var startTime = getMilliseconds(this.startTime());\n                var endTime = getMilliseconds(this.endTime());\n                var endDate = this.endDate();\n                if (startTime !== 0 && endTime <= startTime) {\n                    endDate = kendo.date.addDays(endDate, 1);\n                }\n                return endDate;\n            },\n            startTime: function () {\n                var options = this.options;\n                return options.showWorkHours ? options.workDayStart : options.startTime;\n            },\n            endTime: function () {\n                var options = this.options;\n                return options.showWorkHours ? options.workDayEnd : options.endTime;\n            },\n            _timeSlotInterval: function () {\n                var options = this.options;\n                return options.majorTick / options.minorTickCount * MS_PER_MINUTE;\n            },\n            nextDate: function () {\n                return kendo.date.nextDay(this.endDate());\n            },\n            previousDate: function () {\n                return kendo.date.previousDay(this.startDate());\n            },\n            calculateDateRange: function () {\n                this._render([this.options.date]);\n            },\n            render: function (events) {\n                this._headerColumnCount = 0;\n                this._groups();\n                this.element.find('.k-event').remove();\n                events = new kendo.data.Query(events).sort([\n                    {\n                        field: 'start',\n                        dir: 'asc'\n                    },\n                    {\n                        field: 'end',\n                        dir: 'desc'\n                    }\n                ]).toArray();\n                var eventsByResource = [];\n                this._eventsByResource(events, this.groupedResources, eventsByResource);\n                var eventGroups = [];\n                var maxRowCount = 0;\n                for (var groupIndex = 0; groupIndex < eventsByResource.length; groupIndex++) {\n                    var eventGroup = {\n                        groupIndex: groupIndex,\n                        maxRowCount: 0,\n                        events: {}\n                    };\n                    eventGroups.push(eventGroup);\n                    this._renderEvents(eventsByResource[groupIndex], groupIndex, eventGroup);\n                    if (maxRowCount < eventGroup.maxRowCount) {\n                        maxRowCount = eventGroup.maxRowCount;\n                    }\n                }\n                this._setRowsHeight(eventGroups, eventsByResource.length, maxRowCount);\n                this._positionEvents(eventGroups, eventsByResource.length);\n                this._currentTime(false);\n                this.trigger('activate');\n            },\n            _positionEvents: function (eventGroups, groupsCount) {\n                for (var groupIndex = 0; groupIndex < groupsCount; groupIndex++) {\n                    var eventsForGroup = eventGroups[groupIndex].events;\n                    for (var eventUid in eventsForGroup) {\n                        var eventObject = eventsForGroup[eventUid];\n                        if (Array.isArray(eventObject)) {\n                            for (var eventIndex = 0; eventIndex < eventObject.length; eventIndex++) {\n                                this._positionEvent(eventObject[eventIndex]);\n                            }\n                        } else {\n                            this._positionEvent(eventObject);\n                        }\n                    }\n                }\n            },\n            _setRowsHeight: function (eventGroups, groupsCount, maxRowCount) {\n                var eventHeight = this.options.eventHeight;\n                var eventBottomOffset = this._getBottomRowOffset();\n                var groupedView = this._groupedView;\n                var verticalGroupCount = groupedView._getVerticalGroupCount(groupsCount);\n                groupsCount = this._isVerticallyGrouped() ? verticalGroupCount : 1;\n                for (var groupIndex = 0; groupIndex < groupsCount; groupIndex++) {\n                    var rowsCount = groupedView._getVerticalRowCount(eventGroups, groupIndex, maxRowCount);\n                    rowsCount = rowsCount ? rowsCount : 1;\n                    var rowHeight = (eventHeight + 2) * rowsCount + eventBottomOffset;\n                    var timesRow = $(this.times.find('tr')[groupIndex]);\n                    var row = $(this.content.find('tr')[groupIndex]);\n                    timesRow.height(rowHeight);\n                    row.height(rowHeight);\n                }\n                this._setContentWidth();\n                this.refreshLayout();\n                this._refreshSlots();\n            },\n            _getBottomRowOffset: function () {\n                var eventBottomOffset = this.options.eventHeight * 0.5;\n                var isMobile = this._isMobile();\n                var minOffset;\n                var maxOffset;\n                if (isMobile) {\n                    minOffset = 30;\n                    maxOffset = 60;\n                } else {\n                    minOffset = 15;\n                    maxOffset = 30;\n                }\n                if (eventBottomOffset > maxOffset) {\n                    eventBottomOffset = maxOffset;\n                } else if (eventBottomOffset < minOffset) {\n                    eventBottomOffset = minOffset;\n                }\n                return eventBottomOffset;\n            },\n            _positionEvent: function (eventObject) {\n                var eventHeight = this.options.eventHeight;\n                var eventOffset = 2;\n                var rect = eventObject.slotRange.innerRect(eventObject.start, eventObject.end, false);\n                var left = this._adjustLeftPosition(rect.left);\n                var width = rect.right - rect.left;\n                if (width < 0) {\n                    width = 0;\n                }\n                if (width < this.options.eventMinWidth) {\n                    var slotsCollection = eventObject.slotRange.collection;\n                    var lastSlot = slotsCollection._slots[slotsCollection._slots.length - 1];\n                    var offsetRight = lastSlot.offsetLeft + lastSlot.offsetWidth;\n                    width = this.options.eventMinWidth;\n                    if (offsetRight < left + width) {\n                        width = offsetRight - rect.left;\n                    }\n                }\n                eventObject.element.css({\n                    top: eventObject.slotRange.start.offsetTop + eventObject.rowIndex * (eventHeight + eventOffset) + 'px',\n                    left: left,\n                    width: width\n                });\n            },\n            _refreshSlots: function () {\n                for (var groupIndex = 0; groupIndex < this.groups.length; groupIndex++) {\n                    this.groups[groupIndex].refresh();\n                }\n            },\n            _eventsByResource: function (events, resources, result, parentValue) {\n                var resource = resources[0];\n                if (resource) {\n                    var view = resource.dataSource.view();\n                    view = view.filter(function (item) {\n                        var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n                        return itemParentValue === null || itemParentValue === undefined || itemParentValue === parentValue;\n                    });\n                    for (var itemIdx = 0; itemIdx < view.length; itemIdx++) {\n                        var value = this._resourceValue(resource, view[itemIdx]);\n                        var eventsFilteredByResource = new kendo.data.Query(events).filter({\n                            field: resource.field,\n                            operator: SchedulerView.groupEqFilter(value)\n                        }).toArray();\n                        if (resources.length > 1) {\n                            this._eventsByResource(eventsFilteredByResource, resources.slice(1), result, value);\n                        } else {\n                            result.push(eventsFilteredByResource);\n                        }\n                    }\n                } else {\n                    result.push(events);\n                }\n            },\n            _isInDateSlot: function (event) {\n                var startTime = event.start;\n                var endTime = event.end;\n                var rangeStart = getDate(this._startDate);\n                var rangeEnd = kendo.date.addDays(getDate(this.visibleEndDate()), 1);\n                if (startTime < rangeEnd && rangeStart <= endTime) {\n                    return true;\n                }\n                return false;\n            },\n            _isInTimeSlot: function (event) {\n                var startTime = event._startTime || kendo.date.toUtcTime(event.start);\n                var endTime = event._endTime || kendo.date.toUtcTime(event.end);\n                var slotRanges = this._slotRanges;\n                if (startTime === endTime) {\n                    endTime = endTime + 1;\n                }\n                for (var slotIndex = 0; slotIndex < slotRanges.length; slotIndex++) {\n                    if (startTime < slotRanges[slotIndex].end && slotRanges[slotIndex].start < endTime) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _adjustEvent: function (event) {\n                var start = event.start;\n                var end = event.end;\n                var eventStartTime = event._time('start');\n                var eventEndTime = event._time('end');\n                var startTime = getMilliseconds(this.startTime());\n                var endTime = getMilliseconds(this.endTime());\n                var adjustedStartDate = null;\n                var adjustedEndDate = null;\n                var occurrence;\n                var head = false;\n                var tail = false;\n                if (event.isAllDay) {\n                    start = getDate(start);\n                    eventStartTime = 0;\n                    end = getDate(end);\n                    eventEndTime = MS_PER_DAY;\n                    adjustedEndDate = kendo.date.addDays(end, 1);\n                }\n                if (endTime === 0) {\n                    endTime = MS_PER_DAY;\n                }\n                if (endTime <= startTime) {\n                    if (eventStartTime < startTime && eventStartTime >= endTime) {\n                        adjustedStartDate = getDate(start);\n                        setTime(adjustedStartDate, startTime);\n                        tail = true;\n                    }\n                    if (eventEndTime > endTime && eventEndTime <= startTime) {\n                        adjustedEndDate = getDate(end);\n                        setTime(adjustedEndDate, endTime);\n                        head = true;\n                    }\n                } else {\n                    if (startTime > eventStartTime) {\n                        adjustedStartDate = getDate(start);\n                        setTime(adjustedStartDate, startTime);\n                        tail = true;\n                    } else if (endTime <= eventStartTime) {\n                        adjustedStartDate = getDate(start);\n                        adjustedStartDate = kendo.date.addDays(adjustedStartDate, 1);\n                        setTime(adjustedStartDate, startTime);\n                        tail = true;\n                    }\n                    if (endTime < eventEndTime) {\n                        adjustedEndDate = getDate(end);\n                        setTime(adjustedEndDate, endTime);\n                        head = true;\n                    } else if (startTime > eventEndTime) {\n                        adjustedEndDate = getDate(end);\n                        adjustedEndDate = kendo.date.addDays(adjustedEndDate, -1);\n                        setTime(adjustedEndDate, endTime);\n                        head = true;\n                    }\n                }\n                occurrence = event.clone({\n                    start: adjustedStartDate ? adjustedStartDate : start,\n                    end: adjustedEndDate ? adjustedEndDate : end,\n                    _startTime: adjustedStartDate ? kendo.date.toUtcTime(adjustedStartDate) : event._startTime,\n                    _endTime: adjustedEndDate ? kendo.date.toUtcTime(adjustedEndDate) : event._endTime,\n                    isAllDay: false\n                });\n                return {\n                    occurrence: occurrence,\n                    head: head,\n                    tail: tail\n                };\n            },\n            _renderEvents: function (events, groupIndex, eventGroup) {\n                var event;\n                var idx;\n                var length;\n                for (idx = 0, length = events.length; idx < length; idx++) {\n                    event = events[idx];\n                    if (this._isInDateSlot(event)) {\n                        var isMultiDayEvent = event.isAllDay || event.duration() >= MS_PER_DAY;\n                        var container = this.content;\n                        if (isMultiDayEvent || this._isInTimeSlot(event)) {\n                            var adjustedEvent = this._adjustEvent(event);\n                            var group = this.groups[groupIndex];\n                            if (!group._continuousEvents) {\n                                group._continuousEvents = [];\n                            }\n                            if (this._isInTimeSlot(adjustedEvent.occurrence)) {\n                                var ranges = group.slotRanges(adjustedEvent.occurrence, false);\n                                var range = ranges[0];\n                                var startIndex = range.start.index;\n                                var endIndex = range.end.index;\n                                this._groupedView._renderEvent(eventGroup, event, adjustedEvent, group, range, container, startIndex, endIndex);\n                            }\n                        }\n                    }\n                }\n            },\n            addContinuousEvent: function (group, range, element, isAllDay) {\n                var events = group._continuousEvents;\n                events.push({\n                    element: element,\n                    isAllDay: isAllDay,\n                    uid: element.attr(kendo.attr('uid')),\n                    start: range.start,\n                    end: range.end\n                });\n            },\n            _createEventElement: function (occurrence, event, head, tail) {\n                var template = this.eventTemplate;\n                var editable = this.options.editable;\n                var isMobile = this._isMobile();\n                var showDelete = editable && editable.destroy !== false && !isMobile;\n                var resizable = editable && editable.resize !== false;\n                var eventStartTime = event._time('start');\n                var eventEndTime = event._time('end');\n                var eventStartDate = event.start;\n                var eventEndDate = event.end;\n                var resources = this.eventResources(event);\n                if (event._startTime && eventStartTime !== kendo.date.getMilliseconds(event.start)) {\n                    eventStartDate = new Date(eventStartTime);\n                    eventStartDate = kendo.timezone.apply(eventStartDate, 'Etc/UTC');\n                }\n                if (event._endTime && eventEndTime !== kendo.date.getMilliseconds(event.end)) {\n                    eventEndDate = new Date(eventEndTime);\n                    eventEndDate = kendo.timezone.apply(eventEndDate, 'Etc/UTC');\n                }\n                var data = extend({}, {\n                    ns: kendo.ns,\n                    resizable: resizable,\n                    showDelete: showDelete,\n                    head: head,\n                    tail: tail,\n                    singleDay: this._dates.length == 1,\n                    resources: resources,\n                    inverseColor: false,\n                    messages: this.options.messages\n                }, event, {\n                    start: eventStartDate,\n                    end: eventEndDate\n                });\n                var element = $(template(data));\n                this.angular('compile', function () {\n                    return {\n                        elements: element,\n                        data: [{ dataItem: data }]\n                    };\n                });\n                return element;\n            },\n            _arrangeRows: function (eventObject, slotRange, eventGroup) {\n                var startIndex = slotRange.start.index;\n                var endIndex = slotRange.end.index;\n                var rect = eventObject.slotRange.innerRect(eventObject.start, eventObject.end, false);\n                var rectRight = rect.right + this.options.eventMinWidth;\n                var events = collidingEvents(slotRange.events(), rect.left, rectRight);\n                slotRange.addEvent({\n                    slotIndex: startIndex,\n                    start: startIndex,\n                    end: endIndex,\n                    rectLeft: rect.left,\n                    rectRight: rectRight,\n                    element: eventObject.element,\n                    uid: eventObject.uid\n                });\n                events.push({\n                    start: startIndex,\n                    end: endIndex,\n                    uid: eventObject.uid\n                });\n                var rows = SchedulerView.createRows(events);\n                if (eventGroup.maxRowCount < rows.length) {\n                    eventGroup.maxRowCount = rows.length;\n                }\n                for (var idx = 0, length = rows.length; idx < length; idx++) {\n                    var rowEvents = rows[idx].events;\n                    for (var j = 0, eventLength = rowEvents.length; j < eventLength; j++) {\n                        eventGroup.events[rowEvents[j].uid].rowIndex = idx;\n                    }\n                }\n            },\n            _groupCount: function () {\n                var resources = this.groupedResources;\n                var groupedView = this._groupedView;\n                if (resources.length) {\n                    if (this._groupOrientation() === 'vertical') {\n                        return groupedView._verticalCountForLevel(resources.length - 1);\n                    } else {\n                        return groupedView._horizontalCountForLevel(resources.length - 1, this.columnLevels.length - 1);\n                    }\n                }\n                return 1;\n            },\n            _updateEventForSelection: function (event) {\n                var adjustedEvent = this._adjustEvent(event.clone());\n                return adjustedEvent.occurrence;\n            },\n            _eventOptionsForMove: function (event) {\n                if (event.isAllDay) {\n                    return { isAllDay: false };\n                }\n                return {};\n            },\n            _updateEventForResize: function (event) {\n                if (event.isAllDay) {\n                    event.set('isAllDay', false);\n                }\n            },\n            _updateMoveHint: function (event, groupIndex, distance) {\n                var group = this.groups[groupIndex];\n                var clonedEvent = event.clone({\n                    start: event.start,\n                    end: event.end\n                });\n                var eventDuraton = clonedEvent.duration();\n                clonedEvent.start = new Date(clonedEvent.start.getTime() + distance);\n                clonedEvent.end = new Date(+clonedEvent.start + eventDuraton);\n                this._removeMoveHint(event.uid);\n                if (this._isInDateSlot(clonedEvent)) {\n                    if (clonedEvent.isAllDay || clonedEvent.duration() >= MS_PER_DAY || this._isInTimeSlot(clonedEvent)) {\n                        var adjustedEvent = this._adjustEvent(clonedEvent);\n                        var ranges = group.slotRanges(adjustedEvent.occurrence, false);\n                        for (var rangeIndex = 0; rangeIndex < ranges.length; rangeIndex++) {\n                            this._groupedView._createMoveHint(ranges[rangeIndex], adjustedEvent);\n                        }\n                    }\n                }\n            },\n            _appendMoveHint: function (hint) {\n                hint.appendTo(this.content);\n                this._moveHint = this._moveHint.add(hint);\n            },\n            _updateResizeHint: function (event, groupIndex, startTime, endTime) {\n                var group = this.groups[groupIndex];\n                var ranges = group.ranges(startTime, endTime, false, false);\n                this._removeResizeHint();\n                for (var rangeIndex = 0; rangeIndex < ranges.length; rangeIndex++) {\n                    var range = ranges[rangeIndex];\n                    var start = range.startSlot();\n                    var startRect = range.innerRect(startTime, endTime, false);\n                    startRect.top = start.offsetTop;\n                    var width = startRect.right - startRect.left;\n                    if (width < 0) {\n                        for (var i = 0; i < range.events().length; i++) {\n                            if (range.events()[i].uid === event.uid) {\n                                width = range.events()[i].rectRight - startRect.left;\n                                break;\n                            }\n                        }\n                    }\n                    var height = range.endSlot().offsetTop + start.offsetHeight - startRect.top;\n                    var left = this._adjustLeftPosition(startRect.left);\n                    var hint = SchedulerView.fn._createResizeHint.call(this, left, startRect.top, width, height);\n                    this._resizeHint = this._resizeHint.add(hint);\n                }\n                var format = 't';\n                var container = this.content;\n                this._resizeHint.appendTo(container);\n                this._resizeHint.find('.k-label-top,.k-label-bottom').text('');\n                this._resizeHint.first().addClass('k-first').find('.k-label-top').text(kendo.toString(kendo.timezone.toLocalDate(startTime), format));\n                this._resizeHint.last().addClass('k-last').find('.k-label-bottom').text(kendo.toString(kendo.timezone.toLocalDate(endTime), format));\n            },\n            selectionByElement: function (cell) {\n                var offset = cell.offset();\n                return this._slotByPosition(offset.left, offset.top);\n            },\n            _updateDirection: function (selection, ranges, multiple, reverse, vertical) {\n                var startSlot = ranges[0].start;\n                var endSlot = ranges[ranges.length - 1].end;\n                if (multiple && !vertical) {\n                    if (startSlot.index === endSlot.index && startSlot.collectionIndex === endSlot.collectionIndex) {\n                        selection.backward = reverse;\n                    }\n                }\n            },\n            _changeGroup: function (selection, previous) {\n                var method = previous ? 'prevGroupSlot' : 'nextGroupSlot';\n                var slot = this[method](selection.start, selection.groupIndex, false);\n                if (slot) {\n                    selection.groupIndex += previous ? -1 : 1;\n                }\n                this._groupedView._changeGroup(selection, previous, slot);\n                return slot;\n            },\n            prevGroupSlot: function (date, groupIndex, isDay) {\n                var group = this.groups[groupIndex];\n                var slot = group.ranges(date, date, isDay, false)[0].start;\n                if (groupIndex <= 0) {\n                    return;\n                }\n                return this._groupedView._prevGroupSlot(slot, group, isDay);\n            },\n            nextGroupSlot: function (date, groupIndex, isDay) {\n                var group = this.groups[groupIndex];\n                var slot = group.ranges(date, date, isDay, false)[0].start;\n                if (groupIndex >= this.groups.length - 1) {\n                    return;\n                }\n                return this._groupedView._nextGroupSlot(slot, group, isDay);\n            },\n            _verticalSlots: function (selection, ranges, multiple, reverse) {\n                var groupedView = this._groupedView;\n                var method = groupedView._verticalMethod(reverse, multiple);\n                var startSlot = ranges[0].start;\n                var endSlot = ranges[ranges.length - 1].end;\n                var group = this.groups[selection.groupIndex];\n                var slot = groupedView._normalizeVerticalSelection(selection, ranges, reverse, multiple);\n                if (slot) {\n                    startSlot = endSlot = slot;\n                }\n                startSlot = group[method](startSlot);\n                endSlot = group[method](endSlot);\n                if (!multiple && this._isVerticallyGrouped() && (!startSlot || !endSlot)) {\n                    startSlot = endSlot = groupedView._verticalSlots(selection, reverse, slot);\n                }\n                return {\n                    startSlot: startSlot,\n                    endSlot: endSlot\n                };\n            },\n            _horizontalSlots: function (selection, ranges, multiple, reverse) {\n                var method = reverse ? 'upSlot' : 'downSlot';\n                var startSlot = ranges[0].start;\n                var endSlot = ranges[ranges.length - 1].end;\n                var group = this.groups[selection.groupIndex];\n                var result = {};\n                if (!multiple) {\n                    result = this._groupedView._horizontalSlots(selection, group, method, startSlot, endSlot, multiple, reverse);\n                } else {\n                    result.startSlot = group[method](startSlot);\n                    result.endSlot = group[method](endSlot);\n                    if (!multiple && this._isHorizontallyGrouped() && (!startSlot || !endSlot)) {\n                        result.startSlot = result.endSlot = this._changeGroup(selection, reverse);\n                    }\n                }\n                return result;\n            },\n            _changeViewPeriod: function (selection, reverse) {\n                var date = reverse ? this.previousDate() : this.nextDate();\n                var start = selection.start;\n                var end = selection.end;\n                var newStart, newEnd;\n                newStart = new Date(date);\n                newEnd = new Date(date);\n                if (this._isInRange(newStart, newEnd)) {\n                    return false;\n                }\n                selection.start = newStart;\n                selection.end = newEnd;\n                if (this._isHorizontallyGrouped()) {\n                    selection.groupIndex = reverse ? this.groups.length - 1 : 0;\n                }\n                var duration = end - start;\n                if (reverse) {\n                    end = getMilliseconds(this.endTime());\n                    end = end === 0 ? MS_PER_DAY : end;\n                    setTime(selection.start, end - duration);\n                    setTime(selection.end, end);\n                } else {\n                    start = getMilliseconds(this.startTime());\n                    setTime(selection.start, start);\n                    setTime(selection.end, start + duration);\n                }\n                selection.events = [];\n                return true;\n            },\n            move: function (selection, key, shift) {\n                var handled = false;\n                var group = this.groups[selection.groupIndex];\n                var keys = kendo.keys;\n                var groupedView = this._groupedView;\n                var ranges = group.ranges(selection.start, selection.end, false, false);\n                var startSlot, endSlot, reverse, slots;\n                if (key === keys.DOWN || key === keys.UP) {\n                    handled = true;\n                    reverse = key === keys.UP;\n                    groupedView._updateDirection(selection, ranges, shift, reverse);\n                    slots = this._verticalSlots(selection, ranges, shift, reverse);\n                    if (groupedView._changeVerticalViewPeriod(slots, shift, selection, reverse)) {\n                        return handled;\n                    }\n                } else if (key === keys.LEFT || key === keys.RIGHT) {\n                    handled = true;\n                    reverse = key === keys.LEFT;\n                    this._updateDirection(selection, ranges, shift, reverse, false);\n                    slots = this._horizontalSlots(selection, ranges, shift, reverse);\n                    if (groupedView._changeHorizontalViewPeriod(slots, shift, selection, reverse)) {\n                        return handled;\n                    }\n                }\n                if (handled) {\n                    startSlot = slots.startSlot;\n                    endSlot = slots.endSlot;\n                    if (shift) {\n                        var backward = selection.backward;\n                        if (backward && startSlot) {\n                            selection.start = startSlot.startDate();\n                        } else if (!backward && endSlot) {\n                            selection.end = endSlot.endDate();\n                        }\n                    } else if (startSlot && endSlot) {\n                        selection.start = startSlot.startDate();\n                        selection.end = endSlot.endDate();\n                    }\n                    selection.events = [];\n                }\n                return handled;\n            },\n            destroy: function () {\n                var that = this;\n                if (that.element) {\n                    that.element.off(NS);\n                }\n                if (that.footer) {\n                    that.footer.remove();\n                }\n                if (that._currentTimeUpdateTimer) {\n                    clearInterval(that._currentTimeUpdateTimer);\n                }\n                SchedulerView.fn.destroy.call(this);\n                if (this._isMobile() && that.options.editable) {\n                    if (that.options.editable.create !== false) {\n                        that._addUserEvents.destroy();\n                    }\n                    if (that.options.editable.update !== false) {\n                        that._editUserEvents.destroy();\n                    }\n                }\n            },\n            _resourceBySlot: function (slot) {\n                var resources = this.groupedResources;\n                var result = {}, groupOptions = this.options.group;\n                if (resources.length && groupOptions.orientation === 'horizontal' && groupOptions.date) {\n                    var resourceIndex = slot.groupIndex, levels = this.columnLevels, groupLevel = levels[levels.length - 1], resource = resources[resources.length - 1], groupLevelMember = groupLevel[resourceIndex], passedChildren, numberOfChildren, j, i;\n                    this._setResourceValue(groupLevelMember, resource, result);\n                    for (j = levels.length - 2; j >= 3; j--) {\n                        groupLevel = levels[j];\n                        resource = resources[j - 3];\n                        passedChildren = 0;\n                        for (i = 0; i < groupLevel.length; i++) {\n                            groupLevelMember = groupLevel[i];\n                            numberOfChildren = groupLevelMember.columns.length;\n                            if (numberOfChildren > resourceIndex - passedChildren) {\n                                this._setResourceValue(groupLevelMember, resource, result);\n                                i = groupLevel.length;\n                            } else {\n                                passedChildren += numberOfChildren;\n                            }\n                        }\n                    }\n                    return result;\n                } else {\n                    return SchedulerView.fn._resourceBySlot.call(this, slot);\n                }\n            }\n        });\n        extend(true, ui, {\n            TimelineView: TimelineView,\n            TimelineWeekView: TimelineView.extend({\n                options: {\n                    name: 'TimelineWeekView',\n                    title: 'Timeline Week',\n                    selectedDateFormat: '{0:D} - {1:D}',\n                    selectedShortDateFormat: '{0:d} - {1:d}',\n                    selectedMobileDateFormat: '{0:MMM dd} - {1:dd}',\n                    majorTick: 120\n                },\n                name: 'timelineWeek',\n                calculateDateRange: function () {\n                    var selectedDate = this.options.date, start = kendo.date.dayOfWeek(selectedDate, this.calendarInfo().firstDay, -1), idx, length, dates = [];\n                    for (idx = 0, length = 7; idx < length; idx++) {\n                        dates.push(start);\n                        start = kendo.date.nextDay(start);\n                    }\n                    this._render(dates);\n                }\n            }),\n            TimelineWorkWeekView: TimelineView.extend({\n                options: {\n                    name: 'TimelineWorkWeekView',\n                    title: 'Timeline Work Week',\n                    selectedDateFormat: '{0:D} - {1:D}',\n                    selectedShortDateFormat: '{0:d} - {1:d}',\n                    selectedMobileDateFormat: '{0:MMM dd} - {1:dd}',\n                    majorTick: 120\n                },\n                name: 'timelineWorkWeek',\n                nextDate: function () {\n                    var weekStart = kendo.date.dayOfWeek(kendo.date.nextDay(this.endDate()), this.calendarInfo().firstDay, 1);\n                    return kendo.date.addDays(weekStart, this._workDays[0]);\n                },\n                previousDate: function () {\n                    var weekStart = kendo.date.dayOfWeek(this.startDate(), this.calendarInfo().firstDay, -1);\n                    var workDays = this._workDays;\n                    return kendo.date.addDays(weekStart, workDays[workDays.length - 1] - 7);\n                },\n                calculateDateRange: function () {\n                    var options = this.options, selectedDate = options.date, dayOfWeek = kendo.date.dayOfWeek, weekStart = dayOfWeek(selectedDate, this.calendarInfo().firstDay, -1), start = dayOfWeek(weekStart, options.workWeekStart, 1), end = dayOfWeek(start, options.workWeekEnd, 1), dates = [], workDays = options.workDays && options.workDays.length ? options.workDays.map(function (day) {\n                            return dayOfWeek(weekStart, day, 1).getTime();\n                        }) : null;\n                    if (workDays) {\n                        start = weekStart;\n                        end = dayOfWeek(start, this.calendarInfo().firstDay + 6, 1);\n                    }\n                    while (start <= end) {\n                        if (workDays && workDays.indexOf(start.getTime()) > -1) {\n                            dates.push(start);\n                        } else if (!workDays) {\n                            dates.push(start);\n                        }\n                        start = kendo.date.nextDay(start);\n                    }\n                    this._render(dates);\n                }\n            }),\n            TimelineMonthView: TimelineView.extend({\n                options: {\n                    name: 'TimelineMonthView',\n                    title: 'Timeline Month',\n                    selectedDateFormat: '{0:D} - {1:D}',\n                    selectedShortDateFormat: '{0:d} - {1:d}',\n                    workDayStart: new Date(1980, 1, 1, 0, 0, 0),\n                    workDayEnd: new Date(1980, 1, 1, 23, 59, 59),\n                    footer: false,\n                    majorTick: 1440,\n                    minorTickCount: 1\n                },\n                name: 'timelineMonth',\n                calculateDateRange: function () {\n                    var selectedDate = this.options.date, start = kendo.date.firstDayOfMonth(selectedDate), end = kendo.date.lastDayOfMonth(selectedDate), idx, length, dates = [];\n                    for (idx = 0, length = end.getDate(); idx < length; idx++) {\n                        dates.push(start);\n                        start = kendo.date.nextDay(start);\n                    }\n                    this._render(dates);\n                }\n            })\n        });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}