{"version":3,"sources":["kendo.columnmenu.js"],"names":["f","define","$","undefined","trim","text","kendo","replace","toHash","arr","key","idx","len","current","result","length","columnsGroupFilterHandler","column","this","columns","indexOf","title","field","leafColumns","concat","push","attrEquals","attrName","attrValue","attr","insertElementAt","index","element","container","insertAfter","children","eq","prepend","columnOccurrences","signature","i","columnDict","JSON","stringify","oldColumnOccurrences","renderedListElements","checkBoxes","columCheckbox","j","indexAttr","fieldAttr","parseInt","window","ui","proxy","extend","grep","map","inArray","Comparer","data","ACTIVE","ASC","DESC","CHANGE","INIT","OPEN","SELECT","STICK","UNSTICK","POPUP","FILTERMENU","MENU","EXPANSIONPANEL","NS","Widget","ColumnMenu","init","options","that","componentType","fn","call","owner","dataSource","appendTo","link","_createLink","wrapper","_refreshHandler","refresh","bind","_init","pane","_isMobile","_createMobileMenu","_createMenu","_muteAngularRebind","_angularItems","_sort","_columns","_filter","_lockColumns","_stickyColumns","trigger","events","name","messages","sortAscending","sortDescending","filter","columnVisibility","clear","cancel","done","settings","lock","unlock","stick","unstick","setColumnPosition","apply","reset","buttonTitle","sortable","filterable","animations","left","encodeTitles","flattenMenuCols","menuTemplate","_ownerColumns","_hasGroups","_groupColumns","_flattenMenuCols","_syncMenuCols","template","_isModernComponentType","modernTemplate","html","uid","guid","ns","showColumns","hasLockableColumns","hasStickableColumns","omitWrapAttribute","popup","anchor","copyAnchorStyles","open","_open","activate","_activate","deactivate","_deactivate","close","e","menu","_closing","sender","closeCallback","addClass","_createExpanders","orientation","closeOnClick","_updateMenuItems","appendTarget","find","format","append","on","_click","expanderOptions","expanded","headerClass","useBareTemplate","menuCols","ownerCols","ownerCol","menuColsFields","col","cols","groupHeader","nest","currGroup","filterHandler","group","groupColumns","groups","viewElement","mobileTemplate","hasGroups","view","state","MobileMenu","columnMenu","stopPropagation","preventDefault","_applyChanges","_cancelChanges","_updateLockedColumns","_updateStickyColumns","initialSort","action","angular","items","closest","_originalObject","elements","destroy","filterMenu","unbind","_updateColumnsMenuHandler","_updateColumnsLockedStateHandler","off","purge","is","navigate","toggle","_setMenuItemsVisibility","sort","_updateDataIndexes","_reorderMenuItems","_eachRenderedMenuItem","renderedListElement","matchesMedia","hide","show","renderedList","first","mappedColumns","x","each","callback","duplicateColumnIndex","fieldValue","currentColumn","columnElements","_getRenderedList","_getRenderedListElements","oldOccurances","columnOccurrence","add","not","keyCode","keys","ENTER","target","click","ESC","omitSort","menuColumns","originalField","hidden","locked","headerAttributes","id","create","dir","_sortHandler","item","hasClass","_getSortItemsContainer","removeClass","_sortDataSource","parents","parent","compare","allowUnsort","mode","splice","_updateColumnsMenu","_updateColumnsLockedState","_applyColumnVisibility","input","uidAttr","colIdx","showColumn","hideColumn","checkbox","checkboxes","columnsInMenu","omitCheckState","checked","visibleFields","visibleDataFields","lockedCount","nonLockedCount","columnsNotInMenu","hiddenColumnsNotInMenu","switchWidget","lockedAttr","columnIndexMap","columnsCount","prop","enable","check","widget","multi","checkSource","appendToElement","values","change","cycleForm","_lockableHandler","lockColumn","unlockColumn","_stickableHandler","stickColumn","unstickColumn","notLockable","lockItem","unlockItem","lockable","sticky","stickable","stickItem","unstickItem","descriptor","_filterExist","filters","found","_createCheckBoxes","currentTarget","_updateSelectedItems","el","otherItem","otherItemId","force","selectedItems","hasOwnProperty","kendoSwitch","unchecked","_destroyCheckBoxes","plugin","jQuery","amd","a1","a2","a3"],"mappings":"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","file":"kendo.columnmenu.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.columnmenu', [\n        'kendo.popup',\n        'kendo.filtermenu',\n        'kendo.menu',\n        'kendo.expansionpanel'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'columnmenu',\n        name: 'Column Menu',\n        category: 'framework',\n        depends: [\n            'popup',\n            'filtermenu',\n            'menu',\n            'expansionpanel'\n        ],\n        advanced: true\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, proxy = $.proxy, extend = $.extend, grep = $.grep, map = $.map, inArray = $.inArray, Comparer = kendo.data.Comparer, ACTIVE = 'k-state-selected', ASC = 'asc', DESC = 'desc', CHANGE = 'change', INIT = 'init', OPEN = 'open', SELECT = 'select', STICK = 'stick', UNSTICK = 'unstick', POPUP = 'kendoPopup', FILTERMENU = 'kendoFilterMenu', MENU = 'kendoMenu', EXPANSIONPANEL = 'kendoExpansionPanel', NS = '.kendoColumnMenu', Widget = ui.Widget;\n        function trim(text) {\n            return kendo.trim(text).replace(/&nbsp;/gi, '');\n        }\n        function toHash(arr, key) {\n            var result = {};\n            var idx, len, current;\n            for (idx = 0, len = arr.length; idx < len; idx++) {\n                current = arr[idx];\n                result[current[key]] = current;\n            }\n            return result;\n        }\n        function columnsGroupFilterHandler(column) {\n            return this.columns.indexOf(column.title) >= 0 || this.columns.indexOf(column.field) >= 0;\n        }\n        function leafColumns(columns) {\n            var result = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n            return result;\n        }\n        function attrEquals(attrName, attrValue) {\n            return '[' + kendo.attr(attrName) + '=\\'' + (attrValue || '').replace(/'/g, '\"') + '\\']';\n        }\n        function insertElementAt(index, element, container) {\n            if (index > 0) {\n                element.insertAfter(container.children().eq(index - 1));\n            } else {\n                container.prepend(element);\n            }\n        }\n        function columnOccurrences(columns) {\n            var columnDict = {};\n            var signature;\n            for (var i = 0; i < columns.length; i++) {\n                signature = JSON.stringify(columns[i]);\n                if (columnDict[signature]) {\n                    columnDict[signature].push(i);\n                } else {\n                    columnDict[signature] = [i];\n                }\n            }\n            return columnDict;\n        }\n        function oldColumnOccurrences(renderedListElements, checkBoxes) {\n            var indexAttr = kendo.attr('index');\n            var fieldAttr = kendo.attr('field');\n            var columnDict = {};\n            var signature;\n            var columCheckbox;\n            var index;\n            var field;\n            var title;\n            for (var j = 0; j < renderedListElements.length; j++) {\n                columCheckbox = checkBoxes.eq(j);\n                index = parseInt(columCheckbox.attr(indexAttr), 10);\n                field = columCheckbox.attr(fieldAttr);\n                title = columCheckbox.attr('title');\n                signature = field ? field : title;\n                if (columnDict[signature]) {\n                    columnDict[signature].push(index);\n                } else {\n                    columnDict[signature] = [index];\n                }\n            }\n            return columnDict;\n        }\n        var ColumnMenu = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = options || {};\n                options.componentType = options.componentType || 'classic';\n                Widget.fn.init.call(that, element, options);\n                element = that.element;\n                options = that.options;\n                that.owner = options.owner;\n                that.dataSource = options.dataSource;\n                that.field = element.attr(kendo.attr('field'));\n                that.title = element.attr(kendo.attr('title'));\n                that.appendTo = $(options.appendTo);\n                that.link = that._createLink();\n                that.wrapper = $('<div class=\"k-column-menu\"/>');\n                that._refreshHandler = proxy(that.refresh, that);\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n            },\n            _init: function () {\n                var that = this;\n                that.pane = that.options.pane;\n                if (that.pane) {\n                    that._isMobile = true;\n                }\n                if (that._isMobile) {\n                    that._createMobileMenu();\n                } else {\n                    that._createMenu();\n                }\n                that.owner._muteAngularRebind(function () {\n                    that._angularItems('compile');\n                });\n                that._sort();\n                that._columns();\n                that._filter();\n                that._lockColumns();\n                that._stickyColumns();\n                that.trigger(INIT, {\n                    field: that.field,\n                    container: that.wrapper\n                });\n            },\n            events: [\n                INIT,\n                OPEN,\n                'sort',\n                'filtering',\n                STICK,\n                UNSTICK\n            ],\n            options: {\n                name: 'ColumnMenu',\n                messages: {\n                    sortAscending: 'Sort Ascending',\n                    sortDescending: 'Sort Descending',\n                    filter: 'Filter',\n                    column: 'Column',\n                    columns: 'Columns',\n                    columnVisibility: 'Column Visibility',\n                    clear: 'Clear',\n                    cancel: 'Cancel',\n                    done: 'Done',\n                    settings: 'Edit Column Settings',\n                    lock: 'Lock Column',\n                    unlock: 'Unlock Column',\n                    stick: 'Stick Column',\n                    unstick: 'Unstick Column',\n                    setColumnPosition: 'Set Column Position',\n                    apply: 'Apply',\n                    reset: 'Reset',\n                    buttonTitle: '{0} edit column settings'\n                },\n                filter: '',\n                columns: true,\n                sortable: true,\n                filterable: true,\n                animations: { left: 'slide' },\n                encodeTitles: false,\n                componentType: 'classic',\n                appendTo: null\n            },\n            _createMenu: function () {\n                var that = this, options = that.options, columns = that._ownerColumns(), flattenMenuCols, menuTemplate;\n                if (that._hasGroups()) {\n                    columns = that._groupColumns(columns);\n                    flattenMenuCols = that._flattenMenuCols(columns);\n                    if (flattenMenuCols.length !== that.owner.columns.length) {\n                        that._syncMenuCols(flattenMenuCols, that.owner.columns);\n                    }\n                }\n                if (that._isModernComponentType()) {\n                    menuTemplate = kendo.template(modernTemplate);\n                } else {\n                    menuTemplate = kendo.template(template);\n                }\n                that.wrapper.html(menuTemplate({\n                    uid: kendo.guid(),\n                    ns: kendo.ns,\n                    messages: options.messages,\n                    sortable: options.sortable,\n                    filterable: options.filterable,\n                    columns: columns,\n                    showColumns: options.columns,\n                    hasLockableColumns: options.hasLockableColumns,\n                    hasStickableColumns: options.hasStickableColumns,\n                    encodeTitles: options.encodeTitles,\n                    omitWrapAttribute: kendo.attr('omit-wrap')\n                }));\n                that.popup = that.wrapper[POPUP]({\n                    anchor: that.link,\n                    copyAnchorStyles: false,\n                    open: proxy(that._open, that),\n                    activate: proxy(that._activate, that),\n                    deactivate: proxy(that._deactivate, that),\n                    close: function (e) {\n                        if (that.menu) {\n                            that.menu._closing = e.sender.element;\n                        }\n                        if (that.options.closeCallback) {\n                            that.options.closeCallback(that.element);\n                        }\n                    }\n                }).data(POPUP);\n                if (that._isModernComponentType()) {\n                    that.popup.element.addClass('k-grid-columnmenu-popup');\n                    that._createExpanders();\n                } else {\n                    that.menu = that.wrapper.children()[MENU]({\n                        orientation: 'vertical',\n                        closeOnClick: false,\n                        open: function () {\n                            that._updateMenuItems();\n                        }\n                    }).data(MENU);\n                }\n            },\n            _createLink: function () {\n                var that = this, element = that.element, appendTarget = that.appendTo.length ? element.find(that.appendTo) : element, link = element.find('.k-header-column-menu'), title = kendo.format(that.options.messages.buttonTitle, that.title || that.field);\n                if (!link[0]) {\n                    element.addClass('k-filterable');\n                    link = appendTarget.append('<a class=\"k-header-column-menu\" href=\"#\" title=\"' + title + '\" aria-label=\"' + title + '\"><span class=\"k-icon k-i-more-vertical\"></span></a>').find('.k-header-column-menu');\n                }\n                link.attr('tabindex', -1).on('click' + NS, proxy(that._click, that));\n                return link;\n            },\n            _createExpanders: function () {\n                var that = this;\n                var options = that.options;\n                var expanderOptions = {\n                    expanded: false,\n                    headerClass: 'k-columnmenu-item',\n                    useBareTemplate: true\n                };\n                that.wrapper.find('.k-columns-item')[EXPANSIONPANEL]($.extend(true, {}, expanderOptions, { title: '<span class=\"k-icon k-i-columns\"></span><span>' + options.messages.columns + '</span>' }));\n                that.wrapper.find('.k-column-menu-filter')[EXPANSIONPANEL]($.extend(true, {}, expanderOptions, { title: '<span class=\"k-icon k-i-filter\"></span><span>' + options.messages.filter + '</span>' }));\n                that.wrapper.find('.k-column-menu-position')[EXPANSIONPANEL]($.extend(true, {}, expanderOptions, { title: '<span class=\"k-icon k-i-set-column-position\"></span><span>' + options.messages.setColumnPosition + '</span>' }));\n            },\n            _syncMenuCols: function (menuCols, ownerCols) {\n                var length = ownerCols.length;\n                var ownerCol;\n                var menuColsFields = menuCols.map(function (col) {\n                    return col.field;\n                });\n                for (var i = 0; i < length; i++) {\n                    ownerCol = ownerCols[i];\n                    if (menuColsFields.indexOf(ownerCol.field) < 0) {\n                        ownerCol.menu = false;\n                    }\n                }\n            },\n            _flattenMenuCols: function (cols) {\n                var result = [];\n                var length = cols.length;\n                for (var i = 0; i < length; i++) {\n                    if (cols[i].columns) {\n                        result = result.concat(this._flattenMenuCols(cols[i].columns));\n                    } else if (!cols[i].groupHeader) {\n                        result.push(cols[i]);\n                    }\n                }\n                return result;\n            },\n            _groupColumns: function (columns, nest) {\n                var result = [];\n                var groups = this.options.columns.groups;\n                var length = groups.length;\n                var i;\n                var currGroup;\n                var filterHandler;\n                var group;\n                var groupColumns;\n                for (i = 0; i < length; i++) {\n                    currGroup = groups[i];\n                    filterHandler = columnsGroupFilterHandler.bind(currGroup);\n                    group = {\n                        title: currGroup.title,\n                        groupHeader: true\n                    };\n                    groupColumns = columns.filter(filterHandler);\n                    result.push(group);\n                    if (nest) {\n                        group.columns = groupColumns;\n                    } else {\n                        result = result.concat(groupColumns);\n                    }\n                }\n                return result;\n            },\n            _hasGroups: function () {\n                return this.options.columns && this.options.columns.groups && this.options.columns.groups.length;\n            },\n            _isModernComponentType: function () {\n                return this.options.componentType === 'modern' && !this._isMobile;\n            },\n            _deactivate: function () {\n                if (this.menu) {\n                    this.menu._closing = false;\n                }\n            },\n            _createMobileMenu: function () {\n                var that = this, options = that.options, columns = that._ownerColumns(), groups, flattenMenuCols;\n                if (that._hasGroups()) {\n                    groups = that._groupColumns(columns, true);\n                    flattenMenuCols = that._flattenMenuCols(groups);\n                    if (flattenMenuCols.length !== that.owner.columns.length) {\n                        that._syncMenuCols(flattenMenuCols, that.owner.columns);\n                    }\n                }\n                var html = kendo.template(mobileTemplate)({\n                    ns: kendo.ns,\n                    field: that.field,\n                    title: that.title || that.field,\n                    messages: options.messages,\n                    sortable: options.sortable,\n                    filterable: options.filterable,\n                    columns: columns,\n                    showColumns: options.columns,\n                    hasLockableColumns: options.hasLockableColumns,\n                    hasStickableColumns: options.hasStickableColumns,\n                    hasGroups: that._hasGroups(),\n                    groups: groups\n                });\n                that.view = that.pane.append(html);\n                that.view.state = { columns: {} };\n                that.wrapper = that.view.element.find('.k-column-menu');\n                that.menu = new MobileMenu(that.wrapper.children(), {\n                    pane: that.pane,\n                    columnMenu: that\n                });\n                that.menu.element.on('transitionend' + NS, function (e) {\n                    e.stopPropagation();\n                });\n                var viewElement = that.view.wrapper && that.view.wrapper[0] ? that.view.wrapper : that.view.element;\n                viewElement.on('click', '.k-header-done', function (e) {\n                    e.preventDefault();\n                    that.menu._applyChanges();\n                    that.menu._cancelChanges(false);\n                    that.close();\n                });\n                viewElement.on('click', '.k-header-cancel', function (e) {\n                    e.preventDefault();\n                    that.menu._cancelChanges(true);\n                    that.close();\n                });\n                that.view.bind('showStart', function () {\n                    var view = that.view || { columns: {} };\n                    if (that.options.hasLockableColumns) {\n                        that._updateLockedColumns();\n                    }\n                    if (that.options.hasStickableColumns) {\n                        that._updateStickyColumns();\n                    }\n                    if (view.element.find('.k-sort-asc.k-state-selected').length) {\n                        view.state.initialSort = 'asc';\n                    } else if (view.element.find('.k-sort-desc.k-state-selected').length) {\n                        view.state.initialSort = 'desc';\n                    }\n                });\n            },\n            _angularItems: function (action) {\n                var that = this;\n                that.angular(action, function () {\n                    var items = that.wrapper.find('.k-columns-item input[' + kendo.attr('field') + ']').map(function () {\n                        return $(this).closest('li');\n                    });\n                    var data = map(that._ownerColumns(), function (col) {\n                        return { column: col._originalObject };\n                    });\n                    return {\n                        elements: items,\n                        data: data\n                    };\n                });\n            },\n            destroy: function () {\n                var that = this;\n                that._angularItems('cleanup');\n                Widget.fn.destroy.call(that);\n                if (that.filterMenu) {\n                    that.filterMenu.destroy();\n                }\n                if (that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                }\n                if (that.options.columns && that.owner) {\n                    if (that._updateColumnsMenuHandler) {\n                        that.owner.unbind('columnShow', that._updateColumnsMenuHandler);\n                        that.owner.unbind('columnHide', that._updateColumnsMenuHandler);\n                    }\n                    if (that._updateColumnsLockedStateHandler) {\n                        that.owner.unbind('columnLock', that._updateColumnsLockedStateHandler);\n                        that.owner.unbind('columnUnlock', that._updateColumnsLockedStateHandler);\n                    }\n                }\n                if (that.menu) {\n                    that.menu.element.off(NS);\n                    that.menu.destroy();\n                }\n                that.wrapper.off(NS);\n                if (that.popup) {\n                    that.popup.destroy();\n                }\n                if (that.view) {\n                    that.view.purge();\n                }\n                that.link.off(NS);\n                that.owner = null;\n                that.wrapper = null;\n                that.element = null;\n            },\n            close: function () {\n                if (this.menu) {\n                    this.menu.close();\n                }\n                if (this.popup) {\n                    this.popup.close();\n                    this.popup.element.off('keydown' + NS);\n                }\n            },\n            _click: function (e) {\n                var that = this;\n                e.preventDefault();\n                e.stopPropagation();\n                var options = this.options;\n                if (options.filter && this.element.is(!options.filter)) {\n                    return;\n                }\n                if (!this.popup && !this.pane) {\n                    this._init();\n                } else {\n                    that._updateMenuItems();\n                }\n                if (this._isMobile) {\n                    this.pane.navigate(this.view, this.options.animations.left);\n                } else {\n                    this.popup.toggle();\n                }\n            },\n            _updateMenuItems: function () {\n                var that = this;\n                if (that.options.columns) {\n                    that._setMenuItemsVisibility();\n                    if (!that.options.columns.sort && !that.options.columns.groups) {\n                        that._reorderMenuItems();\n                    } else {\n                        that._updateDataIndexes();\n                    }\n                }\n            },\n            _setMenuItemsVisibility: function () {\n                var that = this;\n                that._eachRenderedMenuItem(function (index, column, renderedListElement) {\n                    if (column.matchesMedia === false) {\n                        renderedListElement.hide();\n                    } else {\n                        renderedListElement.show();\n                    }\n                });\n            },\n            _reorderMenuItems: function () {\n                var that = this;\n                that._eachRenderedMenuItem(function (index, column, renderedListElement, renderedList) {\n                    if (renderedListElement[0] && renderedListElement.index() !== index) {\n                        insertElementAt(index, renderedListElement, renderedList);\n                    }\n                });\n                that._updateDataIndexes();\n            },\n            _updateDataIndexes: function () {\n                var that = this;\n                var renderedList = that._isMobile && that.view ? $(that.view.element).find('.k-columns-item').children('ul') : $(that.wrapper).find('.k-menu-group').first(), mappedColumns = that._ownerColumns(true).map(function (x) {\n                        return x.title || x.field;\n                    });\n                renderedList.find('span.' + (this._isMobile ? 'k-listgroup-form-field-wrapper' : 'k-menu-link') + ' input').each(function (i) {\n                    var columns;\n                    var index;\n                    if (that.options.columns.sort) {\n                        columns = that._ownerColumns();\n                        index = mappedColumns.indexOf(columns[i].title);\n                        $(this).attr(kendo.attr('index'), index);\n                    } else {\n                        $(this).attr(kendo.attr('index'), i);\n                    }\n                });\n            },\n            _eachRenderedMenuItem: function (callback) {\n                var that = this;\n                var renderedListElement;\n                var duplicateColumnIndex;\n                var fieldValue;\n                var currentColumn;\n                var columns = grep(leafColumns(that.owner.columns), function (col) {\n                    var result = true, title = trim(col.title || '');\n                    if (col.menu === false || !col.field && !title.length) {\n                        result = false;\n                    }\n                    return result;\n                }).map(function (col) {\n                    return {\n                        field: col.field,\n                        title: col.title,\n                        matchesMedia: col.matchesMedia\n                    };\n                });\n                var renderedList = that._getRenderedList();\n                var renderedListElements = that._getRenderedListElements(renderedList);\n                var oldOccurances = oldColumnOccurrences(renderedListElements, renderedList.find('input[type=checkbox]'));\n                var columnOccurrence = columnOccurrences(columns);\n                var columnElements;\n                for (var i = 0; i < columns.length; i++) {\n                    currentColumn = columns[i];\n                    fieldValue = currentColumn.field ? currentColumn.field : currentColumn.title;\n                    duplicateColumnIndex = $.inArray(i, columnOccurrence[JSON.stringify(currentColumn)]);\n                    columnElements = $();\n                    for (var idx = 0; idx < oldOccurances[fieldValue].length; idx++) {\n                        columnElements = columnElements.add(renderedListElements.eq(oldOccurances[fieldValue][idx]));\n                    }\n                    renderedListElement = columnElements.find(attrEquals('field', fieldValue)).closest(that._isModernComponentType() ? 'label' : 'li').eq(duplicateColumnIndex);\n                    callback(i, currentColumn, renderedListElement, renderedList);\n                }\n            },\n            _getRenderedList: function () {\n                var that = this;\n                if (that._isModernComponentType()) {\n                    return $(that.wrapper).find('.k-columns-item');\n                } else {\n                    return that._isMobile && that.view ? $(that.view.element).find('.k-columns-item').children('ul') : $(that.wrapper).find('.k-menu-group').first();\n                }\n            },\n            _getRenderedListElements: function (renderedList) {\n                var that = this;\n                if (that._isModernComponentType()) {\n                    return renderedList.find('label');\n                } else {\n                    return renderedList.find('span.' + (this._isMobile ? 'k-listgroup-form-field-wrapper' : 'k-menu-link'));\n                }\n            },\n            _open: function () {\n                var that = this;\n                $('.k-column-menu').not(that.wrapper).each(function () {\n                    $(this).data(POPUP).close();\n                });\n                that.popup.element.on('keydown' + NS, function (e) {\n                    if (that._isModernComponentType() && e.keyCode === kendo.keys.ENTER) {\n                        $(e.target).click();\n                    }\n                    if (e.keyCode == kendo.keys.ESC) {\n                        that.close();\n                    }\n                });\n                if (that.options.hasLockableColumns) {\n                    that._updateLockedColumns();\n                }\n                if (that.options.hasStickableColumns) {\n                    that._updateStickyColumns();\n                }\n            },\n            _activate: function () {\n                if (this.menu) {\n                    this.menu.element.trigger('focus');\n                } else {\n                    this.popup.element.find('[tabindex=0]').eq(0).trigger('focus');\n                }\n                this.trigger(OPEN, {\n                    field: this.field,\n                    container: this.wrapper\n                });\n            },\n            _ownerColumns: function (omitSort) {\n                var columns = leafColumns(this.owner.columns), menuColumns = grep(columns, function (col) {\n                        var result = true, title = trim(col.title || '');\n                        if (col.menu === false || !col.field && !title.length) {\n                            result = false;\n                        }\n                        return result;\n                    }), result, sort = this.options.columns.sort;\n                result = map(menuColumns, function (col) {\n                    return {\n                        originalField: col.field,\n                        field: col.field || col.title,\n                        title: col.title || col.field,\n                        hidden: col.hidden,\n                        matchesMedia: col.matchesMedia,\n                        index: inArray(col, columns),\n                        locked: !!col.locked,\n                        _originalObject: col,\n                        uid: col.headerAttributes.id\n                    };\n                });\n                if (sort && !omitSort) {\n                    result.sort(Comparer.create({\n                        field: 'title',\n                        dir: sort\n                    }));\n                }\n                return result;\n            },\n            _sort: function () {\n                var that = this;\n                if (that.options.sortable) {\n                    that.refresh();\n                    if (that._isModernComponentType()) {\n                        that.wrapper.on('click' + NS, '.k-sort-asc, .k-sort-desc', proxy(that._sortHandler, that));\n                    } else {\n                        that.menu.bind(SELECT, proxy(that._sortHandler, that));\n                    }\n                }\n            },\n            _sortHandler: function (e) {\n                var that = this, item = e.item ? $(e.item) : $(e.target), dir;\n                if (item.hasClass('k-sort-asc')) {\n                    dir = ASC;\n                } else if (item.hasClass('k-sort-desc')) {\n                    dir = DESC;\n                }\n                if (!dir) {\n                    return;\n                }\n                that._getSortItemsContainer(item).find('.k-sort-' + (dir == ASC ? DESC : ASC)).removeClass(ACTIVE);\n                that._sortDataSource(item, dir);\n                if (!that._isMobile) {\n                    that.close();\n                }\n            },\n            _getSortItemsContainer: function (item) {\n                return this._isModernComponentType() ? item.parents('.k-columnmenu-item-wrapper').first() : item.parent();\n            },\n            _sortDataSource: function (item, dir) {\n                var that = this, sortable = that.options.sortable, compare = sortable.compare === null ? undefined : sortable.compare, dataSource = that.dataSource, idx, length, sort = dataSource.sort() || [];\n                var removeClass = item.hasClass(ACTIVE) && sortable && sortable.allowUnsort !== false;\n                dir = !removeClass ? dir : undefined;\n                if (that.trigger('sort', {\n                        sort: {\n                            field: that.field,\n                            dir: dir,\n                            compare: compare\n                        }\n                    })) {\n                    return;\n                }\n                if (removeClass) {\n                    item.removeClass(ACTIVE);\n                } else {\n                    item.addClass(ACTIVE);\n                }\n                if (sortable.mode === 'multiple') {\n                    for (idx = 0, length = sort.length; idx < length; idx++) {\n                        if (sort[idx].field === that.field) {\n                            sort.splice(idx, 1);\n                            break;\n                        }\n                    }\n                    sort.push({\n                        field: that.field,\n                        dir: dir,\n                        compare: compare\n                    });\n                } else {\n                    sort = [{\n                            field: that.field,\n                            dir: dir,\n                            compare: compare\n                        }];\n                }\n                dataSource.sort(sort);\n            },\n            _columns: function () {\n                var that = this;\n                if (that.options.columns) {\n                    that._updateColumnsMenu();\n                    that._updateColumnsMenuHandler = proxy(that._updateColumnsMenu, that);\n                    that.owner.bind([\n                        'columnHide',\n                        'columnShow'\n                    ], that._updateColumnsMenuHandler);\n                    that._updateColumnsLockedStateHandler = proxy(that._updateColumnsLockedState, that);\n                    that.owner.bind([\n                        'columnUnlock',\n                        'columnLock'\n                    ], that._updateColumnsLockedStateHandler);\n                    if (that._isModernComponentType()) {\n                        that.wrapper.on('click' + NS, '.k-columns-item .k-button:not(.k-button-solid-primary)', function () {\n                            that._updateColumnsMenu();\n                        });\n                        that.wrapper.on('click' + NS, '.k-columns-item .k-button.k-button-solid-primary', proxy(that._applyColumnVisibility, that));\n                        that.wrapper.on('click' + NS, '.k-columns-item .k-checkbox', function () {\n                            that._updateColumnsMenu(true);\n                        });\n                    } else {\n                        that.menu.bind(SELECT, function (e) {\n                            var item = $(e.item), input, column, uidAttr = kendo.attr('uid'), colIdx = 0, columns = grep(leafColumns(that.owner.columns), function (col) {\n                                    var result = true, title = trim(col.title || '');\n                                    if (col.menu === false || !col.field && !title.length) {\n                                        result = false;\n                                    }\n                                    return result;\n                                });\n                            if (that._isMobile) {\n                                e.preventDefault();\n                            }\n                            if (!item.parent().closest('li.k-columns-item')[0]) {\n                                return;\n                            }\n                            input = item.find(':checkbox');\n                            if (input.attr('disabled')) {\n                                return;\n                            }\n                            colIdx = columns.map(function (col) {\n                                return col.headerAttributes.id;\n                            }).indexOf(input.attr(uidAttr));\n                            column = columns[colIdx];\n                            if (column.hidden === true) {\n                                that.owner.showColumn(column);\n                            } else {\n                                that.owner.hideColumn(column);\n                            }\n                        });\n                    }\n                }\n            },\n            _applyColumnVisibility: function () {\n                var that = this;\n                var fieldAttr = kendo.attr('field');\n                var uidAttr = kendo.attr('uid');\n                var checkboxes = that.wrapper.find('.k-columns-item input[' + fieldAttr + ']');\n                var columnsInMenu = grep(leafColumns(this.owner.columns), function (col) {\n                    var result = true, title = trim(col.title || '');\n                    if (col.menu === false || !col.field && !title.length) {\n                        result = false;\n                    }\n                    return result;\n                });\n                var length = checkboxes.length;\n                var idx;\n                var colIdx;\n                var checkbox;\n                var column;\n                that.owner.unbind('columnShow', that._updateColumnsMenuHandler);\n                that.owner.unbind('columnHide', that._updateColumnsMenuHandler);\n                for (idx = 0; idx < length; idx++) {\n                    checkbox = $(checkboxes[idx]);\n                    colIdx = columnsInMenu.map(function (col) {\n                        return col.headerAttributes.id;\n                    }).indexOf(checkbox.attr(uidAttr));\n                    column = columnsInMenu[colIdx];\n                    if (checkbox.is(':checked') && column.hidden) {\n                        that.owner.showColumn(column);\n                    } else if (checkbox.is(':not(:checked)') && !column.hidden) {\n                        that.owner.hideColumn(column);\n                    }\n                }\n                that.popup.close();\n                that.owner.bind([\n                    'columnHide',\n                    'columnShow'\n                ], that._updateColumnsMenuHandler);\n            },\n            _updateColumnsMenu: function (omitCheckState) {\n                var idx, length, current, checked, locked, that = this;\n                var fieldAttr = kendo.attr('field'), lockedAttr = kendo.attr('locked'), uidAttr = kendo.attr('uid'), columnIndexMap = {}, columnsCount = 0, colIdx = 0;\n                omitCheckState = omitCheckState === true;\n                var columnsInMenu = grep(leafColumns(this.owner.columns), function (col, idx) {\n                        var result = true, title = trim(col.title || '');\n                        if (col.menu === false || !col.field && !title.length) {\n                            result = false;\n                        }\n                        if (result) {\n                            columnIndexMap[idx] = columnsCount;\n                            columnsCount++;\n                        }\n                        return result;\n                    }), visibleFields = grep(this._ownerColumns(), function (field) {\n                        if (omitCheckState) {\n                            return that.wrapper.find('[role=\\'menuitemcheckbox\\'] [' + uidAttr + '=\\'' + field.uid + '\\']').prop('checked');\n                        }\n                        return !field.hidden && field.matchesMedia !== false;\n                    }), visibleDataFields = grep(visibleFields, function (field) {\n                        return field.originalField;\n                    }), lockedCount = grep(visibleDataFields, function (col) {\n                        return col.locked === true;\n                    }).length, nonLockedCount = grep(visibleDataFields, function (col) {\n                        return col.locked !== true;\n                    }).length, columnsNotInMenu = grep(this.owner.columns, function (col) {\n                        return col.menu === false;\n                    }), hiddenColumnsNotInMenu = grep(columnsNotInMenu, function (col) {\n                        return col.hidden;\n                    });\n                this.wrapper.find('[role=\\'menuitemcheckbox\\']').attr('aria-checked', false);\n                var checkboxes = this.wrapper.find('.k-columns-item input[' + fieldAttr + ']').prop('disabled', false);\n                if (!omitCheckState) {\n                    checkboxes.prop('checked', false);\n                }\n                var switchWidget;\n                for (idx = 0, length = checkboxes.length; idx < length; idx++) {\n                    current = checkboxes.eq(idx);\n                    locked = current.attr(lockedAttr) === 'true';\n                    checked = false;\n                    switchWidget = current.data('kendoSwitch');\n                    colIdx = columnsInMenu.map(function (col) {\n                        return col.headerAttributes.id;\n                    }).indexOf(current.attr(uidAttr));\n                    checked = omitCheckState ? current.prop('checked') : !columnsInMenu[colIdx].hidden && columnsInMenu[colIdx].matchesMedia !== false;\n                    current.prop('checked', checked);\n                    if (switchWidget) {\n                        switchWidget.enable(true);\n                        switchWidget.check(checked);\n                    }\n                    current.closest('[role=\\'menuitemcheckbox\\']').attr('aria-checked', checked);\n                    if (checked) {\n                        if (lockedCount == 1 && locked) {\n                            current.prop('disabled', true);\n                            if (switchWidget) {\n                                switchWidget.enable(false);\n                            }\n                        }\n                        if ((columnsNotInMenu.length === 0 || columnsNotInMenu.length === hiddenColumnsNotInMenu.length) && nonLockedCount == 1 && !locked) {\n                            current.prop('disabled', true);\n                            if (switchWidget) {\n                                switchWidget.enable(false);\n                            }\n                        }\n                    }\n                }\n            },\n            _updateColumnsLockedState: function () {\n                var idx, length, current, column;\n                var fieldAttr = kendo.attr('field');\n                var lockedAttr = kendo.attr('locked');\n                var columns = toHash(this._ownerColumns(), 'field');\n                var checkboxes = this.wrapper.find('.k-columns-item input[type=checkbox]');\n                for (idx = 0, length = checkboxes.length; idx < length; idx++) {\n                    current = checkboxes.eq(idx);\n                    column = columns[current.attr(fieldAttr)];\n                    if (column) {\n                        current.attr(lockedAttr, column.locked);\n                    }\n                }\n                this._updateColumnsMenu();\n            },\n            _filter: function () {\n                var that = this, widget = FILTERMENU, options = that.options;\n                if (options.filterable !== false) {\n                    if (options.filterable.multi) {\n                        widget = 'kendoFilterMultiCheck';\n                        if (options.filterable.dataSource) {\n                            options.filterable.checkSource = options.filterable.dataSource;\n                            delete options.filterable.dataSource;\n                        }\n                    }\n                    that.filterMenu = that.wrapper.find('.k-filterable')[widget](extend(true, {}, {\n                        appendToElement: true,\n                        dataSource: options.dataSource,\n                        values: options.values,\n                        field: that.field,\n                        title: that.title,\n                        change: function (e) {\n                            if (that.trigger('filtering', {\n                                    filter: e.filter,\n                                    field: e.field\n                                })) {\n                                e.preventDefault();\n                            }\n                        },\n                        componentType: that.options.componentType,\n                        cycleForm: !that._isModernComponentType()\n                    }, options.filterable)).data(widget);\n                    if (that._isMobile) {\n                        that.menu.bind(SELECT, function (e) {\n                            var item = $(e.item);\n                            if (item.hasClass('k-filter-item')) {\n                                that.pane.navigate(that.filterMenu.view, that.options.animations.left);\n                            }\n                        });\n                    }\n                }\n            },\n            _lockColumns: function () {\n                var that = this;\n                if (that._isModernComponentType()) {\n                    that.wrapper.on('click' + NS, '.k-lock, .k-unlock', proxy(that._lockableHandler, that));\n                } else {\n                    that.menu.bind(SELECT, proxy(that._lockableHandler, that));\n                }\n            },\n            _lockableHandler: function (e) {\n                var that = this;\n                var item = e.item ? $(e.item) : $(e.target);\n                if (item.hasClass('k-lock')) {\n                    that.owner.lockColumn(that.field);\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                } else if (item.hasClass('k-unlock')) {\n                    that.owner.unlockColumn(that.field);\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                }\n            },\n            _stickyColumns: function () {\n                var that = this;\n                if (that._isModernComponentType()) {\n                    that.wrapper.on('click' + NS, '.k-stick, .k-unstick', proxy(that._stickableHandler, that));\n                } else {\n                    that.menu.bind(SELECT, proxy(that._stickableHandler, that));\n                }\n            },\n            _stickableHandler: function (e) {\n                var that = this;\n                var item = e.item ? $(e.item) : $(e.target);\n                var field = that.field;\n                var columns = that.owner.columns;\n                var column = grep(columns, function (column) {\n                    return column.field == field || column.title == field;\n                })[0];\n                if (item.hasClass('k-stick')) {\n                    that.owner.stickColumn(that.field);\n                    that.trigger(STICK, { column: column });\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                } else if (item.hasClass('k-unstick')) {\n                    that.owner.unstickColumn(that.field);\n                    that.trigger(UNSTICK, { column: column });\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                }\n            },\n            _updateLockedColumns: function () {\n                var field = this.field;\n                var columns = this.owner.columns;\n                var column = grep(columns, function (column) {\n                    return column.field == field || column.title == field;\n                })[0];\n                if (!column) {\n                    return;\n                }\n                var locked = column.locked === true;\n                var length = grep(columns, function (column) {\n                    return !column.hidden && (column.locked && locked || !column.locked && !locked);\n                }).length;\n                var notLockable = column.lockable === false;\n                var lockItem = this.wrapper.find('.k-lock').removeClass('k-state-disabled');\n                var unlockItem = this.wrapper.find('.k-unlock').removeClass('k-state-disabled');\n                if (locked || length == 1 || notLockable) {\n                    lockItem.addClass('k-state-disabled');\n                }\n                if (!locked || length == 1 || notLockable) {\n                    unlockItem.addClass('k-state-disabled');\n                }\n                this._updateColumnsLockedState();\n            },\n            _updateStickyColumns: function () {\n                var field = this.field;\n                var columns = this.owner.columns;\n                var column = grep(columns, function (column) {\n                    return column.field == field || column.title == field;\n                })[0];\n                if (!column) {\n                    return;\n                }\n                var sticky = column.sticky === true;\n                var stickable = column.stickable === true;\n                var locked = column.locked === true;\n                var length = grep(columns, function (column) {\n                    return !column.hidden && (column.locked && locked || !column.locked && !locked);\n                }).length;\n                var stickItem = this.wrapper.find('.k-stick').removeClass('k-state-disabled');\n                var unstickItem = this.wrapper.find('.k-unstick').removeClass('k-state-disabled');\n                if (sticky || !stickable || locked && length === 1) {\n                    stickItem.addClass('k-state-disabled');\n                }\n                if (!sticky || !stickable) {\n                    unstickItem.addClass('k-state-disabled');\n                }\n            },\n            refresh: function () {\n                var that = this, sort = that.options.dataSource.sort() || [], descriptor, field = that.field, idx, length;\n                that.wrapper.find('.k-sort-asc, .k-sort-desc').removeClass(ACTIVE);\n                for (idx = 0, length = sort.length; idx < length; idx++) {\n                    descriptor = sort[idx];\n                    if (field == descriptor.field) {\n                        that.wrapper.find('.k-sort-' + descriptor.dir).addClass(ACTIVE);\n                    }\n                }\n                that.link[that._filterExist(that.dataSource.filter()) ? 'addClass' : 'removeClass']('k-state-active');\n            },\n            _filterExist: function (filters) {\n                var found = false;\n                var filter;\n                if (!filters) {\n                    return;\n                }\n                filters = filters.filters;\n                for (var idx = 0, length = filters.length; idx < length; idx++) {\n                    filter = filters[idx];\n                    if (filter.field == this.field) {\n                        found = true;\n                    } else if (filter.filters) {\n                        found = found || this._filterExist(filter);\n                    }\n                }\n                return found;\n            }\n        });\n        var modernTemplate = '#if(sortable){#' + '<div class=\"k-columnmenu-item-wrapper\">' + '<div>' + '<div class=\"k-columnmenu-item k-sort-asc\" tabindex=\"0\">' + '<span class=\"k-icon k-i-sort-asc-sm\"></span>${messages.sortAscending}' + '</div>' + '</div>' + '<div>' + '<div class=\"k-columnmenu-item k-sort-desc\" tabindex=\"0\">' + '<span class=\"k-icon k-i-sort-desc-sm\"></span>${messages.sortDescending}' + '</div>' + '</div>' + '</div>' + '#}#' + '#if(showColumns){#' + '<div class=\"k-columnmenu-item-wrapper\">' + '<div>' + '<div class=\"k-columnmenu-item-content k-columns-item\">' + '<div class=\"k-column-list-wrapper\">' + '<div class=\"k-column-list\" role=\"menu\">' + '#for (var idx = 0; idx < columns.length; idx++) {#' + '#if(columns[idx].groupHeader){#' + '<span class=\"k-column-menu-group-header\"><span class=\"k-column-menu-group-header-text\">#=columns[idx].title#</span></span>' + '#} else {#' + '<label class=\"k-column-list-item\" role=\"menuitemcheckbox\" aria-checked=\"false\" #=columns[idx].matchesMedia === false ? \"style=\\'display:none;\\'\" : \"\"#><input class=\"k-checkbox k-checkbox-md k-rounded-md\" type=\"checkbox\" title=\"#=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#\" data-#=ns#field=\"#=columns[idx].field.replace(/\"/g,\"&\\\\#34;\")#\" data-#=ns#index=\"#=columns[idx].index#\" data-#=ns#locked=\"#=columns[idx].locked#\" data-#=ns#uid=\"#=columns[idx].uid#\"/><span class=\"k-checkbox-label\"> #=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#</span></label>' + '#}#' + '#}#' + '</div>' + '</div>' + '<div class=\"k-columnmenu-actions\">' + '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" type=\"button\">${messages.reset}</button>' + '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\" type=\"button\">${messages.apply}</button>' + '</div>' + '</div>' + '</div>' + '</div>' + '#}#' + '#if(filterable){#' + '<div class=\"k-columnmenu-item-wrapper\">' + '<div class=\"k-columnmenu-item-content k-column-menu-filter\">' + '<div class=\"k-filterable\"></div>' + '</div>' + '</div>' + '#}#' + '#if(hasLockableColumns || hasStickableColumns){#' + '<div class=\"k-columnmenu-item-wrapper\">' + '<div class=\"k-column-menu-position\">' + '#if(hasLockableColumns){#' + '<div class=\"k-columnmenu-item k-lock\" tabindex=\"0\">' + '<span class=\"k-icon k-i-lock\"></span>${messages.lock}' + '</div>' + '<div class=\"k-columnmenu-item k-unlock\" tabindex=\"0\">' + '<span class=\"k-icon k-i-unlock\"></span>${messages.unlock}' + '</div>' + '#}#' + '#if(hasStickableColumns){#' + '<div class=\"k-columnmenu-item k-stick\" tabindex=\"0\">' + '<span class=\"k-icon k-i-stick\"></span>${messages.stick}' + '</div>' + '<div class=\"k-columnmenu-item k-unstick\" tabindex=\"0\">' + '<span class=\"k-icon k-i-unstick\"></span>${messages.unstick}' + '</div>' + '#}#' + '</div>' + '</div>' + '#}#';\n        var template = '<ul id=\"#=uid#\">' + '#if(sortable){#' + '<li class=\"k-item k-menu-item k-sort-asc\"><span class=\"k-link k-menu-link\"><span class=\"k-icon k-i-sort-asc-sm\"></span>${messages.sortAscending}</span></li>' + '<li class=\"k-item k-menu-item k-sort-desc\"><span class=\"k-link k-menu-link\"><span class=\"k-icon k-i-sort-desc-sm\"></span>${messages.sortDescending}</span></li>' + '#if(showColumns || filterable){#' + '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' + '#}#' + '#}#' + '#if(showColumns){#' + '<li class=\"k-item k-menu-item k-columns-item\" aria-haspopup=\"true\"><span class=\"k-link k-menu-link\"><span class=\"k-icon k-i-columns\"></span>${messages.columns}</span><ul>' + '#for (var idx = 0; idx < columns.length; idx++) {#' + '#if(columns[idx].groupHeader){#' + '<li class=\"k-column-menu-group-header\" #=omitWrapAttribute#=\"true\" ><span class=\"k-column-menu-group-header-text\">#=columns[idx].title#</span></li>' + '#} else {#' + '<li role=\"menuitemcheckbox\" aria-checked=\"false\" #=columns[idx].matchesMedia === false ? \"style=\\'display:none;\\'\" : \"\"#><input type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" title=\"#=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#\" data-#=ns#field=\"#=columns[idx].field.replace(/\"/g,\"&\\\\#34;\")#\" data-#=ns#index=\"#=columns[idx].index#\" data-#=ns#locked=\"#=columns[idx].locked#\" data-#=ns#uid=\"#=columns[idx].uid#\"/>#=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#</li>' + '#}#' + '#}#' + '</ul></li>' + '#if(filterable || hasLockableColumns || hasStickableColumns){#' + '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' + '#}#' + '#}#' + '#if(filterable){#' + '<li class=\"k-item k-menu-item k-filter-item\" aria-haspopup=\"true\"><span class=\"k-link k-menu-link\"><span class=\"k-icon k-i-filter\"></span>${messages.filter}</span><ul>' + '<li><div class=\"k-filterable\"></div></li>' + '</ul></li>' + '#if(hasLockableColumns || hasStickableColumns){#' + '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' + '#}#' + '#}#' + '#if(hasLockableColumns || hasStickableColumns){#' + '<li class=\"k-item k-menu-item k-position-item\" aria-haspopup=\"true\"><span class=\"k-link k-menu-link\"><span class=\"k-icon k-i-set-column-position\"></span>${messages.setColumnPosition}</span><ul>' + '#if(hasLockableColumns){#' + '<li class=\"k-item k-menu-item k-lock\"><span class=\"k-link k-menu-link\"><span class=\"k-icon k-i-lock\"></span>${messages.lock}</span></li>' + '<li class=\"k-item k-menu-item k-unlock\"><span class=\"k-link k-menu-link\"><span class=\"k-icon k-i-unlock\"></span>${messages.unlock}</span></li>' + '#if(hasStickableColumns){#' + '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' + '#}#' + '#}#' + '#if(hasStickableColumns){#' + '<li class=\"k-item k-menu-item k-stick\"><span class=\"k-link k-menu-link\"><span class=\"k-icon k-i-stick\"></span>${messages.stick}</span></li>' + '<li class=\"k-item k-menu-item k-unstick\"><span class=\"k-link k-menu-link\"><span class=\"k-icon k-i-unstick\"></span>${messages.unstick}</span></li>' + '#}#' + '</ul></li>' + '#}#' + '</ul>';\n        var mobileTemplate = '<div data-#=ns#role=\"view\" class=\"k-grid-column-menu\">' + '<div data-#=ns#role=\"header\" class=\"k-header\">' + '<a href=\"\\\\#\" class=\"k-header-cancel k-link\" title=\"#=messages.cancel#\" ' + 'aria-label=\"#=messages.cancel#\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' + '${messages.settings}' + '<a href=\"\\\\#\" class=\"k-header-done k-link\" title=\"#=messages.done#\" ' + 'aria-label=\"#=messages.done#\"><span class=\"k-icon k-i-check\"></span></a>' + '</div>' + '<div class=\"k-column-menu\">' + '<ul class=\"k-reset\">' + '<li>' + '<span class=\"k-list-title\">#=messages.column#: ${title}</span>' + '<ul class=\"k-listgroup k-listgroup-flush k-mb-4\">' + '#if(sortable){#' + '<li id=\"#=kendo.guid()#\" class=\"k-item k-listgroup-item k-sort-asc\"><span class=\"k-link\"><span class=\"k-icon k-i-sort-asc-sm\"></span><span class=\"k-item-title\">${messages.sortAscending}</span></span></li>' + '<li id=\"#=kendo.guid()#\" class=\"k-item k-listgroup-item k-sort-desc\"><span class=\"k-link\"><span class=\"k-icon k-i-sort-desc-sm\"></span><span class=\"k-item-title\">${messages.sortDescending}</span></span></li>' + '#}#' + '#if(hasLockableColumns){#' + '<li id=\"#=kendo.guid()#\" class=\"k-item k-listgroup-item k-lock\"><span class=\"k-link\"><span class=\"k-icon k-i-lock\"></span><span class=\"k-item-title\">${messages.lock}</span></span></li>' + '<li id=\"#=kendo.guid()#\" class=\"k-item k-listgroup-item k-unlock\"><span class=\"k-link\"><span class=\"k-icon k-i-unlock\"></span><span class=\"k-item-title\">${messages.unlock}</span></span></li>' + '#}#' + '#if(hasStickableColumns){#' + '<li id=\"#=kendo.guid()#\" class=\"k-item k-listgroup-item k-stick\"><span class=\"k-link\"><span class=\"k-icon k-i-stick\"></span><span class=\"k-item-title\">${messages.stick}</span></span></li>' + '<li id=\"#=kendo.guid()#\" class=\"k-item k-listgroup-item k-unstick\"><span class=\"k-link\"><span class=\"k-icon k-i-unstick\"></span><span class=\"k-item-title\">${messages.unstick}</span></span></li>' + '#}#' + '#if(filterable){#' + '<li id=\"#=kendo.guid()#\" class=\"k-item k-listgroup-item k-filter-item\">' + '<span class=\"k-link k-filterable\">' + '<span class=\"k-icon k-i-filter\"></span>' + '<span class=\"k-item-title\">${messages.filter}</span>' + '<span class=\"k-select\"><span class=\"k-icon k-i-arrow-chevron-right\"></span></span>' + '</span>' + '</li>' + '#}#' + '</ul>' + '</li>' + '#if(showColumns){#' + '<li class=\"k-columns-item\"><span class=\"k-list-title\">${messages.columnVisibility}</span>' + '#if(hasGroups){#' + '#for (var i = 0; i < groups.length; i++) {#' + '<span class=\"k-list-group-header k-pb-1\">#:groups[i].title#</span>' + '<ul class=\"k-listgroup k-listgroup-flush k-mb-4\">' + '#for (var idx = 0; idx < groups[i].columns.length; idx++) {#' + '<li id=\"#=kendo.guid()#\" class=\"k-item k-listgroup-item\">' + '<span class=\"k-listgroup-form-row\">' + '<span class=\"k-listgroup-form-field-label k-item-title\">' + '#=groups[i].columns[idx].title#' + '</span>' + '<span class=\"k-listgroup-form-field-wrapper\">' + '<input type=\"checkbox\" title=\"#=groups[i].columns[idx].title#\" ' + ' data-#=ns#field=\"#=groups[i].columns[idx].field.replace(/\"/g,\"&\\\\#34;\")#\"' + ' data-#=ns#index=\"#=groups[i].columns[idx].index#\"' + ' data-#=ns#uid=\"#=groups[i].columns[idx].uid#\"' + ' data-#=ns#locked=\"#=groups[i].columns[idx].locked#\" />' + '</span>' + '</span>' + '</li>' + '#}#' + '</ul>' + '#}#' + '#} else {#' + '<ul class=\"k-listgroup k-listgroup-flush k-mb-4\">' + '#for (var idx = 0; idx < columns.length; idx++) {#' + '<li id=\"#=kendo.guid()#\" class=\"k-item k-listgroup-item\">' + '<span class=\"k-listgroup-form-row\">' + '<span class=\"k-listgroup-form-field-label k-item-title\">' + '#=columns[idx].title#' + '</span>' + '<span class=\"k-listgroup-form-field-wrapper\">' + '<input type=\"checkbox\" title=\"#=columns[idx].title#\" ' + ' data-#=ns#field=\"#=columns[idx].field.replace(/\"/g,\"&\\\\#34;\")#\"' + ' data-#=ns#index=\"#=columns[idx].index#\"' + ' data-#=ns#uid=\"#=columns[idx].uid#\"' + ' data-#=ns#locked=\"#=columns[idx].locked#\" />' + '</span>' + '</span>' + '</li>' + '#}#' + '</ul>' + '#}#' + '</li>' + '#}#' + '<li class=\"k-item k-clear-wrap\">' + '<ul class=\"k-listgroup k-listgroup-flush\">' + '<li class=\"k-listgroup-item\">' + '<span class=\"k-link k-label k-clear\" title=\"#=messages.clear#\" aria-label=\"#=messages.clear#\">' + '#=messages.clear#' + '</span>' + '</li>' + '</ul>' + '</li>' + '</ul>' + '</div>' + '</div>';\n        var MobileMenu = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                that._createCheckBoxes();\n                that.element.on('click' + NS, 'li.k-item:not(.k-separator):not(.k-state-disabled):not(:has(.k-switch))', '_click');\n            },\n            events: [SELECT],\n            _click: function (e) {\n                var that = this;\n                if (!$(e.target).is('[type=checkbox]')) {\n                    e.preventDefault();\n                }\n                if ($(e.target).hasClass('k-clear')) {\n                    that._cancelChanges(true);\n                    return;\n                }\n                if ($(e.target).hasClass('k-filterable')) {\n                    that._cancelChanges(true);\n                    that.trigger(SELECT, { item: e.currentTarget });\n                    return;\n                }\n                that._updateSelectedItems(e.currentTarget);\n            },\n            _updateSelectedItems: function (el) {\n                var that = this;\n                var item = $(el);\n                var state = that.options.columnMenu.view.state || { columns: {} };\n                var id = item.prop('id');\n                if (item.hasClass('k-filter-item')) {\n                    return;\n                }\n                if (state[id]) {\n                    state[id] = false;\n                } else {\n                    state[id] = true;\n                }\n                if (item.hasClass('k-sort-asc') || item.hasClass('k-sort-desc')) {\n                    var dir;\n                    var otherItem;\n                    var otherItemId;\n                    if (item.hasClass('k-sort-asc')) {\n                        dir = 'asc';\n                        otherItem = that.element.find('.k-sort-desc');\n                    } else {\n                        dir = 'desc';\n                        otherItem = that.element.find('.k-sort-asc');\n                    }\n                    otherItemId = otherItem.prop('id');\n                    if (dir === state.initialSort && !item.hasClass('k-state-selected')) {\n                        state[id] = false;\n                    }\n                    if (state[otherItemId]) {\n                        state[otherItemId] = false;\n                    }\n                    otherItem.removeClass(ACTIVE);\n                }\n                if (item.hasClass(ACTIVE)) {\n                    item.removeClass(ACTIVE);\n                } else {\n                    item.addClass(ACTIVE);\n                }\n            },\n            _cancelChanges: function (force) {\n                var that = this;\n                var menu = that.options.columnMenu;\n                var view = menu.view;\n                var state = view.state || { columns: {} };\n                var columns = state.columns;\n                that.element.find('.' + ACTIVE).removeClass(ACTIVE);\n                menu.refresh();\n                if (force) {\n                    var selectedItems = [];\n                    for (var key in columns) {\n                        if (columns.hasOwnProperty(key)) {\n                            if (columns[key] === true) {\n                                var item = view.element.find('#' + key);\n                                selectedItems.push(item[0]);\n                            }\n                        }\n                    }\n                    for (var i = selectedItems.length - 1; i >= 0; i--) {\n                        that.trigger(SELECT, { item: selectedItems[i] });\n                    }\n                    if (menu.options.hasLockableColumns) {\n                        menu._updateLockedColumns();\n                    }\n                    if (menu.options.hasStickableColumns) {\n                        menu._updateStickyColumns();\n                    }\n                }\n                that.options.columnMenu.view.state = { columns: {} };\n            },\n            _applyChanges: function () {\n                var that = this;\n                var view = that.options.columnMenu.view;\n                var state = view.state || { columns: {} };\n                for (var key in state) {\n                    if (state.hasOwnProperty(key)) {\n                        if (key !== 'initialSort' && key !== 'columns' && state[key] === true) {\n                            var item = view.element.find('#' + key);\n                            if (item.hasClass(ACTIVE)) {\n                                item.removeClass(ACTIVE);\n                            } else {\n                                item.addClass(ACTIVE);\n                            }\n                            that.trigger(SELECT, { item: item[0] });\n                        }\n                    }\n                }\n            },\n            _createCheckBoxes: function () {\n                var that = this;\n                that.element.find('.k-columns-item').find('[type=\\'checkbox\\']').kendoSwitch({\n                    messages: {\n                        checked: '',\n                        unchecked: ''\n                    },\n                    change: function (e) {\n                        var item = e.sender.element.closest('.k-item');\n                        var state = that.options.columnMenu.view.state || { columns: {} };\n                        var id = item.prop('id');\n                        if (state.columns[id]) {\n                            state.columns[id] = false;\n                        } else {\n                            state.columns[id] = true;\n                        }\n                        that.trigger(SELECT, { item: item });\n                    }\n                });\n            },\n            _destroyCheckBoxes: function () {\n                var that = this;\n                var elements = that.element.find('.k-columns-item').find('[type=\\'checkbox\\']');\n                var switchWidget;\n                for (var i = 0; i < elements.length; i++) {\n                    switchWidget = elements.eq(i).data('kendoSwitch');\n                    if (switchWidget) {\n                        switchWidget.destroy();\n                    }\n                }\n            },\n            close: function () {\n                this.options.pane.navigate('');\n            },\n            destroy: function () {\n                var that = this;\n                Widget.fn.destroy.call(that);\n                that.element.off(NS);\n                that._destroyCheckBoxes();\n            }\n        });\n        ui.plugin(ColumnMenu);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}