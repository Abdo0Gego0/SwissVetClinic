/** 
 * Kendo UI v2022.1.119 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(t,define){define("orgchart/data.min",["kendo.data.min","kendo.treelist.min"],t)}(function(){return function(t,e){var i,a=t.extend,n=t.proxy,r=kendo.data,s=r.Query,o=r.DataSource,d=r.TreeListDataSource,l=r.Model,c=r.ObservableArray,h=l.define({id:"id",parentId:"parentId",fields:{id:{type:"number",editable:!1},parentId:{type:"number",nullable:!0},name:{type:"string",validation:{required:!0}},title:{type:"string"},avatar:{type:"string"}},init:function(t){l.fn.init.call(this,t),this._loaded=!1,this.parentIdField||(this.parentIdField="parentId"),this.nameField||(this.nameField="name"),this.titleField||(this.titleField="title"),this.avatarField||(this.avatarField="avatar"),this.parentId=this.get(this.parentIdField),this.name=this.get(this.nameField),this.title=this.get(this.titleField),this.avatar=this.get(this.avatarField)},accept:function(t){l.fn.accept.call(this,t),this.parentId=this.get(this.parentIdField),this.name=this.get(this.nameField),this.title=this.get(this.titleField),this.avatar=this.get(this.avatarField)},set:function(t,e,i){"parentId"==t&&"parentId"!=this.nameField&&(this[this.parentIdField]=e),"name"==t&&"name"!=this.nameField&&(this[this.nameField]=e),"title"==t&&"title"!=this.titleField&&(this[this.titleField]=e),"avatar"==t&&"avatar"!=this.avatarField&&(this[this.avatarField]=e),l.fn.set.call(this,t,e,i),t==this.parentIdField&&(this.parentId=this.get(this.parentIdField)),t==this.nameField&&(this.name=this.get(this.nameField)),t==this.titleField&&(this.title=this.get(this.titleField)),t==this.avatarField&&(this.avatar=this.get(this.avatarField))},loaded:function(t){return t===e?this._loaded:(this._loaded=t,e)},shouldSerialize:function(t){return l.fn.shouldSerialize.call(this,t)&&"_loaded"!==t&&"_error"!=t&&"_edit"!=t&&!("parentId"!==this.parentIdField&&"parentId"===t)}});h.parentIdField="parentId",h.nameField="name",h.titleField="title",h.avatarField="avatar",h.define=function(t,i){var a,n,r,s,o;return i===e&&(i=t,t=h),a=i.parentId||"parentId",n=i.name||"name",r=i.title||"title",s=i.avatar||"avatar",i.parentIdField=a,i.nameField=n,i.titleField=r,i.avatarField=s,o=l.define(t,i),a&&(o.parentIdField=a),n&&(o.nameField=n),r&&(o.titleField=r),s&&(o.avatarField=s),o},i=d.extend({init:function(t){d.fn.init.call(this,a(!0,{},{schema:{modelBase:h,model:h}},t))},groupedItemsTree:function(t){var e=this._childrenMap(this.view()),i=this._defaultParentId(),a=e[i]||[],n=new s(a).group({field:t}).toArray();return this._innerGroupedItemsTree(t,n,e)},itemChildren:function(t,i){var a,n,r={field:"parentId",operator:"eq",value:null},o=this._sort&&this._sort.length?this._sort:{};if(n=i?this.view():this.data(),t){if(a=t.get("id"),a===e||null===a||""===a)return[];r.value=a}return n=new s(n).filter(r).sort(o).toArray()},itemsTree:function(t,i){var n,r,o,d=[],l=this.itemChildren(t,!0);for(o=0;o<l.length;o++)n=l[o],n.get("expanded")&&(r=this.itemsTree(n,i),n=a(!0,{},n),n.children=r),n=a(!0,{},n),d.push(n);return null!==i&&i!==e&&(d=new s(d).group({field:i}).toArray()),d},prospectParents:function(t,e){var i,a,n,r=[],s=this.itemChildren(e,!1);for(n=0;n<s.length;n++)i=s[n],i.get("id")!==t.get("id")&&(r.push(i),i.get("hasChildren")&&(a=this.prospectParents(t,i),r=r.concat(a)));return r},read:function(t){return o.fn.read.call(this,t).then(n(this._loadExpanded,this,t))},toggleChildren:function(i,a){var n=t.Deferred().resolve().promise(),r=i.loaded();return i._error&&(i.expanded=!1,i._error=e),e===a&&(a=!i.expanded),i.expanded=a,r||(n=this.load(i)),n},_innerGroupedItemsTree:function(t,e,i){var a,n,r,o,d,l,c,h;for(n=0;n<e.length;n++){for(a=e[n],l=[],h=!1,r=0;r<a.items.length;r++)c=a.items[r],!a.hasChildren&&c.hasChildren&&(a.hasChildren=!0),c.expanded&&(a.expanded=!0),o=a.items[r].get("id"),l=l.concat(i[o]);a.expanded&&(d=new s(l).group({field:t}).toArray(),a.children=this._innerGroupedItemsTree(t,d,i)),!a.hasChildren&&l.length>0&&(a.hasChildren=!0)}return e},_loadExpanded:function(t){var i,a,n;if(t)for(i=this._byParentId(null!==t.id&&t.id!==e?t.id:this._defaultParentId()),a=0;a<i.length;a++)n=i[a],n.expanded&&!n.loaded()&&this.toggleChildren(n,!0)}}),i.create=function(e){if(t.isArray(e)?e={data:e}:e instanceof c&&(e={data:e.toJSON()}),!(e instanceof i)&&e instanceof o)throw Error("Incorrect DataSource type. Only OrgChartDataSource instances are supported");return e instanceof i?e:new i(e)},a(!0,kendo.data,{OrgChartModel:h,OrgChartDataSource:i})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(t,define){define("orgchart/view.min",["kendo.core.min"],t)}(function(){return function(t,e){var i=window.kendo,a=i.keys,n=t.extend,r=t.proxy,s=".kendoOrgChartView",o="blur",d="click",l="collapse",c="expand",h="focus",u="keydown",p="menu",g="select",f=".",m=" ",v=",",_="#",k="string",I="tabindex",b="id",C="uid",y="px",w="plus",x="minus",S="aria-owns",F="aria-selected",T={wrapper:"k-orgchart",container:"k-orgchart-container",line:"k-orgchart-line",lineVertical:"k-orgchart-line-v",lineHorizontal:"k-orgchart-line-h",lineVerticalTop:"k-orgchart-line-v-top",group:"k-orgchart-group",groupVertical:"k-orgchart-group-v",groupHorizontal:"k-orgchart-group-h",nodesGroup:"k-orgchart-node-group",nodesGroupContainer:"k-orgchart-node-group-container",nodeContainer:"k-orgchart-node-container",node:"k-orgchart-node",card:"k-orgchart-card",cardMenu:"k-orgchart-card-menu",button:"k-orgchart-button",focused:"k-state-focus",plusIcon:"k-i-plus",menuItem:"k-item",avatarPreview:"k-orgchart-avatar-preview",update:"k-orgchart-update",cancel:"k-orgchart-cancel",vstack:"k-vstack",hstack:"k-hstack"},E='<div role="tree" aria-orientation="horizontal" aria-label="#: label #" class="k-orgchart-group k-orgchart-level-1 k-pos-absolute k-hstack k-justify-content-center"></div>',G='<div role="group" id="#: guid #" class="k-orgchart-level-#: level # k-orgchart-group k-pos-absolute k-justify-content-around"></div>',H='<div role="treeitem" # if(data.hasChildren && data.guid) { #aria-owns="#: guid #" # if(!!data.expanded) { #aria-expanded="true" # } else { #aria-expanded="false" # } ## } #aria-keyshortcuts="Enter" aria-level="#: level #" aria-selected="false" class="k-orgchart-node-group-container">',D='<div class="k-orgchart-node-container k-justify-content-around" style="width:100%"></div>',P='<div role="group" class="k-orgchart-node-container k-justify-content-around k-hstack" style="width:100%"></div>',L='<div class="k-orgchart-node k-vstack k-align-items-center"></div>',V='<button aria-label="#: label #" tabindex="-1" class="k-orgchart-button k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button"><span class="k-button-icon k-icon k-i-#: buttonSign #"></span></button>',O='<div class="k-card-body k-hstack" style="border-color:#: color #"># if(!!data.avatar) { #<div class="k-avatar k-avatar-solid-primary k-avatar-solid k-avatar-lg k-rounded-full"><span class="k-avatar-image"><img alt="#: name #" src="#: avatar #"></span></div># } #<div class="k-vstack k-card-title-wrap"><div class="k-card-title k-text-ellipsis">#: name #</div># if(data.title) { #<span class="k-spacer"></span><div class="k-card-subtitle k-text-ellipsis">#: title #</div># } #</div># if(editable) { #<span class="k-spacer"></span><div class="k-card-body-actions"><button class="k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-orgchart-card-menu" role="button" aria-label="#: menuLabel #" tabindex="-1"><span class="k-button-icon k-icon k-i-more-vertical"></span></button></div># } #</div>',W='<div role="treeitem" data-uid="#: uid #" # if(data.hasChildren && data.guid) { #aria-owns="#: guid #" # if(!!data.expanded) { #aria-expanded="true" # } else { #aria-expanded="false" # } ## } #class="k-orgchart-card k-card # if(!!data.cssClass) { ##: data.cssClass ## } #" aria-keyshortcuts="Enter" aria-level="#: level #" aria-selected="false"></div>',M='<div role="treeitem" data-uid="#: uid #" aria-level="#: level #" aria-selected="false" aria-keyshortcuts="Enter" class="k-orgchart-card k-card # if(!!data.cssClass) { ##: data.cssClass ## } #"></div>',j=i.Observable.extend({init:function(t,e){this.element=t,this.options=e||{},i.Observable.fn.init.call(this),this._attachEvents()},events:[l,c,g,p],destroy:function(){i.ui.Widget.fn.destroy.call(this),this.element.off(s)},collapse:function(){return!1},expand:function(){return!1},jqueryGroupElement:function(t){if(t){var e=this._processItem(t);return e.hasClass(T.nodesGroupContainer)||(e=e.closest(f+T.nodesGroupContainer)),e&&e.length?e:null}},jqueryItemElement:function(t){if(t){var e=this._processItem(t);return e.hasClass(T.card)||(e=e.closest(f+T.card)),e&&e.length?e:null}},refresh:function(){this._cacheFocused(),this._clearContent(),this._generateItemsTree(),this._calculateLevels(),this._render()},select:function(t){var e=this._getToSelect(t),i=this.element.find("[tabindex=0]");e&&(i.removeAttr(I).removeClass(T.focused).attr(F,!1),e.attr(I,"0").addClass(T.focused).trigger("focus").attr(F,!0))},_attachEvents:function(){var t=f+T.card+v+f+T.nodesGroupContainer;this.element.on(u+s,t,r(this._onKeyDown,this)).on(d+s,t,r(this._onSelect,this)).on(d+s,f+T.button,r(this._onButtonClick,this)).on(h+s,t,r(this._onFocus,this)).on(o+s,f+T.focused,r(this._onBlur,this))},_cacheFocused:function(){var t=this.element.find("[tabindex='0']"),e=this._dataItems(t);t.length&&e&&e.length&&!this._idTabIndex&&(this._idTabIndex=e[0].get(b),this._shouldRestoreSelection=!!t.hasClass(T.focused))},_calculateDimensions:function(){var t=this.element.find(f+this._selector).first();this._buttonHeight||(this._buttonHeight=this.element.find(f+T.button).first().outerHeight()),this._spacing||(this._spacing=this.element.find(f+T.lineVertical).first().outerHeight()),this._itemWidth||(this._itemWidth=this._calculateItemWidth()),this._itemHeight||(this._itemHeight=t.outerHeight(!0))},_calculateItemWidth:function(){return!1},_calculateLevel:function(){return!1},_calculateLevels:function(){return!1},_clearContent:function(){this.element.empty()},_dataItem:function(t){var e=this.jqueryItemElement(t);if(e&&e.data(C))return this.dataSource.getByUid(e.data(C))},_dataItems:function(){return!1},_generateItemsTree:function(){return!1},_getToSelect:function(){return!1},_groupIsVertical:function(){return!1},_keyCollapse:function(){return!1},_keyExpand:function(){return!1},_keyNext:function(){return!1},_keyPrev:function(){return!1},_keyEnter:function(){return!1},_keyEscape:function(){return!1},_keyEnd:function(){var t=this.element.find(f+T.card).last(),e=this.element.find("[tabindex=0]");e[0]!==t[0]&&this.trigger(g,{item:t,dataItems:[this._dataItem(t)]})},_keyHome:function(){var t=this.element.find(f+T.card).first(),e=this.element.find("[tabindex=0]");e[0]!==t[0]&&this.trigger(g,{item:t,dataItems:[this._dataItem(t)]})},_onBlur:function(){this.element.find(f+T.focused).removeClass(T.focused)},_onKeyDown:function(t){var e,n=t.keyCode,r=this.element.find("[tabindex=0]"),s=i.support.isRtl(this.element),o=s?[a.LEFT]:[a.RIGHT],d=s?[a.RIGHT]:[a.LEFT],l=a.DOWN,c=a.UP;r&&(e=this._groupIsVertical(r),e&&(o.push(a.DOWN),d.push(a.UP)),n===a.HOME?this._keyHome():n===a.END?this._keyEnd():o.indexOf(n)>-1?(t.preventDefault(),t.stopPropagation(),this._keyNext(r)):d.indexOf(n)>-1?(t.preventDefault(),t.stopPropagation(),this._keyPrev(r)):n===l?(t.preventDefault(),t.stopPropagation(),this._keyExpand(r)):n===c?(t.preventDefault(),t.stopPropagation(),this._keyCollapse(r)):n===a.ENTER?this._keyEnter(r):n===a.ESC&&this._keyEscape(r))},_onButtonClick:function(e){var i,a=this,n=t(e.currentTarget),s=n.find(f+T.plusIcon).length>0,o=n.siblings(f+this._selector),d=this._dataItems(o);if(s){if(a.trigger(c,{item:o,dataItems:d}))return}else if(a.trigger(l,{item:o,dataItems:d}))return;for(i=0;i<d.length;i++)a.dataSource.toggleChildren(d[i],s).then(r(this.refresh,this))},_onFocus:function(){return!1},_onSelect:function(){return!1},_orientation:function(){return!1},_processItem:function(e){var a;return t.type(e)===k?a=this.element.find(e):i.isElement(e)?a=t(e):e instanceof jQuery&&(a=e),a},_render:function(){var e,a=this._itemsTree,n=t(i.template(E)({label:this.options.messages.label})),r=this.element,s=this._total,o=r.closest(f+T.wrapper).css("padding-left");r.append(n),this._renderGroup(n,a,1,this._total,0),e=s*this._itemWidth+(s-1)*this._spacing,n.width(e),r.width(e+ +o.split(y)[0]),this._setHeight(),this._restoreSelection()},_renderNode:function(e,a,r,s,o){var d,l,c=this.options.messages,h=this.options.cardsColors||i.getSeriesColors(),u=t(L);return l=t(e(n(!0,{},r,{menuLabel:c.menuLabel,level:s,guid:o,editable:!!this.options.editable,color:h[s-1]||h[0]}))),r.attributes&&l.attr(JSON.parse(JSON.stringify(r.attributes))),d=t(a(n(!0,{},r,{menuLabel:c.menuLabel,level:s,guid:o,editable:!!this.options.editable,color:h[s-1]||h[0]}))),l.append(d),u.append(l),u},_renderGroup:function(){return!1},_restoreSelection:function(){var t,e;this._idTabIndex?(t=this.dataSource.get(this._idTabIndex),e=t?this._getToFocus(t):this.element.find(f+this._selector).first(),e.attr(I,"0"),this._idTabIndex=null):(e=this.element.find(f+this._selector).first(),e.attr(I,"0")),this._shouldRestoreSelection&&(this._shouldRestoreSelection=!1,this._preventTriggerSelect=!0,e.trigger("focus"),e.addClass(T.focused))},_setHeight:function(){var e,i=this._selector,a=this.element.find(f+T.button+v+f+i),n=Number.MAX_VALUE,r=0;this._calculateDimensions(),e=this._buttonHeight,this.element.find(f+T.lineVerticalTop).height(this._spacing+e/2),a.each(function(e,i){var a=t(i).offset().top,s=a+t(i).outerHeight(!0);a<n&&(n=a),s>r&&(r=s)}),this.element.height(r-n)}}),q=j.extend({init:function(t,e){j.fn.init.call(this,t,e),this._selector=T.card},collapse:function(t){var e=this.jqueryItemElement(t);e&&this.dataSource.toggleChildren(this._dataItem(e),!1).then(r(this.refresh,this))},expand:function(t){var e=this.jqueryItemElement(t);e&&this.dataSource.toggleChildren(this._dataItem(e),!0).then(r(this.refresh,this))},_calculateItemWidth:function(){return this.element.find(f+this._selector).first().outerWidth(!0)},_calculateLevel:function(t,e){var i,a,n,r=t.length,s=this._maxColumnsPerLevel,o=!1,d=!1;for((!s[e]||s[e]<r)&&(i=s[e],d=!0,s[e]=r),a=0;a<r;a++)n=t[a],n.hasChildren&&(o=!0,n.expanded&&this._calculateLevel(n.children,e+1));!o&&d&&e>0&&(d=!1,s[e]=i||1)},_calculateLevels:function(){var t,e=this._itemsTree,i=this._maxColumnsPerLevel=[],a=1;for(this._calculateLevel(e,0),t=0;t<i.length;t++)a*=i[t];this._total=a},_dataItems:function(t){var e=this.dataSource.getByUid(t.data(C));return e?[e]:null},_generateItemsTree:function(){this._itemsTree=this.dataSource.itemsTree()},_getToFocus:function(t){return this.element.find("[data-uid='"+t.get(C)+"']")},_getToSelect:function(t){return this.jqueryItemElement(t)},_groupIsVertical:function(t){var e=t.closest(f+T.group);return e.hasClass(T.groupVertical)},_keyCollapse:function(t){var e,i,a=this._dataItem(t);a.expanded?this.trigger(l,{item:t,dataItems:[a]})||this.collapse(t):a.parentId&&(e=this.dataSource.get(a.parentId).get(C),i=this.element.find("[data-uid='"+e+"']"),this.trigger(g,{item:i,dataItems:[this._dataItem(i)]}))},_keyEnter:function(t){t.find(f+T.cardMenu).length>0&&this.trigger(p,t)},_keyExpand:function(t){var e,i=this._dataItem(t),a=this.element.find(_+t.attr(S));i.hasChildren&&(i.expanded?(e=a.find(f+this._selector).first(),this.trigger(g,{item:e,dataItems:[this._dataItem(e)]})):this.trigger(c,{item:t,dataItems:[i]})||this.expand(t))},_keyNext:function(t){var e=this._dataItem(t),i=t.parent().next(f+T.node).find(f+T.card),a=this.element.find(_+t.attr(S));!i.length&&e.hasChildren&&e.expanded&&(i=a.find(f+T.card).first()),0===i.length||i.hasClass(T.focused)||this.trigger(g,{item:i,dataItems:[this._dataItem(i)]})},_keyPrev:function(t){var e,i=this._dataItem(t),a=t.parent().prev(f+T.node).find(f+T.card);!a.length&&i.parentId&&(e=this.dataSource.get(i.parentId).get(C),a=this.element.find("[data-uid='"+e+"']")),0===a.length||a.hasClass(T.focused)||this.trigger(g,{item:a,dataItems:[this._dataItem(a)]})},_onFocus:function(i){var a=t(i.currentTarget),n=t(i.target);if(this._preventTriggerSelect)return i.stopPropagation(),this._preventTriggerSelect=!1,e;if(n.hasClass(T.cardMenu)){if(n.closest("[tabindex='0']").length>0)return i.stopPropagation(),e;this._preventTriggerSelect=!0}a.hasClass(T.card)||(a=a.closest(f+T.card)),a.hasClass(T.focused)||this.trigger(g,{item:a,dataItems:[this._dataItem(a)]})},_onSelect:function(e){var i=t(e.currentTarget),a=i.hasClass(T.card)?i:i.closest(f+T.card),n=t(e.target).hasClass(T.cardMenu)?t(e.target):t(e.target).closest(f+T.cardMenu);n.length>0||i.hasClass(T.focused)||this.trigger(g,{item:a,dataItems:[this._dataItem(a)]})},_orientation:function(e,i,a){var n=t("<div>").addClass(T.line+m+T.lineVertical);a&&i>1?(e.addClass(T.groupVertical+m+T.vstack),e.find(f+T.nodeContainer).addClass(T.vstack),0===e.find(f+T.button).length||1===e.find(f+T.card).length?(e.find(f+T.card).before(n.clone()),e.find(f+T.node).first().find(f+T.lineVertical).addClass(T.lineVerticalTop)):i>1&&e.find(f+T.card).first().before(n.clone())):(e.addClass(T.groupHorizontal+m+T.hstack),e.find(f+T.nodeContainer).addClass(T.hstack),i>1&&e.find(f+T.card).before(n.clone().addClass(T.lineVerticalTop)))},_renderGroup:function(e,i,a,n,r){var s,o=!0;s=t(D),e.append(s),o=this._renderInner(s,i,a,n,r),this._orientation(e,a,o)},_renderInner:function(e,a,n,r,s){var o,d,l,c,h,u,p,g,v,_=i.template(V),k=i.template(W),I=r/a.length,b=!0,C=t("<div>").addClass(T.line+m+T.lineVertical),S=t("<div>").addClass(T.line+m+T.lineHorizontal),F=this.options.messages;for(v=this.options.template?"function"==typeof this.options.template?this.options.template:i.template(this.options.template):i.template(O),o=0;o<a.length;o++)d=a[o],l=i.guid(),c=this._renderNode(k,v,d,n,l),d.hasChildren&&(c.append(C.clone()),h=t(_({buttonSign:d.expanded?x:w,label:d.expanded?F.collapse:F.expand})),c.append(h)),e.append(c),this._calculateDimensions(),p=this._itemWidth,g=this._spacing,d.hasChildren&&(b=!1,d.expanded&&(u=this._renderInnerGroup(d,I,s,o,n,l))),u&&u.hasClass(T.groupHorizontal)&&d.expanded&&d.children&&d.children.length>1&&h.after(S.clone().css({width:(I-I/d.children.length)*(p+g)+y,"margin-top":this._buttonHeight/-2+y}));return I>1&&!b&&e.find(f+T.node).width((I-1)*(g+p)),b},_renderInnerGroup:function(e,a,n,r,s,o){var d,l=this._itemWidth,c=this._spacing,h=a*l+(a-1)*c,u=r*a*l+n,p=i.template(G),g=i.support.isRtl(this.element)?"right":"left",f=s*(this._itemHeight+this._buttonHeight+c)+c*(s-1)-this._buttonHeight/2;return r>0&&(u+=r*a*c),d=t(p({guid:o,level:s+1})),d.css({width:h+y,top:f+y}),d.css(g,u+y),this.element.append(d),this._renderGroup(d,e.children,s+1,a,u),d}}),N=j.extend({init:function(t,e){j.fn.init.call(this,t,e),this._selector=T.nodesGroupContainer},collapse:function(t){var e,i,a=this.jqueryGroupElement(t);if(a)for(e=this._dataItems(a),i=0;i<e.length;i++)this.dataSource.toggleChildren(e[i],!1).then(r(this.refresh,this))},expand:function(t){var e,i,a=this.jqueryGroupElement(t);if(a)for(e=this._dataItems(a),i=0;i<e.length;i++)this.dataSource.toggleChildren(e[i],!0).then(r(this.refresh,this))},_dataItems:function(t){var e,i,a,n=this.dataSource,r=[];return t.hasClass(T.card)?(i=n.getByUid(t.data(C)),i&&r.push(i)):t.hasClass(T.nodesGroupContainer)&&(this._groupFocused=!0,e=t.find(f+T.card),e.each(function(t,e){a=n.getByUid(e.getAttribute("data-uid")),a&&r.push(a)})),r},_calculateItemWidth:function(){var t=this.element.find(f+this._selector).first(),e=this.element.find(f+T.card).first().outerWidth(!0),i=+t.css("padding-left").split(y)[0],a=+t.css("border-left").split(y)[0];return e+2*i+2*a},_calculateLevel:function(t,e){var i,a,n,r=t.length,s=!1,o=0;for(this._maxColumnsPerLevel[e]=this._maxColumnsPerLevel[e]||0,this._maxGroups[e]=this._maxGroups[e]||0,a=0;a<r;a++)n=t[a],i=n.items.length,i>o&&(o=i),n=t[a],n.hasChildren&&(s=!0,n.expanded&&this._calculateLevel(n.children,e+1));r>this._maxGroups[e]&&(this._maxGroups[e]=r),s||(o=1),o>this._maxColumnsPerLevel[e]&&(this._maxColumnsPerLevel[e]=o)},_calculateLevels:function(){var t,e,i=this._itemsTree,a=this._maxColumnsPerLevel=[],n=this._maxGroups=[],r=1;for(this._calculateLevel(i,0),t=a.length-1;t>=0;t--)e=a[t]*n[t],r>a[t]?r*=n[t]:r<e&&(r=e);this._total=r},_generateItemsTree:function(){this._itemsTree=this.dataSource.groupedItemsTree(this.options.groupField)},_getToFocus:function(t){return this._groupFocused?(this._groupFocused=!1,this.element.find("[data-uid='"+t.get(C)+"']").closest(f+T.nodesGroupContainer)):this.element.find("[data-uid='"+t.get(C)+"']")},_getToSelect:function(t){var e=this.jqueryItemElement(t);return e||this.jqueryGroupElement(t)},_groupIsVertical:function(t){var e=t.closest(f+T.nodeContainer);return e.hasClass(T.vstack)},_keyCollapse:function(t){var e,i,a=[];a=this._dataItems(t),i=a.some(function(t){return t.expanded}),i?(t.hasClass(T.card)&&(t=t.closest(f+T.nodesGroupContainer),a=this._dataItems(t)),this.trigger(l,{item:t,dataItems:a})||this.collapse(t)):a[0].parentId&&(e=this.dataSource.get(a[0].parentId).get(C),this.trigger(g,{item:this.element.find("[data-uid='"+e+"']").closest(f+this._selector),dataItems:a}))},_keyEnter:function(t){var e,i=[];t.hasClass(T.card)&&t.find(f+T.cardMenu).length>0?this.trigger(p,t):(e=t.find(f+T.card).first(),i=this._dataItems(e),this.trigger(g,{item:e,dataItems:i}))},_keyEscape:function(t){if(t.hasClass(T.card)){var e=t.closest(f+T.nodesGroupContainer),i=this._dataItems(e);this.trigger(g,{item:e,dataItems:i})}},_keyExpand:function(t){var e,i,a,n=t.attr(S)||t.closest(f+this._selector).attr(S),r=this.element.find(_+n),s=this._dataItems(t);e=s.some(function(t){return t.hasChildren}),e&&(i=s.some(function(t){return t.expanded}),i?(a=r.find(f+this._selector).first(),this.trigger(g,{item:a,dataItems:this._dataItems(a)})):(t.hasClass(T.card)&&(t=t.closest(f+T.nodesGroupContainer),s=this._dataItems(t)),this.trigger(c,{item:t,dataItems:s})||this.expand(t)))},_keyNext:function(t){var e,i=this.element.find(_+t.attr(S)),a=this._dataItems(t),n=a.some(function(t){return t.hasChildren}),r=a.some(function(t){return t.expanded});e=t.hasClass(T.card)?t.parent().next(f+T.node).find(f+T.card):t.parent().next(f+T.nodesGroup).find(f+T.nodesGroupContainer),!e.length&&n&&r&&(e=i.find(f+this._selector).first()),0!==e.length&&this.trigger(g,{item:e,dataItems:this._dataItems(e)})},_keyPrev:function(t){var e,i,a=this._dataItems(t);i=t.hasClass(T.card)?t.parent().prev(f+T.node).find(f+T.card):t.parent().prev(f+T.nodesGroup).find(f+T.nodesGroupContainer),!i.length&&a[0].parentId&&(e=this.dataSource.get(a[0].parentId).get(C),i=this.element.find("[data-uid='"+e+"']").closest(f+this._selector)),0!==i.length&&this.trigger(g,{item:i,dataItems:this._dataItems(i)})},_onFocus:function(i){var a,n,r=t(i.target);if(this._preventTriggerSelect)return i.stopPropagation(),this._preventTriggerSelect=!1,e;if(r.hasClass(T.cardMenu)){if(r.closest("[tabindex='0']").length>0)return i.stopPropagation(),e;this._preventTriggerSelect=!0}r.hasClass(T.card)||r.hasClass(T.nodesGroupContainer)||(n=r.closest(f+T.card),n.length||(n=r.closest(f+T.nodesGroupContainer)),r=n),0!==r.length&&(a=this._dataItems(r),r.hasClass(T.focused)||(i.stopPropagation(),this.trigger(g,{item:r,dataItems:a})))},_onSelect:function(e){var i,a,n=t(e.target),r=this.element.find("[tabindex=0]");n.hasClass(T.card)||n.hasClass(T.nodesGroupContainer)||(a=n.closest(f+T.card),a.length||(a=n.closest(f+T.nodesGroupContainer)),n=a),0!==n.length&&r[0]!==n[0]&&(i=this._dataItems(n),this.trigger(g,{item:n,dataItems:i}))},_orientation:function(e,i,a){var n=t("<div>").addClass(T.line+m+T.lineVertical+m+T.lineVerticalTop);e.addClass(T.hstack),i>1&&e.find(f+T.nodesGroupContainer).before(n.clone()),a&&i>1?(e.find(f+T.nodeContainer).removeClass(T.hstack),e.find(f+T.nodeContainer).addClass(T.vstack)):e.addClass(T.groupHorizontal)},_renderChildren:function(e,a,n,r,s,o,d){var l,c,h,u,p,g,f,v=i.template(V),_=i.template(G),k=t("<div>").addClass(T.line+m+T.lineVertical),I=t("<div>").addClass(T.line+m+T.lineHorizontal),b=this.options.messages,C=!0,S=i.support.isRtl(this.element)?"right":"left";return e.hasChildren&&(C=!1,s.append(k.clone()),c=t(v({buttonSign:e.expanded?x:w,label:e.expanded?b.collapse:b.expand})),s.append(c),this._calculateDimensions(),g=this._itemWidth,f=this._spacing,e.expanded&&(p=g*n+(n-1)*f,h=a*n*g+o,u=r*(this._itemHeight+this._buttonHeight+f)+f*(r-1)-this._buttonHeight/2,a>0&&(h+=a*n*f),l=t(_({guid:d,level:r+1})),l.css({width:p+y,top:u+y}),l.css(S,h+y),this.element.append(l),this._renderGroup(l,e.children,r+1,n,h))),l&&e.expanded&&e.children&&e.children.length>1&&c.after(I.clone().css({width:(n-n/e.children.length)*(g+f)+y,"margin-top":this._buttonHeight/-2+y})),C},_renderGroup:function(t,e,a,r,s){var o,d,l,c,h,u,p,g=!0,m=r/e.length;for(l=0;l<e.length;l++)c=i.guid(),u=e[l],o=this._renderNodesContainer(t,n(!0,{},u,{guid:c,level:a})),d=o.closest(f+T.nodesGroup),this._renderItems(o,u.items,a,c),h=this._renderChildren(u,l,m,a,d,s,c),g&&(g=h);p=this._itemWidth*m+(m-1)*this._spacing,t.find(f+T.nodesGroup).width(p),this._orientation(t,a,g)},_renderItems:function(t,e,a,n){var r,s,o,d,l=i.template(M);for(d=this.options.template?"function"==typeof this.options.template?this.options.template:i.template(this.options.template):i.template(O),r=0;r<e.length;r++)s=e[r],o=this._renderNode(l,d,s,a,n),t.append(o)},_renderNodesContainer:function(e,a){var n,r=i.template(H),s=t('<div class="k-orgchart-node-group k-align-items-center k-vstack">'),o=t(P),d=t(r(a));return n="function"==typeof this.options.groupHeaderTemplate?this.options.groupHeaderTemplate:i.template(this.options.groupHeaderTemplate),d.append(n({value:a.value,field:a.field})),d.append(o),s.append(d),e.append(s),o}});i.orgChart={View:j,SingleView:q,GroupedView:N}}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(t,define){define("kendo.orgchart.min",["orgchart/data.min","orgchart/view.min","kendo.menu.min","kendo.dialog.min","kendo.form.min","kendo.upload.min","kendo.window.min"],t)}(function(){return function(t,e){var i=window.kendo,a=i.ui.DataBoundWidget,n=i.data.OrgChartDataSource,r=i.ui.ContextMenu,s=t.extend,o=t.proxy,d=Array.isArray,l=".kendoOrgChart",c="cancel",h="change",u="click",p="collapse",g="create",f="dataBinding",m="dataBound",v="delete",_="destroy",k="edit",I="error",b="expand",C="focus",y="kendoKeydown",w="menu",x="progress",S="save",F="select",T="requestStart",E=".",G=" ",H=",",D="id",P="uid",L="action",V={wrapper:"k-orgchart",container:"k-orgchart-container",line:"k-orgchart-line",lineVertical:"k-orgchart-line-v",lineHorizontal:"k-orgchart-line-h",lineVerticalTop:"k-orgchart-line-v-top",group:"k-orgchart-group",groupVertical:"k-orgchart-group-v",groupHorizontal:"k-orgchart-group-h",nodesGroup:"k-orgchart-node-group",nodesGroupContainer:"k-orgchart-node-group-container",nodeContainer:"k-orgchart-node-container",node:"k-orgchart-node",card:"k-orgchart-card",cardMenu:"k-orgchart-card-menu",button:"k-orgchart-button",focused:"k-state-focus",plusIcon:"k-i-plus",menuItem:"k-item",avatarPreview:"k-orgchart-avatar-preview",update:"k-orgchart-update",cancel:"k-orgchart-cancel",vstack:"k-vstack",hstack:"k-hstack",closeButton:"k-i-close"},O={edit:"<li data-action='edit'>#: edit #</li>",create:"<li data-action='create'>#: create #</li>",destroy:"<li data-action='destroy'>#: destroy #</li>"},W='<div><div class="k-orgchart-node-group-title">#: value #</div><div class="k-orgchart-node-group-subtitle">#: field #</div></div>',M='<div class="k-orgchart-avatar-preview k-hstack k-align-items-center k-pb-lg"><div class="k-avatar k-avatar-solid-primary k-avatar-solid k-avatar-lg k-rounded-full"><span class="k-avatar-image"><img src="#: avatar #" alt="#: name #"></span></div><div class="k-px-md">#: fileName #</div><button class="k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button" aria-label="#: destroy #"><span class="k-button-icon k-icon k-i-delete"></span></button></div>',j='<div class="k-edit-buttons"><button type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-orgchart-cancel"><span class="k-button-text">#: cancel #</span></button><button type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-orgchart-update"><span class="k-button-text">#: save #</span></button></div>',q=a.extend({init:function(t,e,n){d(e)&&(e={dataSource:e}),e=e||{},a.fn.init.call(this,t,e),n&&(this._events=n),this._wrapper(),this._view(),this._dataSource(),this._contextMenu(),this.options.autoBind&&this.dataSource.fetch(),i.notify(this)},options:{name:"OrgChart",autoBind:!0,cardsColors:null,dataSource:{},editable:{create:!0,destroy:!0,fields:!0,form:{buttonsTemplate:"",orientation:"vertical"},parent:!0},groupField:null,groupHeaderTemplate:W,template:null,messages:{label:"Org Chart",edit:"Edit",create:"Create",destroy:"Delete",destroyContent:"Are you sure you want to delete this item and all its children?",destroyTitle:"Delete item",cancel:"Cancel",save:"Save",menuLabel:"Edit menu",uploadAvatar:"Upload new avatar",parent:"Parent",name:"Name",title:"Title",none:"--None--",expand:"expand",collapse:"collapse"}},events:[c,h,p,g,f,m,v,k,b,y,S,F],destroy:function(){this._menu&&this._menu.destroy(),this._editWindow&&this._editWindow.destroy(),this._confirmDestroy&&this._confirmDestroy.destroy(),this.view.destroy(),a.fn.destroy.call(this),this.wrapper.off(l)},setDataSource:function(t){this.options.dataSource=t,this._dataSource(),this.options.autoBind&&t.fetch()},setOptions:function(t){var e=this;a.fn.setOptions.call(e,t)},append:function(t,e){var i=this,a=i.view.jqueryItemElement(e),n=i.dataItem(a);a&&n&&(n.loaded()?(i.dataSource.add(s({},t,{parentId:n.id})),i.dataSource.sync()):i.dataSource.read({id:n.id}).then(function(){i.dataSource.add(s({},t,{parentId:n.id})),i.dataSource.sync()}))},cancelChanges:function(){this.dataSource.hasChanges()&&this.dataSource.cancelChanges()},collapse:function(t){return this.view.collapse(t)},dataItem:function(t){var e=this.view.jqueryItemElement(t);if(e&&e.data(P))return this.dataSource.getByUid(e.data(P))},"delete":function(t){var e=this.view.jqueryItemElement(t);e&&(this.dataSource.remove(this.dataItem(e)),this.dataSource.sync())},edit:function(t){var e=this.view.jqueryItemElement(t),i=this.dataItem(e);e&&i&&this._edit(i)},expand:function(t){return this.view.expand(t)},getCollapsedNodes:function(){return this.wrapper.find("[aria-expanded='false']")},items:function(){return this.wrapper.find(E+V.card)},parent:function(t){var e,i=this.view.jqueryItemElement(t);if(i)return e=i.closest(E+V.group).attr(D),this.wrapper.find("[aria-owns='"+e+"']")},saveChanges:function(){this.dataSource.sync()},select:function(t){var i=this.view._getToSelect(t);return i?this.view.select(i):e},_avatarPreview:function(t,e){var a,n,r=this._form,s=t.avatar,o=function(){a.find(E+V.avatarPreview).remove(),t.set("avatar",null)};r&&(e||(e=s.split("\\").pop().split("/").pop(),e&&e.indexOf(".")!=-1||(e=t.name)),n={name:t.name,avatar:s,fileName:e,destroy:this.options.messages.destroy},a=r.wrapper,a.find(E+V.avatarPreview).remove(),a.find('[type="file"]').closest(E+"k-form-field").prepend(i.template(M)(n)),a.find(E+V.avatarPreview+G+E+"k-button").on(u,o))},_contextMenu:function(){var t,e=this.options,a=e.editable,n=e.messages,s={target:this.wrapper,filter:E+V.cardMenu,select:this._onMenuItemClick.bind(this),activate:this._onMenuOpen.bind(this),deactivate:this._onMenuClose.bind(this),showOn:"click",animation:!1};(a===!0||a!==!1&&(a.create||a.destroy||a.fields||a.parent))&&(t="<ul>",a===!0?(t+=O.edit,t+=O.create,t+=O.destroy):((a.fields||a.parent)&&(t+=O.edit),a.create&&(t+=O.create),a.destroy&&(t+=O.destroy)),t=i.template(t)(n),this._menu=new r(t,s))},_dataSource:function(){var t=this.dataSource,e=this.options.dataSource;t&&(t.unbind(h,this._dataSourceChangeHandler),t.unbind(I,this._errorHandler),t.unbind(x,this._progressHandler),t.unbind(T,this._requestStartHandler)),
this._dataSourceChangeHandler=o(this._onDataSourceChange,this),this._errorHandler=o(this._onDataSourceError,this),this._progressHandler=o(this._progress,this),this._requestStartHandler=o(this._onDataSourceRequestStart,this),t=this.dataSource=n.create(e),t.bind(h,this._dataSourceChangeHandler),t.bind(I,this._errorHandler),t.bind(x,this._progressHandler),t.bind(T,this._requestStartHandler),this.view.dataSource=t},_destroyItem:function(e){var a=this,n=t("<div></div>"),r=a.options.messages,s=function(){a.wrapper.find(E+V.card+"[tabindex=0]"+H+E+V.nodesGroup+"[tabindex=0]").addClass(V.focused).trigger("focus")},o=this._confirmDestroy=new i.ui.Confirm(n,{title:r.destroyTitle,content:r.destroyContent,messages:{okText:r.destroy,cancel:r.cancel},show:function(){setTimeout(function(){o.element.trigger("focus")})}});o.open(),o.result.done(function(){a.trigger(v,{dataItem:e})||(a.dataSource.remove(e),a.dataSource.sync()),a.view._shouldRestoreSelection=!0,a.view._restoreSelection()}),o.result.fail(s)},_edit:function(e){var a,n=this,r=t("<div>"),s=t("<div>"),o=this.options.messages,d=this._formOptions(e);d&&(n._form=new i.ui.Form(r,d),e.avatar&&n._avatarPreview(e),s.append(r),n._editWindow=new i.ui.Window(s,{title:o.edit,width:"380 px",modal:!0,close:function(t){a?a=!1:n.trigger(c,{dataItem:e})?t.preventDefault():n.cancelChanges()},deactivate:function(){s.off(u),n._editWindow.destroy(),n._editWindow=null,n.view._restoreSelection()}}),s.append(i.template(j)({save:o.save,cancel:o.cancel})),n._editWindow.center().open(),s.on(u,E+V.update,function(){n._form.validate()&&(a=!0,n.trigger(S,{dataItem:e})||(n._editWindow.close(),n.saveChanges()))}),s.on(u,E+V.cancel,function(){n._editWindow.close()}))},_formOptions:function(t){var e,i,a=this.options,n=a.messages,r=a.editable.form,d=[];return r&&(i=r.items),i&&0!==i.length||!(a.editable===!0||a.editable&&a.editable.parent)||(e=[{id:null,name:n.none}].concat(this.dataSource.prospectParents(t)),d.push({field:"parentId",editor:"DropDownList",label:n.parent,editorOptions:{dataSource:e,dataValueField:"id",dataTextField:"name",valuePrimitive:!0}})),i&&0!==i.length||!(a.editable===!0||a.editable&&a.editable.fields)||(d=d.concat([{field:"name",label:n.name,validation:{required:!0}},{field:"title",label:n.title},{field:"avatar",label:n.uploadAvatar,editor:o(this._uploadEditor,this,t)}])),r&&delete r.formData,!!(d.length>0||i&&i.length>0)&&s(!0,{},{formData:t,items:d},r)},_onDataSourceChange:function(t){if(!("add"===t.action||"itemchange"===t.action&&this._editWindow)){if((!t.action||"sync"===t.action)&&this.trigger(f,t))return this._progress(!1),e;this._progress(!0),this.view.refresh(),t.action&&"sync"!==t.action||this.trigger(m),this._progress(!1)}},_onDataSourceError:function(){this._progress(!1)},_onDataSourceRequestStart:function(){this.view._cacheFocused()},_onMenuClose:function(){0===t(document.activeElement).closest("[role='alertdialog']").length&&this.wrapper.find("[tabindex='0']").addClass(V.focused).trigger("focus")},_onMenuItemClick:function(e){var i,a=this,n=t(e.target).closest(E+V.node).find(E+V.card),r=a.dataItem(n),s=t(e.item).data(L);r&&(s===k?a.trigger(k,{dataItem:r})||a._edit(r):s===g?a.trigger(g,{dataItem:r})||(r.loaded()?(i=a.dataSource.add({parentId:r.id}),a._edit(i)):a.dataSource.read({id:r.id}).then(function(){i=a.dataSource.add({parentId:r.id}),a._edit(i)})):s===_&&a._destroyItem(r))},_onMenuOpen:function(){this.view._cacheFocused(),this.wrapper.find(E+V.focused).removeClass(V.focused),this._menu.element.find(E+V.menuItem).first().trigger(C)},_openMenu:function(t){this._menu&&this._menu.open(t.find(E+V.cardMenu))},_progress:function(t){i.ui.progress(this.container,t)},_triggerCollapse:function(t){this.trigger(p,{item:t.item,dataItems:t.dataItems})&&t.preventDefault()},_triggerExpand:function(t){this.trigger(b,{item:t.item,dataItems:t.dataItems})&&t.preventDefault()},_triggerSelect:function(t){this.trigger(F,{item:t.item,dataItems:t.dataItems})||(this.view.select(t.item),this.trigger(h,{item:t.item,dataItems:t.dataItems}))},_uploadEditor:function(e,i){var a=this;t('<input type="file">').appendTo(i).kendoUpload({async:!1,multiple:!1,select:function(t){var i=t.files[0],n=i.rawFile,r=new FileReader;i.validationErrors&&i.validationErrors.length>0||n&&(r.onloadend=function(){e.set("avatar",this.result),a._avatarPreview(e,n.name)},r.readAsDataURL(n))},validation:{allowedExtensions:[".gif",".jpg",".png"],maxFileSize:1048576}})},_view:function(){this.view=null!==this.options.groupField&&this.options.groupField!==e?new i.orgChart.GroupedView(this.container,this.options):new i.orgChart.SingleView(this.container,this.options),this.view.bind(F,o(this._triggerSelect,this)),this.view.bind(b,o(this._triggerExpand,this)),this.view.bind(p,o(this._triggerCollapse,this)),this.view.bind(w,o(this._openMenu,this))},_wrapper:function(){var e=t("<div class='k-orgchart-container'>");this.wrapper=this.element,this.container=e,this.wrapper.addClass(V.wrapper),this.wrapper.append(e)}});i.ui.plugin(q)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()});
//# sourceMappingURL=kendo.orgchart.min.js.map
