{"version":3,"sources":["kendo.captcha.js"],"names":["f","define","$","undefined","kendo","window","Widget","ui","proxy","extend","ajax","isFunction","STRING","DOT","NS","CLICK","BLUR","CHANGE","REQUEST_START","REQUEST_END","ERROR","CaptchaStyles","wrapper","textbox","button","buttonIcon","iconButton","resetIcon","audioIcon","disabled","inputWrapper","imageWrapper","captchaImage","buttonsWrapper","volumeControlWrapper","hidden","success","loading","Captcha","init","element","options","that","this","fn","call","_captchaField","dataCaptchaField","_valueField","attr","_captchaIdField","dataCaptchaIdField","_wrapper","_idInput","_captchaImage","audioButton","resetButton","_buttons","captcha","captchaId","_resetHandler","validateOnBlur","on","_validationHandler","ev","_isValid","trigger","value","val","originalEvent","notify","events","name","handler","audioHandler","validationHandler","volumeControl","messages","reset","audio","imageAlt","destroy","off","_audioEnded","styles","cssText","style","css","kendoTextBox","data","_inputWrapper","wrap","parent","prepend","find","append","_tabindex","nameAttr","idInput","ns","after","_audioButton","_resetButton","_audioHandler","focusResetButton","deferred","Deferred","_resetCaptcha","_toggleSuccessMessage","_progress","_callHandler","done","fail","args","reject","promise","console","error","msg","_playAudio","_validate","type","_error","requestEnd","_requestEnd","url","cache","jqXHR","textStatus","errorThrown","id","one","resolve","_canPlayWav","audioElement","Audio","volume","_audioVolume","_showVolumeControl","play","_canPlayWithPlugin","_createEmbedElement","src","objectElement","document","createElement","setAttribute","_audioPlugin","width","height","position","top","left","volumeControlElm","_isRtl","kendoSlider","min","max","smallStep","largeStep","orientation","showButtons","tickPlacement","tooltip","enabled","change","activeElement","is","remove","pause","_canPlayAudio","canPlayType","replace","_getPlugin","testNavigatorPlugins","i","pluginName","plugins","navigator","length","indexOf","testActiveXAvailability","objectName","control","ActiveXObject","e","toggle","idAttr","successMessage","removeAttr","_toggleButtons","prop","toggleClass","_toggleSkeleton","skeleton","before","support","isRtl","getCaptchaId","toJSON","obj","validate","isValid","enable","readonly","speak","plugin","jQuery","amd","a1","a2","a3"],"mappings":"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","file":"kendo.captcha.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.captcha', [\n        'kendo.core',\n        'kendo.slider',\n        'kendo.textbox',\n        'kendo.skeletoncontainer'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'captcha',\n        name: 'Captcha',\n        category: 'web',\n        description: 'The Captcha widget displays captcha validation image and an input so that user case be validated against captcha value.',\n        depends: [\n            'core',\n            'slider',\n            'textbox',\n            'skeletoncontainer'\n        ]\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, Widget = kendo.ui.Widget, proxy = $.proxy, extend = $.extend, ajax = $.ajax, isFunction = kendo.isFunction, STRING = 'string', DOT = '.', NS = DOT + 'kendoCaptcha', CLICK = 'click', BLUR = 'blur', CHANGE = 'change', REQUEST_START = 'requestStart', REQUEST_END = 'requestEnd', ERROR = 'error';\n        var CaptchaStyles = {\n            wrapper: 'k-widget k-captcha',\n            textbox: 'k-textbox',\n            button: 'k-button k-button-md k-rounded-md k-button-solid k-button-solid-base',\n            buttonIcon: 'k-button-icon',\n            iconButton: 'k-icon-button',\n            resetIcon: 'k-icon k-i-reload',\n            audioIcon: 'k-icon k-i-volume-up',\n            disabled: 'k-state-disabled',\n            inputWrapper: 'k-captcha-input k-vstack',\n            imageWrapper: 'k-captcha-image-wrap k-hstack',\n            captchaImage: 'k-captcha-image',\n            buttonsWrapper: 'k-captcha-image-controls k-vstack',\n            volumeControlWrapper: 'k-captcha-volume-control k-vstack k-pos-absolute',\n            hidden: 'k-hidden',\n            success: 'k-captcha-validation-message k-text-success',\n            loading: 'k-captcha-loading'\n        };\n        var Captcha = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                that._captchaField = that.options.dataCaptchaField;\n                that._valueField = that.element.attr('name') || 'captcha';\n                that._captchaIdField = that.options.dataCaptchaIdField;\n                that._wrapper();\n                that._idInput();\n                that._captchaImage();\n                if (that.options.audioButton || that.options.resetButton) {\n                    that._buttons();\n                }\n                if (!that.options.captcha || !that.options.captchaId) {\n                    that._resetHandler();\n                }\n                if (that.options.validateOnBlur) {\n                    that.element.on(BLUR + NS, function () {\n                        that._validationHandler();\n                    });\n                }\n                that.element.on(CHANGE + NS, function (ev) {\n                    delete that._isValid;\n                    that.trigger(CHANGE, {\n                        value: that.element.val(),\n                        originalEvent: ev\n                    });\n                });\n                kendo.notify(that);\n            },\n            events: [\n                CHANGE,\n                REQUEST_START,\n                REQUEST_END,\n                ERROR\n            ],\n            options: {\n                name: 'Captcha',\n                dataCaptchaField: 'captcha',\n                dataCaptchaIdField: 'captchaId',\n                captchaId: '',\n                captcha: null,\n                handler: null,\n                audioHandler: null,\n                validationHandler: null,\n                validateOnBlur: false,\n                resetButton: true,\n                audioButton: true,\n                volumeControl: true,\n                messages: {\n                    reset: 'Reset captcha',\n                    audio: 'Speak captcha',\n                    imageAlt: 'Type the Captcha code from the image',\n                    success: 'Verification successful'\n                }\n            },\n            destroy: function () {\n                var that = this;\n                that.textbox.destroy();\n                if (that.resetButton) {\n                    that.resetButton.off(NS);\n                }\n                if (that.audioButton) {\n                    that.audioButton.off(NS);\n                }\n                that.element.off(NS);\n                that._audioEnded();\n                Widget.fn.destroy.call(that);\n            },\n            _wrapper: function () {\n                var that = this, styles = Captcha.styles, wrapper = '<div class=\\'' + styles.wrapper + '\\'><div class=\\'' + styles.inputWrapper + '\\'></div></div>', imageWrapper = '<div class=\\'' + styles.imageWrapper + '\\'></div>', cssText = that.element[0].style.cssText;\n                that.element.css('width', 'auto');\n                that.element.css('height', 'auto');\n                that.textbox = that.element.kendoTextBox().data('kendoTextBox');\n                that._inputWrapper = that.textbox.wrapper;\n                that.wrapper = that._inputWrapper.wrap(wrapper).parent().parent();\n                that.wrapper[0].style.cssText = cssText;\n                that.imageWrapper = $(imageWrapper);\n                that.wrapper.prepend(that.imageWrapper);\n            },\n            _captchaImage: function () {\n                var that = this, options = that.options, messages = options.messages, styles = Captcha.styles;\n                that.captchaImage = $('<div class=\"' + styles.captchaImage + '\">' + '<img alt=\"' + messages.imageAlt + '\" src= \"' + (options.captcha || '') + '\"/>' + '</div>').find('img');\n                that.imageWrapper.append(that.captchaImage.parent());\n                that._tabindex(that.captchaImage);\n            },\n            _idInput: function () {\n                var that = this, options = that.options, nameAttr = that._captchaIdField;\n                that.idInput = $('<input type=\"hidden\" name=\"' + nameAttr + '\" value=\"' + options.captchaId + '\" data-' + kendo.ns + 'stop=\"true\" />');\n                that._inputWrapper.after(that.idInput);\n            },\n            _buttons: function () {\n                var that = this, styles = Captcha.styles;\n                that.buttonsWrapper = $('<div class=\"' + styles.buttonsWrapper + '\"></div>');\n                that.imageWrapper.append(that.buttonsWrapper);\n                if (that.options.audioButton) {\n                    that._audioButton();\n                }\n                if (that.options.resetButton) {\n                    that._resetButton();\n                }\n            },\n            _resetButton: function () {\n                var that = this, messages = that.options.messages, styles = Captcha.styles;\n                that.resetButton = $('<button type=\"button\" title=\"' + messages.reset + '\" class=\"' + styles.button + ' ' + styles.iconButton + '\">' + '<span class=\"' + styles.buttonIcon + ' ' + styles.resetIcon + '\"></span>' + '</button>');\n                that.buttonsWrapper.append(that.resetButton);\n                that.resetButton.on(CLICK + NS, proxy(that._resetHandler, that, true));\n            },\n            _audioButton: function () {\n                var that = this, messages = that.options.messages, styles = Captcha.styles;\n                that.audioButton = $('<button type=\"button\" title=\"' + messages.audio + '\" class=\"' + styles.button + ' ' + styles.iconButton + '\">' + '<span class=\"' + styles.buttonIcon + ' ' + styles.audioIcon + '\"></span>' + '</button>');\n                that.buttonsWrapper.append(that.audioButton);\n                that.audioButton.on(CLICK + NS, proxy(that._audioHandler, that));\n            },\n            _resetHandler: function (focusResetButton) {\n                var that = this, handler = that.options.handler, deferred = $.Deferred(), success = proxy(that._resetCaptcha, that, deferred);\n                delete that._isValid;\n                that._toggleSuccessMessage(false);\n                that._audioEnded();\n                that._progress(true);\n                if (!handler) {\n                    window.console.error('Captcha\\'s handler option is not defined!');\n                    deferred.reject({\n                        msg: 'Captcha\\'s handler option is not defined!',\n                        error: 'handler_not_defined'\n                    });\n                    that._progress(false);\n                    return deferred.promise();\n                }\n                that._callHandler('reset', handler, success).done(function () {\n                    if (focusResetButton) {\n                        that.resetButton.trigger('focus');\n                    }\n                }).fail(function (args) {\n                    that._progress(false);\n                    deferred.reject(args);\n                });\n                return deferred.promise();\n            },\n            _audioHandler: function () {\n                var that = this, handler = that.options.audioHandler, deferred = $.Deferred(), success = proxy(that._playAudio, that, deferred), data = {};\n                data[that._captchaIdField] = that.idInput.val();\n                if (!handler) {\n                    window.console.error('Captcha\\'s audioHandler option is not defined!');\n                    deferred.reject({\n                        msg: 'Captcha\\'s audioHandler option is not defined!',\n                        error: 'handler_not_defined'\n                    });\n                    return deferred.promise();\n                }\n                that._callHandler('audio', handler, success, data).fail(deferred.reject);\n                return deferred.promise();\n            },\n            _validationHandler: function () {\n                var that = this, handler = that.options.validationHandler, deferred = $.Deferred(), success = proxy(that._validate, that, deferred), data = {};\n                delete that._isValid;\n                data[that._captchaIdField] = that.idInput.val();\n                data[that._valueField] = that.element.val();\n                if (!handler) {\n                    window.console.error('Captcha\\'s validationHandler option is not defined!');\n                    deferred.reject({\n                        msg: 'Captcha\\'s validationHandler option is not defined!',\n                        error: 'handler_not_defined'\n                    });\n                    return deferred.promise();\n                }\n                that._callHandler('validation', handler, success, data).fail(deferred.reject);\n                return deferred.promise();\n            },\n            _callHandler: function (type, handler, success, data) {\n                var that = this, error = proxy(that._error, that, type), requestEnd = proxy(that._requestEnd, that, type), args;\n                if (isFunction(handler)) {\n                    handler({\n                        success: success,\n                        data: data\n                    });\n                    return $.Deferred().promise();\n                } else {\n                    args = typeof handler === STRING ? {\n                        url: handler,\n                        cache: false\n                    } : extend({}, handler);\n                    args.success = success;\n                    args.data = extend({}, data, args.data);\n                    if (!that.trigger(REQUEST_START, {\n                            type: type,\n                            data: data\n                        })) {\n                        return ajax(args).done(requestEnd).fail(error);\n                    }\n                }\n            },\n            _requestEnd: function (type, data) {\n                var that = this;\n                that.trigger(REQUEST_END, {\n                    type: type,\n                    data: data\n                });\n            },\n            _error: function (type, jqXHR, textStatus, errorThrown) {\n                var that = this;\n                that.trigger(ERROR, {\n                    type: type,\n                    jqXHR: jqXHR,\n                    textStatus: textStatus,\n                    errorThrown: errorThrown\n                });\n            },\n            _resetCaptcha: function (deferred, data) {\n                var that = this, id = data[that._captchaIdField], captcha = data[that._captchaField];\n                that.idInput.val(id);\n                that.captchaImage.attr('src', captcha || '');\n                that.captchaImage.one('load', function () {\n                    that._progress(false);\n                });\n                deferred.resolve(data);\n            },\n            _playAudio: function (deferred, data) {\n                var that = this;\n                if (that._canPlayWav()) {\n                    if (that.audioElement) {\n                        return;\n                    }\n                    that.audioElement = new Audio(data);\n                    that.audioElement.volume = that._audioVolume || that.audioElement.volume;\n                    if (that.options.volumeControl) {\n                        $(that.audioElement).on('loadeddata' + NS, function () {\n                            that._showVolumeControl(that.audioElement.volume);\n                        });\n                    }\n                    $(that.audioElement).on('ended' + NS + ' error' + NS, proxy(that._audioEnded, that, deferred));\n                    that.audioElement.play();\n                } else if (that._canPlayWithPlugin()) {\n                    if (that.audioElement) {\n                        that.audioElement.play();\n                        return;\n                    }\n                    that.audioElement = that._createEmbedElement(data);\n                    that.wrapper.append(that.audioElement);\n                }\n            },\n            _createEmbedElement: function (src) {\n                var that = this, objectElement = document.createElement('embed');\n                objectElement.setAttribute('src', src);\n                objectElement.setAttribute('autostart', 'true');\n                objectElement.setAttribute('pluginspage', that._audioPlugin);\n                objectElement.setAttribute('enablejavascript', 'true');\n                objectElement.setAttribute('type', 'audio/wav');\n                objectElement.setAttribute('tabIndex', '-1');\n                objectElement.style.width = '0px';\n                objectElement.style.height = '0px';\n                objectElement.style.position = 'absolute';\n                objectElement.style.top = 0;\n                objectElement.style.left = 0;\n                return objectElement;\n            },\n            _showVolumeControl: function (volume) {\n                var that = this, styles = Captcha.styles, volumeControlWrapper = $('<div class=\"' + styles.volumeControlWrapper + '\"></div>');\n                if (that.volumeControl) {\n                    return;\n                }\n                that.volumeControlElm = $('<input />');\n                that.volumeControlWrapper = volumeControlWrapper.append(that.volumeControlElm);\n                that.imageWrapper.append(volumeControlWrapper);\n                that.volumeControlWrapper.css(that._isRtl() ? 'right' : 'left', that.wrapper.width());\n                that.volumeControl = that.volumeControlElm.kendoSlider({\n                    min: 0,\n                    max: 1,\n                    smallStep: 0.1,\n                    largeStep: 0.5,\n                    orientation: 'vertical',\n                    showButtons: false,\n                    tickPlacement: 'none',\n                    value: volume,\n                    tooltip: { enabled: false },\n                    change: function (ev) {\n                        that._audioVolume = that.audioElement.volume = ev.value;\n                    }\n                }).data('kendoSlider');\n            },\n            _audioEnded: function (deferred) {\n                var that = this;\n                if ($(document.activeElement).is('a.k-draghandle')) {\n                    that.audioButton.trigger('focus');\n                }\n                if (that.volumeControl) {\n                    that.volumeControl.destroy();\n                    that.volumeControl.wrapper.remove();\n                    delete that.volumeControl;\n                    that.volumeControlElm.remove();\n                    that.volumeControlWrapper.remove();\n                    delete that.volumeControlElm;\n                    delete that.volumeControlWrapper;\n                }\n                if (that.audioElement) {\n                    that.audioElement.pause();\n                }\n                $(that.audioElement).off(NS);\n                $(that.audioElement).remove();\n                delete that.audioElement;\n                if (deferred && deferred.resolve) {\n                    deferred.resolve();\n                }\n            },\n            _canPlayWav: function () {\n                var that = this, audio;\n                if (that._canPlayAudio) {\n                    return that._canPlayAudio;\n                }\n                audio = new Audio();\n                that._canPlayAudio = audio.canPlayType('audio/wav').replace(/no/gi, '') !== '';\n                return that._canPlayAudio;\n            },\n            _canPlayWithPlugin: function () {\n                var that = this;\n                if (that._audioPlugin) {\n                    return that._audioPlugin;\n                }\n                that._audioPlugin = that._getPlugin();\n                return that._audioPlugin;\n            },\n            _getPlugin: function () {\n                var testNavigatorPlugins = function (name) {\n                    var plugins = navigator.plugins;\n                    for (var i = 0; i < plugins.length; i++) {\n                        var pluginName = plugins[i].name;\n                        if (pluginName.indexOf(name) !== -1) {\n                            return true;\n                        }\n                    }\n                    return false;\n                };\n                var testActiveXAvailability = function (objectName) {\n                    try {\n                        var control = new window.ActiveXObject(objectName);\n                        return !!control;\n                    } catch (e) {\n                        return false;\n                    }\n                };\n                if (testActiveXAvailability('QuickTime.QuickTime') || testActiveXAvailability('QuickTimeCheckObject.QuickTimeCheck') || testNavigatorPlugins('QuickTime Plug-in')) {\n                    return 'http://www.apple.com/quicktime/download/';\n                }\n                if (testActiveXAvailability('WMPlayer.OCX') || testNavigatorPlugins('Windows Media')) {\n                    return 'http://www.microsoft.com/Windows/MediaPlayer';\n                }\n            },\n            _validate: function (deferred, data) {\n                var that = this;\n                that._isValid = data;\n                that._toggleSuccessMessage(that._isValid);\n                deferred.resolve(data);\n            },\n            _toggleSuccessMessage: function (toggle) {\n                var that = this, idAttr = (that.element.attr('id') || that.element.attr('name')) + '-success', messages = that.options.messages;\n                $(that.successMessage).remove();\n                that.element.removeAttr('aria-describedby');\n                if (toggle) {\n                    that.successMessage = $('<span id=\"' + idAttr + '\" class=\"' + Captcha.styles.success + '\">' + messages.success + '</span>');\n                    that._inputWrapper.after(that.successMessage);\n                    that.element.attr('aria-describedby', idAttr);\n                }\n            },\n            _toggleButtons: function (toggle) {\n                var that = this;\n                if (that.resetButton) {\n                    that.resetButton.prop('disabled', !toggle);\n                }\n                if (that.audioButton) {\n                    that.audioButton.prop('disabled', !toggle);\n                }\n            },\n            _progress: function (toggle) {\n                var that = this;\n                that.wrapper.toggleClass(Captcha.styles.loading, toggle);\n                that._inputWrapper.toggleClass(Captcha.styles.disabled, toggle);\n                that._toggleButtons(!toggle);\n                that._toggleSkeleton(toggle);\n            },\n            _toggleSkeleton: function (toggle) {\n                var that = this;\n                if (that.skeleton) {\n                    that.skeleton.remove();\n                }\n                if (toggle) {\n                    that.skeleton = $('<span class=\\'k-skeleton k-skeleton-rect k-skeleton-pulse\\' style=\"width: 100%; height: 100%;\"></span>');\n                    that.captchaImage.before(that.skeleton);\n                }\n            },\n            _isRtl: function () {\n                return kendo.support.isRtl(this.wrapper);\n            },\n            value: function () {\n                return this.element.val();\n            },\n            getCaptchaId: function () {\n                return this.idInput.val();\n            },\n            toJSON: function () {\n                var that = this, obj = {};\n                obj[that._valueField] = that.value();\n                obj[that._captchaIdField] = that.getCaptchaId();\n                return obj;\n            },\n            validate: function () {\n                return this._validationHandler();\n            },\n            isValid: function () {\n                return this._isValid;\n            },\n            enable: function (toggle) {\n                var that = this;\n                toggle = toggle !== false;\n                that._toggleButtons(toggle);\n                that.textbox.enable(toggle);\n                if (toggle) {\n                    that.captchaImage.removeAttr('tabIndex');\n                    that._tabindex(that.captchaImage);\n                } else {\n                    that.captchaImage.attr('tabIndex', '-1');\n                }\n                that.captchaImage.toggleClass(Captcha.styles.disabled, !toggle);\n                that.wrapper.toggleClass(Captcha.styles.disabled, !toggle);\n            },\n            readonly: function (toggle) {\n                var that = this;\n                toggle = toggle !== false;\n                if (that.resetButton) {\n                    that.resetButton.prop('disabled', toggle);\n                }\n                that.textbox.readonly(toggle);\n            },\n            speak: function () {\n                return this._audioHandler();\n            },\n            reset: function () {\n                return this._resetHandler();\n            }\n        });\n        kendo.ui.plugin(Captcha);\n        extend(true, Captcha, { styles: CaptchaStyles });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}