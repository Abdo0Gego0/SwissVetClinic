{"version":3,"sources":["kendo.colorpicker.js"],"names":["f","define","$","undefined","triggerEvent","self","type","color","parseColor","equals","_value","a","toCssRgba","toCss","trigger","value","kendo","window","ui","Widget","extend","NS","DISABLED","ColorSelector","init","element","options","ariaId","that","this","fn","call","_tabIndex","attr","_ariaId","_standalone","_triggerSelect","_triggerChange","name","events","_updateUI","opacity","enable","arguments","length","wrapper","toggleClass","_onEnable","_select","nohooks","prev","destroy","off","find","noop","_selectOnHide","_cancel","colorpicker","jQuery","amd","a1","a2","a3","getContrast","luminance1","luminance2","brightest","Math","max","darkest","min","getContrastFromTwoRGBAs","b","getLuminance","getRGBFromRGBA","r","g","rgb","map","v","pow","foregroundColor","backgroundColor","r1","fitIntoBounds","g1","b1","r2","g2","b2","round","contender","isPresent","isNaN","renderSvgCurveLine","gradientRectMetrics","hsva","findValue","contrast","saturation","low","high","comparer","mid","currentHsva","s","width","height","currentContrast","getColorFromHSV","toBytes","reversedComparer","getPaths","stepCount","reversed","i","points","push","bezierCommandCalc","bezierCommand","controlPoint","line","paths","svgPath","AA_CONTRAST","STEP_COUNT","AAA_CONTRAST","command","reducer","d","acc","point","format","reduce","controlPointCalc","cps","cpe","lineCalc","current","previous","next","reverse","p","n","smooth","l","angle","PI","x","cos","y","sin","pointA","pointB","lengthX","lengthY","sqrt","atan2","hue","h","alpha","Color","fromHSV","contrastToolUtils","preventDefault","ev","bind","callback","obj","apply","Observable","KEYS","keys","BACKGROUNDCOLOR","WHITE","BLACK","KEYDOWN_NS","ColorInput","_viewModel","observable","switchMode","keydown","mode","get","formats","hex","_changeHandler","change","_render","on","_template","template","unbind","append","ns","guid","parent","_color","_preventChangeEvent","set","reset","model","currentFormat","index","indexOf","field","_tryParseColor","sender","error","textbox","target","data","keyCode","ENTER","is","_change","ColorGradient","deepExtend","messages","previewInput","addClass","_hueElements","_colorgradientInputs","_contrastTool","_sliders","_hsvArea","_colorInput","tabindex","input","contrastTool","size","contrastRatio","fail","pass","toggleFormat","red","green","blue","_hueSlider","_opacitySlider","handle","_hsvRect","removeAttr","hueChange","e","_getHSV","opacityChange","hueSlider","opacitySlider","kendoSlider","tickPlacement","showButtons","orientation","slide","update","offset","dx","left","dy","top","rw","rh","_svChange","hsvRect","hsvHandle","_keydown","_hsvEvents","UserEvents","global","press","getOffset","focus","location","start","move","end","removeClass","_hsvHandle","setBackgroundColor","isPlainObject","_updateColorContrast","dontChangeInput","_updateHsv","_reset","_resetHsv","_resetColorContrast","rect","toHSV","css","contrastOptions","contrastRatioTemplate","labelTemplate","output","ratio","limit","level","remove","_updateContrastSvg","newSvg","svgClassName","metrics","prop","c","shiftKey","LEFT","ctrlKey","RIGHT","UP","DOWN","F2","select","ESC","handlePosition","position","_selectedColor","_colorAsText","plugin","relative","array","delta","pos","Array","prototype","slice","ITEMSELECTEDCLASS","ITEMSFOCUSEDCLASS","SIMPLEPALETTE","WEBPALETTE","CLICK_NS","BLUR_NS","ColorPalette","colors","tileSize","palette","columns","split","isArray","_selectedID","id","currentTarget","test","parseFloat","Error","selected","items","filter","_current","ex","item","each","html","MESSAGES","cancel","noColor","clearColor","gradient","NO_COLOR","SELECTED","PREVIEW_MASK","VIEWS","FlatColorPicker","autoupdate","_previousColor","_viewsContainer","view","_changeView","_setViewSize","children","toDisplay","_clearColor","_view","viewButton","closest","empty","buttons","preview","clearButton","views","_updatePreviousColor","selectedColor","hsvColor","selector","_cachedHue","appendTo","dontChangeView","previewWidth","parseInt","previewHeight","previewColumns","style","setProperty","buttonOptions","fillMode","themeColor","rounded","renderButton","icon","ColorPicker","content","label","accesskey","val","_inputWrapper","_applyCssClasses","hide","after","add","open","isDefaultPrevented","toggle","_popup","_selector","arrow","close","closeOnSelect","toolIcon","ARIATemplate","_getPopup","selOptions","_closing","handler","visible","_noColorIcon","_isInputTypeColor","el","tagName","dontChangeSelector","formattedValue","_ariaTemplate","key","selectorType","selectorWrapper","popup","document","body","kendoPopup","anchor","adjustSize","setTimeout","activate","cssProperties","registerPrefix","registerValues","values","roundedValues","concat"],"mappings":"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","file":"kendo.colorpicker.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('colorpicker/colorselector', ['kendo.core'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, Widget = ui.Widget, parseColor = kendo.parseColor, extend = $.extend, NS = '.kendoColorTools', DISABLED = 'k-disabled';\n        var ColorSelector = Widget.extend({\n            init: function (element, options) {\n                var that = this, ariaId;\n                Widget.fn.init.call(that, element, options);\n                element = that.element;\n                options = that.options;\n                that._value = options.value = parseColor(options.value);\n                that._tabIndex = element.attr('tabIndex') || 0;\n                ariaId = that._ariaId = options.ariaId;\n                if (ariaId) {\n                    element.attr('aria-labelledby', ariaId);\n                }\n                if (options._standalone) {\n                    that._triggerSelect = that._triggerChange;\n                }\n            },\n            options: {\n                name: 'ColorSelector',\n                value: null,\n                _standalone: true\n            },\n            events: [\n                'change',\n                'select',\n                'forceSelect',\n                'cancel'\n            ],\n            color: function (value) {\n                if (value !== undefined) {\n                    this._value = parseColor(value);\n                    this._updateUI(this._value);\n                }\n                return this._value;\n            },\n            value: function (color) {\n                color = this.color(color);\n                if (color) {\n                    if (this.options.opacity) {\n                        color = color.toCssRgba();\n                    } else {\n                        color = color.toCss();\n                    }\n                }\n                return color || null;\n            },\n            enable: function (enable) {\n                if (arguments.length === 0) {\n                    enable = true;\n                }\n                this.wrapper.toggleClass(DISABLED, !enable);\n                this._onEnable(enable);\n            },\n            _select: function (color, nohooks) {\n                var prev = this._value;\n                color = this.color(color);\n                if (!nohooks) {\n                    if (color && !color.equals(prev) || color === null && color !== prev) {\n                        this.element.trigger('change');\n                        this.trigger('change', { value: this.value() });\n                    } else if (!this._standalone) {\n                        this.trigger('cancel');\n                    }\n                }\n            },\n            _triggerSelect: function (color) {\n                triggerEvent(this, 'select', color);\n            },\n            _triggerChange: function (color) {\n                triggerEvent(this, 'change', color);\n            },\n            destroy: function () {\n                if (this.element) {\n                    this.element.off(NS);\n                }\n                if (this.wrapper) {\n                    this.wrapper.off(NS).find('*').off(NS);\n                }\n                this.wrapper = null;\n                Widget.fn.destroy.call(this);\n            },\n            _updateUI: $.noop,\n            _selectOnHide: function () {\n                return null;\n            },\n            _cancel: function () {\n                this.trigger('cancel');\n            }\n        });\n        function triggerEvent(self, type, color) {\n            color = parseColor(color);\n            if (color && !color.equals(self.color()) || color !== self.color()) {\n                if (type == 'change') {\n                    self._value = color;\n                }\n                if (color && color.a != 1) {\n                    color = color.toCssRgba();\n                } else if (color) {\n                    color = color.toCss();\n                }\n                self.trigger(type, { value: color });\n            }\n        }\n        extend(ui, { colorpicker: { ColorSelector: ColorSelector } });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('colorpicker/contrastToolUtils', ['kendo.core'], f);\n}(function () {\n    (function ($, undefined) {\n        var colorpicker = kendo.ui.colorpicker, extend = $.extend, Color = kendo.Color, parseColor = kendo.parseColor, AA_CONTRAST = 4.5, AAA_CONTRAST = 7, STEP_COUNT = 16;\n        function getContrast(luminance1, luminance2) {\n            var brightest = Math.max(luminance1, luminance2);\n            var darkest = Math.min(luminance1, luminance2);\n            return (brightest + 0.05) / (darkest + 0.05);\n        }\n        function getContrastFromTwoRGBAs(a, b) {\n            return getContrast(getLuminance(getRGBFromRGBA(a, b)), getLuminance(getRGBFromRGBA(b, {\n                r: 0,\n                g: 0,\n                b: 0,\n                a: 1\n            })));\n        }\n        function getLuminance(rgb) {\n            var a = [\n                rgb.r,\n                rgb.g,\n                rgb.b\n            ].map(function (v) {\n                v /= 255;\n                return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\n            });\n            return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;\n        }\n        function getRGBFromRGBA(foregroundColor, backgroundColor) {\n            var r1 = fitIntoBounds(foregroundColor.r, 0, 255);\n            var g1 = fitIntoBounds(foregroundColor.g, 0, 255);\n            var b1 = fitIntoBounds(foregroundColor.b, 0, 255);\n            var a1 = fitIntoBounds(foregroundColor.a, 0, 1);\n            var r2 = fitIntoBounds(backgroundColor.r, 0, 255);\n            var g2 = fitIntoBounds(backgroundColor.g, 0, 255);\n            var b2 = fitIntoBounds(backgroundColor.b, 0, 255);\n            return {\n                r: Math.round((1 - a1) * r2 + a1 * r1),\n                g: Math.round((1 - a1) * g2 + a1 * g1),\n                b: Math.round((1 - a1) * b2 + a1 * b1)\n            };\n        }\n        function fitIntoBounds(contender, min, max) {\n            if (!isPresent(contender) || isNaN(contender)) {\n                return min;\n            }\n            return contender <= min ? min : contender >= max ? max : contender;\n        }\n        function isPresent(value) {\n            return value !== null && value !== undefined;\n        }\n        function renderSvgCurveLine(gradientRectMetrics, hsva, backgroundColor) {\n            var findValue = function (contrast, saturation, low, high, comparer) {\n                var mid = (low + high) / 2;\n                var currentHsva = extend({}, hsva, {\n                    s: saturation / gradientRectMetrics.width,\n                    v: 1 - mid / gradientRectMetrics.height\n                });\n                var currentContrast = getContrastFromTwoRGBAs(parseColor(getColorFromHSV(currentHsva)).toBytes(), parseColor(backgroundColor).toBytes());\n                if (low + 0.5 > high) {\n                    if (currentContrast < contrast + 1 && currentContrast > contrast - 1) {\n                        return mid;\n                    } else {\n                        return null;\n                    }\n                }\n                if (comparer(currentContrast, contrast)) {\n                    return findValue(contrast, saturation, low, high - (high - low) / 2, comparer);\n                }\n                return findValue(contrast, saturation, low + (high - low) / 2, high, comparer);\n            };\n            var comparer = function (a, b) {\n                return a > b;\n            };\n            var reversedComparer = function (a, b) {\n                return a < b;\n            };\n            var getPaths = function (contrast, stepCount, reversed) {\n                var points = [];\n                for (var i = 0; i <= gradientRectMetrics.width; i += gradientRectMetrics.width / stepCount) {\n                    var value = findValue(contrast, i, 0, gradientRectMetrics.height, reversed ? reversedComparer : comparer);\n                    if (value !== null) {\n                        points.push([\n                            i,\n                            value\n                        ]);\n                    }\n                }\n                return points;\n            };\n            var bezierCommandCalc = bezierCommand(controlPoint(line));\n            var paths = svgPath(getPaths(AA_CONTRAST, STEP_COUNT, false), bezierCommandCalc) + svgPath(getPaths(AA_CONTRAST, STEP_COUNT, true), bezierCommandCalc) + svgPath(getPaths(AAA_CONTRAST, STEP_COUNT, false), bezierCommandCalc) + svgPath(getPaths(AAA_CONTRAST, STEP_COUNT, true), bezierCommandCalc);\n            return '<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"position: absolute; overflow: visible; pointer-events: none; left: 0px; top: 0px; z-index: 3;\" >' + paths + '</svg>';\n        }\n        function svgPath(points, command) {\n            if (points.length === 0) {\n                return '';\n            }\n            var reducer = function (acc, point, i, a) {\n                return i === 0 ? kendo.format('M {0},{1}', point[0], point[1]) : kendo.format('{0} {1}', acc, command(point, i, a));\n            };\n            var d = points.reduce(reducer, '');\n            return kendo.format('<path d=\"{0}\" fill=\"none\" stroke=\"white\" stroke-width=\"1\"/>', d);\n        }\n        function bezierCommand(controlPointCalc) {\n            return function (point, i, a) {\n                var cps = controlPointCalc(a[i - 1], a[i - 2], point);\n                var cpe = controlPointCalc(point, a[i - 1], a[i + 1], true);\n                return kendo.format('C {0},{1} {2},{3} {4},{5}', cps[0], cps[1], cpe[0], cpe[1], point[0], point[1]);\n            };\n        }\n        function controlPoint(lineCalc) {\n            return function (current, previous, next, reverse) {\n                var p = previous || current;\n                var n = next || current;\n                var smooth = 0.1;\n                var l = lineCalc(p, n);\n                var angle = l.angle + (reverse ? Math.PI : 0);\n                var length = l.length * smooth;\n                var x = current[0] + Math.cos(angle) * length;\n                var y = current[1] + Math.sin(angle) * length;\n                return [\n                    x,\n                    y\n                ];\n            };\n        }\n        function line(pointA, pointB) {\n            var lengthX = pointB[0] - pointA[0];\n            var lengthY = pointB[1] - pointA[1];\n            return {\n                length: Math.sqrt(Math.pow(lengthX, 2) + Math.pow(lengthY, 2)),\n                angle: Math.atan2(lengthY, lengthX)\n            };\n        }\n        function getColorFromHSV(hsva) {\n            var hue = fitIntoBounds(hsva.h, 0, 359.9);\n            var saturation = fitIntoBounds(hsva.s, 0, 1);\n            var value = fitIntoBounds(hsva.v, 0, 1);\n            var alpha = fitIntoBounds(hsva.a, 0, 1);\n            return Color.fromHSV(hue, saturation, value, alpha).toCssRgba();\n        }\n        extend(colorpicker, {\n            contrastToolUtils: {\n                getContrastFromTwoRGBAs: getContrastFromTwoRGBAs,\n                renderSvgCurveLine: renderSvgCurveLine\n            }\n        });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('colorpicker/colorgradient', [\n        'kendo.core',\n        'colorpicker/contrastToolUtils'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, Observable = kendo.Observable, parseColor = kendo.parseColor, extend = $.extend, Color = kendo.Color, KEYS = kendo.keys, BACKGROUNDCOLOR = 'background-color', WHITE = '#ffffff', BLACK = '#000000', NS = '.kendoColorTools', KEYDOWN_NS = 'keydown' + NS, ColorSelector = ui.colorpicker.ColorSelector, contrastToolUtils = ui.colorpicker.contrastToolUtils;\n        function preventDefault(ev) {\n            ev.preventDefault();\n        }\n        function bind(callback, obj) {\n            return function () {\n                return callback.apply(obj, arguments);\n            };\n        }\n        var ColorInput = Observable.extend({\n            init: function (element, options) {\n                var that = this;\n                that.element = element;\n                that.options = options;\n                that._viewModel = kendo.observable({\n                    switchMode: that.switchMode.bind(that),\n                    keydown: that.keydown.bind(that),\n                    mode: function (mode) {\n                        return mode === this.get('format');\n                    },\n                    format: options.format,\n                    formats: options.formats,\n                    rgb: null,\n                    hex: function () {\n                        return this.get('rgb') !== null && this.get('rgb').toCss({ alpha: options.opacity });\n                    }\n                });\n                that._changeHandler = that.change.bind(that);\n                that._viewModel.bind('change', that._changeHandler);\n                that._render();\n                that.element.on(KEYDOWN_NS, that.keydown.bind(that));\n                Observable.fn.init.call(that);\n            },\n            _template: kendo.template('# if (options.formats && options.formats.length > 1) { #' + '<div class=\"k-vstack\">' + '<button class=\"k-colorgradient-toggle-mode\" data-#:ns#role=\"button\" data-#:ns#icon=\"arrows-kpi\" data data-#:ns#bind=\"click: switchMode\" data-#:ns#fill-mode=\"flat\" data-#:ns#size=\"#: options.size #\" title=\"#: options.messages.toggleFormat #\">' + '</button>' + '</div>' + '# } #' + '# if (options.formats && options.formats.indexOf(\"hex\") >= 0) { #' + '<div class=\"k-vstack k-flex-1\" data-#:ns#bind=\"visible: mode(\\'hex\\')\">' + '<input type=\"text\" data-#:ns#bind=\"value: hex\" data-#:ns#role=\"textbox\" data-#:ns#size=\"#: options.size #\" tabindex=\"#:options.tabindex#\"  aria-label=\"#: options.messages.hex #\"/>' + '<label class=\"k-colorgradient-input-label\">HEX</label>' + '</div>' + '# } #' + '# if (options.formats && options.formats.indexOf(\"rgb\") >= 0) { #' + '<div  class=\"k-vstack\" data-#:ns#bind=\"visible: mode(\\'rgb\\')\">' + '<input tabindex=\"#:options.tabindex#\" data-#:ns#bind=\"value: rgb.r\" data-#:ns#role=\"numerictextbox\" data-#:ns#size=\"#: options.size #\" data-#:ns#max=\"255\" data-#:ns#min=\"0\" data-#:ns#decimals=\"0\" data-#:ns#spinners=\"false\" data-#:ns#format=\"n0\"  aria-label=\"#: options.messages.red #\" />' + '<label class=\"k-colorgradient-input-label\">R</label>' + '</div>' + '<div  class=\"k-vstack\" data-#:ns#bind=\"visible: mode(\\'rgb\\')\">' + '<input tabindex=\"#:options.tabindex#\" data-#:ns#bind=\"value: rgb.g\" data-#:ns#role=\"numerictextbox\" data-#:ns#size=\"#: options.size #\" data-#:ns#max=\"255\" data-#:ns#min=\"0\" data-#:ns#decimals=\"0\" data-#:ns#spinners=\"false\" data-#:ns#format=\"n0\"  aria-label=\"#: options.messages.green #\" />' + '<label class=\"k-colorgradient-input-label\">G</label>' + '</div>' + '<div  class=\"k-vstack\" data-#:ns#bind=\"visible: mode(\\'rgb\\')\">' + '<input tabindex=\"#:options.tabindex#\" data-#:ns#bind=\"value: rgb.b\" data-#:ns#role=\"numerictextbox\" data-#:ns#size=\"#: options.size #\" data-#:ns#max=\"255\" data-#:ns#min=\"0\" data-#:ns#decimals=\"0\" data-#:ns#spinners=\"false\" data-#:ns#format=\"n0\"  aria-label=\"#: options.messages.blue #\"/>' + '<label class=\"k-colorgradient-input-label\">B</label>' + '</div>' + '#if(options.opacity){#' + '<div  class=\"k-vstack\" data-#:ns#bind=\"visible: mode(\\'rgb\\')\">' + '<input tabindex=\"#:options.tabindex#\" data-#:ns#bind=\"value: rgb.a\" data-#:ns#role=\"numerictextbox\" data-#:ns#size=\"#: options.size #\" data-#:ns#step=\"0.1\" data-#:ns#max=\"1\" data-#:ns#min=\"0\" data-#:ns#decimals=\"1\" data-#:ns#spinners=\"false\" data-#:ns#format=\"n1\"  aria-label=\"#: options.messages.alpha #\" />' + '<label class=\"k-colorgradient-input-label\">A</label>' + '</div>' + '# } #' + '# } #'),\n            destroy: function () {\n                var that = this;\n                that._viewModel.unbind('change', that._changeHandler);\n                kendo.unbind(that.element);\n                kendo.destroy(that.element);\n                that.element.off(KEYDOWN_NS);\n                delete that._viewModel;\n                delete that._changeHandler;\n            },\n            _render: function () {\n                var that = this;\n                that.element.append(that._template({\n                    ns: kendo.ns,\n                    guid: kendo.guid(),\n                    options: that.options\n                })).parent();\n                kendo.bind(that.element, that._viewModel);\n                that.element.attr('data-' + kendo.ns + 'stop', 'stop');\n            },\n            value: function (color) {\n                var that = this;\n                that._color = color && color.toBytes() || parseColor(BLACK);\n                that._preventChangeEvent = true;\n                that._viewModel.set('rgb', that._color);\n                delete that._preventChangeEvent;\n            },\n            reset: function () {\n                var that = this;\n                that._preventChangeEvent = true;\n                that._viewModel.set('rgb', parseColor(BLACK));\n                delete that._preventChangeEvent;\n            },\n            switchMode: function () {\n                var that = this, model = that._viewModel, currentFormat = model.format, index = model.formats.indexOf(currentFormat) + 1;\n                index = index >= model.formats.length ? 0 : index;\n                that._preventChangeEvent = true;\n                that._viewModel.set('format', model.formats[index]);\n                delete that._preventChangeEvent;\n            },\n            change: function (ev) {\n                var that = this;\n                if (ev.field.indexOf('rgb') >= 0) {\n                    that._color = that._tryParseColor(that._viewModel.rgb.toCssRgba());\n                    that._viewModel.set('hex', that._color.toCss({ alpha: that.options.opacity }));\n                } else if (ev.field === 'hex') {\n                    that._color = that._tryParseColor(ev.sender[ev.field]);\n                    that._viewModel.set('rgb', that._color);\n                }\n                if (!that._preventChangeEvent) {\n                    that.trigger('change', { value: that._color });\n                }\n            },\n            _tryParseColor: function (color) {\n                var that = this;\n                try {\n                    color = parseColor(color) || that._color;\n                } catch (error) {\n                    color = that._color;\n                }\n                return color;\n            },\n            keydown: function (ev) {\n                var that = this, textbox = $(ev.target).data('kendoTextBox');\n                if (ev.keyCode === KEYS.ENTER && $(ev.target).is('input')) {\n                    if (textbox && textbox._change) {\n                        textbox._change();\n                    }\n                    that.trigger('change', { value: that._color });\n                    that.trigger('select', { value: that._color });\n                }\n            }\n        });\n        var ColorGradient = ColorSelector.extend({\n            init: function (element, options) {\n                var that = this, value;\n                ColorSelector.fn.init.call(that, element, options);\n                options = that.options = kendo.deepExtend({}, that.options, options);\n                if (options.messages.previewInput) {\n                    options.messages.hex = options.messages.previewInput;\n                }\n                options.messages = options.messages ? $.extend(that.options.messages, options.messages) : that.options.messages;\n                element = that.element;\n                that.wrapper = element.addClass('k-colorgradient').append(that._template(options));\n                that._hueElements = $('.k-hsv-rectangle, .k-alpha-slider .k-slider-track', element);\n                that._colorgradientInputs = $('.k-colorgradient-inputs', element);\n                that._contrastTool = $('.k-colorgradient-color-contrast', element);\n                that._sliders();\n                that._hsvArea();\n                value = that._value;\n                if (that._colorgradientInputs.length) {\n                    that._colorInput = new ColorInput(that._colorgradientInputs, extend({}, options, { tabindex: this._tabIndex }));\n                    that._colorInput.bind('change', function (ev) {\n                        that._updateUI(ev.value, true);\n                    });\n                    that._colorInput.bind('select', function (ev) {\n                        var color = parseColor(ev.value);\n                        that._select(color);\n                        that.trigger('forceSelect', { value: that.value() });\n                    });\n                }\n                that._updateUI(value);\n            },\n            options: {\n                name: 'ColorGradient',\n                opacity: false,\n                input: true,\n                format: 'hex',\n                formats: [\n                    'rgb',\n                    'hex'\n                ],\n                contrastTool: false,\n                size: 'medium',\n                messages: {\n                    contrastRatio: 'Contrast ratio:',\n                    fail: 'Fail',\n                    pass: 'Pass',\n                    hex: 'HEX',\n                    toggleFormat: 'Toggle format',\n                    red: 'Red',\n                    green: 'Green',\n                    blue: 'Blue',\n                    alpha: 'Alpha'\n                }\n            },\n            _template: kendo.template('<div class=\"k-colorgradient-canvas k-hstack\">' + '<div class=\"k-hsv-rectangle\"><div class=\"k-hsv-gradient\"></div><div class=\"k-hsv-draghandle k-draghandle\"></div></div>' + '<div class=\"k-hsv-controls k-hstack\">' + '<input class=\"k-hue-slider k-colorgradient-slider\" />' + '# if (opacity) { #' + '<input class=\"k-alpha-slider k-colorgradient-slider\" />' + '# } #' + '</div>' + '</div>' + '# if (input) { #' + '<div class=\"k-colorgradient-inputs k-hstack\">' + '</div>' + '# } #' + '# if (contrastTool) { #' + '<div class=\"k-colorgradient-color-contrast k-vbox\">' + '</div>' + '# } #'),\n            _onEnable: function (enable) {\n                this._hueSlider.enable(enable);\n                if (this._opacitySlider) {\n                    this._opacitySlider.enable(enable);\n                }\n                this.wrapper.find('input').attr('disabled', !enable);\n                var handle = this._hsvRect.find('.k-draghandle');\n                if (enable) {\n                    handle.attr('tabIndex', this._tabIndex);\n                } else {\n                    handle.removeAttr('tabIndex');\n                }\n            },\n            _sliders: function () {\n                var that = this, element = that.element, hueSlider = element.find('.k-hue-slider'), opacitySlider = element.find('.k-alpha-slider');\n                function hueChange(e) {\n                    that._updateUI(that._getHSV(e.value, null, null, null));\n                }\n                hueSlider.attr('aria-label', 'hue saturation');\n                that._hueSlider = hueSlider.kendoSlider({\n                    min: 0,\n                    max: 360,\n                    tickPlacement: 'none',\n                    showButtons: false,\n                    orientation: 'vertical',\n                    slide: hueChange,\n                    change: hueChange\n                }).data('kendoSlider');\n                function opacityChange(e) {\n                    that._updateUI(that._getHSV(null, null, null, e.value / 100));\n                }\n                opacitySlider.attr('aria-label', 'opacity');\n                that._opacitySlider = opacitySlider.kendoSlider({\n                    min: 0,\n                    max: 100,\n                    tickPlacement: 'none',\n                    showButtons: false,\n                    orientation: 'vertical',\n                    slide: opacityChange,\n                    change: opacityChange\n                }).data('kendoSlider');\n            },\n            _hsvArea: function () {\n                var that = this, element = that.element, hsvRect = element.find('.k-hsv-rectangle'), hsvHandle = hsvRect.find('.k-draghandle').attr('tabIndex', 0).on(KEYDOWN_NS, bind(that._keydown, that));\n                function update(x, y) {\n                    var offset = this.offset, dx = x - offset.left, dy = y - offset.top, rw = this.width, rh = this.height;\n                    dx = dx < 0 ? 0 : dx > rw ? rw : dx;\n                    dy = dy < 0 ? 0 : dy > rh ? rh : dy;\n                    that._svChange(dx / rw, 1 - dy / rh);\n                }\n                that._hsvEvents = new kendo.UserEvents(hsvRect, {\n                    global: true,\n                    press: function (e) {\n                        this.offset = kendo.getOffset(hsvRect);\n                        this.width = hsvRect.width();\n                        this.height = hsvRect.height();\n                        hsvHandle.focus();\n                        update.call(this, e.x.location, e.y.location);\n                    },\n                    start: function () {\n                        hsvRect.addClass('k-dragging');\n                        hsvHandle.focus();\n                    },\n                    move: function (e) {\n                        e.preventDefault();\n                        update.call(this, e.x.location, e.y.location);\n                    },\n                    end: function () {\n                        hsvRect.removeClass('k-dragging');\n                    }\n                });\n                that._hsvRect = hsvRect;\n                that._hsvHandle = hsvHandle;\n            },\n            setBackgroundColor: function (color) {\n                var that = this;\n                if (that.options.contrastTool) {\n                    that.options.contrastTool = $.isPlainObject(that.options.contrastTool) ? extend({}, that.options.contrastTool, { backgroundColor: color }) : { backgroundColor: color };\n                    that._updateColorContrast(that.color() || parseColor(WHITE));\n                }\n            },\n            _updateUI: function (color, dontChangeInput) {\n                var that = this;\n                if (!color) {\n                    that._reset();\n                    return;\n                }\n                if (!dontChangeInput && that._colorInput) {\n                    that._colorInput.value(color);\n                }\n                that._triggerSelect(color);\n                that._updateHsv(color);\n                if (that._contrastTool.length) {\n                    that._updateColorContrast(color);\n                }\n            },\n            _reset: function () {\n                var that = this;\n                if (that._colorInput) {\n                    that._colorInput.reset();\n                }\n                that._resetHsv();\n                that._resetColorContrast();\n            },\n            _resetHsv: function () {\n                var that = this, color = parseColor(BLACK);\n                that._updateHsv(color);\n            },\n            _updateHsv: function (color) {\n                var that = this, rect = that._hsvRect;\n                color = color.toHSV();\n                that._hsvHandle.css({\n                    left: color.s * rect.width() + 'px',\n                    top: (1 - color.v) * rect.height() + 'px'\n                });\n                that._hueElements.css(BACKGROUNDCOLOR, Color.fromHSV(color.h, 1, 1, 1).toCss());\n                that._hueSlider.value(color.h);\n                if (that._opacitySlider) {\n                    that._opacitySlider.wrapper.find('.k-slider-track').css('background', 'linear-gradient(to top, transparent, ' + Color.fromHSV(color.h, 1, 1, 1).toCss());\n                    that._opacitySlider.value(100 * color.a);\n                }\n            },\n            _resetColorContrast: function () {\n                var that = this, contrastOptions = that.options.contrastTool;\n                if (that._contrastTool.length) {\n                    that._updateColorContrast(contrastOptions.backgroundColor ? parseColor(contrastOptions.backgroundColor) : parseColor(WHITE));\n                }\n            },\n            _updateColorContrast: function (color) {\n                var that = this, contrastOptions = that.options.contrastTool, backgroundColor = contrastOptions.backgroundColor ? parseColor(contrastOptions.backgroundColor) : parseColor(WHITE), contrastRatio = contrastToolUtils.getContrastFromTwoRGBAs(parseColor(color.toCssRgba()), backgroundColor), contrastRatioTemplate = kendo.template('<div class=\"k-contrast-ratio\">' + '<span class=\"k-contrast-ratio-text\">#:messages.contrastRatio# #:kendo.toString(ratio, \"n2\")#</span>' + '<span class=\"k-contrast-validation k-text-success\">' + '#if (ratio > 4.5) {#' + '<span class=\"k-icon k-i-check\"></span>' + '#}#' + '#if (ratio > 7) {#' + '<span class=\"k-icon k-i-check\"></span>' + '#}#' + '</span></div>'), labelTemplate = kendo.template('<div>' + '<span>#:level#: #:limit# </span>' + '#if (ratio > limit) {#' + '<span class=\"k-contrast-validation k-text-success\">#:messages.pass# <span class=\"k-icon k-i-check\"></span></span>' + '#} else {#' + '<span class=\"k-contrast-validation k-text-error\">#:messages.fail# <span class=\"k-icon k-i-close\"></span></span>' + '#}#' + '</div>'), output = '';\n                output += contrastRatioTemplate({\n                    messages: that.options.messages,\n                    ratio: contrastRatio\n                });\n                output += labelTemplate({\n                    messages: that.options.messages,\n                    ratio: contrastRatio,\n                    limit: 4.5,\n                    level: 'AA'\n                });\n                output += labelTemplate({\n                    messages: that.options.messages,\n                    ratio: contrastRatio,\n                    limit: 7,\n                    level: 'AAA'\n                });\n                that._contrastTool.find('.k-contrast-ratio, div').remove();\n                that._contrastTool.append(output);\n                that._updateContrastSvg(backgroundColor);\n            },\n            _updateContrastSvg: function (backgroundColor) {\n                var that = this, hsvRect = that._hsvRect, svgClassName = 'k-color-contrast-svg', metrics = {\n                        width: hsvRect.width(),\n                        height: hsvRect.height()\n                    }, newSvg;\n                if (!metrics.width || !metrics.height) {\n                    return;\n                }\n                newSvg = $(contrastToolUtils.renderSvgCurveLine(metrics, that._getHSV(), backgroundColor)).addClass(svgClassName);\n                hsvRect.find('.' + svgClassName).remove();\n                hsvRect.append(newSvg);\n            },\n            _keydown: function (ev) {\n                var that = this;\n                function move(prop, d) {\n                    var c = that._getHSV();\n                    c[prop] += d * (ev.shiftKey ? 0.01 : 0.05);\n                    if (c[prop] < 0) {\n                        c[prop] = 0;\n                    }\n                    if (c[prop] > 1) {\n                        c[prop] = 1;\n                    }\n                    that._updateUI(c);\n                    preventDefault(ev);\n                }\n                function hue(d) {\n                    var c = that._getHSV();\n                    c.h += d * (ev.shiftKey ? 1 : 5);\n                    if (c.h < 0) {\n                        c.h = 0;\n                    }\n                    if (c.h > 359) {\n                        c.h = 359;\n                    }\n                    that._updateUI(c);\n                    preventDefault(ev);\n                }\n                switch (ev.keyCode) {\n                case KEYS.LEFT:\n                    if (ev.ctrlKey) {\n                        hue(-1);\n                    } else {\n                        move('s', -1);\n                    }\n                    break;\n                case KEYS.RIGHT:\n                    if (ev.ctrlKey) {\n                        hue(1);\n                    } else {\n                        move('s', 1);\n                    }\n                    break;\n                case KEYS.UP:\n                    move(ev.ctrlKey && that._opacitySlider ? 'a' : 'v', 1);\n                    break;\n                case KEYS.DOWN:\n                    move(ev.ctrlKey && that._opacitySlider ? 'a' : 'v', -1);\n                    break;\n                case KEYS.ENTER:\n                    that._select(that._getHSV());\n                    break;\n                case KEYS.F2:\n                    that._colorInput.element.find('input').trigger('focus').select();\n                    break;\n                case KEYS.ESC:\n                    that._cancel();\n                    break;\n                }\n            },\n            focus: function () {\n                this._hsvHandle.focus();\n            },\n            _getHSV: function (h, s, v, a) {\n                var that = this, rect = that._hsvRect, width = rect.width(), height = rect.height(), handlePosition = this._hsvHandle.position();\n                if (!width || !height) {\n                    return that.color() ? that.color().toHSV() : parseColor(BLACK);\n                }\n                if (h == null) {\n                    h = that._hueSlider.value();\n                }\n                if (s == null) {\n                    s = handlePosition.left / width;\n                }\n                if (v == null) {\n                    v = 1 - handlePosition.top / height;\n                }\n                if (a == null) {\n                    a = that._opacitySlider ? that._opacitySlider.value() / 100 : 1;\n                }\n                return Color.fromHSV(h, s, v, a);\n            },\n            _svChange: function (s, v) {\n                var color = this._getHSV(null, s, v, null);\n                this._updateUI(color);\n            },\n            destroy: function () {\n                this._hsvEvents.destroy();\n                this._hueSlider.destroy();\n                if (this._opacitySlider) {\n                    this._opacitySlider.destroy();\n                }\n                if (this._colorInput) {\n                    this._colorInput.destroy();\n                }\n                this._hueSlider = this._opacitySlider = this._hsvRect = this._hsvHandle = this._hueElements = this._selectedColor = this._colorAsText = this._contrastTool = null;\n                ColorSelector.fn.destroy.call(this);\n            }\n        });\n        ui.plugin(ColorGradient);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('colorpicker/colorpalette', ['kendo.core'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, parseColor = kendo.parseColor, KEYS = kendo.keys, BACKGROUNDCOLOR = 'background-color', ITEMSELECTEDCLASS = 'k-state-selected', ITEMSFOCUSEDCLASS = 'k-state-focus', SIMPLEPALETTE = '000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7', WEBPALETTE = 'FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000', NS = '.kendoColorTools', CLICK_NS = 'click' + NS, KEYDOWN_NS = 'keydown' + NS, BLUR_NS = 'blur' + NS, ColorSelector = ui.colorpicker.ColorSelector;\n        function preventDefault(ev) {\n            ev.preventDefault();\n        }\n        function bind(callback, obj) {\n            return function () {\n                return callback.apply(obj, arguments);\n            };\n        }\n        function relative(array, element, delta) {\n            array = Array.prototype.slice.call(array);\n            var n = array.length;\n            var pos = array.indexOf(element);\n            if (pos < 0) {\n                return delta < 0 ? array[n - 1] : array[0];\n            }\n            pos += delta;\n            if (pos < 0) {\n                pos += n;\n            } else {\n                pos %= n;\n            }\n            return array[pos];\n        }\n        var ColorPalette = ColorSelector.extend({\n            init: function (element, options) {\n                var that = this;\n                ColorSelector.fn.init.call(that, element, options);\n                element = that.wrapper = that.element;\n                options = that.options;\n                var colors = options.palette || 'basic';\n                if (colors == 'websafe') {\n                    colors = WEBPALETTE;\n                    options.columns = 18;\n                } else if (colors == 'basic') {\n                    colors = SIMPLEPALETTE;\n                }\n                if (typeof colors == 'string') {\n                    colors = colors.split(',');\n                }\n                if ($.isArray(colors)) {\n                    colors = $.map(colors, function (x) {\n                        return parseColor(x);\n                    });\n                }\n                that._selectedID = (options.ariaId || kendo.guid()) + '_selected';\n                element.addClass('k-colorpalette').attr('role', 'grid').attr('aria-readonly', 'true').append($(that._template({\n                    colors: colors,\n                    columns: options.columns,\n                    tileSize: options.tileSize,\n                    value: that._value,\n                    id: options.ariaId\n                }))).on(CLICK_NS, '.k-colorpalette-tile', function (ev) {\n                    that._select(ev.currentTarget);\n                }).attr('tabIndex', that._tabIndex).on(KEYDOWN_NS, bind(that._keydown, that)).on(BLUR_NS, function () {\n                    that.wrapper.find('.k-colorpalette-tile').removeClass(ITEMSFOCUSEDCLASS);\n                });\n                var tileSize = options.tileSize, width, height;\n                if (tileSize) {\n                    if (/number|string/.test(typeof tileSize)) {\n                        width = height = parseFloat(tileSize);\n                    } else if (typeof tileSize == 'object') {\n                        width = parseFloat(tileSize.width);\n                        height = parseFloat(tileSize.height);\n                    } else {\n                        throw new Error('Unsupported value for the \\'tileSize\\' argument');\n                    }\n                    element.find('.k-colorpalette-tile').css({\n                        width: width,\n                        height: height\n                    });\n                }\n            },\n            focus: function () {\n                if (this.wrapper && !this.wrapper.is('[unselectable=\\'on\\']')) {\n                    this.wrapper.trigger('focus');\n                }\n            },\n            options: {\n                name: 'ColorPalette',\n                columns: 10,\n                tileSize: null,\n                palette: 'basic'\n            },\n            _onEnable: function (enable) {\n                if (enable) {\n                    this.wrapper.attr('tabIndex', this._tabIndex);\n                } else {\n                    this.wrapper.removeAttr('tabIndex');\n                }\n            },\n            _keydown: function (e) {\n                var selected, wrapper = this.wrapper, items = wrapper.find('.k-colorpalette-tile'), current = items.filter('.' + ITEMSFOCUSEDCLASS).get(0) || items.filter('.' + ITEMSELECTEDCLASS).get(0), keyCode = e.keyCode;\n                if (keyCode == KEYS.LEFT) {\n                    selected = relative(items, current, -1);\n                } else if (keyCode == KEYS.RIGHT) {\n                    selected = relative(items, current, 1);\n                } else if (keyCode == KEYS.DOWN) {\n                    selected = relative(items, current, this.options.columns);\n                } else if (keyCode == KEYS.UP) {\n                    selected = relative(items, current, -this.options.columns);\n                } else if (keyCode == KEYS.ENTER) {\n                    preventDefault(e);\n                    if (current) {\n                        this._select(current);\n                        this.trigger('forceSelect', { value: this.value() });\n                        return;\n                    }\n                } else if (keyCode == KEYS.ESC) {\n                    this._cancel();\n                }\n                if (selected) {\n                    preventDefault(e);\n                    this._current(selected);\n                    try {\n                        var color = parseColor(selected.css(BACKGROUNDCOLOR));\n                        this._triggerSelect(color);\n                    } catch (ex) {\n                    }\n                }\n            },\n            _select: function (item) {\n                var that = this, items = that.wrapper.find('.k-colorpalette-tile');\n                item = $(item);\n                ColorSelector.fn._select.call(that, item.css(BACKGROUNDCOLOR));\n                items.removeClass(ITEMSELECTEDCLASS);\n                item.addClass(ITEMSELECTEDCLASS);\n            },\n            _current: function (item) {\n                this.wrapper.find('.' + ITEMSFOCUSEDCLASS).removeClass(ITEMSFOCUSEDCLASS).attr('aria-selected', false).removeAttr('id');\n                $(item).addClass(ITEMSFOCUSEDCLASS).attr('aria-selected', true).attr('id', this._selectedID);\n                this.element.removeAttr('aria-activedescendant').attr('aria-activedescendant', this._selectedID);\n            },\n            _updateUI: function (color) {\n                var item = null, items = this.wrapper.find('.k-colorpalette-tile');\n                this.wrapper.find('.k-colorpalette-tile').each(function () {\n                    var c = parseColor($(this).css(BACKGROUNDCOLOR));\n                    if (c && c.equals(color)) {\n                        item = this;\n                        return false;\n                    }\n                });\n                this._current(item);\n                items.removeClass(ITEMSELECTEDCLASS);\n                if (item) {\n                    $(item).addClass(ITEMSELECTEDCLASS);\n                }\n            },\n            _template: kendo.template('<div class=\"k-colorpalette-table-wrap\">' + '<table class=\"k-colorpalette-table k-palette\" role=\"presentation\"><tr role=\"row\">' + '# for (var i = 0; i < colors.length; ++i) { #' + '# var selected = colors[i].equals(value); #' + '# if (i && i % columns == 0) { # </tr><tr role=\"row\"> # } #' + '<td role=\"gridcell\" unselectable=\"on\" style=\"background-color:#= colors[i].toCss() #\"' + '#= selected ? \" aria-selected=true\" : \"\" # ' + '#=(id && i === 0) ? \"id=\\\\\"\"+id+\"\\\\\" \" : \"\" # ' + 'class=\"k-colorpalette-tile#= selected ? \" ' + ITEMSELECTEDCLASS + '\" : \"\" #\" ' + 'aria-label=\"#= colors[i].toCss() #\"></td>' + '# } #' + '</tr></table></div>')\n        });\n        ui.plugin(ColorPalette);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('colorpicker/flatcolorpicker', [\n        'colorpicker/colorgradient',\n        'colorpicker/colorpalette',\n        'html/button'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, html = kendo.html, Color = kendo.Color, extend = $.extend, BACKGROUNDCOLOR = 'background-color', MESSAGES = {\n                apply: 'Apply',\n                cancel: 'Cancel',\n                noColor: 'no color',\n                clearColor: 'Clear color',\n                previewInput: null,\n                contrastRatio: 'Contrast ratio:',\n                fail: 'Fail',\n                pass: 'Pass',\n                hex: 'HEX',\n                toggleFormat: 'Toggle format',\n                red: 'Red',\n                green: 'Green',\n                blue: 'Blue',\n                alpha: 'Alpha',\n                gradient: 'Gradient view',\n                palette: 'Palette view'\n            }, NS = '.kendoColorTools', CLICK_NS = 'click' + NS, KEYDOWN_NS = 'keydown' + NS, ColorSelector = ui.colorpicker.ColorSelector, KEYS = kendo.keys, NO_COLOR = 'k-no-color', SELECTED = 'k-selected', PREVIEW_MASK = '.k-color-preview-mask', VIEWS = {\n                'gradient': ui.ColorGradient,\n                'palette': ui.ColorPalette\n            };\n        function bind(callback, obj) {\n            return function () {\n                return callback.apply(obj, arguments);\n            };\n        }\n        var FlatColorPicker = ColorSelector.extend({\n            init: function (element, options) {\n                var that = this;\n                if (options && options.autoupdate === false) {\n                    options._standalone = false;\n                }\n                ColorSelector.fn.init.call(that, element, options);\n                options = that.options = kendo.deepExtend({}, that.options, options);\n                element = that.element;\n                that.wrapper = element.addClass('k-flatcolorpicker k-coloreditor').append(that._template());\n                that._selectedColor = $('.k-coloreditor-preview-color', element);\n                that._previousColor = $('.k-coloreditor-current-color', element);\n                that._viewsContainer = $('.k-coloreditor-views', element);\n                element.find('.k-button[data-view=' + that.options.view + ']').addClass(SELECTED);\n                var value = that.color();\n                that._changeView(options.view);\n                that._setViewSize();\n                if (value) {\n                    that._updateUI(value);\n                    that._previousColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, value.toDisplay());\n                    that._selectedColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, value.toDisplay());\n                } else {\n                    that._selectedColor.addClass(NO_COLOR);\n                    that._previousColor.addClass(NO_COLOR);\n                }\n                element.on(KEYDOWN_NS, bind(that._keydown, that)).on(CLICK_NS, '.k-coloreditor-reset', function () {\n                    that._clearColor = true;\n                    that._updateUI(null);\n                    that._view.value(null);\n                }).on(CLICK_NS, '.k-coloreditor-apply', function () {\n                    if (that._clearColor) {\n                        that._select(null);\n                    } else {\n                        that._select(that._view.color());\n                    }\n                }).on(CLICK_NS, '.k-coloreditor-cancel', function () {\n                    delete that._clearColor;\n                    that._updateUI(that.color());\n                    that._cancel();\n                }).on(CLICK_NS, '.k-button[data-view]', function (ev) {\n                    var viewButton = $(ev.target).closest('[data-view]');\n                    if (viewButton.is('.' + SELECTED)) {\n                        return;\n                    }\n                    element.find('.k-button[data-view]').removeClass(SELECTED);\n                    viewButton.addClass(SELECTED);\n                    that._changeView(viewButton.data('view'));\n                });\n            },\n            destroy: function () {\n                var that = this;\n                ColorSelector.fn.destroy.call(this);\n                if (that._view) {\n                    that._view.destroy();\n                    that._viewsContainer.empty();\n                }\n                that.element.off(NS);\n                that._selectedColor = that._previousColor = that._viewsContainer = that._view = null;\n            },\n            options: {\n                name: 'FlatColorPicker',\n                opacity: false,\n                buttons: false,\n                input: true,\n                preview: true,\n                clearButton: false,\n                format: 'hex',\n                formats: [\n                    'rgb',\n                    'hex'\n                ],\n                view: 'gradient',\n                views: [\n                    'gradient',\n                    'palette'\n                ],\n                palette: null,\n                autoupdate: true,\n                backgroundColor: null,\n                columns: 10,\n                tileSize: 24,\n                messages: MESSAGES,\n                size: 'medium'\n            },\n            setBackgroundColor: function (color) {\n                var that = this;\n                if (that._view && that._view.setBackgroundColor) {\n                    that._view.setBackgroundColor(color);\n                }\n            },\n            _select: function (value) {\n                var that = this;\n                ColorSelector.fn._select.call(that, value);\n                that._updatePreviousColor(value);\n            },\n            _updatePreviousColor: function (value) {\n                var that = this;\n                if (value) {\n                    that._previousColor.removeClass(NO_COLOR);\n                    that._previousColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, value.toDisplay());\n                } else {\n                    that._previousColor.addClass(NO_COLOR);\n                    that._previousColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, '');\n                }\n            },\n            _changeView: function (mode) {\n                var that = this, options = $.extend({}, that.options), selector = VIEWS[mode], selectedColor, hsvColor;\n                if (that._view && that._view._colorInput) {\n                    that.options.format = that._view._colorInput._viewModel.format;\n                }\n                that.options.view = mode;\n                delete options.name;\n                delete options.change;\n                delete options.select;\n                delete options.cancel;\n                delete options._standalone;\n                if (that._view) {\n                    selectedColor = that._view.color();\n                    that._view.destroy();\n                    that._viewsContainer.empty();\n                }\n                if (selectedColor) {\n                    selectedColor = selectedColor.toHSV();\n                    hsvColor = Color.fromHSV(that._cachedHue || 0, selectedColor.s, selectedColor.v, selectedColor.a);\n                    that._cachedHue = selectedColor.toHSV().h;\n                    selectedColor = selectedColor.equals(hsvColor) ? hsvColor : selectedColor;\n                }\n                if (selector) {\n                    that._view = new VIEWS[mode]($('<div></div>').appendTo(that._viewsContainer), options);\n                    that._view.value(selectedColor);\n                    that._view.bind('change', function (ev) {\n                        delete that._clearColor;\n                        that._updateUI(ev.sender.color(), true);\n                    });\n                    that._view.bind('forceSelect', function (ev) {\n                        delete that._clearColor;\n                        that._select(ev.sender.color());\n                    });\n                }\n            },\n            _onEnable: function (enable) {\n                var that = this;\n                if (that._view) {\n                    that._view._onEnable(enable);\n                }\n            },\n            focus: function () {\n                var that = this;\n                if (that._view) {\n                    that._view.focus();\n                }\n            },\n            _updateUI: function (color, dontChangeView) {\n                var that = this;\n                if (color && color.toDisplay) {\n                    that._selectedColor.removeClass(NO_COLOR);\n                    that._selectedColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, color.toDisplay());\n                } else {\n                    that._selectedColor.addClass(NO_COLOR);\n                    that._selectedColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, '');\n                }\n                that._triggerSelect(color);\n                if (that.options.autoupdate) {\n                    that._updatePreviousColor(color);\n                }\n                if (!dontChangeView) {\n                    that._view.value(color);\n                }\n            },\n            _setViewSize: function () {\n                var that = this, wrapper = that.wrapper[0], previewWidth = parseInt(that.options.tileSize.width || that.options.tileSize, 10), previewHeight = parseInt(that.options.tileSize.width || that.options.tileSize, 10), previewColumns = that.options.columns;\n                wrapper.style.setProperty('--kendo-color-preview-columns', previewColumns);\n                wrapper.style.setProperty('--kendo-color-preview-width', previewWidth + 'px');\n                wrapper.style.setProperty('--kendo-color-preview-height', previewHeight + 'px');\n            },\n            _keydown: function (e) {\n                if (e.keyCode == KEYS.ESC) {\n                    this._cancel();\n                }\n            },\n            _template: function () {\n                var that = this, options = that.options, buttonOptions = extend({}, options, {\n                        fillMode: 'flat',\n                        themeColor: 'base',\n                        rounded: 'medium'\n                    });\n                return kendo.template('<div class=\"k-coloreditor-header k-hstack\">' + '# if (views && views.length > 1) { #' + '<div class=\"k-coloreditor-header-actions k-hstack\">' + '<div class=\"k-button-group k-button-group-flat\">' + html.renderButton('<button  data-view=\"gradient\" title=\"#:messages.gradient#\"></button>', extend({ icon: 'color-canvas' }, buttonOptions)) + html.renderButton('<button  data-view=\"palette\" title=\"#:messages.palette#\"></button>', extend({ icon: 'palette' }, buttonOptions)) + '</div>' + '</div>' + '# } #' + '<div class=\"k-spacer\"></div>' + '<div class=\"k-coloreditor-header-actions k-hstack\">' + '# if (clearButton) { #' + html.renderButton('<button class=\"k-coloreditor-reset\" title=\"#:messages.clearColor#\"></button>', extend({ icon: 'reset-color' }, buttonOptions)) + '# } #' + '# if (preview) { #' + '<div class=\"k-coloreditor-preview k-vstack\">' + '<span class=\"k-coloreditor-preview-color k-color-preview\">' + '<span class=\"k-color-preview-mask\"></span>' + '</span>' + '<span class=\"k-coloreditor-current-color k-color-preview\">' + '<span class=\"k-color-preview-mask\"></span>' + '</span>' + '</div>' + '# } #' + '</div>' + '</div>' + '<div class=\"k-coloreditor-views k-vstack\"></div>' + '# if (buttons) { #' + '<div class=\"k-coloreditor-footer k-actions k-hstack k-justify-content-end\">' + html.renderButton('<button class=\"k-coloreditor-cancel\" title=\"#:messages.cancel#\">#: messages.cancel #</button>', extend({}, buttonOptions, { fillMode: 'solid' })) + html.renderButton('<button class=\"k-coloreditor-apply\" title=\"#:messages.apply#\">#: messages.apply #</button>', extend({}, buttonOptions, {\n                    fillMode: 'solid',\n                    themeColor: 'primary'\n                })) + '</div>' + '# } #')(options);\n            }\n        });\n        ui.plugin(FlatColorPicker);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.colorpicker', [\n        'kendo.core',\n        'kendo.color',\n        'kendo.popup',\n        'kendo.slider',\n        'kendo.userevents',\n        'kendo.button',\n        'kendo.binder',\n        'kendo.textbox',\n        'kendo.numerictextbox',\n        'html/button',\n        'colorpicker/colorselector',\n        'colorpicker/flatcolorpicker'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'colorpicker',\n        name: 'Color tools',\n        category: 'web',\n        description: 'Color selection widgets',\n        depends: [\n            'core',\n            'color',\n            'popup',\n            'slider',\n            'userevents',\n            'button',\n            'binder',\n            'textbox',\n            'numerictextbox'\n        ]\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, Widget = ui.Widget, Color = kendo.Color, parseColor = kendo.parseColor, KEYS = kendo.keys, BACKGROUNDCOLOR = 'background-color', MESSAGES = {\n                apply: 'Apply',\n                cancel: 'Cancel',\n                noColor: 'no color',\n                clearColor: 'Clear color',\n                previewInput: null,\n                contrastRatio: 'Contrast ratio:',\n                fail: 'Fail',\n                pass: 'Pass',\n                hex: 'HEX',\n                toggleFormat: 'Toggle format',\n                red: 'Red',\n                green: 'Green',\n                blue: 'Blue',\n                alpha: 'Alpha',\n                gradient: 'Gradient view',\n                palette: 'Palette view'\n            }, NS = '.kendoColorTools', CLICK_NS = 'click' + NS, KEYDOWN_NS = 'keydown' + NS, ColorSelector = ui.colorpicker.ColorSelector, FlatColorPicker = ui.FlatColorPicker;\n        var ColorPicker = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                if (options && options.palette && !options.view) {\n                    options.view = 'palette';\n                }\n                Widget.fn.init.call(that, element, options);\n                options = that.options = kendo.deepExtend({}, that.options, options);\n                element = that.element;\n                var value = element.attr('value') || element.val();\n                if (value) {\n                    value = parseColor(value, true);\n                } else {\n                    value = parseColor(options.value, true);\n                }\n                that._value = options.value = value;\n                var content = that._inputWrapper = that.wrapper = $(that._template(options));\n                that._applyCssClasses();\n                element.hide().after(content);\n                if (element.is('input')) {\n                    element.appendTo(content);\n                    var label = element.closest('label');\n                    var id = element.attr('id');\n                    if (id) {\n                        label = label.add('label[for=\"' + id + '\"]');\n                    }\n                    label.on('click', function (ev) {\n                        that.open();\n                        ev.preventDefault();\n                    });\n                }\n                that._tabIndex = element.attr('tabIndex') || 0;\n                that.enable(!element.attr('disabled'));\n                var accesskey = element.attr('accesskey');\n                if (accesskey) {\n                    element.attr('accesskey', null);\n                    content.attr('accesskey', accesskey);\n                }\n                that.bind('activate', function (ev) {\n                    if (!ev.isDefaultPrevented()) {\n                        that.toggle();\n                    }\n                });\n                that._updateUI(value);\n            },\n            destroy: function () {\n                this.wrapper.off(NS).find('*').off(NS);\n                if (this._popup) {\n                    this._selector.destroy();\n                    this._popup.destroy();\n                }\n                this._selector = this._popup = this.wrapper = null;\n                Widget.fn.destroy.call(this);\n            },\n            enable: function (enable) {\n                var that = this, wrapper = that.wrapper, arrow = wrapper.find('.k-input-button');\n                if (arguments.length === 0) {\n                    enable = true;\n                }\n                that.element.attr('disabled', !enable);\n                wrapper.attr('aria-disabled', !enable);\n                arrow.off(NS).on('mousedown' + NS, preventDefault);\n                wrapper.addClass('k-disabled').removeAttr('tabIndex').add('*', wrapper).off(NS);\n                if (enable) {\n                    wrapper.removeClass('k-disabled').attr('tabIndex', that._tabIndex).on('mouseenter' + NS, function () {\n                        wrapper.addClass('k-hover');\n                    }).on('mouseleave' + NS, function () {\n                        wrapper.removeClass('k-hover');\n                    }).on('focus' + NS, function () {\n                        wrapper.addClass('k-focus');\n                    }).on('blur' + NS, function () {\n                        wrapper.removeClass('k-focus');\n                    }).on(KEYDOWN_NS, bind(that._keydown, that)).on(CLICK_NS, '.k-input-button', bind(that.toggle, that)).on(CLICK_NS, '.k-input-inner', function () {\n                        that.trigger('activate');\n                    });\n                } else {\n                    that.close();\n                }\n            },\n            _template: kendo.template('<span role=\"textbox\" aria-haspopup=\"true\" class=\"k-colorpicker k-picker k-icon-picker\">' + '<span  class=\"k-input-inner\">' + '<span class=\"k-value-icon k-color-preview #: toolIcon ? \"k-icon-color-preview\" : \"\" #\">' + '# if (toolIcon) { #' + '<span class=\"k-color-preview-icon k-icon #= toolIcon #\"></span>' + '# } #' + '<span class=\"k-color-preview-mask\"></span>' + '</span>' + '</span >' + kendo.html.renderButton('<button class=\"k-select k-button-rectangle k-input-button\" unselectable=\"on\" aria-label=\"select\" tabindex=\"-1\"></button>', $.extend({}, this.options, { icon: 'arrow-s' })) + '</span>'),\n            options: {\n                name: 'ColorPicker',\n                closeOnSelect: false,\n                contrastTool: false,\n                palette: null,\n                columns: 10,\n                toolIcon: null,\n                value: null,\n                messages: MESSAGES,\n                opacity: false,\n                buttons: true,\n                preview: true,\n                clearButton: false,\n                input: true,\n                format: 'hex',\n                formats: [\n                    'rgb',\n                    'hex'\n                ],\n                view: 'gradient',\n                views: [\n                    'gradient',\n                    'palette'\n                ],\n                backgroundColor: null,\n                ARIATemplate: 'Current selected color is #=data || \"\"#',\n                size: 'medium',\n                rounded: 'medium',\n                fillMode: 'solid'\n            },\n            events: [\n                'activate',\n                'change',\n                'select',\n                'open',\n                'close'\n            ],\n            open: function () {\n                if (!this.element.prop('disabled')) {\n                    this._getPopup().open();\n                }\n            },\n            close: function () {\n                var selOptions = this._selector && this._selector.options || {};\n                selOptions._closing = true;\n                this._getPopup().close();\n                delete selOptions._closing;\n            },\n            toggle: function () {\n                if (!this.element.prop('disabled')) {\n                    this._getPopup().toggle();\n                }\n            },\n            setBackgroundColor: function (color) {\n                var that = this, handler = function () {\n                        that._selector.setBackgroundColor(color);\n                    };\n                that.options.contrastTool.backgroundColor = color;\n                if (that._selector && (that._popup && that._popup.visible())) {\n                    that._selector.setBackgroundColor(color);\n                } else if (that._popup) {\n                    that._popup.unbind('activate', handler);\n                    that._popup.bind('activate', handler);\n                }\n            },\n            _noColorIcon: function () {\n                return this.wrapper.find('.k-color-preview');\n            },\n            color: ColorSelector.fn.color,\n            value: ColorSelector.fn.value,\n            _select: ColorSelector.fn._select,\n            _triggerSelect: ColorSelector.fn._triggerSelect,\n            _isInputTypeColor: function () {\n                var el = this.element[0];\n                return /^input$/i.test(el.tagName) && /^color$/i.test(el.type);\n            },\n            _updateUI: function (value, dontChangeSelector) {\n                var formattedValue = '';\n                if (value) {\n                    if (this._isInputTypeColor() || value.a == 1) {\n                        formattedValue = value.toCss();\n                    } else {\n                        formattedValue = value.toCssRgba();\n                    }\n                    this.element.val(formattedValue);\n                }\n                if (!this._ariaTemplate) {\n                    this._ariaTemplate = kendo.template(this.options.ARIATemplate);\n                }\n                this.wrapper.attr('aria-label', this._ariaTemplate(formattedValue));\n                this._triggerSelect(value);\n                this.wrapper.find('.k-color-preview-mask').css(BACKGROUNDCOLOR, value ? value.toDisplay() : '');\n                this._noColorIcon().toggleClass('k-no-color', !formattedValue);\n                if (this._selector && !dontChangeSelector) {\n                    this._selector.value(value);\n                }\n            },\n            _keydown: function (ev) {\n                var key = ev.keyCode;\n                if (this._getPopup().visible()) {\n                    if (key == KEYS.ESC) {\n                        this._selector._cancel();\n                    } else {\n                        this._selector._keydown(ev);\n                    }\n                    preventDefault(ev);\n                } else if (key == KEYS.ENTER || key == KEYS.DOWN) {\n                    this.open();\n                    preventDefault(ev);\n                }\n            },\n            _getPopup: function () {\n                var that = this, popup = that._popup;\n                if (!popup) {\n                    var options = that.options;\n                    var selectorType;\n                    selectorType = FlatColorPicker;\n                    options.autoupdate = options.buttons !== true;\n                    delete options.select;\n                    delete options.change;\n                    delete options.cancel;\n                    var id = kendo.guid();\n                    var selectorWrapper = $('<div id=\"' + id + '\" class=\"k-colorpicker-popup\"></div>').appendTo(document.body);\n                    var selector = that._selector = new selectorType($('<div></div>').appendTo(selectorWrapper), options);\n                    that.wrapper.attr('aria-owns', id);\n                    that._popup = popup = selectorWrapper.kendoPopup({\n                        anchor: that.wrapper,\n                        adjustSize: {\n                            width: 5,\n                            height: 0\n                        }\n                    }).data('kendoPopup');\n                    selector.bind({\n                        select: function (ev) {\n                            that._updateUI(parseColor(ev.value), true);\n                        },\n                        change: function (ev) {\n                            if (that.options.buttons) {\n                                that._select(selector.color());\n                            } else {\n                                that._updateUI(parseColor(ev.value), true);\n                            }\n                            if (that.options.buttons || that._selector.options.view === 'palette' && that.options.closeOnSelect) {\n                                that.close();\n                            }\n                        },\n                        cancel: function () {\n                            that.close();\n                        }\n                    });\n                    popup.bind({\n                        close: function (ev) {\n                            if (that.trigger('close')) {\n                                ev.preventDefault();\n                                return;\n                            }\n                            that.wrapper.removeClass('k-focus');\n                            var color = selector.color();\n                            if (!that.options.buttons) {\n                                that._select(color);\n                            } else {\n                                that._select(that.color());\n                            }\n                            color = that.color();\n                            if (color && color.h) {\n                                that._cachedHue = color.h;\n                            }\n                            setTimeout(function () {\n                                if (that.wrapper && !that.wrapper.is('[unselectable=\\'on\\']')) {\n                                    that.wrapper.trigger('focus');\n                                }\n                            }, 0);\n                        },\n                        open: function (ev) {\n                            if (that.trigger('open')) {\n                                ev.preventDefault();\n                            } else {\n                                that.wrapper.addClass('k-focus');\n                            }\n                        },\n                        activate: function () {\n                            var hsvColor, selectedColor = that.color();\n                            if (selectedColor) {\n                                selectedColor = selectedColor.toHSV();\n                                hsvColor = Color.fromHSV(that._cachedHue || 0, selectedColor.s, selectedColor.v, selectedColor.a);\n                                selectedColor = selectedColor.equals(hsvColor) ? hsvColor : selectedColor;\n                            }\n                            selector.value(selectedColor);\n                            selector.focus();\n                            that.wrapper.addClass('k-focus');\n                        }\n                    });\n                }\n                return popup;\n            }\n        });\n        function preventDefault(ev) {\n            ev.preventDefault();\n        }\n        function bind(callback, obj) {\n            return function () {\n                return callback.apply(obj, arguments);\n            };\n        }\n        ui.plugin(ColorPicker);\n        kendo.cssProperties.registerPrefix('ColorPicker', 'k-picker-');\n        kendo.cssProperties.registerValues('ColorPicker', [{\n                prop: 'rounded',\n                values: kendo.cssProperties.roundedValues.concat([[\n                        'full',\n                        'full'\n                    ]])\n            }]);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}