{"version":3,"sources":["kendo.chat.js"],"names":["f","define","$","undefined","kendo","window","Widget","ui","extend","proxy","DOT","NS","keys","SEND_ICON","TOGGLE_ICON","messageBoxStyles","input","inputWrapper","button","buttonFlat","iconButton","buttonIcon","buttonSend","buttonToggle","iconAdd","hidden","inputSuffix","ChatMessageBox","init","element","options","fn","call","this","_wrapper","_attachEvents","_typing","events","messages","placeholder","toggleButton","sendButton","destroy","off","remove","empty","styles","inputId","guid","addClass","html","attr","appendTo","toolbar","toggleable","buttons","length","append","on","_keydown","_input","_inputFocusout","_buttonClick","_toggleToolbar","currentValue","val","start","_triggerTyping","e","key","keyCode","ENTER","preventDefault","_sendMessage","args","value","text","trigger","ev","originalEvent","chat","jQuery","amd","a1","a2","a3","DATA_K_BUTTON_NAME","SCROLL_LEFT_NAME","SCROLL_RIGHT_NAME","VISIBLE","DEFAULT_ANIMATION","effects","duration","NO_ANIMATION","expand","show","collapse","hide","toolbarStyles","buttonDefaults","buttonList","scrollButton","scrollButtonLeft","scrollButtonRight","scrollButtonLeftIcon","scrollButtonRightIcon","ChatToolBar","toolbarOptions","buttonsDefined","name","_createButtonList","scrollable","buttonsWidth","width","_initScrolling","_setupAnimation","toggle","_onClick","i","that","_createButton","btnOptions","buttonElm","data","iconClass","prepend","target","closest","is","_scrolling","_scroll","class","_refreshScrollButtons","commandName","buttonWidth","maxScrollSize","scrollAmmount","currentScroll","currentScrollLeft","scrollValue","Math","min","max","scrollLeft","isNaN","parseInt","animation","defaultExpandAnimation","defaultCollapseAnimation","reverse","_animationComplete","round","scrollWidth","clientWidth","children","last","outerWidth","skipAnimation","complete","kendoStop","kendoAnimate","Component","Calendar","viewStyles","ChatView","SPACE","MESSAGE_GROUP_TEMPLATE","template","SELF_MESSAGE_GROUP_TEMPLATE","TEXT_MESSAGE_TEMPLATE","TYPING_INDICATOR_TEMPLATE","SUGGESTED_ACTIONS_TEMPLATE","HERO_CARD_TEMPLATE","Templates","Components","registerTemplate","templateName","getTemplate","registerComponent","componentName","component","getComponent","Class","view","kendoCalendar","change","toString","type","wrapper","messageList","messageListContent","messageTime","messageGroup","message","only","first","middle","author","avatar","noAvatar","self","buttonPrimary","scrollButtonIcon","scrollButtonIconLeft","scrollButtonIconRight","typingIndicator","typingIndicatorBubble","bubble","suggestedActions","suggestedAction","cardWrapper","cardDeckScrollWrap","cardDeck","cardList","card","cardRich","cardBody","cardImage","cardTitle","cardSubtitle","cardActions","cardActionsVertical","cardAction","selected","_list","_lastSender","typingParticipants","_scrollable","isTyping","areTyping","and","_scrollDraggable","list","messageListLabel","_listClick","_messageClick","_suggestedActionClick","_cardActionClick","_suggestedActionKeydown","_scrollButtonClick","currentTarget","scrollToLeft","find","scrollContainer","siblings","lastCard","cardWidth","renderMessage","sender","timestamp","Date","bubbleElement","_renderTemplate","_renderBubble","_removeTypingParticipant","id","renderSuggestedActions","_removeSuggestedActions","_scrollToBottom","renderAttachments","cardElement","_renderAttachmentWrapper","attachmentLayout","cardContainer","attachments","contentType","content","_removeTypingIndicator","renderComponent","componentType","layout","buttonLeft","buttonRight","_renderScrollButton","directionClass","targetElement","hasClass","parents","_clearSelection","SPACEBAR","messageType","group","_getMessageGroup","_appendToGroup","templateOptions","_getMessageGroupTemplate","appendTarget","url","iconUrl","isOwnMessage","user","messageElement","childrenCount","indicator","filter","removeClass","_renderTypingIndicator","indicatorList","participants","_addTypingParticipant","_composeTypingParticipantsText","found","push","splice","typingAction","typingText","map","join","replace","trimRight","selectedClass","scrollTop","prop","chatStyles","canvas","viewWrapper","messageBoxWrapper","toolbarBoxWrapper","Chat","_events","_user","_view","_messageBox","_toolbar","notify","setOptions","_setEvents","messageBox","unbind","_resetToolbarButtons","getUser","height","uiElements","css","bind","postMessage","toggleToolbar","postArgs","from","renderUserTypingIndicator","clearUserTypingIndicator","removeTypingIndicator","plugin"],"mappings":"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","file":"kendo.chat.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('chat/messageBox', ['kendo.core'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var DOT = '.';\n        var NS = '.kendoChat';\n        var keys = kendo.keys;\n        var SEND_ICON = '<svg version=\"1.1\" ixmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" xml:space=\"preserve\"><path d=\"M0,14.3c-0.1,0.6,0.3,0.8,0.8,0.6l14.8-6.5c0.5-0.2,0.5-0.6,0-0.8L0.8,1.1C0.3,0.9-0.1,1.1,0,1.7l0.7,4.2C0.8,6.5,1.4,7,1.9,7.1l8.8,0.8c0.6,0.1,0.6,0.1,0,0.2L1.9,8.9C1.4,9,0.8,9.5,0.7,10.1L0,14.3z\"/></svg>';\n        var TOGGLE_ICON = '<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" style=\"enable-background:new 0 0 512 512;\" xml:space=\"preserve\"><g>   <path d=\"M128,240c0-26.4-21.6-48-48-48s-48,21.6-48,48s21.6,48,48,48S128,266.4,128,240z\"/>   <path d=\"M192,240c0,26.4,21.6,48,48,48c26.4,0,48-21.6,48-48s-21.6-48-48-48C213.6,192,192,213.6,192,240z\"/>   <path d=\"M352,240c0,26.4,21.6,48,48,48c26.4,0,48-21.6,48-48s-21.6-48-48-48C373.6,192,352,213.6,352,240z\"/></g></svg>';\n        var messageBoxStyles = {\n            input: 'k-input-inner',\n            inputWrapper: 'k-textbox k-input k-input-lg k-input-solid',\n            button: 'k-button',\n            buttonFlat: 'k-button-lg k-button-flat k-button-flat-base',\n            iconButton: 'k-icon-button',\n            buttonIcon: 'k-button-icon',\n            buttonSend: 'k-button-send',\n            buttonToggle: 'k-button-toggle',\n            iconAdd: 'k-icon k-i-add',\n            hidden: 'k-hidden',\n            inputSuffix: 'k-input-suffix'\n        };\n        var ChatMessageBox = Widget.extend({\n            init: function (element, options) {\n                Widget.fn.init.call(this, element, options);\n                this._wrapper();\n                this._attachEvents();\n                this._typing = false;\n            },\n            events: [],\n            options: {\n                messages: {\n                    placeholder: 'Type a message...',\n                    toggleButton: 'Toggle toolbar',\n                    sendButton: 'Send message'\n                }\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                if (this.input) {\n                    this.input.off(NS);\n                    this.input.remove();\n                    this.input = null;\n                }\n                this.element.off(NS);\n                this.element.empty();\n            },\n            _wrapper: function () {\n                var styles = ChatMessageBox.styles;\n                var options = this.options;\n                var messages = options.messages;\n                var inputId = 'inputId_' + kendo.guid();\n                $('<label>').addClass(styles.hidden).html(messages.placeholder).attr('for', inputId).appendTo(this.element);\n                this.inputWrapper = this.element.addClass(styles.inputWrapper).appendTo(this.element);\n                this.input = $('<input type=\\'text\\'>').addClass(styles.input).attr('id', inputId).attr('placeholder', messages.placeholder).appendTo(this.inputWrapper);\n                this.inputSuffix = $('<span></span>').addClass(styles.inputSuffix).appendTo(this.inputWrapper);\n                if (options.toolbar && options.toolbar.toggleable && options.toolbar.buttons && options.toolbar.buttons.length) {\n                    $('<button>').addClass(styles.button).addClass(styles.buttonFlat).addClass(styles.iconButton).addClass(styles.buttonToggle).attr('type', 'button').append($(TOGGLE_ICON)).appendTo(this.inputSuffix).attr('title', messages.toggleButton).attr('aria-label', messages.toggleButton);\n                }\n                $('<button>').addClass(styles.button).addClass(styles.buttonFlat).addClass(styles.iconButton).addClass(styles.buttonSend).append($(SEND_ICON)).appendTo(this.inputSuffix).attr('title', messages.sendButton).attr('aria-label', messages.sendButton);\n            },\n            _attachEvents: function () {\n                var styles = ChatMessageBox.styles;\n                this.input.on('keydown' + NS, proxy(this._keydown, this)).on('input' + NS, proxy(this._input, this)).on('focusout' + NS, proxy(this._inputFocusout, this));\n                this.element.on('click' + NS, DOT + styles.buttonSend, proxy(this._buttonClick, this));\n                this.element.on('click' + NS, DOT + styles.buttonToggle, proxy(this._toggleToolbar, this));\n            },\n            _input: function () {\n                var currentValue = this.input.val();\n                var start = currentValue.length > 0;\n                this._triggerTyping(start);\n            },\n            _keydown: function (e) {\n                var key = e.keyCode;\n                switch (key) {\n                case keys.ENTER:\n                    e.preventDefault();\n                    this._sendMessage();\n                    break;\n                }\n            },\n            _buttonClick: function (e) {\n                e.preventDefault();\n                this._sendMessage();\n            },\n            _sendMessage: function () {\n                var value = this.input.val();\n                if (!value.length) {\n                    return;\n                }\n                this._triggerTyping(false);\n                var args = { text: value };\n                this.trigger('sendMessage', args);\n                this.input.val('');\n            },\n            _inputFocusout: function () {\n                this._triggerTyping(false);\n            },\n            _triggerTyping: function (start) {\n                if (start) {\n                    if (!this._typing) {\n                        this.trigger('typingStart', {});\n                        this._typing = true;\n                    }\n                } else {\n                    if (this._typing) {\n                        this.trigger('typingEnd', {});\n                        this._typing = false;\n                    }\n                }\n            },\n            _toggleToolbar: function (ev) {\n                this.trigger('toggleToolbar', { originalEvent: ev });\n            }\n        });\n        extend(true, ChatMessageBox, { styles: messageBoxStyles });\n        extend(kendo, { chat: { ChatMessageBox: ChatMessageBox } });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('chat/toolbar', ['kendo.core'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var DOT = '.';\n        var NS = '.kendoChat';\n        var DATA_K_BUTTON_NAME = 'kButtonName';\n        var SCROLL_LEFT_NAME = 'chatToolbarScrollLeft';\n        var SCROLL_RIGHT_NAME = 'chatToolbarScrollRight';\n        var VISIBLE = ':visible';\n        var DEFAULT_ANIMATION = {\n            effects: 'expand:vertical',\n            duration: 200\n        };\n        var NO_ANIMATION = {\n            expand: { show: true },\n            collapse: { hide: true }\n        };\n        var toolbarStyles = {\n            button: 'k-button',\n            buttonDefaults: 'k-button-md k-rounded-md k-button-solid k-button-solid-base',\n            buttonList: 'k-button-list',\n            scrollButton: 'k-scroll-button',\n            scrollButtonLeft: 'k-scroll-button-left',\n            scrollButtonRight: 'k-scroll-button-right',\n            scrollButtonLeftIcon: 'k-icon k-i-arrow-chevron-left',\n            scrollButtonRightIcon: 'k-icon k-i-arrow-chevron-right',\n            iconButton: 'k-icon-button'\n        };\n        var ChatToolBar = Widget.extend({\n            init: function (element, options) {\n                options = extend({}, options, { name: 'ChatToolbar' });\n                var toolbarOptions = options.toolbar;\n                var buttonsDefined = toolbarOptions.buttons && toolbarOptions.buttons.length;\n                Widget.fn.init.call(this, element, options);\n                if (buttonsDefined) {\n                    this._createButtonList();\n                }\n                if (buttonsDefined && toolbarOptions.scrollable && this.buttonsWidth() > this.element.width()) {\n                    this._initScrolling();\n                }\n                this._setupAnimation();\n                if (buttonsDefined && toolbarOptions.toggleable) {\n                    this.toggle(true);\n                }\n                this.element.on('click' + NS, proxy(this._onClick, this));\n            },\n            events: ['click'],\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                this.element.off(NS);\n                this.element.empty();\n            },\n            _createButtonList: function () {\n                var that = this;\n                var styles = ChatToolBar.styles;\n                var buttons = that.options.toolbar.buttons;\n                var buttonList = $('<div class=\\'' + styles.buttonList + '\\'></div>');\n                for (var i = 0; i < buttons.length; i++) {\n                    var button = that._createButton(buttons[i]);\n                    buttonList.append(button);\n                }\n                buttonList.appendTo(this.element);\n                this.buttonList = buttonList;\n            },\n            _createButton: function (btnOptions) {\n                var styles = ChatToolBar.styles;\n                var buttonElm = $('<button>');\n                if (typeof btnOptions === 'string') {\n                    btnOptions = { name: btnOptions };\n                }\n                buttonElm.attr(btnOptions.attr || {}).attr('title', btnOptions.text || btnOptions.name).attr('aria-label', btnOptions.text || btnOptions.name).attr('type', 'button').addClass(btnOptions.name).data(DATA_K_BUTTON_NAME, btnOptions.name).addClass(styles.button).addClass(styles.buttonDefaults);\n                if (btnOptions.iconClass) {\n                    buttonElm.addClass(styles.iconButton);\n                    buttonElm.prepend('<span class=\\'k-button-icon ' + btnOptions.iconClass + '\\'></span>');\n                }\n                return buttonElm;\n            },\n            _onClick: function (ev) {\n                var styles = ChatToolBar.styles;\n                var target = $(ev.target).closest(DOT + styles.button);\n                if (target.is(DOT + styles.scrollButton) && !this._scrolling) {\n                    this._scroll(target.data(DATA_K_BUTTON_NAME));\n                }\n                if (target.data(DATA_K_BUTTON_NAME)) {\n                    this.trigger('click', {\n                        button: target[0],\n                        name: target.data(DATA_K_BUTTON_NAME),\n                        originalEvent: ev\n                    });\n                }\n            },\n            _initScrolling: function () {\n                var styles = ChatToolBar.styles;\n                this.scrollButtonLeft = this._createButton({\n                    name: SCROLL_LEFT_NAME,\n                    iconClass: styles.scrollButtonLeftIcon,\n                    attr: { 'class': styles.scrollButton + ' ' + styles.scrollButtonLeft }\n                });\n                this.scrollButtonRight = this._createButton({\n                    name: SCROLL_RIGHT_NAME,\n                    iconClass: styles.scrollButtonRightIcon,\n                    attr: { 'class': styles.scrollButton + ' ' + styles.scrollButtonRight }\n                });\n                this.element.prepend(this.scrollButtonLeft);\n                this.element.append(this.scrollButtonRight);\n                this._refreshScrollButtons();\n                this.element.on('keydown' + NS, proxy(this._refreshScrollButtons, this));\n            },\n            _scroll: function (commandName) {\n                var that = this;\n                var buttonWidth = that.buttonWidth();\n                var maxScrollSize = this.maxScrollSize();\n                var scrollAmmount = commandName === SCROLL_LEFT_NAME ? buttonWidth * -1 : buttonWidth;\n                var currentScroll = this.currentScrollLeft();\n                var scrollValue = currentScroll + scrollAmmount;\n                scrollValue = Math.min(Math.max(scrollValue, 0), maxScrollSize);\n                if (commandName !== SCROLL_LEFT_NAME && commandName !== SCROLL_RIGHT_NAME) {\n                    return;\n                }\n                kendo.scrollLeft(that.buttonList, scrollValue);\n                that._refreshScrollButtons(scrollValue);\n            },\n            _refreshScrollButtons: function (value) {\n                var maxScrollSize = this.maxScrollSize();\n                var currentScrollLeft = value === undefined || isNaN(parseInt(value, 10)) ? this.currentScrollLeft() : value;\n                if (!this.scrollButtonLeft && !this.scrollButtonRight) {\n                    return;\n                }\n                this.scrollButtonLeft.toggle(currentScrollLeft !== 0);\n                this.scrollButtonRight.toggle(currentScrollLeft !== maxScrollSize);\n            },\n            _setupAnimation: function () {\n                var animation = this.options.toolbar.animation;\n                var defaultExpandAnimation = extend({}, DEFAULT_ANIMATION);\n                var defaultCollapseAnimation = extend({\n                    reverse: true,\n                    hide: true\n                }, DEFAULT_ANIMATION);\n                if (animation === false) {\n                    animation = extend(true, {}, NO_ANIMATION);\n                } else {\n                    animation = extend(true, {\n                        expand: defaultExpandAnimation,\n                        collapse: defaultCollapseAnimation\n                    }, animation);\n                }\n                this.options.toolbar.animation = animation;\n            },\n            _animationComplete: function () {\n                this._refreshScrollButtons();\n            },\n            currentScrollLeft: function () {\n                return Math.round(kendo.scrollLeft(this.buttonList));\n            },\n            maxScrollSize: function () {\n                return Math.round(this.buttonList[0].scrollWidth - this.buttonList[0].clientWidth);\n            },\n            buttons: function () {\n                var styles = ChatToolBar.styles;\n                return this.buttonList ? this.buttonList.children(DOT + styles.button) : null;\n            },\n            buttonWidth: function () {\n                return Math.round(this.buttons().last().outerWidth(true));\n            },\n            buttonsWidth: function () {\n                var width = 0;\n                if (this.buttons()) {\n                    width = this.buttonWidth() * this.buttons().length;\n                }\n                return width;\n            },\n            toggle: function (skipAnimation) {\n                var animation = this.options.toolbar.animation;\n                if (skipAnimation) {\n                    animation = extend(true, {}, NO_ANIMATION);\n                }\n                animation.expand.complete = proxy(this._animationComplete, this);\n                animation.collapse.complete = proxy(this._animationComplete, this);\n                if (this.element.is(VISIBLE)) {\n                    this.element.kendoStop().kendoAnimate(animation.collapse);\n                } else {\n                    this.element.kendoStop().kendoAnimate(animation.expand);\n                }\n            }\n        });\n        extend(true, ChatToolBar, { styles: toolbarStyles });\n        extend(kendo.chat, { ChatToolBar: ChatToolBar });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('chat/view', [\n        'kendo.core',\n        'kendo.draganddrop'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var DOT = '.';\n        var SPACE = ' ';\n        var NS = '.kendoChat';\n        var MESSAGE_GROUP_TEMPLATE = kendo.template('<div #:text# class=\"#=styles.messageGroup# #= url ? \"\" : styles.noAvatar #\">' + '<p class=\"#=styles.author#\">#:text#</p>' + '# if (url) { #' + '<img src=\"#=url#\" alt=\"#:text#\" class=\"#=styles.avatar#\">' + '# } #' + '</div>');\n        var SELF_MESSAGE_GROUP_TEMPLATE = kendo.template('<div me class=\"#=styles.messageGroup# #=styles.self# #= url ? \"\" : styles.noAvatar #\">' + '# if (url) { #' + '<img src=\"#=url#\" alt=\"#:text#\" class=\"#=styles.avatar#\">' + '# } #' + '</div>');\n        var TEXT_MESSAGE_TEMPLATE = kendo.template('<div class=\"#=styles.message#\">' + '<time class=\"#=styles.messageTime#\">#= kendo.toString(kendo.parseDate(timestamp), \"HH:mm:ss\") #</time>' + '<div class=\"#=styles.bubble#\">#:text#</div>' + '</div>');\n        var TYPING_INDICATOR_TEMPLATE = kendo.template('<div class=\"#=styles.messageListContent# #=styles.typingIndicatorBubble#\">' + '<p class=\"#=styles.author#\">#:text#</p>' + '<div class=\"#=styles.message#\">' + '<div class=\"#=styles.bubble#\">' + '<div class=\"#=styles.typingIndicator#\">' + '<span></span><span></span><span></span>' + '</div>' + '</div>' + '</div>' + '</div>');\n        var SUGGESTED_ACTIONS_TEMPLATE = kendo.template('<div class=\"#=styles.suggestedActions#\">' + '# for (var i = 0; i < suggestedActions.length; i++) { #' + '<span role=\"button\" tabindex=\"0\" class=\"#=styles.suggestedAction#\" data-value=\"#:suggestedActions[i].value#\">#:suggestedActions[i].title#</span>' + '# } #' + '</div>');\n        var HERO_CARD_TEMPLATE = kendo.template('<div class=\"#=styles.card# #=styles.cardRich#\">' + '# if (typeof images !== \"undefined\" && images.length > 0) { #' + '<img src=\"#:images[0].url#\" alt=\"#:images[0].alt#\" class=\"#=styles.cardImage#\" />' + '# } #' + '<div class=\"#=styles.cardBody#\">' + '# if (typeof title !== \"undefined\") { #' + '<h5 class=\"#=styles.cardTitle#\">#:title#</h5>' + '# } #' + '# if (typeof subtitle !== \"undefined\") { #' + '<h6 class=\"#=styles.cardSubtitle#\">#:subtitle#</h6>' + '# } #' + '# if (typeof text !== \"undefined\") { #' + '<p>#:text#</p>' + '# } #' + '</div>' + '# if (typeof buttons !== \"undefined\" && buttons.length > 0) { #' + '<div class=\"#=styles.cardActions# #=styles.cardActionsVertical#\">' + '# for (var i = 0; i < buttons.length; i++) { #' + '<span class=\"#=styles.cardAction#\"><span class=\"#=styles.button# #=styles.buttonPrimary#\" data-value=\"#:buttons[i].value#\">#:buttons[i].title#</span></span>' + '# } #' + '</div>' + '# } #' + '</div>');\n        extend(kendo.chat, {\n            Templates: {},\n            Components: {}\n        });\n        kendo.chat.registerTemplate = function (templateName, template) {\n            kendo.chat.Templates[templateName] = kendo.template(template);\n        };\n        kendo.chat.getTemplate = function (templateName) {\n            return kendo.chat.Templates[templateName] || TEXT_MESSAGE_TEMPLATE;\n        };\n        kendo.chat.registerTemplate('text', TEXT_MESSAGE_TEMPLATE);\n        kendo.chat.registerTemplate('message', TEXT_MESSAGE_TEMPLATE);\n        kendo.chat.registerTemplate('typing', TYPING_INDICATOR_TEMPLATE);\n        kendo.chat.registerTemplate('suggestedAction', SUGGESTED_ACTIONS_TEMPLATE);\n        kendo.chat.registerTemplate('heroCard', HERO_CARD_TEMPLATE);\n        kendo.chat.registerTemplate('application/vnd.microsoft.card.hero', HERO_CARD_TEMPLATE);\n        kendo.chat.registerComponent = function (componentName, component) {\n            kendo.chat.Components[componentName] = component;\n        };\n        kendo.chat.getComponent = function (componentName) {\n            return kendo.chat.Components[componentName] || null;\n        };\n        var Component = kendo.chat.Component = kendo.Class.extend({\n            init: function (options, view) {\n                this.element = $('<div></div>');\n                this.options = options;\n                this.view = view;\n            },\n            destroy: function () {\n                kendo.destroy(this.element);\n            }\n        });\n        var Calendar = Component.extend({\n            init: function (options, view) {\n                Component.fn.init.call(this, options, view);\n                this.element.kendoCalendar({\n                    change: function () {\n                        view.trigger('suggestedAction', {\n                            text: kendo.toString(this.value(), 'd'),\n                            type: 'message'\n                        });\n                    }\n                });\n            },\n            destroy: function () {\n            }\n        });\n        kendo.chat.registerComponent('calendar', Calendar);\n        var viewStyles = {\n            wrapper: 'k-widget k-chat',\n            messageList: 'k-avatars',\n            messageListContent: 'k-message-list-content',\n            messageTime: 'k-message-time',\n            messageGroup: 'k-message-group',\n            message: 'k-message',\n            only: 'k-only',\n            first: 'k-first',\n            middle: 'k-middle',\n            last: 'k-last',\n            author: 'k-author',\n            avatar: 'k-avatar',\n            noAvatar: 'k-no-avatar',\n            self: 'k-alt',\n            button: 'k-button',\n            buttonDefaults: 'k-button-md k-rounded-md k-button-solid k-button-solid-base',\n            iconButton: 'k-icon-button',\n            buttonIcon: 'k-button-icon',\n            buttonPrimary: 'k-button-md k-rounded-md k-button-flat k-button-flat-primary',\n            scrollButtonIcon: 'k-icon',\n            scrollButtonIconLeft: 'k-i-arrow-chevron-left',\n            scrollButtonIconRight: 'k-i-arrow-chevron-right',\n            typingIndicator: 'k-typing-indicator',\n            typingIndicatorBubble: 'k-typing-indicator-bubble',\n            bubble: 'k-bubble',\n            suggestedActions: 'k-quick-replies',\n            suggestedAction: 'k-quick-reply',\n            cardWrapper: 'k-card-container',\n            cardDeckScrollWrap: 'k-card-deck-scrollwrap',\n            cardDeck: 'k-card-deck',\n            cardList: 'k-card-list',\n            card: 'k-card',\n            cardRich: 'k-card-type-rich',\n            cardBody: 'k-card-body',\n            cardImage: 'k-card-image',\n            cardTitle: 'k-card-title',\n            cardSubtitle: 'k-card-subtitle',\n            cardActions: 'k-card-actions',\n            cardActionsVertical: 'k-card-actions-vertical',\n            cardAction: 'k-card-action',\n            selected: 'k-state-selected'\n        };\n        var ChatView = kendo.chat.ChatView = Widget.extend({\n            init: function (element, options) {\n                Widget.fn.init.call(this, element, options);\n                this._list();\n                this._lastSender = null;\n                this.typingParticipants = [];\n                this._attachEvents();\n                this._scrollable();\n            },\n            events: [],\n            options: {\n                messages: {\n                    isTyping: ' is typing.',\n                    areTyping: ' are typing.',\n                    and: ' and '\n                }\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                if (this._scrollDraggable) {\n                    this._scrollDraggable.destroy();\n                }\n                this.element.empty();\n                this.element.off(NS);\n                this.list = null;\n                this._lastSender = null;\n            },\n            _list: function () {\n                var viewStyles = ChatView.styles;\n                this.element.addClass(viewStyles.messageList).attr('role', 'log').attr('aria-label', this.options.messages.messageListLabel);\n                this.list = $('<div>').addClass(viewStyles.messageListContent).appendTo(this.element);\n            },\n            _attachEvents: function () {\n                var styles = ChatView.styles;\n                this.element.on('click' + NS, proxy(this._listClick, this)).on('click' + NS, DOT + styles.message, proxy(this._messageClick, this)).on('click' + NS, DOT + styles.suggestedAction, proxy(this._suggestedActionClick, this)).on('click' + NS, DOT + styles.cardAction + SPACE + DOT + styles.button, proxy(this._cardActionClick, this));\n                this.element.on('keydown' + NS, DOT + styles.suggestedAction, proxy(this._suggestedActionKeydown, this));\n            },\n            _scrollable: function () {\n                var viewStyles = ChatView.styles;\n                this.element.on('click' + NS, DOT + viewStyles.cardDeckScrollWrap + SPACE + DOT + viewStyles.button, proxy(this._scrollButtonClick, this));\n            },\n            _scrollButtonClick: function (e) {\n                var viewStyles = ChatView.styles;\n                var button = $(e.currentTarget);\n                var scrollToLeft = button.find(DOT + viewStyles.scrollButtonIconLeft).length !== 0;\n                var scrollContainer = button.siblings(DOT + viewStyles.cardDeck);\n                var lastCard = scrollContainer.find(DOT + viewStyles.card).last();\n                var cardWidth = lastCard.outerWidth(true);\n                if (scrollToLeft) {\n                    kendo.scrollLeft(scrollContainer, kendo.scrollLeft(scrollContainer) - cardWidth);\n                } else {\n                    kendo.scrollLeft(scrollContainer, kendo.scrollLeft(scrollContainer) + cardWidth);\n                }\n            },\n            getTemplate: function (templateName) {\n                return kendo.chat.getTemplate(templateName);\n            },\n            getComponent: function (type) {\n                return kendo.chat.getComponent(type);\n            },\n            renderMessage: function (message, sender) {\n                if (!message.timestamp) {\n                    message.timestamp = new Date();\n                }\n                if (!message.text) {\n                    message.text = '';\n                }\n                var bubbleElement = this._renderTemplate(message.type, message);\n                this._renderBubble(message.type, bubbleElement, sender);\n                if (message.type == 'typing') {\n                    if (this.typingParticipants.length > 0) {\n                        this._removeTypingParticipant(sender);\n                    }\n                } else {\n                    this._lastSender = sender.id;\n                }\n            },\n            renderSuggestedActions: function (suggestedActions) {\n                this._removeSuggestedActions();\n                var element = this._renderTemplate('suggestedAction', { suggestedActions: suggestedActions });\n                this.list.append(element);\n                this._scrollToBottom();\n            },\n            renderAttachments: function (options) {\n                var wrapper = this._renderAttachmentWrapper(options.attachmentLayout);\n                var cardContainer = options.attachmentLayout === 'carousel' ? wrapper.find(DOT + ChatView.styles.cardDeck) : wrapper;\n                var attachments = options.attachments;\n                if (!attachments.length) {\n                    return;\n                }\n                for (var i = 0; i < attachments.length; i++) {\n                    var cardElement = this._renderTemplate(attachments[i].contentType, attachments[i].content);\n                    cardContainer.append(cardElement);\n                }\n                this._removeSuggestedActions();\n                this._removeTypingIndicator();\n                this.list.append(wrapper);\n                this._lastSender = null;\n            },\n            renderComponent: function (type) {\n                var componentType = this.getComponent(type);\n                var component = new componentType({}, this);\n                this.list.append(component.element);\n                this._scrollToBottom();\n            },\n            _renderAttachmentWrapper: function (layout) {\n                var viewStyles = ChatView.styles;\n                var wrapper = $('<div>');\n                if (layout === 'carousel') {\n                    wrapper.addClass(viewStyles.cardDeckScrollWrap);\n                    var buttonLeft = this._renderScrollButton(viewStyles.scrollButtonIconLeft);\n                    wrapper.append(buttonLeft);\n                    wrapper.append($('<div>').addClass(viewStyles.cardDeck));\n                    var buttonRight = this._renderScrollButton(viewStyles.scrollButtonIconRight);\n                    wrapper.append(buttonRight);\n                } else {\n                    wrapper.addClass(viewStyles.cardList);\n                }\n                return wrapper;\n            },\n            _renderScrollButton: function (directionClass) {\n                var viewStyles = ChatView.styles;\n                return $('<button>').addClass(viewStyles.button).addClass(viewStyles.buttonDefaults).addClass(viewStyles.iconButton).append($('<span>').addClass(viewStyles.buttonIcon).addClass(viewStyles.scrollButtonIcon).addClass(directionClass));\n            },\n            _removeSuggestedActions: function () {\n                this.list.find(DOT + ChatView.styles.suggestedActions).remove();\n            },\n            _listClick: function (e) {\n                var styles = ChatView.styles;\n                var targetElement = $(e.target);\n                if (targetElement.hasClass(styles.message) || targetElement.parents(DOT + styles.message).length) {\n                    return;\n                }\n                this._clearSelection();\n            },\n            _messageClick: function (e) {\n                this._clearSelection();\n                $(e.currentTarget).addClass(ChatView.styles.selected);\n            },\n            _suggestedActionClick: function (e) {\n                var text = $(e.target).data('value') || '';\n                this.trigger('actionClick', { text: text });\n                this._removeSuggestedActions();\n            },\n            _suggestedActionKeydown: function (e) {\n                if (e.keyCode === kendo.keys.SPACEBAR || e.keyCode === kendo.keys.ENTER) {\n                    this._suggestedActionClick(e);\n                }\n            },\n            _cardActionClick: function (e) {\n                var text = $(e.target).data('value') || '';\n                this.trigger('actionClick', { text: text });\n            },\n            _renderBubble: function (messageType, bubbleElement, sender) {\n                this._removeSuggestedActions();\n                this._removeTypingIndicator();\n                var group = this._getMessageGroup(sender, messageType);\n                this._appendToGroup(group, bubbleElement, messageType);\n                this._scrollToBottom();\n            },\n            _renderTemplate: function (type, options) {\n                var componentType = this.getComponent(type);\n                var element;\n                if (componentType) {\n                    var component = new componentType(options, this);\n                    element = component.element;\n                } else {\n                    var template = this.getTemplate(type);\n                    var templateOptions = extend(true, {}, options, { styles: ChatView.styles });\n                    element = $(template(templateOptions));\n                }\n                return element;\n            },\n            _getMessageGroup: function (sender, messageType) {\n                var viewStyles = ChatView.styles;\n                var template = this._getMessageGroupTemplate(sender, messageType);\n                var appendTarget = messageType == 'typing' ? this.element : this.list;\n                var group;\n                if (sender.id === this._lastSender && this._lastSender !== null && messageType !== 'typing') {\n                    group = this.list.find(DOT + viewStyles.messageGroup).last();\n                    if (group.length) {\n                        return group;\n                    }\n                }\n                return $(template({\n                    text: sender.name,\n                    url: sender.iconUrl,\n                    styles: viewStyles\n                })).appendTo(appendTarget);\n            },\n            _getMessageGroupTemplate: function (sender, messageType) {\n                var isOwnMessage = sender.id === this.options.user.id;\n                var template = isOwnMessage ? SELF_MESSAGE_GROUP_TEMPLATE : MESSAGE_GROUP_TEMPLATE;\n                if (messageType == 'typing') {\n                    template = TYPING_INDICATOR_TEMPLATE;\n                }\n                return template;\n            },\n            _appendToGroup: function (group, messageElement, messageType) {\n                var viewStyles = ChatView.styles;\n                var children = group.find(DOT + viewStyles.message);\n                var childrenCount = children.length;\n                var indicator = this.element.find(DOT + viewStyles.typingIndicator);\n                if (indicator.length && messageType == 'typing') {\n                    return;\n                }\n                messageElement.addClass(childrenCount === 0 ? viewStyles.only : viewStyles.last);\n                children.filter(DOT + viewStyles.only).removeClass(viewStyles.only).addClass(viewStyles.first);\n                children.filter(DOT + viewStyles.last).removeClass(viewStyles.last).addClass(viewStyles.middle);\n                group.append(messageElement);\n            },\n            _renderTypingIndicator: function (sender) {\n                var indicator = this.element.find(DOT + viewStyles.typingIndicatorBubble), indicatorList, participants;\n                this._addTypingParticipant(sender);\n                if (indicator.length) {\n                    participants = this._composeTypingParticipantsText(this.typingParticipants);\n                    indicatorList = indicator.find(DOT + viewStyles.author).first();\n                    indicatorList.text(participants);\n                } else {\n                    $(TYPING_INDICATOR_TEMPLATE({\n                        text: sender.name + this.options.messages.isTyping,\n                        styles: viewStyles\n                    })).appendTo(this.element);\n                }\n                this._scrollToBottom();\n            },\n            _addTypingParticipant: function (sender) {\n                var found = false;\n                for (var i = 0; i < this.typingParticipants.length; i += 1) {\n                    if (this.typingParticipants[i].id == sender.id) {\n                        found = true;\n                        break;\n                    }\n                }\n                if (!found) {\n                    this.typingParticipants.push(sender);\n                }\n            },\n            _removeTypingParticipant: function (sender) {\n                var indicator = this.element.find(DOT + viewStyles.typingIndicatorBubble), indicatorList, participants;\n                if (indicator.length) {\n                    for (var i = 0; i < this.typingParticipants.length; i += 1) {\n                        if (this.typingParticipants[i].id == sender.id) {\n                            this.typingParticipants.splice(i, 1);\n                        }\n                    }\n                    participants = this._composeTypingParticipantsText(this.typingParticipants);\n                    if (participants === '') {\n                        indicator.remove();\n                    } else {\n                        indicatorList = indicator.find(DOT + viewStyles.author).first();\n                        indicatorList.text(participants);\n                    }\n                }\n            },\n            _composeTypingParticipantsText: function (participants) {\n                var messages = this.options.messages, typingAction = participants.length == 1 ? messages.isTyping : messages.areTyping, typingText = '';\n                if (participants.length === 0) {\n                    return typingText;\n                }\n                typingText = this.typingParticipants.map(function (author) {\n                    return author.name;\n                }).join(', ').replace(/,(?!.*,)/gim, messages.and.trimRight()) + typingAction;\n                return typingText;\n            },\n            _removeTypingIndicator: function () {\n                var indicator = this.element.find(DOT + viewStyles.typingIndicatorBubble);\n                if (indicator.length) {\n                    this.typingParticipants = [];\n                    indicator.remove();\n                }\n            },\n            _clearSelection: function () {\n                var selectedClass = ChatView.styles.selected;\n                this.element.find(DOT + selectedClass).removeClass(selectedClass);\n            },\n            _scrollToBottom: function () {\n                this.element.scrollTop(this.element.prop('scrollHeight'));\n            }\n        });\n        extend(true, ChatView, { styles: viewStyles });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.chat', [\n        'chat/messageBox',\n        'chat/toolbar',\n        'chat/view'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'chat',\n        name: 'Chat',\n        category: 'web',\n        description: 'The Chat component.',\n        depends: [\n            'core',\n            'draganddrop'\n        ]\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var DOT = '.';\n        var chatStyles = {\n            wrapper: 'k-widget k-chat',\n            canvas: 'k-chat-canvas',\n            viewWrapper: 'k-message-list',\n            messageBoxWrapper: 'k-message-box',\n            toolbarBoxWrapper: 'k-toolbar-box'\n        };\n        var Chat = Widget.extend({\n            init: function (element, options, events) {\n                Widget.fn.init.call(this, element, options);\n                if (events) {\n                    this._events = events;\n                }\n                this._user();\n                this._wrapper();\n                this._view();\n                this._messageBox();\n                if (options && options.toolbar && options.toolbar.buttons) {\n                    this._toolbar();\n                }\n                kendo.notify(this);\n            },\n            events: [\n                'typingStart',\n                'typingEnd',\n                'post',\n                'sendMessage',\n                'actionClick',\n                'toolClick'\n            ],\n            options: {\n                user: {\n                    name: 'User',\n                    iconUrl: ''\n                },\n                name: 'Chat',\n                messages: {\n                    messageListLabel: 'Message list',\n                    placeholder: 'Type a message...',\n                    toggleButton: 'Toggle toolbar',\n                    sendButton: 'Send message'\n                },\n                toolbar: false\n            },\n            setOptions: function (options) {\n                this._setEvents(options);\n                $.extend(true, this.options, options);\n                if (this.toolbar && 'toolbar' in options) {\n                    this.toolbar.destroy();\n                    this.toolbar = null;\n                }\n                if (this.messageBox) {\n                    this.messageBox.unbind();\n                    this.messageBox.destroy();\n                    this.messageBox = null;\n                }\n                this._messageBox();\n                if ('toolbar' in options) {\n                    this._resetToolbarButtons(options);\n                    this._toolbar();\n                }\n            },\n            _resetToolbarButtons: function (options) {\n                var toolbarBoxWrapper = this.wrapper.find(DOT + chatStyles.toolbarBoxWrapper);\n                if (!toolbarBoxWrapper.is(':visible')) {\n                    toolbarBoxWrapper.show();\n                }\n                if (options.toolbar && typeof options.toolbar == 'object' && 'buttons' in options.toolbar) {\n                    this.options.toolbar.buttons = options.toolbar.buttons;\n                }\n            },\n            destroy: function () {\n                if (this.view) {\n                    this.view.unbind();\n                    this.view.destroy();\n                    this.view = null;\n                }\n                if (this.messageBox) {\n                    this.messageBox.unbind();\n                    this.messageBox.destroy();\n                    this.messageBox = null;\n                }\n                if (this.toolbar) {\n                    this.toolbar.destroy();\n                    this.toolbar = null;\n                }\n                Widget.fn.destroy.call(this);\n            },\n            _user: function () {\n                this.options.user.id = kendo.guid();\n            },\n            getUser: function () {\n                return extend(true, {}, this.options.user);\n            },\n            _wrapper: function () {\n                var chatStyles = Chat.styles;\n                var options = this.options;\n                var height = options.height;\n                var width = options.width;\n                var uiElements = '<div class=\\'' + chatStyles.viewWrapper + '\\'></div>' + '<span class=\\'' + chatStyles.messageBoxWrapper + '\\'></span>' + '<div class=\\'' + chatStyles.toolbarBoxWrapper + '\\' role=\\'toolbar\\' style=\\'display:none;\\'></div>';\n                this.wrapper = this.element.addClass(chatStyles.wrapper).append(uiElements);\n                if (options.toolbar && options.toolbar.buttons && options.toolbar.buttons.length) {\n                    this.wrapper.find(DOT + chatStyles.toolbarBoxWrapper).show();\n                }\n                if (height) {\n                    this.wrapper.height(height);\n                }\n                if (width) {\n                    this.wrapper.css('max-width', width);\n                }\n            },\n            _view: function () {\n                var that = this;\n                var chatStyles = Chat.styles;\n                var options = extend(true, {}, this.options);\n                var element = this.wrapper.find(DOT + chatStyles.viewWrapper + '');\n                this.view = new kendo.chat.ChatView(element, options);\n                this.view.bind('actionClick', function (args) {\n                    that.trigger('actionClick', args);\n                    that.postMessage(args.text);\n                });\n            },\n            _messageBox: function () {\n                var that = this;\n                var chatStyles = Chat.styles;\n                var options = extend(true, {}, this.options);\n                var element = this.wrapper.find(DOT + chatStyles.messageBoxWrapper + '');\n                this.messageBox = new kendo.chat.ChatMessageBox(element, options);\n                this.messageBox.bind('typingStart', function (args) {\n                    that.trigger('typingStart', args);\n                }).bind('typingEnd', function (args) {\n                    that.trigger('typingEnd', args);\n                }).bind('sendMessage', function (args) {\n                    that.trigger('sendMessage', args);\n                    that.postMessage(args.text);\n                }).bind('toggleToolbar', function () {\n                    that.toggleToolbar();\n                });\n            },\n            _toolbar: function () {\n                var that = this;\n                var chatStyles = Chat.styles;\n                var options = extend(true, {}, that.options);\n                var element = that.wrapper.find(DOT + chatStyles.toolbarBoxWrapper + '');\n                if (options.toolbar.scrollable === undefined) {\n                    this.options.toolbar.scrollable = options.toolbar.scrollable = true;\n                }\n                if (options.toolbar.toggleable === undefined) {\n                    this.options.toolbar.toggleable = options.toolbar.toggleable = false;\n                }\n                that.toolbar = new kendo.chat.ChatToolBar(element, options);\n                that.toolbar.bind('click', function (ev) {\n                    that.trigger('toolClick', {\n                        sender: that,\n                        name: ev.name,\n                        button: ev.button,\n                        messageBox: that.messageBox.input[0],\n                        originalEvent: ev.originalEvent\n                    });\n                });\n            },\n            postMessage: function (message) {\n                var postArgs = extend(true, {}, {\n                    text: message,\n                    type: 'message',\n                    timestamp: new Date(),\n                    from: this.getUser()\n                });\n                this.trigger('post', postArgs);\n                this.renderMessage(postArgs, postArgs.from);\n            },\n            renderMessage: function (message, sender) {\n                this.view.renderMessage(message, sender);\n            },\n            renderSuggestedActions: function (suggestedActions) {\n                this.view.renderSuggestedActions(suggestedActions);\n            },\n            renderAttachments: function (options, sender) {\n                this.view.renderAttachments(options, sender);\n            },\n            toggleToolbar: function (skipAnimation) {\n                this.toolbar.toggle(skipAnimation);\n            },\n            renderUserTypingIndicator: function (sender) {\n                this.view._renderTypingIndicator(sender);\n            },\n            clearUserTypingIndicator: function (sender) {\n                this.view._removeTypingParticipant(sender);\n            },\n            removeTypingIndicator: function () {\n                this.view._removeTypingIndicator();\n            }\n        });\n        kendo.ui.plugin(Chat);\n        extend(true, Chat, { styles: chatStyles });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}