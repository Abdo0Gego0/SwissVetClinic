{"version":3,"sources":["kendo.virtuallist.js"],"names":["f","define","$","undefined","lastFrom","array","length","toArray","value","Array","isPrimitive","dataItem","getItemCount","screenHeight","listScreens","itemHeight","Math","ceil","appendChild","parent","className","tagName","element","document","createElement","getDefaultItemHeight","listSize","lineHeight","mockList","css","position","left","visibility","appendTo","body","parseFloat","kendo","getComputedStyles","find","height","remove","bufferSizes","opposite","down","up","listValidator","options","downThreshold","threshold","upThreshold","list","scrollTop","lastScrollTop","top","scrollCallback","callback","force","syncList","reorder","items","index","y","style","webkitTransform","transform","map2","templates","arr1","arr2","i","len","item","this","trigger","ITEMCHANGE","data","ns","ui","reshift","diff","range","splice","push","apply","unshift","render","itemTemplate","template","hasColumns","columns","altRow","placeholderTemplate","header","group","html","fixedGroupTemplate","angular","elements","attr","uid","addClass","renderColumns","GROUPITEM","toggleClass","FOCUSED","current","SELECTED","selected","newGroup","isLastGroupedItem","groupTemplate","append","currentWidth","currentWidthInt","widthStyle","width","parseInt","percentageUnitsRegex","test","mapChangedItems","itemsToMatch","found","j","itemsLength","selectedLength","changed","unchanged","isActivePromise","promise","state","window","Widget","DataBoundWidget","proxy","LIST_CONTENT","TABLE_CONTENT","HEADER","LIST_ITEM","TABLE_ITEM","HEIGHTCONTAINER","LIST_UL","TABLE_LIST","HOVER","CHANGE","CLICK","LISTBOUND","ACTIVATE","DEACTIVATE","GROUP_ROW_SEL","VIRTUAL_LIST_NS","VirtualList","extend","init","thead","row","that","contentClasses","bound","_fetching","fn","call","content","wrapper","wrap","closest","before","prev","ariaLabel","ariaLabelledBy","on","removeClass","_values","_selectedDataItems","_selectedIndexes","_rangesList","_promisesList","_optionID","guid","_templates","setDataSource","dataSource","throttle","_renderItems","_triggerListBound","delay","_selectable","name","autoBind","oppositeBuffer","type","selectable","dataValueField","mapValueTo","valueMapper","events","setOptions","itemClass","_selectProxy","off","refresh","_items","destroy","unbind","_refreshHandler","source","isArray","DataSource","create","_clean","_deferValueSet","mute","bind","setDSFilter","filter","view","fetch","skip","currentRangeStart","_selectingValue","_skip","_getValues","dataItems","getter","_valueGetter","map","_highlightSelectedItems","_getElementByDataItem","e","result","action","isItemChange","filtered","isFiltered","_mute","focus","_createList","skipUpdateOnBind","_emptySearch","done","removeAt","_removeSelectedDataItem","idx","valueGetter","setValue","_forcePrefetch","shouldClear","slice","_valueDeferred","Deferred","select","_prefetchByValue","_checkValuesOrder","_removedAddedIndexes","newValue","dataView","_dataView","match","forSelection","success","response","mapValueToIndex","mapValueToDataItem","indexes","removed","_deselect","_triggerChange","added","_getIndecies","resolve","deferredRange","take","itemCount","ranges","defs","low","floor","high","pages","each","_","deferred","end","existingRange","_multiplePrefetch","when","then","prefetch","isEmptyList","_activeDeferred","_getSkip","_findDataItem","_getRange","_findRange","min","total","dataItemByIndex","progress","selectedDataItems","scrollWith","scrollTo","scrollToIndex","candidate","id","triggerEvent","flatView","isNaN","_getElementByIndex","_focusedIndex","hasClass","removeAttr","_getElementLocation","_screenHeight","focusIndex","focusFirst","focusLast","lastIndex","heightContainer","offsetHeight","focusPrev","focusNext","indices","initialIndices","isAlreadySelected","singleSelection","prefetchStarted","_selectDeferred","_deselectCurrentValues","_select","_listCreated","_lastDSFilter","Query","compareFilters","skipUpdate","noop","_lastScrollTop","empty","_height","hasData","setScreenHeight","yPosition","yDownPostion","screenEnd","currentColumn","templateText","key","field","_generateItems","count","text","tabIndex","setAttribute","minHeight","_saveInitialRanges","_ranges","start","get","_buildValueGetter","_setHeight","hide","show","_getter","_onScroll","getList","_listItems","_fixedHeader","_whenChanged","_reorderList","_calculateGroupPadding","_calculateColumnsHeaderPadding","currentHeight","padHeight","innerHTML","lastRequestedRange","lastRangeStart","pageSize","flatGroups","rangeStart","flatGroup","groups","groupLength","inRange","_getterDeferred","reject","firstItemIndex","_indexConstraint","firstVisibleGroup","fixedGroupText","currentVisibleGroup","firstVisibleDataItemIndex","firstVisibleDataItem","_itemMapper","listType","currentIndex","_currentGroup","_range","_view","_getDataItemsCollection","_listIndex","theValidator","theNew","currentOffset","Infinity","list2","offset","range2","abs","_bufferSizes","max","buffers","getElementIndex","jQuery","elementIndex","selectedIndex","selectedIndexes","removedindexesCounter","inArray","_deselectSingleItem","children","values","page","oldSkip","_clickHandler","currentTarget","isDefaultPrevented","firstItem","first","groupHeader","padding","display","support","scrollbar","isRtl","columnsHeader","plugin","amd","a1","a2","a3"],"mappings":"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","file":"kendo.virtuallist.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.virtuallist', ['kendo.data'], f);\n}(function () {\n    var __meta__ = {\n        id: 'virtuallist',\n        name: 'VirtualList',\n        category: 'framework',\n        depends: ['data'],\n        hidden: true\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, Widget = ui.Widget, DataBoundWidget = ui.DataBoundWidget, proxy = $.proxy, percentageUnitsRegex = /^\\d+(\\.\\d+)?%$/i, LIST_CONTENT = 'k-list-content k-virtual-content', TABLE_CONTENT = 'k-table-body k-table-scroller k-virtual-content', HEADER = 'k-list-group-sticky-header', LIST_ITEM = 'k-list-item', TABLE_ITEM = 'k-table-row', HEIGHTCONTAINER = 'k-height-container', GROUPITEM = 'k-list-item-group-label', LIST_UL = 'k-list-ul', TABLE_LIST = 'k-table-list', SELECTED = 'k-selected', FOCUSED = 'k-focus', HOVER = 'k-hover', CHANGE = 'change', CLICK = 'click', LISTBOUND = 'listBound', ITEMCHANGE = 'itemChange', ACTIVATE = 'activate', DEACTIVATE = 'deactivate', GROUP_ROW_SEL = '.k-table-group-row', VIRTUAL_LIST_NS = '.VirtualList';\n        function lastFrom(array) {\n            return array[array.length - 1];\n        }\n        function toArray(value) {\n            return value instanceof Array ? value : [value];\n        }\n        function isPrimitive(dataItem) {\n            return typeof dataItem === 'string' || typeof dataItem === 'number' || typeof dataItem === 'boolean';\n        }\n        function getItemCount(screenHeight, listScreens, itemHeight) {\n            return Math.ceil(screenHeight * listScreens / itemHeight);\n        }\n        function appendChild(parent, className, tagName) {\n            var element = document.createElement(tagName || 'div');\n            if (className) {\n                element.className = className;\n            }\n            parent.appendChild(element);\n            return element;\n        }\n        function getDefaultItemHeight(listSize) {\n            var mockList = $('<div class=\"k-list ' + listSize + ' k-virtual-list\">' + '<div class=\"k-list-content k-virtual-content\">' + '<ul class=\"k-list-ul\">' + '<li class=\"k-list-item\">' + '<span class=\"k-list-item-text\">test</span>' + '</li>' + '</ul>' + '</div>' + '</div>');\n            var lineHeight;\n            mockList.css({\n                position: 'absolute',\n                left: '-200000px',\n                visibility: 'hidden'\n            });\n            mockList.appendTo(document.body);\n            lineHeight = parseFloat(kendo.getComputedStyles(mockList.find('.k-list-item')[0], ['height']).height);\n            mockList.remove();\n            return lineHeight;\n        }\n        function bufferSizes(screenHeight, listScreens, opposite) {\n            return {\n                down: screenHeight * opposite,\n                up: screenHeight * (listScreens - 1 - opposite)\n            };\n        }\n        function listValidator(options, screenHeight) {\n            var downThreshold = (options.listScreens - 1 - options.threshold) * screenHeight;\n            var upThreshold = options.threshold * screenHeight;\n            return function (list, scrollTop, lastScrollTop) {\n                if (scrollTop > lastScrollTop) {\n                    return scrollTop - list.top < downThreshold;\n                } else {\n                    return list.top === 0 || scrollTop - list.top > upThreshold;\n                }\n            };\n        }\n        function scrollCallback(element, callback) {\n            return function (force) {\n                return callback(element.scrollTop, force);\n            };\n        }\n        function syncList(reorder) {\n            return function (list, force) {\n                reorder(list.items, list.index, force);\n                return list;\n            };\n        }\n        function position(element, y) {\n            element.style.webkitTransform = 'translateY(' + y + 'px)';\n            element.style.transform = 'translateY(' + y + 'px)';\n        }\n        function map2(callback, templates) {\n            return function (arr1, arr2) {\n                for (var i = 0, len = arr1.length; i < len; i++) {\n                    callback(arr1[i], arr2[i], templates);\n                    if (arr2[i].item) {\n                        this.trigger(ITEMCHANGE, {\n                            item: $(arr1[i]),\n                            data: arr2[i].item,\n                            ns: kendo.ui\n                        });\n                    }\n                }\n            };\n        }\n        function reshift(items, diff) {\n            var range;\n            if (diff > 0) {\n                range = items.splice(0, diff);\n                items.push.apply(items, range);\n            } else {\n                range = items.splice(diff, -diff);\n                items.unshift.apply(items, range);\n            }\n            return range;\n        }\n        function render(element, data, templates) {\n            var itemTemplate = templates.template, hasColumns = this.options.columns && this.options.columns.length, altRow = data.index % 2 === 1 ? 'k-table-alt-row' : '';\n            element = $(element);\n            if (!data.item) {\n                itemTemplate = templates.placeholderTemplate;\n            }\n            if (data.index === 0 && this.header && data.group) {\n                this.header.html(templates.fixedGroupTemplate(data.group));\n            }\n            this.angular('cleanup', function () {\n                return { elements: [element] };\n            });\n            element.attr('data-uid', data.item ? data.item.uid : '').attr('data-offset-index', data.index);\n            if (hasColumns && data.item) {\n                element.addClass(altRow);\n                element.html(renderColumns(this.options, data.item, templates));\n            } else {\n                element.find('.' + GROUPITEM).remove();\n                element.find('.k-list-item-text').html(itemTemplate(data.item || {}));\n            }\n            element.toggleClass(FOCUSED, data.current);\n            element.toggleClass(SELECTED, data.selected);\n            element.toggleClass('k-first', data.newGroup);\n            element.toggleClass('k-last', data.isLastGroupedItem);\n            element.toggleClass('k-loading-item', !data.item);\n            if (data.index !== 0 && data.newGroup) {\n                if (hasColumns) {\n                    $('<span class=\"k-table-td k-table-group-td\"><span>' + templates.groupTemplate(data.group) + '</span></span>').appendTo(element);\n                } else {\n                    $('<div class=' + GROUPITEM + '></div>').appendTo(element).html(templates.groupTemplate(data.group));\n                }\n            } else if (data.group && hasColumns) {\n                element.append($('<span class=\"k-table-td k-table-spacer-td\"></span>'));\n            }\n            if (data.top !== undefined) {\n                position(element[0], data.top);\n            }\n            this.angular('compile', function () {\n                return {\n                    elements: [element],\n                    data: [{\n                            dataItem: data.item,\n                            group: data.group,\n                            newGroup: data.newGroup\n                        }]\n                };\n            });\n        }\n        function renderColumns(options, dataItem, templates) {\n            var item = '';\n            for (var i = 0; i < options.columns.length; i++) {\n                var currentWidth = options.columns[i].width;\n                var currentWidthInt = parseInt(currentWidth, 10);\n                var widthStyle = '';\n                if (currentWidth) {\n                    widthStyle += 'style=\\'width:';\n                    widthStyle += currentWidthInt;\n                    widthStyle += percentageUnitsRegex.test(currentWidth) ? '%' : 'px';\n                    widthStyle += ';\\'';\n                }\n                item += '<span class=\\'k-table-td\\' ' + widthStyle + '>';\n                item += templates['column' + i](dataItem);\n                item += '</span>';\n            }\n            return item;\n        }\n        function mapChangedItems(selected, itemsToMatch) {\n            var itemsLength = itemsToMatch.length;\n            var selectedLength = selected.length;\n            var dataItem;\n            var found;\n            var i, j;\n            var changed = [];\n            var unchanged = [];\n            if (selectedLength) {\n                for (i = 0; i < selectedLength; i++) {\n                    dataItem = selected[i];\n                    found = false;\n                    for (j = 0; j < itemsLength; j++) {\n                        if (dataItem === itemsToMatch[j]) {\n                            found = true;\n                            changed.push({\n                                index: i,\n                                item: dataItem\n                            });\n                            break;\n                        }\n                    }\n                    if (!found) {\n                        unchanged.push(dataItem);\n                    }\n                }\n            }\n            return {\n                changed: changed,\n                unchanged: unchanged\n            };\n        }\n        function isActivePromise(promise) {\n            return promise && promise.state() !== 'resolved';\n        }\n        var VirtualList = DataBoundWidget.extend({\n            init: function (element, options) {\n                var that = this, contentClasses = options.columns && options.columns.length ? TABLE_CONTENT : LIST_CONTENT;\n                that.bound(false);\n                that._fetching = false;\n                Widget.fn.init.call(that, element, options);\n                if (!that.options.itemHeight) {\n                    that.options.itemHeight = getDefaultItemHeight(options.listSize);\n                }\n                options = that.options;\n                that.element.attr('role', 'listbox');\n                that.content = that.wrapper = that.element.wrap('<div unselectable=\\'on\\' class=\\'' + contentClasses + '\\'></div>').parent();\n                if (that.options.columns && that.options.columns.length) {\n                    var thead = that.element.closest('.k-data-table').find('.k-table-thead');\n                    var row = $('<tr class=\"k-table-group-row\">' + '<th class=\"k-table-th\" colspan=\"' + that.options.columns.length + '\"></th>' + '</tr>');\n                    thead.append(row);\n                    that.header = row.find('.k-table-th');\n                    that.element.addClass(TABLE_LIST);\n                } else {\n                    that.header = that.content.before('<div class=\\'' + HEADER + '\\'></div>').prev();\n                    that.element.addClass(LIST_UL);\n                }\n                if (options.ariaLabel) {\n                    this.element.attr('aria-label', options.ariaLabel);\n                } else if (options.ariaLabelledBy) {\n                    this.element.attr('aria-labelledby', options.ariaLabelledBy);\n                }\n                that.element.on('mouseenter' + VIRTUAL_LIST_NS, 'li:not(.k-loading-item)', function () {\n                    $(this).addClass(HOVER);\n                }).on('mouseleave' + VIRTUAL_LIST_NS, 'li', function () {\n                    $(this).removeClass(HOVER);\n                });\n                that._values = toArray(that.options.value);\n                that._selectedDataItems = [];\n                that._selectedIndexes = [];\n                that._rangesList = {};\n                that._promisesList = [];\n                that._optionID = kendo.guid();\n                that._templates();\n                that.setDataSource(options.dataSource);\n                that.content.on('scroll' + VIRTUAL_LIST_NS, kendo.throttle(function () {\n                    that._renderItems();\n                    that._triggerListBound();\n                }, options.delay));\n                that._selectable();\n            },\n            options: {\n                name: 'VirtualList',\n                autoBind: true,\n                delay: 100,\n                height: null,\n                listScreens: 4,\n                threshold: 0.5,\n                itemHeight: null,\n                oppositeBuffer: 1,\n                type: 'flat',\n                selectable: false,\n                value: [],\n                dataValueField: null,\n                template: '#:data#',\n                placeholderTemplate: 'loading...',\n                groupTemplate: '#:data#',\n                fixedGroupTemplate: '#:data#',\n                mapValueTo: 'index',\n                valueMapper: null,\n                ariaLabel: null,\n                ariaLabelledBy: null\n            },\n            events: [\n                CHANGE,\n                CLICK,\n                LISTBOUND,\n                ITEMCHANGE,\n                ACTIVATE,\n                DEACTIVATE\n            ],\n            setOptions: function (options) {\n                var itemClass = this.options.columns && this.options.columns.length ? TABLE_ITEM : LIST_ITEM;\n                Widget.fn.setOptions.call(this, options);\n                if (this._selectProxy && this.options.selectable === false) {\n                    this.element.off(CLICK, '.' + itemClass, this._selectProxy);\n                } else if (!this._selectProxy && this.options.selectable) {\n                    this._selectable();\n                }\n                this._templates();\n                this.refresh();\n            },\n            items: function () {\n                return $(this._items);\n            },\n            destroy: function () {\n                this.wrapper.off(VIRTUAL_LIST_NS);\n                this.dataSource.unbind(CHANGE, this._refreshHandler);\n                Widget.fn.destroy.call(this);\n            },\n            setDataSource: function (source) {\n                var that = this;\n                var dataSource = source || {};\n                var value;\n                dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n                dataSource = kendo.data.DataSource.create(dataSource);\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                    that._clean();\n                    that.bound(false);\n                    that._deferValueSet = true;\n                    value = that.value();\n                    that.value([]);\n                    that.mute(function () {\n                        that.value(value);\n                    });\n                } else {\n                    that._refreshHandler = $.proxy(that.refresh, that);\n                }\n                that.dataSource = dataSource.bind(CHANGE, that._refreshHandler);\n                that.setDSFilter(dataSource.filter());\n                if (dataSource.view().length !== 0) {\n                    that.refresh();\n                } else if (that.options.autoBind) {\n                    dataSource.fetch();\n                }\n            },\n            skip: function () {\n                return this.dataSource.currentRangeStart();\n            },\n            _triggerListBound: function () {\n                var that = this;\n                var skip = that.skip();\n                if (that.bound() && !that._selectingValue && that._skip !== skip) {\n                    that._skip = skip;\n                    that.trigger(LISTBOUND);\n                }\n            },\n            _getValues: function (dataItems) {\n                var getter = this._valueGetter;\n                return $.map(dataItems, function (dataItem) {\n                    return getter(dataItem);\n                });\n            },\n            _highlightSelectedItems: function () {\n                for (var i = 0; i < this._selectedDataItems.length; i++) {\n                    var item = this._getElementByDataItem(this._selectedDataItems[i]);\n                    if (item.length) {\n                        item.addClass(SELECTED);\n                    }\n                }\n            },\n            refresh: function (e) {\n                var that = this;\n                var action = e && e.action;\n                var isItemChange = action === 'itemchange';\n                var filtered = this.isFiltered();\n                var result;\n                if (that._mute) {\n                    return;\n                }\n                that._deferValueSet = false;\n                if (!that._fetching) {\n                    if (filtered) {\n                        that.focus(0);\n                    }\n                    that._createList();\n                    if (!action && that._values.length && !filtered && !that.options.skipUpdateOnBind && !that._emptySearch) {\n                        that._selectingValue = true;\n                        that.bound(true);\n                        that.value(that._values, true).done(function () {\n                            that._selectingValue = false;\n                            that._triggerListBound();\n                        });\n                    } else {\n                        that.bound(true);\n                        that._highlightSelectedItems();\n                        that._triggerListBound();\n                    }\n                } else {\n                    if (that._renderItems) {\n                        that._renderItems(true);\n                    }\n                    that._triggerListBound();\n                }\n                if (isItemChange || action === 'remove') {\n                    result = mapChangedItems(that._selectedDataItems, e.items);\n                    if (result.changed.length) {\n                        if (isItemChange) {\n                            that.trigger('selectedItemChange', { items: result.changed });\n                        } else {\n                            that.value(that._getValues(result.unchanged));\n                        }\n                    }\n                }\n                that._fetching = false;\n            },\n            removeAt: function (position) {\n                var value = this._values.splice(position, 1)[0];\n                return {\n                    position: position,\n                    dataItem: this._removeSelectedDataItem(value)\n                };\n            },\n            _removeSelectedDataItem: function (value) {\n                var that = this, valueGetter = that._valueGetter;\n                for (var idx in that._selectedDataItems) {\n                    if (valueGetter(that._selectedDataItems[idx]) === value) {\n                        that._selectedIndexes.splice(idx, 1);\n                        return that._selectedDataItems.splice(idx, 1)[0];\n                    }\n                }\n            },\n            setValue: function (value) {\n                this._values = toArray(value);\n            },\n            value: function (value, _forcePrefetch) {\n                var that = this;\n                if (value === undefined) {\n                    return that._values.slice();\n                }\n                if (value === null) {\n                    value = [];\n                }\n                value = toArray(value);\n                if (!that._valueDeferred || that._valueDeferred.state() === 'resolved') {\n                    that._valueDeferred = $.Deferred();\n                }\n                var shouldClear = that.options.selectable === 'multiple' && that.select().length && value.length;\n                if (shouldClear || !value.length) {\n                    that.select(-1);\n                }\n                that._values = value;\n                if (that.bound() && !that._mute && !that._deferValueSet || _forcePrefetch) {\n                    that._prefetchByValue(value);\n                }\n                return that._valueDeferred;\n            },\n            _checkValuesOrder: function (value) {\n                if (this._removedAddedIndexes && this._removedAddedIndexes.length === value.length) {\n                    var newValue = this._removedAddedIndexes.slice();\n                    this._removedAddedIndexes = null;\n                    return newValue;\n                }\n                return value;\n            },\n            _prefetchByValue: function (value) {\n                var that = this, dataView = that._dataView, valueGetter = that._valueGetter, mapValueTo = that.options.mapValueTo, item, match = false, forSelection = [];\n                for (var i = 0; i < value.length; i++) {\n                    for (var idx = 0; idx < dataView.length; idx++) {\n                        item = dataView[idx].item;\n                        if (item) {\n                            match = isPrimitive(item) ? value[i] === item : value[i] === valueGetter(item);\n                            if (match) {\n                                forSelection.push(dataView[idx].index);\n                            }\n                        }\n                    }\n                }\n                if (forSelection.length === value.length) {\n                    that._values = [];\n                    that.select(forSelection);\n                    return;\n                }\n                if (typeof that.options.valueMapper === 'function') {\n                    that.options.valueMapper({\n                        value: this.options.selectable === 'multiple' ? value : value[0],\n                        success: function (response) {\n                            if (mapValueTo === 'index') {\n                                that.mapValueToIndex(response);\n                            } else if (mapValueTo === 'dataItem') {\n                                that.mapValueToDataItem(response);\n                            }\n                        }\n                    });\n                } else {\n                    if (!that.value()[0]) {\n                        that.select([-1]);\n                    } else {\n                        that._selectingValue = false;\n                        that._triggerListBound();\n                    }\n                }\n            },\n            mapValueToIndex: function (indexes) {\n                if (indexes === undefined || indexes === -1 || indexes === null) {\n                    indexes = [];\n                } else {\n                    indexes = toArray(indexes);\n                }\n                if (!indexes.length) {\n                    indexes = [-1];\n                } else {\n                    var removed = this._deselect([]).removed;\n                    if (removed.length) {\n                        this._triggerChange(removed, []);\n                    }\n                }\n                this.select(indexes);\n            },\n            mapValueToDataItem: function (dataItems) {\n                var removed, added;\n                if (dataItems === undefined || dataItems === null) {\n                    dataItems = [];\n                } else {\n                    dataItems = toArray(dataItems);\n                }\n                if (!dataItems.length) {\n                    this.select([-1]);\n                } else {\n                    removed = $.map(this._selectedDataItems, function (item, index) {\n                        return {\n                            index: index,\n                            dataItem: item\n                        };\n                    });\n                    added = $.map(dataItems, function (item, index) {\n                        return {\n                            index: index,\n                            dataItem: item\n                        };\n                    });\n                    this._selectedDataItems = dataItems;\n                    this._selectedIndexes = [];\n                    for (var i = 0; i < this._selectedDataItems.length; i++) {\n                        var item = this._getElementByDataItem(this._selectedDataItems[i]);\n                        this._selectedIndexes.push(this._getIndecies(item)[0]);\n                        item.addClass(SELECTED);\n                    }\n                    this._triggerChange(removed, added);\n                    if (this._valueDeferred) {\n                        this._valueDeferred.resolve();\n                    }\n                }\n            },\n            deferredRange: function (index) {\n                var dataSource = this.dataSource;\n                var take = this.itemCount;\n                var ranges = this._rangesList;\n                var result = $.Deferred();\n                var defs = [];\n                var low = Math.floor(index / take) * take;\n                var high = Math.ceil(index / take) * take;\n                var pages = high === low ? [high] : [\n                    low,\n                    high\n                ];\n                $.each(pages, function (_, skip) {\n                    var end = skip + take;\n                    var existingRange = ranges[skip];\n                    var deferred;\n                    if (!existingRange || existingRange.end !== end) {\n                        deferred = $.Deferred();\n                        ranges[skip] = {\n                            end: end,\n                            deferred: deferred\n                        };\n                        dataSource._multiplePrefetch(skip, take, function () {\n                            deferred.resolve();\n                        });\n                    } else {\n                        deferred = existingRange.deferred;\n                    }\n                    defs.push(deferred);\n                });\n                $.when.apply($, defs).then(function () {\n                    result.resolve();\n                });\n                return result;\n            },\n            prefetch: function (indexes) {\n                var that = this, take = this.itemCount, isEmptyList = !that._promisesList.length;\n                if (!isActivePromise(that._activeDeferred)) {\n                    that._activeDeferred = $.Deferred();\n                    that._promisesList = [];\n                }\n                $.each(indexes, function (_, index) {\n                    that._promisesList.push(that.deferredRange(that._getSkip(index, take)));\n                });\n                if (isEmptyList) {\n                    $.when.apply($, that._promisesList).done(function () {\n                        that._promisesList = [];\n                        that._activeDeferred.resolve();\n                    });\n                }\n                return that._activeDeferred;\n            },\n            _findDataItem: function (view, index) {\n                var group;\n                if (this.options.type === 'group') {\n                    for (var i = 0; i < view.length; i++) {\n                        group = view[i].items;\n                        if (group.length <= index) {\n                            index = index - group.length;\n                        } else {\n                            return group[index];\n                        }\n                    }\n                }\n                return view[index];\n            },\n            _getRange: function (skip, take) {\n                return this.dataSource._findRange(skip, Math.min(skip + take, this.dataSource.total()));\n            },\n            dataItemByIndex: function (index) {\n                var that = this;\n                var take = that.itemCount;\n                var skip = that._getSkip(index, take);\n                var view = this._getRange(skip, take);\n                if (!that._getRange(skip, take).length) {\n                    return null;\n                }\n                if (that.options.type === 'group') {\n                    kendo.ui.progress($(that.wrapper), true);\n                    that.mute(function () {\n                        that.dataSource.range(skip, take, function () {\n                            kendo.ui.progress($(that.wrapper), false);\n                        });\n                        view = that.dataSource.view();\n                    });\n                }\n                return that._findDataItem(view, [index - skip]);\n            },\n            selectedDataItems: function () {\n                return this._selectedDataItems.slice();\n            },\n            scrollWith: function (value) {\n                this.content.scrollTop(this.content.scrollTop() + value);\n            },\n            scrollTo: function (y) {\n                this.content.scrollTop(y);\n            },\n            scrollToIndex: function (index) {\n                this.scrollTo(index * this.options.itemHeight);\n            },\n            focus: function (candidate) {\n                var element, index, data, current, itemHeight = this.options.itemHeight, id = this._optionID, triggerEvent = true;\n                if (candidate === undefined) {\n                    current = this.element.find('.' + FOCUSED);\n                    return current.length ? current : null;\n                }\n                if (typeof candidate === 'function') {\n                    data = this.dataSource.flatView();\n                    for (var idx = 0; idx < data.length; idx++) {\n                        if (candidate(data[idx])) {\n                            candidate = idx;\n                            break;\n                        }\n                    }\n                }\n                if (candidate instanceof Array) {\n                    candidate = lastFrom(candidate);\n                }\n                if (isNaN(candidate)) {\n                    element = $(candidate);\n                    index = parseInt($(element).attr('data-offset-index'), 10);\n                } else {\n                    index = candidate;\n                    element = this._getElementByIndex(index);\n                }\n                if (index === -1) {\n                    this.element.find('.' + FOCUSED).removeClass(FOCUSED);\n                    this._focusedIndex = undefined;\n                    return;\n                }\n                if (element.length) {\n                    if (element.hasClass(FOCUSED)) {\n                        triggerEvent = false;\n                    }\n                    if (this._focusedIndex !== undefined) {\n                        current = this._getElementByIndex(this._focusedIndex);\n                        current.removeClass(FOCUSED).removeAttr('id');\n                        if (triggerEvent) {\n                            this.trigger(DEACTIVATE);\n                        }\n                    }\n                    this._focusedIndex = index;\n                    element.addClass(FOCUSED).attr('id', id);\n                    var position = this._getElementLocation(index);\n                    if (position === 'top') {\n                        this.scrollTo(index * itemHeight);\n                    } else if (position === 'bottom') {\n                        this.scrollTo(index * itemHeight + itemHeight - this._screenHeight);\n                    } else if (position === 'outScreen') {\n                        this.scrollTo(index * itemHeight);\n                    }\n                    if (triggerEvent) {\n                        this.trigger(ACTIVATE);\n                    }\n                } else {\n                    this._focusedIndex = index;\n                    this.items().removeClass(FOCUSED);\n                    this.scrollToIndex(index);\n                }\n            },\n            focusIndex: function () {\n                return this._focusedIndex;\n            },\n            focusFirst: function () {\n                this.scrollTo(0);\n                this.focus(0);\n            },\n            focusLast: function () {\n                var lastIndex = this.dataSource.total();\n                this.scrollTo(this.heightContainer.offsetHeight);\n                this.focus(lastIndex - 1);\n            },\n            focusPrev: function () {\n                var index = this._focusedIndex;\n                var current;\n                if (!isNaN(index) && index > 0) {\n                    index -= 1;\n                    this.focus(index);\n                    current = this.focus();\n                    if (current && current.hasClass('k-loading-item')) {\n                        index += 1;\n                        this.focus(index);\n                    }\n                    return index;\n                } else {\n                    index = this.dataSource.total() - 1;\n                    this.focus(index);\n                    return index;\n                }\n            },\n            focusNext: function () {\n                var index = this._focusedIndex;\n                var lastIndex = this.dataSource.total() - 1;\n                var current;\n                if (!isNaN(index) && index < lastIndex) {\n                    index += 1;\n                    this.focus(index);\n                    current = this.focus();\n                    if (current && current.hasClass('k-loading-item')) {\n                        index -= 1;\n                        this.focus(index);\n                    }\n                    return index;\n                } else {\n                    index = 0;\n                    this.focus(index);\n                    return index;\n                }\n            },\n            _triggerChange: function (removed, added) {\n                removed = removed || [];\n                added = added || [];\n                if (removed.length || added.length) {\n                    this.trigger(CHANGE, {\n                        removed: removed,\n                        added: added\n                    });\n                }\n            },\n            select: function (candidate) {\n                var that = this, indices, initialIndices, singleSelection = that.options.selectable !== 'multiple', prefetchStarted = isActivePromise(that._activeDeferred), filtered = this.isFiltered(), isAlreadySelected, deferred, result, removed = [];\n                if (candidate === undefined) {\n                    return that._selectedIndexes.slice();\n                }\n                if (!that._selectDeferred || that._selectDeferred.state() === 'resolved') {\n                    that._selectDeferred = $.Deferred();\n                }\n                indices = that._getIndecies(candidate);\n                isAlreadySelected = singleSelection && !filtered && lastFrom(indices) === lastFrom(this._selectedIndexes);\n                removed = that._deselectCurrentValues(indices);\n                if (removed.length || !indices.length || isAlreadySelected) {\n                    that._triggerChange(removed);\n                    if (that._valueDeferred) {\n                        that._valueDeferred.resolve().promise();\n                    }\n                    return that._selectDeferred.resolve().promise();\n                }\n                if (indices.length === 1 && indices[0] === -1) {\n                    indices = [];\n                }\n                initialIndices = indices;\n                result = that._deselect(indices);\n                removed = result.removed;\n                indices = result.indices;\n                if (singleSelection) {\n                    prefetchStarted = false;\n                    if (indices.length) {\n                        indices = [lastFrom(indices)];\n                    }\n                }\n                var done = function () {\n                    var added = that._select(indices);\n                    if (initialIndices.length === indices.length || singleSelection) {\n                        that.focus(indices);\n                    }\n                    that._triggerChange(removed, added);\n                    if (that._valueDeferred) {\n                        that._valueDeferred.resolve();\n                    }\n                    that._selectDeferred.resolve();\n                };\n                deferred = that.prefetch(indices);\n                if (!prefetchStarted) {\n                    if (deferred) {\n                        deferred.done(done);\n                    } else {\n                        done();\n                    }\n                }\n                return that._selectDeferred.promise();\n            },\n            bound: function (bound) {\n                if (bound === undefined) {\n                    return this._listCreated;\n                }\n                this._listCreated = bound;\n            },\n            mute: function (callback) {\n                this._mute = true;\n                proxy(callback(), this);\n                this._mute = false;\n            },\n            setDSFilter: function (filter) {\n                this._lastDSFilter = $.extend({}, filter);\n            },\n            isFiltered: function () {\n                if (!this._lastDSFilter) {\n                    this.setDSFilter(this.dataSource.filter());\n                }\n                return !kendo.data.Query.compareFilters(this.dataSource.filter(), this._lastDSFilter);\n            },\n            skipUpdate: $.noop,\n            _getElementByIndex: function (index) {\n                return this.items().filter(function (idx, element) {\n                    return index === parseInt($(element).attr('data-offset-index'), 10);\n                });\n            },\n            _getElementByDataItem: function (dataItem) {\n                var dataView = this._dataView, valueGetter = this._valueGetter, element, match;\n                for (var i = 0; i < dataView.length; i++) {\n                    match = dataView[i].item && isPrimitive(dataView[i].item) ? dataView[i].item === dataItem : dataView[i].item && dataItem && valueGetter(dataView[i].item) == valueGetter(dataItem);\n                    if (match) {\n                        element = dataView[i];\n                        break;\n                    }\n                }\n                return element ? this._getElementByIndex(element.index) : $();\n            },\n            _clean: function () {\n                this.result = undefined;\n                this._lastScrollTop = undefined;\n                this._skip = undefined;\n                $(this.heightContainer).remove();\n                this.heightContainer = undefined;\n                this.element.empty();\n            },\n            _height: function () {\n                var hasData = !!this.dataSource.view().length, height = this.options.height, itemHeight = this.options.itemHeight, total = this.dataSource.total();\n                if (!hasData) {\n                    height = 0;\n                } else if (height / itemHeight > total) {\n                    height = total * itemHeight;\n                }\n                return height;\n            },\n            setScreenHeight: function () {\n                var height = this._height();\n                this.content.height(height);\n                this._screenHeight = height;\n            },\n            screenHeight: function () {\n                return this._screenHeight;\n            },\n            _getElementLocation: function (index) {\n                var scrollTop = this.content.scrollTop(), screenHeight = this._screenHeight, itemHeight = this.options.itemHeight, yPosition = index * itemHeight, yDownPostion = yPosition + itemHeight, screenEnd = scrollTop + screenHeight, position;\n                if (yPosition === scrollTop - itemHeight || yDownPostion > scrollTop && yPosition < scrollTop) {\n                    position = 'top';\n                } else if (yPosition === screenEnd || yPosition < screenEnd && screenEnd < yDownPostion) {\n                    position = 'bottom';\n                } else if (yPosition >= scrollTop && yPosition <= scrollTop + (screenHeight - itemHeight)) {\n                    position = 'inScreen';\n                } else {\n                    position = 'outScreen';\n                }\n                return position;\n            },\n            _templates: function () {\n                var options = this.options;\n                var templates = {\n                    template: options.template,\n                    placeholderTemplate: options.placeholderTemplate,\n                    groupTemplate: options.groupTemplate,\n                    fixedGroupTemplate: options.fixedGroupTemplate\n                };\n                if (options.columns) {\n                    for (var i = 0; i < options.columns.length; i++) {\n                        var currentColumn = options.columns[i];\n                        var templateText = currentColumn.field ? currentColumn.field.toString() : 'text';\n                        templates['column' + i] = currentColumn.template || '#: ' + templateText + '#';\n                    }\n                }\n                for (var key in templates) {\n                    if (typeof templates[key] !== 'function') {\n                        templates[key] = kendo.template(templates[key] || '');\n                    }\n                }\n                this.templates = templates;\n            },\n            _generateItems: function (element, count) {\n                var items = [], item, text, itemHeight = this.options.itemHeight + 'px', itemClass = this.options.columns && this.options.columns.length ? TABLE_ITEM : LIST_ITEM;\n                while (count-- > 0) {\n                    text = document.createElement('span');\n                    text.className = 'k-list-item-text';\n                    item = document.createElement('li');\n                    item.tabIndex = -1;\n                    item.className = itemClass;\n                    item.setAttribute('role', 'option');\n                    item.style.height = itemHeight;\n                    item.style.minHeight = itemHeight;\n                    item.appendChild(text);\n                    element.appendChild(item);\n                    items.push(item);\n                }\n                return items;\n            },\n            _saveInitialRanges: function () {\n                var ranges = this.dataSource._ranges;\n                var deferred = $.Deferred();\n                deferred.resolve();\n                this._rangesList = {};\n                for (var i = 0; i < ranges.length; i++) {\n                    this._rangesList[ranges[i].start] = {\n                        end: ranges[i].end,\n                        deferred: deferred\n                    };\n                }\n            },\n            _createList: function () {\n                var that = this, content = that.content.get(0), options = that.options, dataSource = that.dataSource;\n                if (that.bound()) {\n                    that._clean();\n                }\n                that._saveInitialRanges();\n                that._buildValueGetter();\n                that.setScreenHeight();\n                that.itemCount = getItemCount(that._screenHeight, options.listScreens, options.itemHeight);\n                if (that.itemCount > dataSource.total()) {\n                    that.itemCount = dataSource.total();\n                }\n                that._items = that._generateItems(that.element[0], that.itemCount);\n                that._setHeight(options.itemHeight * dataSource.total());\n                that.options.type = (dataSource.group() || []).length ? 'group' : 'flat';\n                if (that.options.type === 'flat') {\n                    if (that.header.closest(GROUP_ROW_SEL).length) {\n                        that.header.closest(GROUP_ROW_SEL).hide();\n                    } else {\n                        that.header.hide();\n                    }\n                } else {\n                    if (that.header.closest(GROUP_ROW_SEL).length) {\n                        that.header.closest(GROUP_ROW_SEL).show();\n                    } else {\n                        that.header.show();\n                    }\n                }\n                that.getter = that._getter(function () {\n                    that._renderItems(true);\n                });\n                that._onScroll = function (scrollTop, force) {\n                    var getList = that._listItems(that.getter);\n                    return that._fixedHeader(scrollTop, getList(scrollTop, force));\n                };\n                that._renderItems = that._whenChanged(scrollCallback(content, that._onScroll), syncList(that._reorderList(that._items, $.proxy(render, that))));\n                that._renderItems();\n                that._calculateGroupPadding(that._screenHeight);\n                that._calculateColumnsHeaderPadding();\n            },\n            _setHeight: function (height) {\n                var currentHeight, heightContainer = this.heightContainer;\n                if (!heightContainer) {\n                    heightContainer = this.heightContainer = appendChild(this.content[0], HEIGHTCONTAINER);\n                } else {\n                    currentHeight = heightContainer.offsetHeight;\n                }\n                if (height !== currentHeight) {\n                    heightContainer.innerHTML = '';\n                    while (height > 0) {\n                        var padHeight = Math.min(height, 250000);\n                        appendChild(heightContainer).style.height = padHeight + 'px';\n                        height -= padHeight;\n                    }\n                }\n            },\n            _getter: function () {\n                var lastRequestedRange = null, dataSource = this.dataSource, lastRangeStart = dataSource.skip(), type = this.options.type, pageSize = this.itemCount, flatGroups = {};\n                if (dataSource.pageSize() < pageSize) {\n                    this.mute(function () {\n                        dataSource.pageSize(pageSize);\n                    });\n                }\n                return function (index, rangeStart) {\n                    var that = this;\n                    if (!dataSource.inRange(rangeStart, pageSize)) {\n                        if (lastRequestedRange !== rangeStart) {\n                            lastRequestedRange = rangeStart;\n                            lastRangeStart = rangeStart;\n                            if (that._getterDeferred) {\n                                that._getterDeferred.reject();\n                            }\n                            that._getterDeferred = that.deferredRange(rangeStart);\n                            that._getterDeferred.then(function () {\n                                var firstItemIndex = that._indexConstraint(that.content[0].scrollTop);\n                                that._getterDeferred = null;\n                                if (rangeStart <= firstItemIndex && firstItemIndex <= rangeStart + pageSize) {\n                                    that._fetching = true;\n                                    dataSource.range(rangeStart, pageSize);\n                                }\n                            });\n                        }\n                        return null;\n                    } else {\n                        if (lastRangeStart !== rangeStart) {\n                            this.mute(function () {\n                                dataSource.range(rangeStart, pageSize);\n                                lastRangeStart = rangeStart;\n                            });\n                        }\n                        var result;\n                        if (type === 'group') {\n                            if (!flatGroups[rangeStart]) {\n                                var flatGroup = flatGroups[rangeStart] = [];\n                                var groups = dataSource.view();\n                                for (var i = 0, len = groups.length; i < len; i++) {\n                                    var group = groups[i];\n                                    for (var j = 0, groupLength = group.items.length; j < groupLength; j++) {\n                                        flatGroup.push({\n                                            item: group.items[j],\n                                            group: group.value\n                                        });\n                                    }\n                                }\n                            }\n                            result = flatGroups[rangeStart][index - rangeStart];\n                        } else {\n                            result = dataSource.view()[index - rangeStart];\n                        }\n                        return result;\n                    }\n                };\n            },\n            _fixedHeader: function (scrollTop, list) {\n                var group = this.currentVisibleGroup, itemHeight = this.options.itemHeight, firstVisibleDataItemIndex = Math.floor((scrollTop - list.top) / itemHeight), firstVisibleDataItem = list.items[firstVisibleDataItemIndex];\n                if (firstVisibleDataItem && firstVisibleDataItem.item) {\n                    var firstVisibleGroup = firstVisibleDataItem.group;\n                    if (firstVisibleGroup !== group) {\n                        var fixedGroupText = firstVisibleGroup || '';\n                        this.header.html(this.templates.fixedGroupTemplate(fixedGroupText));\n                        this.currentVisibleGroup = firstVisibleGroup;\n                    }\n                }\n                return list;\n            },\n            _itemMapper: function (item, index, value) {\n                var listType = this.options.type, itemHeight = this.options.itemHeight, currentIndex = this._focusedIndex, selected = false, current = false, newGroup = false, group = null, match = false, valueGetter = this._valueGetter;\n                if (listType === 'group') {\n                    if (item) {\n                        newGroup = index === 0 || this._currentGroup !== false && this._currentGroup !== item.group;\n                        this._currentGroup = item.group;\n                    }\n                    group = item ? item.group : null;\n                    item = item ? item.item : null;\n                }\n                if (this.options.mapValueTo === 'dataItem' && this._selectedDataItems.length && item) {\n                    for (var i = 0; i < this._selectedDataItems.length; i++) {\n                        match = valueGetter(this._selectedDataItems[i]) === valueGetter(item);\n                        if (match) {\n                            selected = true;\n                            break;\n                        }\n                    }\n                } else if (!this.isFiltered() && value.length && item) {\n                    for (var j = 0; j < value.length; j++) {\n                        match = isPrimitive(item) ? value[j] === item : value[j] === valueGetter(item);\n                        if (match) {\n                            value.splice(j, 1);\n                            selected = true;\n                            break;\n                        }\n                    }\n                }\n                if (currentIndex === index) {\n                    current = true;\n                }\n                return {\n                    item: item ? item : null,\n                    group: group,\n                    newGroup: newGroup,\n                    selected: selected,\n                    current: current,\n                    index: index,\n                    top: index * itemHeight\n                };\n            },\n            _range: function (index) {\n                var itemCount = this.itemCount, value = this._values.slice(), items = [], item;\n                this._view = {};\n                this._currentGroup = false;\n                for (var i = index, length = index + itemCount; i < length; i++) {\n                    item = this._itemMapper(this.getter(i, index), i, value);\n                    if (items[items.length - 1]) {\n                        items[items.length - 1].isLastGroupedItem = item.newGroup;\n                    }\n                    items.push(item);\n                    this._view[item.index] = item;\n                }\n                this._dataView = items;\n                return items;\n            },\n            _getDataItemsCollection: function (scrollTop, lastScrollTop) {\n                var items = this._range(this._listIndex(scrollTop, lastScrollTop));\n                return {\n                    index: items.length ? items[0].index : 0,\n                    top: items.length ? items[0].top : 0,\n                    items: items\n                };\n            },\n            _listItems: function () {\n                var screenHeight = this._screenHeight, options = this.options;\n                var theValidator = listValidator(options, screenHeight);\n                return $.proxy(function (value, force) {\n                    var result = this.result, lastScrollTop = this._lastScrollTop;\n                    if (force || !result || !theValidator(result, value, lastScrollTop)) {\n                        result = this._getDataItemsCollection(value, lastScrollTop);\n                    }\n                    this._lastScrollTop = value;\n                    this.result = result;\n                    return result;\n                }, this);\n            },\n            _whenChanged: function (getter, callback) {\n                var current;\n                return function (force) {\n                    var theNew = getter(force);\n                    if (theNew !== current) {\n                        current = theNew;\n                        callback(theNew, force);\n                    }\n                };\n            },\n            _reorderList: function (list, reorder) {\n                var that = this;\n                var length = list.length;\n                var currentOffset = -Infinity;\n                reorder = $.proxy(map2(reorder, this.templates), this);\n                return function (list2, offset, force) {\n                    var diff = offset - currentOffset;\n                    var range, range2;\n                    if (force || Math.abs(diff) >= length) {\n                        range = list;\n                        range2 = list2;\n                    } else {\n                        range = reshift(list, diff);\n                        range2 = diff > 0 ? list2.slice(-diff) : list2.slice(0, -diff);\n                    }\n                    reorder(range, range2, that.bound());\n                    currentOffset = offset;\n                };\n            },\n            _bufferSizes: function () {\n                var options = this.options;\n                return bufferSizes(this._screenHeight, options.listScreens, options.oppositeBuffer);\n            },\n            _indexConstraint: function (position) {\n                var itemCount = this.itemCount, itemHeight = this.options.itemHeight, total = this.dataSource.total();\n                return Math.min(Math.max(total - itemCount, 0), Math.max(0, Math.floor(position / itemHeight)));\n            },\n            _listIndex: function (scrollTop, lastScrollTop) {\n                var buffers = this._bufferSizes(), position;\n                position = scrollTop - (scrollTop > lastScrollTop ? buffers.down : buffers.up);\n                return this._indexConstraint(position);\n            },\n            _selectable: function () {\n                var itemClass = this.options.columns && this.options.columns.length ? TABLE_ITEM : LIST_ITEM;\n                if (this.options.selectable) {\n                    this._selectProxy = $.proxy(this, '_clickHandler');\n                    this.element.on(CLICK + VIRTUAL_LIST_NS, '.' + itemClass, this._selectProxy);\n                }\n            },\n            getElementIndex: function (element) {\n                if (!(element instanceof jQuery)) {\n                    return undefined;\n                }\n                return parseInt(element.attr('data-offset-index'), 10);\n            },\n            _getIndecies: function (candidate) {\n                var result = [], data;\n                if (typeof candidate === 'function') {\n                    data = this.dataSource.flatView();\n                    for (var idx = 0; idx < data.length; idx++) {\n                        if (candidate(data[idx])) {\n                            result.push(idx);\n                            break;\n                        }\n                    }\n                }\n                if (typeof candidate === 'number') {\n                    result.push(candidate);\n                }\n                var elementIndex = this.getElementIndex(candidate);\n                if (!isNaN(elementIndex)) {\n                    result.push(elementIndex);\n                }\n                if (candidate instanceof Array) {\n                    result = candidate;\n                }\n                return result;\n            },\n            _deselect: function (indices) {\n                var removed = [], selectedIndex, dataItem, selectedIndexes = this._selectedIndexes, selectedDataItems = this._selectedDataItems, position = 0, selectable = this.options.selectable, removedindexesCounter = 0, valueGetter = this._valueGetter, item, match, result = null;\n                indices = indices.slice();\n                if (selectable === true || !indices.length) {\n                    for (var idx = 0; idx < selectedIndexes.length; idx++) {\n                        if (selectedIndexes[idx] !== undefined) {\n                            this._getElementByIndex(selectedIndexes[idx]).removeClass(SELECTED);\n                        } else if (selectedDataItems[idx]) {\n                            this._getElementByDataItem(selectedDataItems[idx]).removeClass(SELECTED);\n                        }\n                        removed.push({\n                            index: selectedIndexes[idx],\n                            position: idx,\n                            dataItem: selectedDataItems[idx]\n                        });\n                    }\n                    this._values = [];\n                    this._selectedDataItems = [];\n                    this._selectedIndexes = [];\n                } else if (selectable === 'multiple') {\n                    for (var i = 0; i < indices.length; i++) {\n                        result = null;\n                        position = $.inArray(indices[i], selectedIndexes);\n                        dataItem = this.dataItemByIndex(indices[i]);\n                        if (position === -1 && dataItem) {\n                            for (var j = 0; j < selectedDataItems.length; j++) {\n                                match = isPrimitive(dataItem) ? selectedDataItems[j] === dataItem : valueGetter(selectedDataItems[j]) === valueGetter(dataItem);\n                                if (match) {\n                                    item = this._getElementByIndex(indices[i]);\n                                    result = this._deselectSingleItem(item, j, indices[i], removedindexesCounter);\n                                }\n                            }\n                        } else {\n                            selectedIndex = selectedIndexes[position];\n                            if (selectedIndex !== undefined) {\n                                item = this._getElementByIndex(selectedIndex);\n                                result = this._deselectSingleItem(item, position, selectedIndex, removedindexesCounter);\n                            }\n                        }\n                        if (result) {\n                            indices.splice(i, 1);\n                            removed.push(result);\n                            removedindexesCounter++;\n                            i--;\n                        }\n                    }\n                }\n                return {\n                    indices: indices,\n                    removed: removed\n                };\n            },\n            _deselectSingleItem: function (item, position, selectedIndex, removedindexesCounter) {\n                var dataItem;\n                if (!item.hasClass(SELECTED)) {\n                    return;\n                }\n                item.removeClass(SELECTED);\n                this._values.splice(position, 1);\n                this._selectedIndexes.splice(position, 1);\n                dataItem = this._selectedDataItems.splice(position, 1)[0];\n                return {\n                    index: selectedIndex,\n                    position: position + removedindexesCounter,\n                    dataItem: dataItem\n                };\n            },\n            _deselectCurrentValues: function (indices) {\n                var children = this.element[0].children;\n                var value, index, position;\n                var values = this._values;\n                var removed = [];\n                var idx = 0;\n                var j;\n                if (this.options.selectable !== 'multiple' || !this.isFiltered()) {\n                    return [];\n                }\n                if (indices[0] === -1) {\n                    $(children).removeClass(SELECTED);\n                    removed = $.map(this._selectedDataItems.slice(0), function (dataItem, idx) {\n                        return {\n                            dataItem: dataItem,\n                            position: idx\n                        };\n                    });\n                    this._selectedIndexes = [];\n                    this._selectedDataItems = [];\n                    this._values = [];\n                    return removed;\n                }\n                for (; idx < indices.length; idx++) {\n                    position = -1;\n                    index = indices[idx];\n                    if (this.dataItemByIndex(index)) {\n                        value = this._valueGetter(this.dataItemByIndex(index));\n                    }\n                    for (j = 0; j < values.length; j++) {\n                        if (value == values[j]) {\n                            position = j;\n                            break;\n                        }\n                    }\n                    if (position > -1) {\n                        removed.push(this.removeAt(position));\n                        $(children[index]).removeClass(SELECTED);\n                    }\n                }\n                return removed;\n            },\n            _getSkip: function (index, take) {\n                var page = index < take ? 1 : Math.floor(index / take) + 1;\n                return (page - 1) * take;\n            },\n            _select: function (indexes) {\n                var that = this, singleSelection = this.options.selectable !== 'multiple', dataSource = this.dataSource, dataItem, oldSkip, take = this.itemCount, valueGetter = this._valueGetter, added = [];\n                if (singleSelection) {\n                    that._selectedIndexes = [];\n                    that._selectedDataItems = [];\n                    that._values = [];\n                }\n                oldSkip = dataSource.skip();\n                $.each(indexes, function (_, index) {\n                    var skip = that._getSkip(index, take);\n                    that.mute(function () {\n                        dataSource.range(skip, take);\n                        dataItem = that._findDataItem(dataSource.view(), [index - skip]);\n                        that._selectedIndexes.push(index);\n                        that._selectedDataItems.push(dataItem);\n                        that._values.push(isPrimitive(dataItem) ? dataItem : valueGetter(dataItem));\n                        added.push({\n                            index: index,\n                            dataItem: dataItem\n                        });\n                        that._getElementByIndex(index).addClass(SELECTED);\n                        dataSource.range(oldSkip, take);\n                    });\n                });\n                that._values = that._checkValuesOrder(that._values);\n                return added;\n            },\n            _clickHandler: function (e) {\n                var item = $(e.currentTarget);\n                if (!e.isDefaultPrevented() && item.attr('data-uid')) {\n                    this.trigger(CLICK, { item: item });\n                }\n            },\n            _buildValueGetter: function () {\n                this._valueGetter = kendo.getter(this.options.dataValueField);\n            },\n            _calculateGroupPadding: function (height) {\n                var firstItem = this.items().first(), groupHeader = this.header, padding = 0;\n                if (groupHeader[0] && groupHeader[0].style.display !== 'none') {\n                    if (height !== 'auto') {\n                        padding = kendo.support.scrollbar();\n                    }\n                    padding += parseFloat(firstItem.css('border-right-width'), 10) + parseFloat(firstItem.children('.k-group').css('right'), 10);\n                    groupHeader.css('padding-right', padding);\n                }\n            },\n            _calculateColumnsHeaderPadding: function () {\n                if (this.options.columns && this.options.columns.length) {\n                    var isRtl = kendo.support.isRtl(this.wrapper);\n                    var scrollbar = kendo.support.scrollbar();\n                    var columnsHeader = this.content.parent().parent().find('.k-table-header');\n                    var total = this.dataSource.total();\n                    columnsHeader.css(isRtl ? 'padding-left' : 'padding-right', total ? scrollbar : 0);\n                }\n            }\n        });\n        kendo.ui.VirtualList = VirtualList;\n        kendo.ui.plugin(VirtualList);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}