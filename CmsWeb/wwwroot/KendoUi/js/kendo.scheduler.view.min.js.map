{"version":3,"sources":["kendo.scheduler.view.js"],"names":["f","define","kendo","ui","scheduler","$","levels","values","key","collect","depth","level","idx","result","length","push","table","tableRows","className","trim","join","allDayTable","timesHeader","columnLevelCount","allDaySlot","rowCount","text","content","scrollbar","scrollbarWidth","support","collidingEvents","elements","start","end","index","startIndex","overlaps","endIndex","rangeIndex","eventsForSlot","eventElement","slotStart","slotEnd","event","events","createColumns","eventElements","_createColumns","createRows","eventRange","column","j","columnLength","endOverlaps","columns","createDateLayoutConfiguration","name","dates","inner","times","configuration","each","item","obj","minorTicks","createLayoutConfiguration","resources","template","parentValue","data","dataIndex","value","resource","dataSource","view","filter","itemParentValue","getter","dataParentValueField","undefined","dataValueField","htmlEncode","dataTextField","color","dataColorField","field","title","slice","groupEqFilter","Array","isArray","ObservableArray","addSelectedState","cell","replace","selectedStateRegExp","Color","window","getDate","date","Widget","outerHeight","_outerHeight","keys","NS","INVERSE_COLOR_CLASS","MIN_HORIZONTAL_SCROLL_SIZE","math","Math","HINT","ResourceView","Class","extend","init","isRtl","enforceAllDaySlot","this","_index","_timeSlotCollections","_daySlotCollections","_isRtl","_enforceAllDaySlot","addTimeSlotCollection","startDate","endDate","_addCollection","addDaySlotCollection","collections","collection","SlotCollection","timeSlotCollectionCount","daySlotCollectionCount","daySlotByPosition","x","y","byDate","_slotByPosition","timeSlotByPosition","collectionIndex","slotIndex","slot","width","height","nextSlot","horizontalEnd","verticalEnd","count","at","offsetWidth","offsetHeight","offsetLeft","offsetTop","refresh","timeSlotRanges","startTime","endTime","firstIndex","lastIndex","_startSlot","inRange","_endSlot","MS_PER_DAY","first","last","_continuousRange","TimeSlotRange","daySlotRanges","isAllDay","DaySlotRange","range","head","tail","startSlot","endSlot","ranges","slotRanges","isDay","_startTime","toUtcTime","_endTime","isMultiDay","_startCollection","startInRange","_endCollection","endInRange","_getCollections","continuousSlot","reverse","pad","isDaySlot","firstSlot","lastSlot","upSlot","keepCollection","groupByDateVertically","that","moveToDaySlot","isFirstCell","_verticalSlot","downSlot","moveToTimeSlot","leftSlot","_horizontalSlot","rightSlot","step","swapCollection","_collection","multiday","time","_start","slotByStartDate","slotByEndDate","getSlotCollection","getTimeSlotCollection","getDaySlotCollection","SlotRange","options","innerHeight","addEvent","outerRect","snap","_rect","property","top","bottom","left","right","startOffset","startSlotDuration","endOffset","endSlotDuration","element","round","innerRect","innerWidth","groupIndex","_slots","_events","_end","_groupIndex","_collectionIndex","allday","addTimeSlot","isHorizontal","TimeSlot","addDaySlot","eventCount","DaySlot","Slot","clientWidth","clientHeight","timezone","toLocalDate","fn","apply","arguments","offsetX","rtl","offset","duration","difference","floor","children","firstChild","firstChildHeight","firstChildTop","Date","SchedulerView","call","_normalizeOptions","_scrollbar","_resizeHint","_moveHint","_cellId","guid","_resourcesForGroups","_selectedSlots","visibleEndDate","setMilliseconds","workDayStart","workDayEnd","_isMobile","mobile","mobileOS","_addResourceView","resourceView","groups","dateForTitle","format","selectedDateFormat","shortDateForTitle","selectedShortDateFormat","mobileDateForTitle","selectedMobileDateFormat","_changeGroup","selection","previous","method","_isGroupedByDate","_changeDate","group","_changeGroupContinuously","_changeViewPeriod","_isInRange","newStart","newEnd","min","max","_horizontalSlots","multiple","tempSlot","horizontalRange","isVertical","_isVerticallyGrouped","_normalizeHorizontalSelection","_getNextHorizontalRange","_continuousSlot","_verticalSlots","verticalRange","_normalizeVerticalSelection","_getNextVerticalRange","_footer","html","messages","today","footer","appendTo","on","e","action","currentDate","timezoneOffset","preventDefault","convert","getTimezoneOffset","trigger","constrainSelection","move","shift","slots","backward","handled","verticalByDate","DOWN","UP","_updateDirection","LEFT","RIGHT","moveToEventInGroup","selectedEvents","prev","found","lastSelected","i","_continuousEvents","uid","inArray","moveToEvent","allEvents","uniqueAllEvents","sortedEvents","eventIndex","_getAllEvents","_getUniqueEvents","_getSortedEvents","_getNextEventIndexBySlot","_getStartIdx","_getSelectedSlot","current","candidate","_current","has","_scrollTo","select","clearSelection","_selectEvents","_selectSlots","eventStartDate","tempIndex","slotStartDate","getTime","selectedEventIndex","concat","exists","sort","second","firstStartDate","secondStartDate","setAttribute","groupEvent","groupEvents","add","indexOf","addClass","attr","addDays","_resourceValue","valuePrimitive","_setResourceValue","groupLevelMember","setter","_resourceBySlot","resourceIndex","groupOptions","nestedMember","dateGroupCompensation","groupLevel","passedChildren","numberOfChildren","groupedResources","orientation","rowLevels","columnLevels","_createResizeHint","css","_removeResizeHint","remove","_removeMoveHint","container","elementOffset","elementOffsetDir","containerScroll","scrollTop","containerOffsetDir","bottomDistance","_inverseEventColor","eventColor","eventColorIsDark","isDark","eventBackground","eventBackgroundIsDark","_eventTmpl","wrapper","tmpl","settings","Template","templateSettings","paramName","type","state","storage","proxy","eventResources","eventResource","resourceColor","get","createLayout","layout","allDayIndex","rows","allDay","splice","_isVirtualized","_trimRowLevels","find","append","_topSection","_bottomSection","_updateDomRowLevels","_groupOrientation","_outerWidth","_scroller","virtual","levelMarker","stopAtLevel","rowLevelIndex","stop","lastGroup","cachedRowLevels","_hasContentToRender","parentLevel","hasParent","createNextLayout","trimmedRowLevels","rowSpan","clone","_height","_times","parseInt","_virtualContent","render","_cachedEvents","_tryRenderContent","bufferHeight","groupCells","_rowLevelIndices","map","toArray","refreshLayout","datesHeaderRows","isSchedulerHeightSet","contentDiv","timesTable","toolbar","headerHeight","paddingDirection","eq","datesHeader","el","initialHeight","newHeight","style","kineticScrollNeeded","removeClass","dateGroup","thElm","_datesHeader","closest","wrap","parent","touchScroller","scrollLeft","avoidScrolling","target","movable","_touchScroller","scrollElement","bind","sender","groupIdx","groupLength","_createDateLayout","_createColumnsLayout","_createRowsLayout","selectionByElement","removeAttr","destroy","calendarInfo","getCulture","calendars","standard","prevGroupSlot","nextGroupSlot","_eventOptionsForMove","_updateEventForResize","_updateEventForSelection","_innerElements","countInner","innerCollection","innerSpan","innerEls","isMobile","rowIndex","rowsBefore","currentRow","rowspan","split","rowHeaderRows","columnIndex","columnLevelIndex","th","colspan","allDayTableRows","lastLevel","td","cellContent","dateTableRows","re","processor","parts","channels","formats","resolveColor","process","exec","r","g","b","normalizeByte","prototype","charAt","substr","toLowerCase","namedColors","isNaN","percBrightness","sqrt","brightnessValue","aqua","azure","beige","black","blue","brown","coral","cyan","darkblue","darkcyan","darkgray","darkgreen","darkorange","darkred","dimgray","fuchsia","gold","goldenrod","gray","green","greenyellow","indigo","ivory","khaki","lightblue","lightgrey","lightgreen","lightpink","lightyellow","lime","limegreen","linen","magenta","maroon","mediumblue","navy","olive","orange","orangered","orchid","pink","plum","purple","red","royalblue","salmon","silver","skyblue","slateblue","slategray","snow","steelblue","tan","teal","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","jQuery","amd","a1","a2","a3"],"mappings":"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","file":"kendo.scheduler.view.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.scheduler.view', ['kendo.core'], f);\n}(function () {\n    var __meta__ = {\n        id: 'scheduler.view',\n        name: 'Scheduler View',\n        category: 'web',\n        description: 'The Scheduler Common View',\n        depends: ['core'],\n        hidden: true\n    };\n    kendo.ui.scheduler = {};\n    (function ($) {\n        var kendo = window.kendo, ui = kendo.ui, getDate = kendo.date.getDate, Widget = ui.Widget, outerHeight = kendo._outerHeight, keys = kendo.keys, NS = '.kendoSchedulerView', INVERSE_COLOR_CLASS = 'k-event-inverse', MIN_HORIZONTAL_SCROLL_SIZE = 1024, math = Math;\n        function levels(values, key) {\n            var result = [];\n            function collect(depth, values) {\n                values = values[key];\n                if (values) {\n                    var level = result[depth] = result[depth] || [];\n                    for (var idx = 0; idx < values.length; idx++) {\n                        level.push(values[idx]);\n                        collect(depth + 1, values[idx]);\n                    }\n                }\n            }\n            collect(0, values);\n            return result;\n        }\n        function table(tableRows, className) {\n            if (!tableRows.length) {\n                return '';\n            }\n            return '<table role=\"presentation\" class=\"' + kendo.trim('k-scheduler-table ' + (className || '')) + '\">' + '<tr>' + tableRows.join('</tr><tr>') + '</tr>' + '</table>';\n        }\n        function allDayTable(tableRows, className) {\n            if (!tableRows.length) {\n                return '';\n            }\n            return '<div style=\\'position:relative\\'>' + table(tableRows, className) + '</div>';\n        }\n        function timesHeader(columnLevelCount, allDaySlot, rowCount) {\n            var tableRows = [];\n            if (rowCount > 0) {\n                for (var idx = 0; idx < columnLevelCount; idx++) {\n                    tableRows.push('<th>&#8203;</th>');\n                }\n            }\n            if (allDaySlot) {\n                tableRows.push('<th class=\"k-scheduler-times-all-day\">' + allDaySlot.text + '</th>');\n            }\n            if (rowCount < 1) {\n                return $();\n            }\n            return $('<div class=\"k-scheduler-times\">' + table(tableRows) + '</div>');\n        }\n        function content() {\n            return $('<div class=\"k-scheduler-content\">' + '<table role=\"presentation\" class=\"k-scheduler-table\"></table>' + '</div>');\n        }\n        var HINT = '<div class=\"k-marquee k-scheduler-marquee\">' + '<div class=\"k-marquee-color\"></div>' + '<div class=\"k-marquee-text\">' + '<div class=\"k-label-top\"></div>' + '<div class=\"k-label-bottom\"></div>' + '</div>' + '</div>';\n        var ResourceView = kendo.Class.extend({\n            init: function (index, isRtl, enforceAllDaySlot) {\n                this._index = index;\n                this._timeSlotCollections = [];\n                this._daySlotCollections = [];\n                this._isRtl = isRtl;\n                this._enforceAllDaySlot = enforceAllDaySlot;\n            },\n            addTimeSlotCollection: function (startDate, endDate) {\n                return this._addCollection(startDate, endDate, this._timeSlotCollections);\n            },\n            addDaySlotCollection: function (startDate, endDate) {\n                return this._addCollection(startDate, endDate, this._daySlotCollections);\n            },\n            _addCollection: function (startDate, endDate, collections) {\n                var collection = new SlotCollection(startDate, endDate, this._index, collections.length);\n                collections.push(collection);\n                return collection;\n            },\n            timeSlotCollectionCount: function () {\n                return this._timeSlotCollections.length;\n            },\n            daySlotCollectionCount: function () {\n                return this._daySlotCollections.length;\n            },\n            daySlotByPosition: function (x, y, byDate) {\n                return this._slotByPosition(x, y, this._daySlotCollections, byDate);\n            },\n            timeSlotByPosition: function (x, y, byDate) {\n                return this._slotByPosition(x, y, this._timeSlotCollections, byDate);\n            },\n            _slotByPosition: function (x, y, collections, byDate) {\n                for (var collectionIndex = 0; collectionIndex < collections.length; collectionIndex++) {\n                    var collection = collections[collectionIndex];\n                    for (var slotIndex = 0; slotIndex < collection.count(); slotIndex++) {\n                        var slot = collection.at(slotIndex);\n                        var width = slot.offsetWidth;\n                        var height = slot.offsetHeight;\n                        var nextSlot;\n                        var horizontalEnd = slot.offsetLeft + width;\n                        var verticalEnd = slot.offsetTop + height;\n                        if (!byDate) {\n                            nextSlot = collection.at(slotIndex + 1);\n                        }\n                        if (nextSlot) {\n                            if (nextSlot.offsetLeft != slot.offsetLeft) {\n                                if (this._isRtl) {\n                                    horizontalEnd = slot.offsetLeft + (slot.offsetLeft - nextSlot.offsetLeft);\n                                } else {\n                                    horizontalEnd = nextSlot.offsetLeft;\n                                }\n                            } else {\n                                verticalEnd = nextSlot.offsetTop;\n                            }\n                        }\n                        if (x >= slot.offsetLeft && x < horizontalEnd && y >= slot.offsetTop && y < verticalEnd) {\n                            return slot;\n                        }\n                    }\n                }\n            },\n            refresh: function () {\n                var collectionIndex;\n                for (collectionIndex = 0; collectionIndex < this._daySlotCollections.length; collectionIndex++) {\n                    this._daySlotCollections[collectionIndex].refresh();\n                }\n                for (collectionIndex = 0; collectionIndex < this._timeSlotCollections.length; collectionIndex++) {\n                    this._timeSlotCollections[collectionIndex].refresh();\n                }\n            },\n            timeSlotRanges: function (startTime, endTime) {\n                var collections = this._timeSlotCollections;\n                var start = this._startSlot(startTime, collections);\n                var firstIndex, lastIndex;\n                if (!start.inRange && startTime >= start.slot.end) {\n                    firstIndex = start.slot.collectionIndex + 1;\n                    start = null;\n                }\n                var end = start;\n                if (startTime < endTime) {\n                    end = this._endSlot(endTime, collections);\n                }\n                if (end && !end.inRange && endTime <= end.slot.start) {\n                    lastIndex = end.slot.collectionIndex;\n                    if (endTime === end.slot.start && (start && lastIndex > start.slot.collectionIndex || lastIndex > firstIndex)) {\n                        lastIndex -= 1;\n                    }\n                    end = null;\n                }\n                if (start === null && end === null) {\n                    if (endTime - startTime < kendo.date.MS_PER_DAY) {\n                        return [];\n                    } else {\n                        start = {\n                            inRange: true,\n                            slot: collections[firstIndex].first()\n                        };\n                        end = {\n                            inRange: true,\n                            slot: collections[lastIndex].last()\n                        };\n                    }\n                }\n                if (start === null) {\n                    if (end.slot.end <= startTime) {\n                        return [];\n                    }\n                    start = {\n                        inRange: true,\n                        slot: (collections[firstIndex] || collections[end.slot.collectionIndex]).first()\n                    };\n                }\n                if (end === null) {\n                    if (start.slot.start >= endTime) {\n                        return [];\n                    }\n                    end = {\n                        inRange: true,\n                        slot: (collections[lastIndex] || collections[start.slot.collectionIndex]).last()\n                    };\n                }\n                return this._continuousRange(TimeSlotRange, collections, start, end);\n            },\n            daySlotRanges: function (startTime, endTime, isAllDay) {\n                var collections = this._daySlotCollections;\n                var start = this._startSlot(startTime, collections, isAllDay);\n                if (!start.inRange && startTime >= start.slot.end) {\n                    start = null;\n                }\n                var end = start;\n                if (startTime < endTime) {\n                    end = this._endSlot(endTime, collections, isAllDay);\n                }\n                if (end && !end.inRange && endTime <= end.slot.start) {\n                    end = null;\n                }\n                if (start === null && end === null) {\n                    return [];\n                }\n                if (start === null) {\n                    if (end.slot.end <= startTime) {\n                        return [];\n                    }\n                    do {\n                        startTime += kendo.date.MS_PER_DAY;\n                        start = this._startSlot(startTime, collections, isAllDay);\n                    } while (!start.inRange && startTime >= start.slot.end);\n                }\n                if (end === null) {\n                    if (start.slot.start >= endTime) {\n                        return [];\n                    }\n                    do {\n                        endTime -= kendo.date.MS_PER_DAY;\n                        end = this._endSlot(endTime, collections, isAllDay);\n                    } while (!end.inRange && endTime <= end.slot.start);\n                }\n                return this._continuousRange(DaySlotRange, collections, start, end);\n            },\n            _continuousRange: function (range, collections, start, end) {\n                var startSlot = start.slot;\n                var endSlot = end.slot;\n                var startIndex = startSlot.collectionIndex;\n                var endIndex = endSlot.collectionIndex;\n                var ranges = [];\n                for (var collectionIndex = startIndex; collectionIndex <= endIndex; collectionIndex++) {\n                    var collection = collections[collectionIndex];\n                    var first = collection.first();\n                    var last = collection.last();\n                    var head = false;\n                    var tail = false;\n                    if (collectionIndex == startIndex) {\n                        tail = !start.inRange;\n                    }\n                    if (collectionIndex == endIndex) {\n                        head = !end.inRange;\n                    }\n                    if (first.start < startSlot.start) {\n                        first = startSlot;\n                    }\n                    if (last.start > endSlot.start) {\n                        last = endSlot;\n                    }\n                    if (startIndex < endIndex) {\n                        if (collectionIndex == startIndex) {\n                            head = true;\n                        } else if (collectionIndex == endIndex) {\n                            tail = true;\n                        } else {\n                            head = tail = true;\n                        }\n                    }\n                    ranges.push(new range({\n                        start: first,\n                        end: last,\n                        collection: collection,\n                        head: head,\n                        tail: tail\n                    }));\n                }\n                return ranges;\n            },\n            slotRanges: function (event, isDay) {\n                var startTime = event._startTime || kendo.date.toUtcTime(event.start);\n                var endTime = event._endTime || kendo.date.toUtcTime(event.end);\n                if (isDay === undefined) {\n                    if (this._enforceAllDaySlot) {\n                        isDay = event.isMultiDay();\n                    } else {\n                        isDay = event.isAllDay;\n                    }\n                }\n                if (isDay) {\n                    return this.daySlotRanges(startTime, endTime, event.isAllDay);\n                }\n                return this.timeSlotRanges(startTime, endTime);\n            },\n            ranges: function (startTime, endTime, isDay, isAllDay) {\n                if (typeof startTime != 'number') {\n                    startTime = kendo.date.toUtcTime(startTime);\n                }\n                if (typeof endTime != 'number') {\n                    endTime = kendo.date.toUtcTime(endTime);\n                }\n                if (isDay) {\n                    return this.daySlotRanges(startTime, endTime, isAllDay);\n                }\n                return this.timeSlotRanges(startTime, endTime);\n            },\n            _startCollection: function (date, collections) {\n                for (var collectionIndex = 0; collectionIndex < collections.length; collectionIndex++) {\n                    var collection = collections[collectionIndex];\n                    if (collection.startInRange(date)) {\n                        return collection;\n                    }\n                }\n                return null;\n            },\n            _endCollection: function (date, collections, isAllDay) {\n                for (var collectionIndex = 0; collectionIndex < collections.length; collectionIndex++) {\n                    var collection = collections[collectionIndex];\n                    if (collection.endInRange(date, isAllDay)) {\n                        return collection;\n                    }\n                }\n                return null;\n            },\n            _getCollections: function (isDay) {\n                return isDay ? this._daySlotCollections : this._timeSlotCollections;\n            },\n            continuousSlot: function (slot, reverse) {\n                var pad = reverse ? -1 : 1;\n                var collections = this._getCollections(slot.isDaySlot);\n                var collection = collections[slot.collectionIndex + pad];\n                return collection ? collection[reverse ? 'last' : 'first']() : undefined;\n            },\n            firstSlot: function () {\n                var collections = this._getCollections(this.daySlotCollectionCount());\n                return collections[0].first();\n            },\n            lastSlot: function () {\n                var collections = this._getCollections(this.daySlotCollectionCount());\n                return collections[collections.length - 1].last();\n            },\n            upSlot: function (slot, keepCollection, groupByDateVertically) {\n                var that = this;\n                var moveToDaySlot = function (isDaySlot, collectionIndex, index) {\n                    var isFirstCell = index === 0;\n                    if (!keepCollection && !isDaySlot && isFirstCell && that.daySlotCollectionCount()) {\n                        return that._daySlotCollections[0].at(collectionIndex);\n                    }\n                };\n                if (!this.timeSlotCollectionCount()) {\n                    keepCollection = true;\n                }\n                return this._verticalSlot(slot, -1, moveToDaySlot, groupByDateVertically);\n            },\n            downSlot: function (slot, keepCollection, groupByDateVertically) {\n                var that = this;\n                var moveToTimeSlot = function (isDaySlot, collectionIndex, index) {\n                    if (!keepCollection && isDaySlot && that.timeSlotCollectionCount()) {\n                        return that._timeSlotCollections[index].at(0);\n                    }\n                };\n                if (!this.timeSlotCollectionCount()) {\n                    keepCollection = true;\n                }\n                return this._verticalSlot(slot, 1, moveToTimeSlot, groupByDateVertically);\n            },\n            leftSlot: function (slot, groupByDateVertically) {\n                return this._horizontalSlot(slot, -1, groupByDateVertically);\n            },\n            rightSlot: function (slot, groupByDateVertically) {\n                return this._horizontalSlot(slot, 1, groupByDateVertically);\n            },\n            _horizontalSlot: function (slot, step, groupByDateVertically) {\n                var index = slot.index;\n                var isDaySlot = slot.isDaySlot;\n                var collectionIndex = slot.collectionIndex;\n                var collections = this._getCollections(isDaySlot);\n                isDaySlot = groupByDateVertically ? false : isDaySlot;\n                if (isDaySlot) {\n                    index += step;\n                } else {\n                    collectionIndex += step;\n                }\n                var collection = collections[collectionIndex];\n                return collection ? collection.at(index) : undefined;\n            },\n            _verticalSlot: function (slot, step, swapCollection, groupByDateVertically) {\n                var index = slot.index;\n                var isDaySlot = slot.isDaySlot;\n                var collectionIndex = slot.collectionIndex;\n                var collections = this._getCollections(isDaySlot);\n                slot = swapCollection(isDaySlot, collectionIndex, index);\n                if (slot) {\n                    return slot;\n                }\n                isDaySlot = groupByDateVertically ? false : isDaySlot;\n                if (isDaySlot) {\n                    collectionIndex += step;\n                } else {\n                    index += step;\n                }\n                var collection = collections[collectionIndex];\n                return collection ? collection.at(index) : undefined;\n            },\n            _collection: function (index, multiday) {\n                var collections = multiday ? this._daySlotCollections : this._timeSlotCollections;\n                return collections[index];\n            },\n            _startSlot: function (time, collections, isAllDay) {\n                var collection = this._startCollection(time, collections);\n                var inRange = true;\n                var index = 0;\n                if (!collection) {\n                    collection = collections[index];\n                    while (index < collections.length - 1 && collection._start < time) {\n                        index++;\n                        collection = collections[index];\n                    }\n                    inRange = false;\n                }\n                var slot = collection.slotByStartDate(time, isAllDay);\n                if (!slot) {\n                    slot = collection.first();\n                    inRange = false;\n                }\n                return {\n                    slot: slot,\n                    inRange: inRange\n                };\n            },\n            _endSlot: function (time, collections, isAllDay) {\n                var collection = this._endCollection(time, collections, isAllDay);\n                var inRange = true;\n                var index = collections.length - 1;\n                if (!collection) {\n                    collection = collections[index];\n                    while (index > 0 && collection._start > time) {\n                        index--;\n                        collection = collections[index];\n                    }\n                    inRange = false;\n                }\n                var slot = collection.slotByEndDate(time, isAllDay);\n                if (!slot) {\n                    if (time <= collection.first().start) {\n                        slot = collection.first();\n                    } else {\n                        slot = collection.last();\n                    }\n                    inRange = false;\n                }\n                return {\n                    slot: slot,\n                    inRange: inRange\n                };\n            },\n            getSlotCollection: function (index, isDay) {\n                return this[isDay ? 'getDaySlotCollection' : 'getTimeSlotCollection'](index);\n            },\n            getTimeSlotCollection: function (index) {\n                return this._timeSlotCollections[index];\n            },\n            getDaySlotCollection: function (index) {\n                return this._daySlotCollections[index];\n            }\n        });\n        var SlotRange = kendo.Class.extend({\n            init: function (options) {\n                $.extend(this, options);\n            },\n            innerHeight: function () {\n                var collection = this.collection;\n                var startIndex = this.start.index;\n                var endIndex = this.end.index;\n                var result = 0;\n                for (var slotIndex = startIndex; slotIndex <= endIndex; slotIndex++) {\n                    result += collection.at(slotIndex).offsetHeight;\n                }\n                return result;\n            },\n            events: function () {\n                return this.collection.events();\n            },\n            addEvent: function (event) {\n                this.events().push(event);\n            },\n            startSlot: function () {\n                if (this.start.offsetLeft > this.end.offsetLeft) {\n                    return this.end;\n                }\n                return this.start;\n            },\n            endSlot: function () {\n                if (this.start.offsetLeft > this.end.offsetLeft) {\n                    return this.start;\n                }\n                return this.end;\n            }\n        });\n        var TimeSlotRange = SlotRange.extend({\n            innerHeight: function () {\n                var collection = this.collection;\n                var startIndex = this.start.index;\n                var endIndex = this.end.index;\n                var result = 0;\n                for (var slotIndex = startIndex; slotIndex <= endIndex; slotIndex++) {\n                    result += collection.at(slotIndex).offsetHeight;\n                }\n                return result;\n            },\n            outerRect: function (start, end, snap) {\n                return this._rect('offset', start, end, snap);\n            },\n            _rect: function (property, start, end, snap) {\n                var top;\n                var bottom;\n                var left;\n                var right;\n                var startSlot = this.start;\n                var endSlot = this.end;\n                var isRtl = kendo.support.isRtl(startSlot.element);\n                if (typeof start != 'number') {\n                    start = kendo.date.toUtcTime(start);\n                }\n                if (typeof end != 'number') {\n                    end = kendo.date.toUtcTime(end);\n                }\n                if (snap) {\n                    top = startSlot.offsetTop;\n                    bottom = endSlot.offsetTop + endSlot[property + 'Height'];\n                    if (isRtl) {\n                        left = endSlot.offsetLeft;\n                        right = startSlot.offsetLeft + startSlot[property + 'Width'];\n                    } else {\n                        left = startSlot.offsetLeft;\n                        right = endSlot.offsetLeft + endSlot[property + 'Width'];\n                    }\n                } else {\n                    var startOffset = start - startSlot.start;\n                    if (startOffset < 0) {\n                        startOffset = 0;\n                    }\n                    var startSlotDuration = startSlot.end - startSlot.start;\n                    top = startSlot.offsetTop + startSlot[property + 'Height'] * startOffset / startSlotDuration;\n                    var endOffset = endSlot.end - end;\n                    if (endOffset < 0) {\n                        endOffset = 0;\n                    }\n                    var endSlotDuration = endSlot.end - endSlot.start;\n                    bottom = endSlot.offsetTop + endSlot[property + 'Height'] - endSlot[property + 'Height'] * endOffset / endSlotDuration;\n                    if (isRtl) {\n                        left = Math.round(endSlot.offsetLeft + endSlot[property + 'Width'] * endOffset / endSlotDuration);\n                        right = Math.round(startSlot.offsetLeft + startSlot[property + 'Width'] - startSlot[property + 'Width'] * startOffset / startSlotDuration);\n                    } else {\n                        left = Math.round(startSlot.offsetLeft + startSlot[property + 'Width'] * startOffset / startSlotDuration);\n                        right = Math.round(endSlot.offsetLeft + endSlot[property + 'Width'] - endSlot[property + 'Width'] * endOffset / endSlotDuration);\n                    }\n                }\n                return {\n                    top: top,\n                    bottom: bottom,\n                    left: left === 0 ? left : left + 1,\n                    right: right\n                };\n            },\n            innerRect: function (start, end, snap) {\n                return this._rect('client', start, end, snap);\n            }\n        });\n        var DaySlotRange = SlotRange.extend({\n            innerWidth: function () {\n                var collection = this.collection;\n                var startIndex = this.start.index;\n                var endIndex = this.end.index;\n                var result = 0;\n                var width = startIndex !== endIndex ? 'offsetWidth' : 'clientWidth';\n                for (var slotIndex = startIndex; slotIndex <= endIndex; slotIndex++) {\n                    result += collection.at(slotIndex)[width];\n                }\n                return result;\n            }\n        });\n        var SlotCollection = kendo.Class.extend({\n            init: function (startDate, endDate, groupIndex, collectionIndex) {\n                this._slots = [];\n                this._events = [];\n                this._start = kendo.date.toUtcTime(startDate);\n                this._end = kendo.date.toUtcTime(endDate);\n                this._groupIndex = groupIndex;\n                this._collectionIndex = collectionIndex;\n            },\n            refresh: function () {\n                for (var slotIndex = 0; slotIndex < this._slots.length; slotIndex++) {\n                    this._slots[slotIndex].refresh();\n                }\n            },\n            startInRange: function (date) {\n                return this._start <= date && date < this._end;\n            },\n            endInRange: function (date, isAllDay) {\n                var end = isAllDay ? date < this._end : date <= this._end;\n                return this._start <= date && end;\n            },\n            slotByStartDate: function (date) {\n                var time = date;\n                if (typeof time != 'number') {\n                    time = kendo.date.toUtcTime(date);\n                }\n                for (var slotIndex = 0; slotIndex < this._slots.length; slotIndex++) {\n                    var slot = this._slots[slotIndex];\n                    if (slot.startInRange(time)) {\n                        return slot;\n                    }\n                }\n                return null;\n            },\n            slotByEndDate: function (date, allday) {\n                var time = date;\n                if (typeof time != 'number') {\n                    time = kendo.date.toUtcTime(date);\n                }\n                if (allday) {\n                    return this.slotByStartDate(date, false);\n                }\n                for (var slotIndex = 0; slotIndex < this._slots.length; slotIndex++) {\n                    var slot = this._slots[slotIndex];\n                    if (slot.endInRange(time)) {\n                        return slot;\n                    }\n                }\n                return null;\n            },\n            count: function () {\n                return this._slots.length;\n            },\n            events: function () {\n                return this._events;\n            },\n            addTimeSlot: function (element, start, end, isHorizontal) {\n                var slot = new TimeSlot(element, start, end, this._groupIndex, this._collectionIndex, this._slots.length, isHorizontal);\n                this._slots.push(slot);\n            },\n            addDaySlot: function (element, start, end, eventCount) {\n                var slot = new DaySlot(element, start, end, this._groupIndex, this._collectionIndex, this._slots.length, eventCount);\n                this._slots.push(slot);\n            },\n            first: function () {\n                return this._slots[0];\n            },\n            last: function () {\n                return this._slots[this._slots.length - 1];\n            },\n            at: function (index) {\n                return this._slots[index];\n            }\n        });\n        var Slot = kendo.Class.extend({\n            init: function (element, start, end, groupIndex, collectionIndex, index) {\n                this.element = element;\n                this.clientWidth = element.clientWidth;\n                this.clientHeight = element.clientHeight;\n                this.offsetWidth = element.offsetWidth;\n                this.offsetHeight = element.offsetHeight;\n                this.offsetTop = element.offsetTop;\n                this.offsetLeft = element.offsetLeft;\n                this.start = start;\n                this.end = end;\n                this.element = element;\n                this.groupIndex = groupIndex;\n                this.collectionIndex = collectionIndex;\n                this.index = index;\n                this.isDaySlot = false;\n            },\n            refresh: function () {\n                var element = this.element;\n                this.clientWidth = element.clientWidth;\n                this.clientHeight = element.clientHeight;\n                this.offsetWidth = element.offsetWidth;\n                this.offsetHeight = element.offsetHeight;\n                this.offsetTop = element.offsetTop;\n                this.offsetLeft = element.offsetLeft;\n            },\n            startDate: function () {\n                return kendo.timezone.toLocalDate(this.start);\n            },\n            endDate: function () {\n                return kendo.timezone.toLocalDate(this.end);\n            },\n            startInRange: function (date) {\n                return this.start <= date && date < this.end;\n            },\n            endInRange: function (date) {\n                return this.start < date && date <= this.end;\n            },\n            startOffset: function () {\n                return this.start;\n            },\n            endOffset: function () {\n                return this.end;\n            }\n        });\n        var TimeSlot = Slot.extend({\n            init: function (element, start, end, groupIndex, collectionIndex, index, isHorizontal) {\n                Slot.fn.init.apply(this, arguments);\n                this.isHorizontal = isHorizontal ? true : false;\n            },\n            offsetX: function (rtl, offset) {\n                if (rtl) {\n                    return this.offsetLeft + offset;\n                } else {\n                    return this.offsetLeft + offset;\n                }\n            },\n            startInRange: function (date) {\n                return this.start <= date && date < this.end;\n            },\n            endInRange: function (date) {\n                return this.start < date && date <= this.end;\n            },\n            startOffset: function (x, y, snap) {\n                if (snap) {\n                    return this.start;\n                }\n                var offset = $(this.element).offset();\n                var duration = this.end - this.start;\n                var difference;\n                var time;\n                if (this.isHorizontal) {\n                    var isRtl = kendo.support.isRtl(this.element);\n                    difference = x - offset.left;\n                    time = Math.floor(duration * (difference / this.offsetWidth));\n                    if (isRtl) {\n                        return this.start + duration - time;\n                    }\n                } else {\n                    difference = y - offset.top;\n                    time = Math.floor(duration * (difference / this.offsetHeight));\n                }\n                return this.start + time;\n            },\n            endOffset: function (x, y, snap) {\n                if (snap) {\n                    return this.end;\n                }\n                var offset = $(this.element).offset();\n                var duration = this.end - this.start;\n                var difference;\n                var time;\n                if (this.isHorizontal) {\n                    var isRtl = kendo.support.isRtl(this.element);\n                    difference = x - offset.left;\n                    time = Math.floor(duration * (difference / this.offsetWidth));\n                    if (isRtl) {\n                        return this.start + duration - time;\n                    }\n                } else {\n                    difference = y - offset.top;\n                    time = Math.floor(duration * (difference / this.offsetHeight));\n                }\n                return this.start + time;\n            }\n        });\n        var DaySlot = Slot.extend({\n            init: function (element, start, end, groupIndex, collectionIndex, index, eventCount) {\n                Slot.fn.init.apply(this, arguments);\n                this.eventCount = eventCount;\n                this.isDaySlot = true;\n                if (this.element.children.length) {\n                    var firstChild = this.element.children[0];\n                    this.firstChildHeight = firstChild.offsetHeight;\n                    this.firstChildTop = firstChild.offsetTop;\n                } else {\n                    this.firstChildHeight = 3;\n                    this.firstChildTop = 0;\n                }\n            },\n            startDate: function () {\n                var date = new Date(this.start);\n                return kendo.timezone.apply(date, 'Etc/UTC');\n            },\n            endDate: function () {\n                var date = new Date(this.end);\n                return kendo.timezone.apply(date, 'Etc/UTC');\n            },\n            startInRange: function (date) {\n                return this.start <= date && date < this.end;\n            },\n            endInRange: function (date) {\n                return this.start < date && date <= this.end;\n            }\n        });\n        var scrollbarWidth;\n        function scrollbar() {\n            scrollbarWidth = scrollbarWidth ? scrollbarWidth : kendo.support.scrollbar();\n            return scrollbarWidth;\n        }\n        kendo.ui.SchedulerView = Widget.extend({\n            init: function (element, options) {\n                Widget.fn.init.call(this, element, options);\n                this._normalizeOptions();\n                this._scrollbar = scrollbar();\n                this._isRtl = kendo.support.isRtl(element);\n                this._resizeHint = $();\n                this._moveHint = $();\n                this._cellId = kendo.guid();\n                this._resourcesForGroups();\n                this._selectedSlots = [];\n            },\n            visibleEndDate: function () {\n                return this.endDate();\n            },\n            _normalizeOptions: function () {\n                var options = this.options;\n                if (options.startTime) {\n                    options.startTime.setMilliseconds(0);\n                }\n                if (options.endTime) {\n                    options.endTime.setMilliseconds(0);\n                }\n                if (options.workDayStart) {\n                    options.workDayStart.setMilliseconds(0);\n                }\n                if (options.workDayEnd) {\n                    options.workDayEnd.setMilliseconds(0);\n                }\n            },\n            _isMobile: function () {\n                var options = this.options;\n                return options.mobile === true && kendo.support.mobileOS || options.mobile === 'phone' || options.mobile === 'tablet';\n            },\n            _addResourceView: function () {\n                var resourceView = new ResourceView(this.groups.length, this._isRtl, this.options.enforceAllDaySlot);\n                this.groups.push(resourceView);\n                return resourceView;\n            },\n            dateForTitle: function () {\n                return kendo.format(this.options.selectedDateFormat, this.startDate(), this.endDate());\n            },\n            shortDateForTitle: function () {\n                return kendo.format(this.options.selectedShortDateFormat, this.startDate(), this.endDate());\n            },\n            mobileDateForTitle: function () {\n                return kendo.format(this.options.selectedMobileDateFormat || this.options.selectedShortDateFormat, this.startDate(), this.endDate());\n            },\n            _changeGroup: function (selection, previous) {\n                var method = previous ? 'prevGroupSlot' : 'nextGroupSlot';\n                var slot = this[method](selection.start, selection.groupIndex, selection.isAllDay);\n                if (slot) {\n                    selection.groupIndex += previous ? -1 : 1;\n                }\n                if (this._isGroupedByDate() && !slot) {\n                    selection.groupIndex = previous ? this.groups.length - 1 : 0;\n                }\n                return slot;\n            },\n            _changeDate: function (selection, slot, previous) {\n                var group = this.groups[selection.groupIndex];\n                var collections, index;\n                if (previous) {\n                    collections = group._getCollections(false);\n                    index = group.daySlotCollectionCount() ? slot.index - 1 : slot.collectionIndex - 1;\n                    if (index >= 0) {\n                        return collections[index]._slots[collections[index]._slots.length - 1];\n                    }\n                } else {\n                    collections = group._getCollections(group.daySlotCollectionCount());\n                    index = group.daySlotCollectionCount() ? 0 : slot.collectionIndex + 1;\n                    var slotIndex = group.daySlotCollectionCount() ? slot.collectionIndex + 1 : 0;\n                    if (collections[index] && collections[index]._slots[slotIndex]) {\n                        return collections[index]._slots[slotIndex];\n                    }\n                }\n            },\n            _changeGroupContinuously: function () {\n                return null;\n            },\n            _changeViewPeriod: function () {\n                return false;\n            },\n            _isInRange: function (newStart, newEnd) {\n                if (!newStart || !newEnd || !this.options.min || !this.options.max) {\n                    return false;\n                }\n                return getDate(newStart) <= getDate(this.options.min) || getDate(newEnd) >= getDate(this.options.max);\n            },\n            _horizontalSlots: function (selection, ranges, multiple, reverse) {\n                var method = reverse ? 'leftSlot' : 'rightSlot';\n                var horizontalRange = {\n                    startSlot: ranges[0].start,\n                    endSlot: ranges[ranges.length - 1].end\n                };\n                var group = this.groups[selection.groupIndex];\n                var isVertical = this._isVerticallyGrouped();\n                if (!multiple) {\n                    var slot = this._normalizeHorizontalSelection(selection, ranges, reverse);\n                    if (slot) {\n                        horizontalRange.startSlot = horizontalRange.endSlot = slot;\n                    }\n                }\n                if (this._isGroupedByDate() && !multiple) {\n                    var tempSlot = this._changeGroup(selection, reverse);\n                    if (!tempSlot) {\n                        horizontalRange = this._getNextHorizontalRange(group, method, horizontalRange);\n                    } else {\n                        horizontalRange.startSlot = horizontalRange.endSlot = tempSlot;\n                    }\n                } else {\n                    horizontalRange.startSlot = group[method](horizontalRange.startSlot);\n                    horizontalRange.endSlot = group[method](horizontalRange.endSlot);\n                    if (!multiple && !isVertical && (!horizontalRange.startSlot || !horizontalRange.endSlot)) {\n                        horizontalRange.startSlot = horizontalRange.endSlot = this._changeGroup(selection, reverse);\n                    }\n                }\n                var continuousSlot;\n                if ((!horizontalRange.startSlot || !horizontalRange.endSlot) && !this._isGroupedByDate()) {\n                    continuousSlot = this._continuousSlot(selection, ranges, reverse);\n                    continuousSlot = this._changeGroupContinuously(selection, continuousSlot, multiple, reverse);\n                    if (continuousSlot) {\n                        horizontalRange.startSlot = horizontalRange.endSlot = continuousSlot;\n                    }\n                }\n                return horizontalRange;\n            },\n            _getNextHorizontalRange: function (group, method, horizontalRange) {\n                if (!this._isVerticallyGrouped()) {\n                    horizontalRange.startSlot = group[method](horizontalRange.startSlot);\n                    horizontalRange.endSlot = group[method](horizontalRange.endSlot);\n                }\n                return horizontalRange;\n            },\n            _verticalSlots: function (selection, ranges, multiple, reverse) {\n                var group = this.groups[selection.groupIndex];\n                var slot;\n                var verticalRange = {\n                    startSlot: ranges[0].start,\n                    endSlot: ranges[ranges.length - 1].end\n                };\n                if (!multiple) {\n                    slot = this._normalizeVerticalSelection(selection, ranges, reverse);\n                    if (slot) {\n                        verticalRange.startSlot = verticalRange.endSlot = slot;\n                    }\n                }\n                var method = reverse ? 'upSlot' : 'downSlot';\n                verticalRange = this._getNextVerticalRange(group, method, verticalRange, multiple);\n                if (!multiple && this._isVerticallyGrouped() && (!verticalRange.startSlot || !verticalRange.endSlot)) {\n                    if (this._isGroupedByDate()) {\n                        verticalRange.startSlot = verticalRange.endSlot = this._changeDate(selection, slot, reverse);\n                    } else {\n                        verticalRange.startSlot = verticalRange.endSlot = this._changeGroup(selection, reverse);\n                    }\n                }\n                return verticalRange;\n            },\n            _getNextVerticalRange: function (group, method, verticalRange, multiple) {\n                verticalRange.startSlot = group[method](verticalRange.startSlot, multiple);\n                verticalRange.endSlot = group[method](verticalRange.endSlot, multiple);\n                return verticalRange;\n            },\n            _normalizeHorizontalSelection: function () {\n                return null;\n            },\n            _normalizeVerticalSelection: function (selection, ranges, reverse) {\n                var slot;\n                if (reverse) {\n                    slot = ranges[0].start;\n                } else {\n                    slot = ranges[ranges.length - 1].end;\n                }\n                return slot;\n            },\n            _continuousSlot: function () {\n                return null;\n            },\n            _footer: function () {\n                var that = this;\n                var options = that.options;\n                if (that._isMobile()) {\n                    var html = '<div class=\"k-scheduler-footer k-toolbar\">';\n                    html += '<span class=\"k-scheduler-today\"><a href=\"#\" class=\"k-link\">';\n                    html += options.messages.today + '</a></span>';\n                    html += '</div>';\n                    that.footer = $(html).appendTo(that.element);\n                }\n                if (that.footer) {\n                    that.footer.on('click' + NS, '.k-scheduler-today', function (e) {\n                        e.preventDefault();\n                        var timezone = that.options.timezone;\n                        var action = 'today';\n                        var currentDate = new Date();\n                        var date;\n                        if (timezone) {\n                            var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                            date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                        } else {\n                            date = currentDate;\n                        }\n                        that.trigger('navigate', {\n                            view: that.name || options.name,\n                            action: action,\n                            date: date\n                        });\n                    });\n                }\n            },\n            constrainSelection: function (selection) {\n                var group = this.groups[0];\n                var slot;\n                if (!this.inRange(selection)) {\n                    slot = group.firstSlot();\n                    selection.isAllDay = slot.isDaySlot;\n                    selection.start = slot.startDate();\n                    selection.end = slot.endDate();\n                } else {\n                    if (!group.daySlotCollectionCount()) {\n                        selection.isAllDay = false;\n                    } else if (!group.timeSlotCollectionCount()) {\n                        selection.isAllDay = true;\n                    }\n                }\n                if (!this.groups[selection.groupIndex]) {\n                    selection.groupIndex = 0;\n                }\n            },\n            move: function (selection, key, shift) {\n                var handled = false;\n                var group = this.groups[selection.groupIndex];\n                var verticalByDate = this._isGroupedByDate() && this._isVerticallyGrouped();\n                if (!group.timeSlotCollectionCount()) {\n                    selection.isAllDay = true;\n                }\n                var ranges = group.ranges(selection.start, selection.end, selection.isAllDay, false);\n                var startSlot, endSlot, reverse, slots;\n                if (key === keys.DOWN || key === keys.UP) {\n                    handled = true;\n                    reverse = key === keys.UP;\n                    this._updateDirection(selection, ranges, shift, reverse, true);\n                    slots = this._verticalSlots(selection, ranges, shift, reverse);\n                    if (!slots.startSlot && !shift && this._changeViewPeriod(selection, reverse, !verticalByDate)) {\n                        return handled;\n                    }\n                } else if (key === keys.LEFT || key === keys.RIGHT) {\n                    handled = true;\n                    reverse = key === keys.LEFT;\n                    this._updateDirection(selection, ranges, shift, reverse, false);\n                    slots = this._horizontalSlots(selection, ranges, shift, reverse);\n                    if (!slots.startSlot && !shift && this._changeViewPeriod(selection, reverse, verticalByDate)) {\n                        return handled;\n                    }\n                }\n                if (handled) {\n                    startSlot = slots.startSlot;\n                    endSlot = slots.endSlot;\n                    if (shift) {\n                        var backward = selection.backward;\n                        if (backward && startSlot) {\n                            selection.start = startSlot.startDate();\n                        } else if (!backward && endSlot) {\n                            selection.end = endSlot.endDate();\n                        }\n                    } else if (startSlot && endSlot) {\n                        selection.isAllDay = startSlot.isDaySlot;\n                        selection.start = startSlot.startDate();\n                        selection.end = endSlot.endDate();\n                    }\n                    selection.events = [];\n                }\n                return handled;\n            },\n            moveToEventInGroup: function (group, slot, selectedEvents, prev) {\n                var events = group._continuousEvents || [];\n                var found, event;\n                var pad = prev ? -1 : 1;\n                var length = events.length;\n                var idx = prev ? length - 1 : 0;\n                if (selectedEvents.length) {\n                    var lastSelected = selectedEvents[selectedEvents.length - 1];\n                    for (var i = 0; i < events.length; i++) {\n                        if (events[i].uid === lastSelected) {\n                            idx = i + pad;\n                        }\n                    }\n                }\n                while (idx < length && idx > -1) {\n                    event = events[idx];\n                    if (!prev && event.start.startDate() >= slot.startDate() || prev && event.start.startDate() <= slot.startDate()) {\n                        if (event && $.inArray(event.uid, selectedEvents) === -1) {\n                            found = !!event;\n                            break;\n                        }\n                    }\n                    idx += pad;\n                }\n                return event;\n            },\n            moveToEvent: function (selection, prev) {\n                var groupIndex = selection.groupIndex;\n                var group = this.groups[groupIndex];\n                var slot = group.ranges(selection.start, selection.end, selection.isAllDay, false)[0].start;\n                var length = this.groups.length;\n                var pad = prev ? -1 : 1;\n                var events = selection.events;\n                var event;\n                if (this._isGroupedByDate()) {\n                    var allEvents = this._getAllEvents();\n                    var uniqueAllEvents = this._getUniqueEvents(allEvents);\n                    var sortedEvents = this._getSortedEvents(uniqueAllEvents);\n                    if (events.length === 0) {\n                        var eventIndex = this._getNextEventIndexBySlot(slot, sortedEvents, groupIndex);\n                        if (prev) {\n                            eventIndex--;\n                        }\n                        event = sortedEvents[eventIndex];\n                    } else {\n                        var idx = this._getStartIdx(events, sortedEvents);\n                        while (idx < sortedEvents.length && idx > -1) {\n                            if (events.length > 0) {\n                                slot = this._getSelectedSlot(slot, sortedEvents, event, idx, pad, prev);\n                            }\n                            if (!slot) {\n                                break;\n                            }\n                            if (!prev && sortedEvents[idx].start.startDate() >= slot.startDate() || prev && sortedEvents[idx].start.startDate() <= slot.startDate()) {\n                                if (events[0] != sortedEvents[idx].uid) {\n                                    event = sortedEvents[idx];\n                                    break;\n                                }\n                            }\n                            idx += pad;\n                        }\n                    }\n                } else {\n                    while (groupIndex < length && groupIndex > -1) {\n                        event = this.moveToEventInGroup(group, slot, events, prev);\n                        groupIndex += pad;\n                        group = this.groups[groupIndex];\n                        if (!group || event) {\n                            break;\n                        }\n                        events = [];\n                        if (prev) {\n                            slot = group.lastSlot();\n                        } else {\n                            slot = group.firstSlot(true);\n                        }\n                    }\n                }\n                if (event) {\n                    selection.events = [event.uid];\n                    selection.start = event.start.startDate();\n                    selection.end = event.end.endDate();\n                    selection.isAllDay = event.start.isDaySlot;\n                    selection.groupIndex = event.start.groupIndex;\n                }\n                return !!event;\n            },\n            current: function (candidate) {\n                if (candidate !== undefined) {\n                    this._current = candidate;\n                    if (this.content.has(candidate)) {\n                        this._scrollTo(candidate, this.content[0]);\n                    }\n                } else {\n                    return this._current;\n                }\n            },\n            select: function (selection) {\n                this.clearSelection();\n                if (!this._selectEvents(selection)) {\n                    this._selectSlots(selection);\n                }\n            },\n            _getNextEventIndexBySlot: function (slot, sortedEvents, groupIndex) {\n                var tempIndex = 0;\n                var slotStartDate = kendo.date.getDate(slot.startDate());\n                for (var i = 0; i < sortedEvents.length; i++) {\n                    var eventStartDate = kendo.date.getDate(sortedEvents[i].start.startDate());\n                    if (slotStartDate > eventStartDate) {\n                        tempIndex++;\n                        continue;\n                    }\n                    if (slotStartDate.getTime() === eventStartDate.getTime() && groupIndex > sortedEvents[i].start.groupIndex) {\n                        tempIndex++;\n                        continue;\n                    }\n                    if (slotStartDate.getTime() === eventStartDate.getTime() && groupIndex >= sortedEvents[i].start.groupIndex && slot.startDate() > sortedEvents[i].start.startDate()) {\n                        tempIndex++;\n                        continue;\n                    }\n                    break;\n                }\n                return tempIndex;\n            },\n            _getSelectedSlot: function (slot, sortedEvents, event, idx, pad, prev) {\n                if (sortedEvents[idx + pad] && sortedEvents[idx].start.groupIndex !== sortedEvents[idx + pad].start.groupIndex) {\n                    var groupIndex = sortedEvents[idx + pad].start.groupIndex;\n                    var group = this.groups[groupIndex];\n                    if (!group || event) {\n                        slot = null;\n                    }\n                    if (prev) {\n                        slot = group.lastSlot();\n                    } else {\n                        slot = group.firstSlot(true);\n                    }\n                }\n                return slot;\n            },\n            _getStartIdx: function (events, sortedEvents) {\n                var selectedEventIndex = 0;\n                $.each(sortedEvents, function () {\n                    if (this.uid === events[0]) {\n                        return false;\n                    }\n                    selectedEventIndex++;\n                });\n                return selectedEventIndex;\n            },\n            _getAllEvents: function () {\n                var allEvents = [];\n                var groups = this.groups;\n                for (var idx = 0; idx < groups.length; idx++) {\n                    if (groups[idx]._continuousEvents) {\n                        allEvents = allEvents.concat(groups[idx]._continuousEvents);\n                    }\n                }\n                return allEvents;\n            },\n            _getUniqueEvents: function (allEvents) {\n                var uniqueAllEvents = [];\n                for (var i = 0; i < allEvents.length; i++) {\n                    var exists = false;\n                    for (var j = 0; j < uniqueAllEvents.length; j++) {\n                        if (allEvents[i].uid === uniqueAllEvents[j].uid) {\n                            exists = true;\n                            break;\n                        }\n                    }\n                    if (!exists) {\n                        uniqueAllEvents.push(allEvents[i]);\n                    }\n                }\n                return uniqueAllEvents;\n            },\n            _getSortedEvents: function (uniqueAllEvents) {\n                return uniqueAllEvents.sort(function (first, second) {\n                    var firstStartDate = first.start.startDate();\n                    var secondStartDate = second.start.startDate();\n                    var result = kendo.date.getDate(firstStartDate) - kendo.date.getDate(secondStartDate);\n                    if (result === 0) {\n                        result = first.start.groupIndex - second.start.groupIndex;\n                    }\n                    if (result === 0) {\n                        result = firstStartDate.getTime() - secondStartDate.getTime();\n                    }\n                    if (result === 0) {\n                        if (first.start.isDaySlot && !second.start.isDaySlot) {\n                            result = -1;\n                        }\n                        if (!first.start.isDaySlot && second.start.isDaySlot) {\n                            result = 1;\n                        }\n                    }\n                    if (result === 0) {\n                        result = $(first.element).index() - $(second.element).index();\n                    }\n                    return result;\n                });\n            },\n            _selectSlots: function (selection) {\n                var isAllDay = selection.isAllDay;\n                var group = this.groups[selection.groupIndex];\n                if (!group.timeSlotCollectionCount()) {\n                    isAllDay = true;\n                }\n                this._selectedSlots = [];\n                var ranges = group.ranges(selection.start, selection.end, isAllDay, false);\n                var element;\n                var slot;\n                for (var rangeIndex = 0; rangeIndex < ranges.length; rangeIndex++) {\n                    var range = ranges[rangeIndex];\n                    var collection = range.collection;\n                    for (var slotIndex = range.start.index; slotIndex <= range.end.index; slotIndex++) {\n                        slot = collection.at(slotIndex);\n                        element = slot.element;\n                        element.setAttribute('aria-selected', true);\n                        addSelectedState(element);\n                        this._selectedSlots.push({\n                            start: slot.startDate(),\n                            end: slot.endDate(),\n                            element: element\n                        });\n                    }\n                }\n                if (selection.backward) {\n                    element = ranges[0].start.element;\n                }\n                this.current(element);\n            },\n            _selectEvents: function (selection) {\n                var found = false;\n                var events = selection.events;\n                var groupEvents = this._getAllEvents();\n                var idx, groupEvent, length = groupEvents.length;\n                if (!events[0] || !groupEvents[0]) {\n                    return found;\n                }\n                var result = $();\n                selection.events = [];\n                for (idx = 0; idx < length; idx++) {\n                    if ($.inArray(groupEvents[idx].uid, events) > -1) {\n                        groupEvent = groupEvents[idx];\n                        result = result.add(groupEvent.element);\n                        if (selection.events.indexOf(groupEvent.uid) === -1) {\n                            selection.events.push(groupEvent.uid);\n                        }\n                    }\n                }\n                if (result[0]) {\n                    result.addClass('k-state-selected').attr('aria-selected', true);\n                    this.current(result.last()[0]);\n                    this._selectedSlots = [];\n                    found = true;\n                }\n                return found;\n            },\n            inRange: function (options) {\n                var startDate = this.startDate();\n                var endDate = kendo.date.addDays(this.endDate(), 1);\n                var start = options.start;\n                var end = options.end;\n                return startDate <= start && start < endDate && startDate < end && end <= endDate;\n            },\n            _resourceValue: function (resource, item) {\n                if (resource.valuePrimitive) {\n                    item = kendo.getter(resource.dataValueField)(item);\n                }\n                return item;\n            },\n            _setResourceValue: function (groupLevelMember, resource, result) {\n                var value = groupLevelMember.value, setter;\n                if (resource.multiple) {\n                    value = [value];\n                }\n                setter = kendo.setter(resource.field);\n                setter(result, value);\n            },\n            _resourceBySlot: function (slot) {\n                var resources = this.groupedResources;\n                var result = {};\n                if (resources.length) {\n                    var resourceIndex = slot.groupIndex, groupOptions = this.options.group, nestedMember = groupOptions.date || groupOptions.orientation === 'horizontal' ? 'columns' : 'rows', levels = nestedMember === 'rows' ? this.rowLevels : this.columnLevels, dateGroupCompensation = groupOptions.date && groupOptions.orientation === 'horizontal' ? 1 : 0, groupLevel = levels[resources.length - 1 + dateGroupCompensation], resource = resources[resources.length - 1], groupLevelMember = groupLevel[resourceIndex], passedChildren, numberOfChildren, j, i;\n                    this._setResourceValue(groupLevelMember, resource, result);\n                    for (j = resources.length - 2; j >= 0; j--) {\n                        groupLevel = levels[j + dateGroupCompensation];\n                        resource = resources[j];\n                        passedChildren = 0;\n                        for (i = 0; i < groupLevel.length; i++) {\n                            groupLevelMember = groupLevel[i];\n                            numberOfChildren = groupLevelMember[nestedMember].length;\n                            if (numberOfChildren > resourceIndex - passedChildren) {\n                                this._setResourceValue(groupLevelMember, resource, result);\n                                i = groupLevel.length;\n                            } else {\n                                passedChildren += numberOfChildren;\n                            }\n                        }\n                    }\n                }\n                return result;\n            },\n            _createResizeHint: function (left, top, width, height) {\n                return $(HINT).css({\n                    left: left,\n                    top: top,\n                    width: width,\n                    height: height\n                });\n            },\n            _removeResizeHint: function () {\n                this._resizeHint.remove();\n                this._resizeHint = $();\n            },\n            _removeMoveHint: function (uid) {\n                if (uid) {\n                    this._moveHint.filter('[data-uid=\\'' + uid + '\\']').remove();\n                    this._moveHint = this._moveHint.filter('[data-uid!=\\'' + uid + '\\']');\n                } else {\n                    this._moveHint.remove();\n                    this._moveHint = $();\n                }\n            },\n            _scrollTo: function (element, container) {\n                var elementOffset = element.offsetTop, elementOffsetDir = element.offsetHeight, containerScroll = container.scrollTop, containerOffsetDir = container.clientHeight, bottomDistance = elementOffset + elementOffsetDir, result = 0;\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (bottomDistance > containerScroll + containerOffsetDir) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = bottomDistance - containerOffsetDir;\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n                container.scrollTop = result;\n            },\n            _inverseEventColor: function (element) {\n                var eventColor = element.css('color');\n                var eventColorIsDark = new Color(eventColor).isDark();\n                var eventBackground = element.css('background-color');\n                var eventBackgroundIsDark = new Color(eventBackground).isDark();\n                if (eventColorIsDark == eventBackgroundIsDark) {\n                    element.addClass(INVERSE_COLOR_CLASS);\n                }\n            },\n            _eventTmpl: function (template, wrapper) {\n                var options = this.options, settings = $.extend({}, kendo.Template, options.templateSettings), paramName = settings.paramName, html = '', type = typeof template, state = {\n                        storage: {},\n                        count: 0\n                    };\n                if (type === 'function') {\n                    state.storage['tmpl' + state.count] = template;\n                    html += '#=this.tmpl' + state.count + '(' + paramName + ')#';\n                    state.count++;\n                } else if (type === 'string') {\n                    html += template;\n                }\n                var tmpl = kendo.template(kendo.format(wrapper, html), settings);\n                if (state.count > 0) {\n                    tmpl = $.proxy(tmpl, state.storage);\n                }\n                return tmpl;\n            },\n            eventResources: function (event) {\n                var resources = [], options = this.options;\n                if (!options.resources) {\n                    return resources;\n                }\n                for (var idx = 0; idx < options.resources.length; idx++) {\n                    var resource = options.resources[idx];\n                    var field = resource.field;\n                    var eventResources = kendo.getter(field)(event);\n                    if (eventResources == null) {\n                        continue;\n                    }\n                    if (!resource.multiple) {\n                        eventResources = [eventResources];\n                    }\n                    var data = resource.dataSource.view();\n                    for (var resourceIndex = 0; resourceIndex < eventResources.length; resourceIndex++) {\n                        var eventResource = null;\n                        var value = eventResources[resourceIndex];\n                        if (!resource.valuePrimitive) {\n                            value = kendo.getter(resource.dataValueField)(value);\n                        }\n                        for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                            if (data[dataIndex].get(resource.dataValueField) == value) {\n                                eventResource = data[dataIndex];\n                                break;\n                            }\n                        }\n                        if (eventResource !== null) {\n                            var resourceColor = kendo.getter(resource.dataColorField)(eventResource);\n                            resources.push({\n                                field: resource.field,\n                                title: resource.title,\n                                name: resource.name,\n                                text: kendo.getter(resource.dataTextField)(eventResource),\n                                value: value,\n                                color: resourceColor\n                            });\n                        }\n                    }\n                }\n                return resources;\n            },\n            createLayout: function (layout) {\n                var allDayIndex = -1;\n                if (!layout.rows) {\n                    layout.rows = [];\n                }\n                for (var idx = 0; idx < layout.rows.length; idx++) {\n                    if (layout.rows[idx].allDay) {\n                        allDayIndex = idx;\n                        break;\n                    }\n                }\n                var allDaySlot = layout.rows[allDayIndex];\n                if (allDayIndex >= 0) {\n                    layout.rows.splice(allDayIndex, 1);\n                }\n                var columnLevels = this.columnLevels = levels(layout, 'columns');\n                var rowLevels = this.rowLevels = levels(layout, 'rows');\n                if (this._isVirtualized()) {\n                    this._trimRowLevels(rowLevels);\n                }\n                this.table = $('<table role=\"presentation\" class=\"k-scheduler-layout k-scheduler-' + this.name + 'view\"><tbody></tbody></table>');\n                var rowCount = rowLevels[rowLevels.length - 1].length;\n                this.table.find('tbody').first().append(this._topSection(columnLevels, allDaySlot, rowCount));\n                this.table.find('tbody').first().append(this._bottomSection(columnLevels, rowLevels, rowCount));\n                this.element.append(this.table);\n                if (this._isVirtualized()) {\n                    this._updateDomRowLevels();\n                }\n                if (this._isMobile() && columnLevels.length > 1 && this._groupOrientation() === 'horizontal' && kendo._outerWidth($(window)) < MIN_HORIZONTAL_SCROLL_SIZE) {\n                    this.table.find('.k-scheduler-content .k-scheduler-table').width(columnLevels[columnLevels.length - 2].length * 100 + '%');\n                    this.table.find('.k-scheduler-header .k-scheduler-table').width(columnLevels[columnLevels.length - 2].length * 100 + '%');\n                }\n                this._scroller();\n            },\n            _isVirtualized: function () {\n                return this.options.virtual && this.rowLevels.length > 1 && this._isVerticallyGrouped();\n            },\n            _trimRowLevels: function (rowLevels) {\n                var lastGroup = rowLevels[rowLevels.length - 2];\n                var cachedRowLevels = this.cachedRowLevels || [];\n                var levelMarker;\n                this._hasContentToRender = true;\n                var stopAtLevel = function (levels, index) {\n                    var hasParent = levels[index - 1].length > 0, parentLevel, parentValue;\n                    if (hasParent) {\n                        parentLevel = levels[index - 1][0];\n                        parentValue = levels[index][0].parentValue;\n                        return parentLevel.value !== parentValue;\n                    } else {\n                        return true;\n                    }\n                };\n                for (var rowLevelIndex = rowLevels.length - 2; rowLevelIndex >= 0; rowLevelIndex--) {\n                    var stop = false;\n                    if (rowLevelIndex > 0 && stopAtLevel(rowLevels, rowLevelIndex)) {\n                        stop = true;\n                        levelMarker = rowLevelIndex;\n                    }\n                    cachedRowLevels[rowLevelIndex] = rowLevels[rowLevelIndex].splice(1);\n                    if (rowLevelIndex < rowLevels.length - 2 && rowLevels[rowLevelIndex][0].rows.length != 1) {\n                        rowLevels[rowLevelIndex][0].rows = rowLevels[rowLevelIndex + 1];\n                    }\n                    if (stop) {\n                        break;\n                    }\n                }\n                cachedRowLevels[rowLevels.length - 1] = rowLevels[rowLevels.length - 1].splice(lastGroup[0].rows.length);\n                this.cachedRowLevels = cachedRowLevels;\n                if (!cachedRowLevels[cachedRowLevels.length - 1].length) {\n                    this._hasContentToRender = false;\n                }\n                return {\n                    levelMarker: levelMarker || 0,\n                    rowLevels: rowLevels\n                };\n            },\n            createNextLayout: function () {\n                var clone = [];\n                var trimmedRowLevels;\n                var rowLevels;\n                var levelMarker;\n                var rowCount;\n                for (var rowLevelIndex = 0; rowLevelIndex < this.cachedRowLevels.length; rowLevelIndex++) {\n                    clone[rowLevelIndex] = this.cachedRowLevels[rowLevelIndex];\n                }\n                trimmedRowLevels = this._trimRowLevels(clone);\n                rowLevels = trimmedRowLevels.rowLevels.splice(trimmedRowLevels.levelMarker);\n                levelMarker = trimmedRowLevels.levelMarker;\n                rowCount = rowLevels[rowLevels.length - 1].length;\n                delete this._height;\n                for (var i = levelMarker; i < this.rowLevels.length; i++) {\n                    this.rowLevels[i] = this.rowLevels[i].concat(rowLevels[i - levelMarker]);\n                }\n                this.table.find('.k-scheduler-times').last().find('tbody').append(this._times(rowLevels, rowCount, this._isMobile()).find('tr'));\n                this._updateDomRowLevels();\n                if (levelMarker > 0) {\n                    for (i = 0; i < levelMarker; i++) {\n                        var cell = this.table.find('[data-row-level=' + i + ']').last();\n                        var rowSpan = parseInt(cell.attr('rowspan'), 10) + rowCount;\n                        cell.attr('rowspan', rowSpan);\n                    }\n                }\n                this._virtualContent(rowLevels, this.columnLevels);\n                this.render(this._cachedEvents);\n            },\n            _tryRenderContent: function () {\n                var that = this;\n                var bufferHeight = that.table.innerHeight();\n                var height = that.content.find('table').innerHeight();\n                var scrollTop = that.content.scrollTop();\n                while (that._hasContentToRender && height - bufferHeight < scrollTop) {\n                    that.createNextLayout();\n                    height = that.content.find('table').innerHeight();\n                }\n            },\n            _updateDomRowLevels: function () {\n                var that = this;\n                var groupCells = that.times.find('.k-scheduler-group-cell:not([data-row-level])');\n                if (!this._rowLevelIndices) {\n                    this._rowLevelIndices = groupCells.map(function (index, item) {\n                        $(item).attr('data-row-level', index);\n                        return index;\n                    }).toArray().reverse();\n                    return;\n                }\n                groupCells = groupCells.toArray().reverse();\n                for (var i = 0; i <= groupCells.length; i++) {\n                    $(groupCells[i]).attr('data-row-level', this._rowLevelIndices[i]);\n                }\n            },\n            refreshLayout: function () {\n                var that = this, toolbar = that.element.find('> .k-scheduler-toolbar'), height = that.element.innerHeight(), scrollbar = this._scrollbar, headerHeight = 0, paddingDirection = this._isRtl ? 'left' : 'right';\n                for (var idx = 0; idx < toolbar.length; idx++) {\n                    height -= outerHeight(toolbar.eq(idx));\n                }\n                if (that.datesHeader) {\n                    headerHeight = outerHeight(that.datesHeader);\n                }\n                if (that.timesHeader && outerHeight(that.timesHeader) > headerHeight) {\n                    headerHeight = outerHeight(that.timesHeader);\n                }\n                if (that.datesHeader && that.timesHeader) {\n                    var datesHeaderRows = that.datesHeader.find('table').first().find('tr');\n                    that.timesHeader.find('tr').height(function (index) {\n                        $(this).height(datesHeaderRows.eq(index).height());\n                    });\n                }\n                if (headerHeight) {\n                    height -= headerHeight;\n                }\n                if (that.footer) {\n                    height -= outerHeight(that.footer);\n                }\n                var isSchedulerHeightSet = function (el) {\n                    var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n                    el.height('auto');\n                    newHeight = el.height();\n                    if (initialHeight != newHeight) {\n                        el.height('');\n                        return true;\n                    }\n                    el.height('');\n                    return false;\n                };\n                var contentDiv = that.content[0], scrollbarWidth = !kendo.support.kineticScrollNeeded ? scrollbar : 0;\n                if (isSchedulerHeightSet(that.element)) {\n                    if (height > scrollbar * 2) {\n                        that.content.height(height);\n                    } else {\n                        that.content.height(scrollbar * 2 + 1);\n                    }\n                    if (that.times) {\n                        that.times.height(contentDiv.clientHeight);\n                        var timesTable = that.times.find('table');\n                        if (timesTable.length) {\n                            timesTable.height(that.content.find('table')[0].clientHeight);\n                        }\n                    }\n                }\n                if (that.table) {\n                    if (contentDiv.offsetWidth - contentDiv.clientWidth > 0) {\n                        that.table.addClass('k-scrollbar-v');\n                        that.datesHeader.css('padding-' + paddingDirection, scrollbarWidth - parseInt(that.datesHeader.children().css('border-' + paddingDirection + '-width'), 10));\n                    } else {\n                        that.datesHeader.css('padding-' + paddingDirection, '');\n                    }\n                    if (contentDiv.offsetHeight - contentDiv.clientHeight > 0 || contentDiv.clientHeight > that.content.children('.k-scheduler-table').height()) {\n                        that.table.addClass('k-scrollbar-h');\n                    } else {\n                        that.table.removeClass('k-scrollbar-h');\n                    }\n                }\n            },\n            _topSection: function (columnLevels, allDaySlot, rowCount) {\n                var thElm = $('<tr>');\n                this.timesHeader = timesHeader(columnLevels.length, allDaySlot, rowCount);\n                this.datesHeader = this._datesHeader(columnLevels, allDaySlot);\n                var dateGroup = this.datesHeader.find('.k-nav-day');\n                if (dateGroup.length) {\n                    dateGroup.closest('tr').addClass('k-scheduler-date-group');\n                }\n                if (this._isMobile()) {\n                    thElm.addClass('k-mobile-header');\n                    thElm.addClass('k-mobile-' + this._groupOrientation() + '-header');\n                }\n                return $(thElm).append(this.timesHeader.add(this.datesHeader).wrap('<td>').parent());\n            },\n            _bottomSection: function (columnLevels, rowLevels, rowCount) {\n                this.times = this._times(rowLevels, rowCount, this._isMobile());\n                this.content = content(columnLevels[columnLevels.length - 1], rowLevels[rowLevels.length - 1]);\n                return $('<tr>').append(this.times.add(this.content).wrap('<td>').parent());\n            },\n            _scroller: function () {\n                var that = this;\n                this.content.on('scroll' + NS, function () {\n                    kendo.scrollLeft(that.datesHeader.find('>.k-scheduler-header-wrap'), this.scrollLeft);\n                    that.times.scrollTop(this.scrollTop);\n                    if (that._isVirtualized()) {\n                        that._tryRenderContent();\n                    }\n                });\n                var touchScroller = kendo.touchScroller(this.content, {\n                    avoidScrolling: function (e) {\n                        return $(e.event.target).closest('.k-event.k-event-active').length > 0;\n                    }\n                });\n                if (touchScroller && touchScroller.movable) {\n                    this._touchScroller = touchScroller;\n                    this.content = touchScroller.scrollElement;\n                    touchScroller.movable.bind('change', function (e) {\n                        kendo.scrollLeft(that.datesHeader.find('>.k-scheduler-header-wrap'), -e.sender.x);\n                        that.times.scrollTop(-e.sender.y);\n                        if (that._isVirtualized()) {\n                            that._tryRenderContent();\n                        }\n                    });\n                }\n            },\n            _resourcesForGroups: function () {\n                var result = [];\n                var groups = this.options.group;\n                var resources = this.options.resources;\n                groups = groups && groups.resources ? groups.resources : [];\n                if (resources && groups.length) {\n                    for (var idx = 0, length = resources.length; idx < length; idx++) {\n                        for (var groupIdx = 0, groupLength = groups.length; groupIdx < groupLength; groupIdx++) {\n                            if (resources[idx].name === groups[groupIdx]) {\n                                result.push(resources[idx]);\n                            }\n                        }\n                    }\n                }\n                this.groupedResources = result;\n            },\n            _createDateLayout: function (dates, inner, times) {\n                return createDateLayoutConfiguration('rows', dates, inner, times);\n            },\n            _createColumnsLayout: function (resources, inner, template, dates, times, parentValue) {\n                return createLayoutConfiguration('columns', resources, inner, template, dates, times, parentValue);\n            },\n            _groupOrientation: function () {\n                var groups = this.options.group;\n                return groups && groups.resources ? groups.orientation : 'horizontal';\n            },\n            _isGroupedByDate: function () {\n                return this.options.group && this.options.group.date;\n            },\n            _isVerticallyGrouped: function () {\n                return this.groupedResources.length && this._groupOrientation() === 'vertical';\n            },\n            _createRowsLayout: function (resources, inner, template, dates) {\n                return createLayoutConfiguration('rows', resources, inner, template, dates);\n            },\n            selectionByElement: function () {\n                return null;\n            },\n            clearSelection: function () {\n                this.content.find('.k-state-selected').removeAttr('id').attr('aria-selected', false).removeClass('k-state-selected');\n            },\n            destroy: function () {\n                var that = this;\n                Widget.fn.destroy.call(this);\n                if (that.table) {\n                    kendo.destroy(that.table);\n                    that.table.remove();\n                }\n                if (that.footer) {\n                    kendo.destroy(that.footer);\n                    that.footer.remove();\n                }\n                that.groups = null;\n                that.table = null;\n                that.content = null;\n                that.times = null;\n                that.datesHeader = null;\n                that.timesHeader = null;\n                that.footer = null;\n                that._resizeHint = null;\n                that._moveHint = null;\n            },\n            calendarInfo: function () {\n                return kendo.getCulture().calendars.standard;\n            },\n            prevGroupSlot: function (date, groupIndex, isDay) {\n                var collection;\n                var group = this.groups[groupIndex];\n                var slot = group.ranges(date, date, isDay, false)[0].start;\n                if (groupIndex <= 0) {\n                    return;\n                }\n                if (this._isGroupedByDate()) {\n                    return slot;\n                }\n                if (this._isVerticallyGrouped()) {\n                    if (!group.timeSlotCollectionCount()) {\n                        collection = group._collection(group.daySlotCollectionCount() - 1, true);\n                        return collection.at(slot.index);\n                    } else {\n                        collection = group._collection(isDay ? slot.index : slot.collectionIndex, false);\n                        return collection.last();\n                    }\n                } else {\n                    if (!group.timeSlotCollectionCount()) {\n                        collection = group._collection(slot.collectionIndex, true);\n                        return collection.last();\n                    } else {\n                        collection = group._collection(isDay ? 0 : group.timeSlotCollectionCount() - 1, isDay);\n                        return isDay ? collection.last() : collection.at(slot.index);\n                    }\n                }\n            },\n            nextGroupSlot: function (date, groupIndex, isDay) {\n                var collection;\n                var group = this.groups[groupIndex];\n                var slot = group.ranges(date, date, isDay, false)[0].start;\n                var daySlotCollectionCount;\n                if (groupIndex >= this.groups.length - 1) {\n                    return;\n                }\n                if (this._isGroupedByDate()) {\n                    return slot;\n                }\n                if (this._isVerticallyGrouped()) {\n                    if (!group.timeSlotCollectionCount()) {\n                        collection = group._collection(0, true);\n                        return collection.at(slot.index);\n                    } else {\n                        daySlotCollectionCount = group.daySlotCollectionCount();\n                        collection = group._collection(daySlotCollectionCount ? 0 : slot.collectionIndex, daySlotCollectionCount);\n                        return isDay ? collection.first() : collection.at(slot.collectionIndex);\n                    }\n                } else {\n                    if (!group.timeSlotCollectionCount()) {\n                        collection = group._collection(slot.collectionIndex, true);\n                        return collection.first();\n                    } else {\n                        collection = group._collection(0, isDay);\n                        return isDay ? collection.first() : collection.at(slot.index);\n                    }\n                }\n            },\n            _eventOptionsForMove: function () {\n                return {};\n            },\n            _updateEventForResize: function () {\n                return;\n            },\n            _updateEventForSelection: function (event) {\n                return event;\n            },\n            _innerElements: function (element, type, inner) {\n                var count = 0, countInner = function (el) {\n                        var innerSpan = el[inner], innerEls = el[type], current, innerCollection, i;\n                        if (innerSpan) {\n                            count += innerSpan;\n                            return;\n                        }\n                        if (!innerEls || innerEls.length === 0) {\n                            count += 1;\n                            return;\n                        }\n                        for (i = 0; i < innerEls.length; i++) {\n                            current = innerEls[i];\n                            innerCollection = current[type];\n                            if (innerCollection && innerCollection[0]) {\n                                if (!innerCollection[0][type] || innerCollection[0][type].length === 0) {\n                                    count += innerCollection.length;\n                                } else {\n                                    countInner(current);\n                                }\n                            } else {\n                                count += 1;\n                            }\n                        }\n                    };\n                countInner(element);\n                return count;\n            },\n            _times: function (rowLevels, rowCount, isMobile) {\n                var that = this;\n                var rows = new Array(rowCount).join().split(',');\n                var rowHeaderRows = [];\n                var rowIndex;\n                for (var rowLevelIndex = 0; rowLevelIndex < rowLevels.length; rowLevelIndex++) {\n                    var level = rowLevels[rowLevelIndex];\n                    var rowsBefore = 0;\n                    for (rowIndex = 0; rowIndex < level.length; rowIndex++) {\n                        var currentRow = level[rowIndex];\n                        var className = currentRow.className || '';\n                        var text = currentRow.text;\n                        var rowspan = that._innerElements(currentRow, 'rows');\n                        rowsBefore += rowspan;\n                        if (currentRow.allDay) {\n                            className = 'k-scheduler-times-all-day';\n                        }\n                        if (isMobile && className.indexOf('k-scheduler-group-cell') !== -1) {\n                            text = '<span class=\"k-scheduler-group-text\">' + text + '</span>';\n                        }\n                        rows[rowsBefore - rowspan] += '<th class=\"' + className + '\" rowspan=\"' + rowspan + '\">' + text + '</th>';\n                    }\n                }\n                for (rowIndex = 0; rowIndex < rowCount; rowIndex++) {\n                    rowHeaderRows.push(rows[rowIndex]);\n                }\n                if (rowCount < 1) {\n                    return $();\n                }\n                return $('<div class=\"k-scheduler-times\">' + table(rowHeaderRows) + '</div>');\n            },\n            _datesHeader: function (columnLevels, allDaySlot) {\n                var that = this;\n                var dateTableRows = [];\n                var columnIndex;\n                for (var columnLevelIndex = 0; columnLevelIndex < columnLevels.length; columnLevelIndex++) {\n                    var level = columnLevels[columnLevelIndex];\n                    var th = [];\n                    for (columnIndex = 0; columnIndex < level.length; columnIndex++) {\n                        var column = level[columnIndex];\n                        var colspan = that._innerElements(column, 'columns', 'colspan');\n                        th.push('<th colspan=\"' + (column.colspan || colspan) + '\" class=\"' + (column.className || '') + '\">' + column.text + '</th>');\n                    }\n                    dateTableRows.push(th.join(''));\n                }\n                var allDayTableRows = [];\n                if (allDaySlot) {\n                    var lastLevel = columnLevels[columnLevels.length - 1];\n                    var td = [];\n                    var cellContent = allDaySlot.cellContent;\n                    for (columnIndex = 0; columnIndex < lastLevel.length; columnIndex++) {\n                        td.push('<td class=\"' + (lastLevel[columnIndex].className || '') + '\">' + (cellContent ? cellContent(columnIndex) : '&nbsp;') + '</td>');\n                    }\n                    allDayTableRows.push(td.join(''));\n                }\n                return $('<div class=\"k-scheduler-header\">' + '<div class=\"k-scheduler-header-wrap\">' + table(dateTableRows) + allDayTable(allDayTableRows, 'k-scheduler-header-all-day') + '</div>' + '</div>');\n            }\n        });\n        function collidingEvents(elements, start, end) {\n            var idx, index, startIndex, overlaps, endIndex;\n            for (idx = elements.length - 1; idx >= 0; idx--) {\n                index = rangeIndex(elements[idx]);\n                startIndex = index.start;\n                endIndex = index.end;\n                overlaps = startIndex <= start && endIndex >= start;\n                if (overlaps || startIndex >= start && endIndex <= end || start <= startIndex && end >= startIndex) {\n                    if (startIndex < start) {\n                        start = startIndex;\n                    }\n                    if (endIndex > end) {\n                        end = endIndex;\n                    }\n                }\n            }\n            return eventsForSlot(elements, start, end);\n        }\n        function rangeIndex(eventElement) {\n            return {\n                start: eventElement.start,\n                end: eventElement.end\n            };\n        }\n        function eventsForSlot(elements, slotStart, slotEnd) {\n            var events = [];\n            for (var idx = 0; idx < elements.length; idx++) {\n                var event = rangeIndex(elements[idx]);\n                if (event.start < slotStart && event.end > slotStart || event.start >= slotStart && event.end <= slotEnd) {\n                    events.push(elements[idx]);\n                }\n            }\n            return events;\n        }\n        function createColumns(eventElements) {\n            return _createColumns(eventElements);\n        }\n        function createRows(eventElements) {\n            return _createColumns(eventElements);\n        }\n        var Color = function (value) {\n            var color = this, formats = Color.formats, re, processor, parts, i, channels;\n            if (arguments.length === 1) {\n                value = color.resolveColor(value);\n                for (i = 0; i < formats.length; i++) {\n                    re = formats[i].re;\n                    processor = formats[i].process;\n                    parts = re.exec(value);\n                    if (parts) {\n                        channels = processor(parts);\n                        color.r = channels[0];\n                        color.g = channels[1];\n                        color.b = channels[2];\n                    }\n                }\n            } else {\n                color.r = arguments[0];\n                color.g = arguments[1];\n                color.b = arguments[2];\n            }\n            color.r = color.normalizeByte(color.r);\n            color.g = color.normalizeByte(color.g);\n            color.b = color.normalizeByte(color.b);\n        };\n        Color.prototype = {\n            resolveColor: function (value) {\n                value = value || '#000';\n                if (value.charAt(0) == '#') {\n                    value = value.substr(1, 6);\n                }\n                value = value.replace(/ /g, '');\n                value = value.toLowerCase();\n                value = Color.namedColors[value] || value;\n                return value;\n            },\n            normalizeByte: function (value) {\n                return value < 0 || isNaN(value) ? 0 : value > 255 ? 255 : value;\n            },\n            percBrightness: function () {\n                var color = this;\n                return math.sqrt(0.241 * color.r * color.r + 0.691 * color.g * color.g + 0.068 * color.b * color.b);\n            },\n            isDark: function () {\n                var color = this;\n                var brightnessValue = color.percBrightness();\n                return brightnessValue < 180;\n            }\n        };\n        Color.formats = [\n            {\n                re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n                process: function (parts) {\n                    return [\n                        parseInt(parts[1], 10),\n                        parseInt(parts[2], 10),\n                        parseInt(parts[3], 10)\n                    ];\n                }\n            },\n            {\n                re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n                process: function (parts) {\n                    return [\n                        parseInt(parts[1], 16),\n                        parseInt(parts[2], 16),\n                        parseInt(parts[3], 16)\n                    ];\n                }\n            },\n            {\n                re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n                process: function (parts) {\n                    return [\n                        parseInt(parts[1] + parts[1], 16),\n                        parseInt(parts[2] + parts[2], 16),\n                        parseInt(parts[3] + parts[3], 16)\n                    ];\n                }\n            }\n        ];\n        Color.namedColors = {\n            aqua: '00ffff',\n            azure: 'f0ffff',\n            beige: 'f5f5dc',\n            black: '000000',\n            blue: '0000ff',\n            brown: 'a52a2a',\n            coral: 'ff7f50',\n            cyan: '00ffff',\n            darkblue: '00008b',\n            darkcyan: '008b8b',\n            darkgray: 'a9a9a9',\n            darkgreen: '006400',\n            darkorange: 'ff8c00',\n            darkred: '8b0000',\n            dimgray: '696969',\n            fuchsia: 'ff00ff',\n            gold: 'ffd700',\n            goldenrod: 'daa520',\n            gray: '808080',\n            green: '008000',\n            greenyellow: 'adff2f',\n            indigo: '4b0082',\n            ivory: 'fffff0',\n            khaki: 'f0e68c',\n            lightblue: 'add8e6',\n            lightgrey: 'd3d3d3',\n            lightgreen: '90ee90',\n            lightpink: 'ffb6c1',\n            lightyellow: 'ffffe0',\n            lime: '00ff00',\n            limegreen: '32cd32',\n            linen: 'faf0e6',\n            magenta: 'ff00ff',\n            maroon: '800000',\n            mediumblue: '0000cd',\n            navy: '000080',\n            olive: '808000',\n            orange: 'ffa500',\n            orangered: 'ff4500',\n            orchid: 'da70d6',\n            pink: 'ffc0cb',\n            plum: 'dda0dd',\n            purple: '800080',\n            red: 'ff0000',\n            royalblue: '4169e1',\n            salmon: 'fa8072',\n            silver: 'c0c0c0',\n            skyblue: '87ceeb',\n            slateblue: '6a5acd',\n            slategray: '708090',\n            snow: 'fffafa',\n            steelblue: '4682b4',\n            tan: 'd2b48c',\n            teal: '008080',\n            tomato: 'ff6347',\n            turquoise: '40e0d0',\n            violet: 'ee82ee',\n            wheat: 'f5deb3',\n            white: 'ffffff',\n            whitesmoke: 'f5f5f5',\n            yellow: 'ffff00',\n            yellowgreen: '9acd32'\n        };\n        function _createColumns(eventElements) {\n            var columns = [];\n            for (var idx = 0; idx < eventElements.length; idx++) {\n                var event = eventElements[idx];\n                var eventRange = rangeIndex(event);\n                var column = null;\n                for (var j = 0, columnLength = columns.length; j < columnLength; j++) {\n                    var endOverlaps = eventRange.start > columns[j].end;\n                    if (eventRange.start < columns[j].start || endOverlaps) {\n                        column = columns[j];\n                        if (column.end < eventRange.end) {\n                            column.end = eventRange.end;\n                        }\n                        break;\n                    }\n                }\n                if (!column) {\n                    column = {\n                        start: eventRange.start,\n                        end: eventRange.end,\n                        events: []\n                    };\n                    columns.push(column);\n                }\n                column.events.push(event);\n            }\n            return columns;\n        }\n        function createDateLayoutConfiguration(name, dates, inner, times) {\n            var configuration = [];\n            $.each(dates, function (index, item) {\n                var className = item.className ? 'k-slot-cell ' + item.className : 'k-slot-cell';\n                var obj = {\n                    text: item.text,\n                    className: className\n                };\n                if (times && !item.minorTicks) {\n                    obj[name] = createDateLayoutConfiguration(name, item.columns, inner, times);\n                } else {\n                    obj[name] = inner;\n                }\n                configuration.push(obj);\n            });\n            return configuration;\n        }\n        function createLayoutConfiguration(name, resources, inner, template, dates, times, parentValue) {\n            var resource = resources[0];\n            var configuration = [];\n            if (resource) {\n                if (dates && inner) {\n                    $.each(dates, function (index, item) {\n                        if (times && !item.minorTicks) {\n                            item[name] = createLayoutConfiguration(name, resources, item.columns, template, item.columns, times, parentValue);\n                        } else {\n                            item[name] = createLayoutConfiguration(name, resources, null, template, null, null, parentValue);\n                        }\n                    });\n                    configuration = dates;\n                } else {\n                    var data = resource.dataSource.view();\n                    data = data.filter(function (item) {\n                        var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n                        return itemParentValue === null || itemParentValue === undefined || itemParentValue === parentValue;\n                    });\n                    for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                        var value = kendo.getter(resource.dataValueField)(data[dataIndex]);\n                        var obj = {\n                            text: template({\n                                text: kendo.htmlEncode(kendo.getter(resource.dataTextField)(data[dataIndex])),\n                                color: kendo.getter(resource.dataColorField)(data[dataIndex]),\n                                field: resource.field,\n                                title: resource.title,\n                                name: resource.name,\n                                value: value\n                            }),\n                            className: 'k-slot-cell k-scheduler-group-cell',\n                            parentValue: parentValue,\n                            value: value\n                        };\n                        obj[name] = createLayoutConfiguration(name, resources.slice(1), inner, template, dates, times, value);\n                        configuration.push(obj);\n                    }\n                }\n                return configuration;\n            }\n            return inner;\n        }\n        function groupEqFilter(value) {\n            return function (item) {\n                if (Array.isArray(item) || item instanceof kendo.data.ObservableArray) {\n                    for (var idx = 0; idx < item.length; idx++) {\n                        if (item[idx] == value) {\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n                return item == value;\n            };\n        }\n        var selectedStateRegExp = /\\s*k-state-selected/;\n        function addSelectedState(cell) {\n            cell.className = cell.className.replace(selectedStateRegExp, '') + ' k-state-selected';\n        }\n        $.extend(ui.SchedulerView, {\n            createColumns: createColumns,\n            createRows: createRows,\n            rangeIndex: rangeIndex,\n            collidingEvents: collidingEvents,\n            groupEqFilter: groupEqFilter\n        });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}