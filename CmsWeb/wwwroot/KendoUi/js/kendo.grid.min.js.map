{"version":3,"sources":["kendo.grid.js"],"names":["f","define","$","normalizeText","text","String","replace","REPLACE_REGEX","SPACE","objectKey","object","key","parts","push","sort","join","hashKey","str","i","hash","length","charCodeAt","zeroSize","width","height","baseline","measureText","style","measureBox","TextMetrics","current","measure","LRUCache","DEFAULT_OPTIONS","defaultMeasureBox","window","kendo","util","Class","extend","init","size","this","_size","_length","_map","put","value","map","entry","_head","_tail","newer","older","get","baselineMarkerSize","document","createElement","cssText","options","_cache","styleKey","cacheKey","cachedResult","baselineMarker","textStr","box","_baselineMarker","cloneNode","textContent","appendChild","body","offsetWidth","offsetHeight","offsetTop","parentNode","removeChild","marker","deepExtend","jQuery","amd","a1","a2","a3","undefined","attrEquals","attrName","attrValue","attr","groupCells","count","Array","stringifyAttributes","attributes","result","STRING","cursor","context","add","css","reorder","selector","source","dest","before","idx","sourceIndex","eq","appendTo","elements","lockedContent","content","filter","find","attachCustomCommandEvent","container","commands","command","commandName","isArray","isPlainObject","click","name","on","CLICK","NS","proxy","normalizeColumns","columns","encoded","hide","locked","parentIds","column","hidden","uid","field","isVisible","addHiddenStyle","footerAttributes","headerAttributes","guid","headers","id","columnParent","parents","columnParents","inserted","splice","setColumnVisibility","visible","setVisibility","show","method","removeHiddenStyle","setColumnMediaVisibility","setColumnMatchesMedia","hideByMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","display","isElementVisible","element","visibleColumns","grep","columnsWithMedia","minScreenWidth","Error","concat","toJQuery","toArray","updateCellRowSpan","cell","sourceLockedColumnsCount","lockedColumnDepth","depth","lockedColumns","nonLockedColumnDepth","nonLockedColumns","rowSpan","findColumnByField","moveCellsBetweenContainers","sources","target","leafs","destination","groups","action","rows","sourcesDepth","targetDepth","children","insertAfter","last","addRowSpanValue","moveCells","updateCellIndex","thead","offset","position","allColumns","cells","leafColumns","el","hasClass","columnPosition","row","temp","max","sourcePosition","columnVisiblePosition","ths","t","cellCounts","findParentColumnWithChildren","index","rtl","targetLocked","findReorderTarget","masterColumns","parent","parentColumns","targetIndex","inArray","flatColumnsInDomOrder","flatColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","parseInt","columnsWidth","colWidth","indexOf","removeRowSpanValue","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","rowIndex","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","stickyColumns","sticky","visibleStickyColumns","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","childColumns","visibleChildColumns","e","getColumnsFields","leafDataCells","indexAttr","a","b","indexA","indexB","parentColumnsCells","parentCellsWithChildren","prevCells","parentCell","closest","headerRows","level","prevAll","colSpan","Math","getAttribute","childColumnsCells","child","colSpanAttr","next","appendContent","tbody","table","html","empty","placeholder","tmp","tbodySupportsInnerHtml","innerHTML","firstChild","replaceChild","match","hasHiddenStyle","normalizeCols","hasDetails","colgroup","format","is","append","prepend","normalizeHeaderCells","len","lastIndex","th","insertBefore","convertToObject","array","item","formatGroupValue","columnValues","isForeignKey","groupValue","htmlEncode","setCellVisibility","state","pad","nonDataCellsRegExp","test","className","hideColumnCells","columnIndex","first","groupRows","data","hasSubgroups","items","groupFooters","aggregates","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","syncTableHeight","table1","table2","lockedHeigth","tableHeigth","diff","filterRowRegExp","adjustRowHeight","row1","row2","offsetHeight1","offsetHeight2","getCommand","focusTable","direct","scrollLeft","focusElement","one","preventDefault","trigger","isColumnGroupable","grid","groupable","isGroupedBy","isColumnEditable","model","selectable","editable","isInputElement","tableClick","currentTarget","isHeader","lockedTable","headerTable","lockedHeader","isInput","preventScroll","currentTable","roleSelector","_setCurrent","navigatable","setTimeout","activeEl","_activeElement","CHECKBOXINPUT","contains","support","touch","leftMostPosition","browser","webkit","parseVirtualSettings","asLowerString","toLowerCase","isElementVisibleInWrapper","wrapper","halfHeight","top","outerHeight","math","abs","floor","isInEdit","groupCellBuilder","headerTemplateIndex","ARIALABEL","COLLAPSE","groupCellLockedContentBuilder","groupRowBuilder","colspan","expanded","includeAdditionalData","EXPAND","groupRowLockedContentBuilder","toggleRow","backslashEscapeQuotes","ampRegExp","ltRegExp","quoteRegExp","aposRegExp","gtRegExp","getTitle","col","title","exportDataSort","dataSource","getByUid","isExcelExportableColumn","exportable","excel","GroupsPager","VirtualScrollable","defaultCommands","Grid","ui","DataSource","ObservableObject","tbodyInnerHtml","activeElement","Widget","outerWidth","_outerWidth","_outerHeight","keys","prototype","isFunction","isEmptyObject","DOT","PROGRESS","ERROR","HIERARCHY_CELL_CLASS","DATA_CELL","SELECTION_CELL_SELECTOR","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","WRAPPER","CONTENTRLOCKEDCONTAINER","GROUPCELLCLASS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","SCROLL","SYNC","LOAD_START","LOAD_END","FOCUSED","FOCUSABLE","SELECTED","CHECKBOX","NORECORDSCLASS","LINK_CLASS","ICON_CLASS","ORDER_CLASS","SORTED_CLASS","HEADER_COLUMN_MENU_CLASS","FILTER_MENU_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","RESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","MOUSEDOWN","HEIGHT","TABINDEX","FUNCTION","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","UNIQUE_ID","MINCOLSPANVALUE","COLSPAN","OVERFLOW","HIDDEN","SORT","GROUP_SORT","DELETECONFIRM","NORECORDS","CONFIRMDELETE","CANCELDELETE","formatRegExp","templateHashRegExp","whitespaceRegExp","leftRegExp","RegExp","rightRegExp","COMMANDBUTTONTMPL","SELECTCOLUMNTMPL","SELECTCOLUMNHEADERTMPL","DRAGHANDLECOLUMNTMPL","SORTHEADERTMPL","isRtl","isIE11","msie","version","isMac","navigator","userAgent","classNames","widget","scrollContainer","headerCellInner","Pager","fn","call","useRanges","_omitPrefetch","totalPages","that","ceil","_collapsedTotal","pageSize","groupsTotal","_refreshHandler","refresh","setDataSource","wrap","unbind","bind","itemHeight","noop","prefetch","maxScrollHeight","events","destroy","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","overflow","_wheelScroll","_wrapper","kineticScrollNeeded","UserEvents","global","allowSelection","start","sender","capture","move","scrollTop","y","delta","x","_scroll","overflow-y","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","rowHeight","skip","_rangeStart","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","itemIndex","rangeStart","scrollIntoView","containerHeight","containerScroll","elementOffset","elementHeight","scrollingUp","currentSkip","fetching","prefetchAt","webkitCorrection","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","totalHeight","cancel","page","create","iconClass","save","edit","update","themeColor","canceledit","pdf","search","DataBoundWidget","_events","_element","_aria","_columns","_foreignKeyPromises","when","apply","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_groupable","_toolbar","_pageable","_setContentHeight","_templates","_navigatable","_selectable","_clipboard","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","addClass","_resizeHandler","resize","notify","scrollableContent","scrollable","virtual","virtualScrollable","toolbar","filterable","sortable","allowCopy","pageable","persistSelection","encodeTitles","rowTemplate","altRowTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","messages","cancelDelete","confirmation","confirmDelete","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","_angularItems","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","_hasReorderableRows","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","scrollables","footer","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","initialData","_data","group","aggregate","transport","$angular","setOptions","mobileWrapper","currentOptions","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","angular","each","filterMenu","_cellId","_hasDetails","_createResizeHandle","headerWrap","ieCorrection","firefoxCorrection","leftMargin","invisibleSpace","leftBorderWidth","indicatorWidth","halfResizeHandle","rtlCorrection","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","constrain","totalWidth","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_resizable","columnStart","isMobile","Resizable","handle","hint","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_draggable","kendoDraggable","autoScroll","dragstart","not","dragend","_reorderable","kendoReorderable","draggable","dropFilter","dragOverContainers","lockable","inSameContainer","change","oldIndex","newIndex","reorderColumn","_reorderHeader","sourceLockedColumns","targetLockedColumns","destPosition","_reorderContent","footerCol","beforeVisibleColumn","columnsArray","lockedRows","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","headerCol","_findClosestVisibleColumnIndex","slice","prev","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasDragHandleColumn","_draggableRows","_checkBoxSelection","Selectable","parseOptions","clone","select","elm","innerText","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","args","reorderRows","rowsLength","targetItem","dataItem","_rowDropping","pushMove","autoFitColumns","leafCols","minWidth","contentDiv","menu","thWidth","footerTable","j","tables","oldColumnWidth","newColumnWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","safari","lockChanged","sourceColumns","destColumn","virtualScroll","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","_editMode","_calculateColumnIndex","virtualOffset","mode","handler","_editContainer","end","closeCell","_scrollVirtualWrapper","editContainer","_mousedownOnEditCell","tap","isLockedCell","has","editCell","shouldCloseCell","_virtualColScroll","_belongsToGrid","editRow","_isVirtualInlineEditable","stopPropagation","removeRow","_confirmation","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","editor","values","skipFocus","_isVirtualIncellEditable","_editableState","_relatedRow","_syncLockedScroll","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","type","_displayCell","ns","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","modelId","schema","cancelRow","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","currentIndex","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","editMenuGuid","unescape","_createButton","kendoWindow","modal","userTriggered","clearContainer","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","angularElements","angularData","isSelected","isAlt","replaceWith","_showMessage","confirmDialog","Confirm","closable","okText","done","fail","confirm","_isVirtualEditable","_virtualPageToTop","saveChanges","addRow","createAt","view","createAtBottom","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_toolbarTmpl","prependTo","saveAsExcel","saveAsPDF","_pdfInitialized","input","_searchTimeOut","searchFields","expression","filters","logic","endless","_endlessPageSize","_pushExpression","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","searchText","attributeClassMatch","split","renderButton","_hasFooters","groupRow","collapseGroup","expandGroup","_isLocked","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","_skip","_pageSize","_take","_addGroupableOptionsToHeader","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","cellFieldAttr","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","multiple","aria","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","stopImmediatePropagation","copySelection","areaClipBoard","val","getTSV","copySelectionToClipboard","includeHeaders","_createAreaClipBoard","execCommand","Event","metaKey","getSelection","selection","createRange","opacity","cellsOffset","lockedCols","inLockedArea","rowsOffset","selected","delimeter","onlyVisible","hasLockedCols","cellText","_getCellField","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","showColumn","initiallyHidden","hideColumn","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","any","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","_setStickyColumns","filterCells","stickyStyle","updateStyles","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","Object","selectedSingleItems","_mapSelectionToData","exportSelectedToExcel","exporter","columnHandler","book","exportData","sortHandler","workbook","ooxml","ExcelExporter","autoWidth","sheets","freezePane","_addRangeSelectionRows","_addSingleSelectionRows","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","curr","elementType","nodeName","isRowSelection","columnMapHandler","fieldAttr","_relatedCell","clearSelection","selectableoptions","checked","prop","allRows","dataSourceOptions","selectedViewIds","selectedKeyNames","ids","_updateCurrentAttr","nextId","descId","headerId","removeAttr","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","siblings","_virtualCellIndex","_lastCellIndex","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","offsetLeft","bottomDistance","edge","dataTables","headerTables","_openHeaderMenu","_tableFocus","_tableBlur","_tableKeyDown","altKey","_setTabIndex","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","handled","requestInProgress","canHandle","isDefaultPrevented","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","nextAll","_prevVerticalCell","_verticalContainer","_nextVerticalCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","isInCell","_handleEditing","active","blur","_toggleCurrent","descriptors","label","_canDrag","dir","link","focusable","originalIndex","_currentDataIndex","lockedColumnsCount","tmpIndex","currentRowCells","hiddenColumns","up","step","back","switchRow","isEdited","isIE","focus","_initMobile","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","_scrollable","originalPageSize","hasVirtualScroll","_createVirtualScrollable","_scrollLeft","isScrollingLeft","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","_averageRowHeight","scroll","_focusEditable","loadStart","_progress","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","hiddenDiv","isNaN","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","isGridHeightSet","scrollableHeight","initialHeight","newHeight","currentRowHeight","itemsCount","_rowHeight","_sum","_measures","_sortHandler","_requestStart","_error","relatedRow","selectableRow","childCells","originalCells","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","_columnMenu","menuOptions","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","closeCallback","stickCallback","unstickCallback","filterHandler","compare","forceUnique","checkSource","owner","stick","unstick","filtering","componentType","kendoColumnMenu","_filterable","columnFilterable","filterInit","filterOpen","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","suggestDataSource","operators","customDataSource","cellOptions","_updateHeader","delay","inputWidth","suggestionOperator","minLength","dataTextField","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","aria-label","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","dataValueField","checkBox","isSelecting","_tmpl","alt","skipGroupCells","paramName","dirtyCellTemplate","expr","_dirtyCellTemplate","dirtyField","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","stringify","useWithBlock","_virtualCols","considerNext","widths","c","sumOfWidths","colsToRender","firstColspan","lastColspan","widthOfHiddenColumns","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","defaultTemplate","scrollableNoGridHeightStyles","templateName","rowClass","scope","fieldsMap","_emptyAggregates","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","detailRow","expanding","masterRow","ariaLabelText","ariaExpandText","toggleClass","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","trFilter","hasFilterRow","filterCellOffset","leafColumnsCount","filtercellCells","filterRow","existingFilterRow","syncHeight","hasLockedColumns","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_rowsHtml","templates","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","_groupsState","isNew","excludeHeader","_skippedGroups","shift","groupUid","groupObject","currentGroupCount","groupCountAfterCollapse","toHide","groupToCollapse","showFooter","footerCount","relatedGroup","_getGroupByUid","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","_groupToCollapse","footersVisibility","groupsCount","groupCount","groupCountAfterExpand","toggleVisibility","pop","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","skeleton","isVirtualization","progress","_resize","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","_renderContent","_renderLockedContent","_restoreCurrent","contentResized","resetTouchEvents","_muteAngularRebind","_restoreSelection","selectedRows","dataItemKey","cmd","_cleanupDetailItems","_angularGroupItems","_angularGroupFooterItems","flatViewLength","endlessAppend","flatView","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","currentRow","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","startingPage","draw","cont","_destructive","pageNumber","pageNum","drawing","drawDOM","always","toggleUnexportableColumns","err","renderPage","origBody","paddingRight","_initPDFProgress","restore","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","exportPage","doc","_drawPDFShadow","avoidLinks","paperSize","Group","pb","loading","kendoProgressBar","chunkCount","plugin"],"mappings":"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","file":"kendo.grid.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/text-metrics', ['kendo.core'], f);\n}(function () {\n    (function ($) {\n        window.kendo.util = window.kendo.util || {};\n        var LRUCache = kendo.Class.extend({\n            init: function (size) {\n                this._size = size;\n                this._length = 0;\n                this._map = {};\n            },\n            put: function (key, value) {\n                var map = this._map;\n                var entry = {\n                    key: key,\n                    value: value\n                };\n                map[key] = entry;\n                if (!this._head) {\n                    this._head = this._tail = entry;\n                } else {\n                    this._tail.newer = entry;\n                    entry.older = this._tail;\n                    this._tail = entry;\n                }\n                if (this._length >= this._size) {\n                    map[this._head.key] = null;\n                    this._head = this._head.newer;\n                    this._head.older = null;\n                } else {\n                    this._length++;\n                }\n            },\n            get: function (key) {\n                var entry = this._map[key];\n                if (entry) {\n                    if (entry === this._head && entry !== this._tail) {\n                        this._head = entry.newer;\n                        this._head.older = null;\n                    }\n                    if (entry !== this._tail) {\n                        if (entry.older) {\n                            entry.older.newer = entry.newer;\n                            entry.newer.older = entry.older;\n                        }\n                        entry.older = this._tail;\n                        entry.newer = null;\n                        this._tail.newer = entry;\n                        this._tail = entry;\n                    }\n                    return entry.value;\n                }\n            }\n        });\n        var REPLACE_REGEX = /\\r?\\n|\\r|\\t/g;\n        var SPACE = ' ';\n        function normalizeText(text) {\n            return String(text).replace(REPLACE_REGEX, SPACE);\n        }\n        function objectKey(object) {\n            var parts = [];\n            for (var key in object) {\n                parts.push(key + object[key]);\n            }\n            return parts.sort().join('');\n        }\n        function hashKey(str) {\n            var hash = 2166136261;\n            for (var i = 0; i < str.length; ++i) {\n                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n                hash ^= str.charCodeAt(i);\n            }\n            return hash >>> 0;\n        }\n        function zeroSize() {\n            return {\n                width: 0,\n                height: 0,\n                baseline: 0\n            };\n        }\n        var DEFAULT_OPTIONS = { baselineMarkerSize: 1 };\n        var defaultMeasureBox;\n        if (typeof document !== 'undefined') {\n            defaultMeasureBox = document.createElement('div');\n            defaultMeasureBox.style.cssText = 'position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;' + 'padding: 0 !important; margin: 0 !important; border: 0 !important;' + 'line-height: normal !important; visibility: hidden !important; white-space: pre!important;';\n        }\n        var TextMetrics = kendo.Class.extend({\n            init: function (options) {\n                this._cache = new LRUCache(1000);\n                this.options = $.extend({}, DEFAULT_OPTIONS, options);\n            },\n            measure: function (text, style, options) {\n                if (options === void 0) {\n                    options = {};\n                }\n                if (typeof text === 'undefined' || text === null) {\n                    return zeroSize();\n                }\n                var styleKey = objectKey(style);\n                var cacheKey = hashKey(text + styleKey);\n                var cachedResult = this._cache.get(cacheKey);\n                if (cachedResult) {\n                    return cachedResult;\n                }\n                var size = zeroSize();\n                var measureBox = options.box || defaultMeasureBox;\n                var baselineMarker = this._baselineMarker().cloneNode(false);\n                for (var key in style) {\n                    var value = style[key];\n                    if (typeof value !== 'undefined') {\n                        measureBox.style[key] = value;\n                    }\n                }\n                var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n                measureBox.textContent = textStr;\n                measureBox.appendChild(baselineMarker);\n                document.body.appendChild(measureBox);\n                if (textStr.length) {\n                    size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n                    size.height = measureBox.offsetHeight;\n                    size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n                }\n                if (size.width > 0 && size.height > 0) {\n                    this._cache.put(cacheKey, size);\n                }\n                measureBox.parentNode.removeChild(measureBox);\n                return size;\n            },\n            _baselineMarker: function () {\n                var marker = document.createElement('div');\n                marker.style.cssText = 'display: inline-block; vertical-align: baseline;width: ' + this.options.baselineMarkerSize + 'px; height: ' + this.options.baselineMarkerSize + 'px;overflow: hidden;';\n                return marker;\n            }\n        });\n        TextMetrics.current = new TextMetrics();\n        function measureText(text, style, measureBox) {\n            return TextMetrics.current.measure(text, style, measureBox);\n        }\n        kendo.deepExtend(kendo.util, {\n            LRUCache: LRUCache,\n            TextMetrics: TextMetrics,\n            measureText: measureText,\n            objectKey: objectKey,\n            hashKey: hashKey,\n            normalizeText: normalizeText\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.grid', [\n        'kendo.data',\n        'kendo.columnsorter',\n        'kendo.editable',\n        'kendo.window',\n        'kendo.filtermenu',\n        'kendo.columnmenu',\n        'kendo.groupable',\n        'kendo.pager',\n        'kendo.selectable',\n        'kendo.sortable',\n        'kendo.reorderable',\n        'kendo.resizable',\n        'kendo.ooxml',\n        'kendo.excel',\n        'kendo.pane',\n        'kendo.progressbar',\n        'kendo.pdf',\n        'kendo.dialog',\n        'kendo.pane',\n        'kendo.switch',\n        'html/button'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'grid',\n        name: 'Grid',\n        category: 'web',\n        description: 'The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.',\n        depends: [\n            'data',\n            'columnsorter',\n            'sortable'\n        ],\n        features: [\n            {\n                id: 'grid-editing',\n                name: 'Editing',\n                description: 'Support for record editing',\n                depends: [\n                    'editable',\n                    'window'\n                ]\n            },\n            {\n                id: 'grid-filtering',\n                name: 'Filtering',\n                description: 'Support for record filtering',\n                depends: ['filtermenu']\n            },\n            {\n                id: 'grid-columnmenu',\n                name: 'Column menu',\n                description: 'Support for header column menu',\n                depends: ['columnmenu']\n            },\n            {\n                id: 'grid-grouping',\n                name: 'Grouping',\n                description: 'Support for grid grouping',\n                depends: ['groupable']\n            },\n            {\n                id: 'grid-filtercell',\n                name: 'Row filter',\n                description: 'Support for grid header filtering',\n                depends: ['filtercell']\n            },\n            {\n                id: 'grid-paging',\n                name: 'Paging',\n                description: 'Support for grid paging',\n                depends: ['pager']\n            },\n            {\n                id: 'grid-selection',\n                name: 'Selection',\n                description: 'Support for row selection',\n                depends: ['selectable']\n            },\n            {\n                id: 'grid-column-reorder',\n                name: 'Column reordering',\n                description: 'Support for column reordering',\n                depends: ['reorderable']\n            },\n            {\n                id: 'grid-column-resize',\n                name: 'Column resizing',\n                description: 'Support for column resizing',\n                depends: ['resizable']\n            },\n            {\n                id: 'grid-mobile',\n                name: 'Grid adaptive rendering',\n                description: 'Support for adaptive rendering',\n                depends: [\n                    'dialog',\n                    'pane',\n                    'switch'\n                ]\n            },\n            {\n                id: 'grid-excel-export',\n                name: 'Excel export',\n                description: 'Export grid data as Excel spreadsheet',\n                depends: ['excel']\n            },\n            {\n                id: 'grid-pdf-export',\n                name: 'PDF export',\n                description: 'Export grid data as PDF',\n                depends: [\n                    'pdf',\n                    'drawing',\n                    'progressbar'\n                ]\n            }\n        ]\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, DataSource = kendo.data.DataSource, ObservableObject = kendo.data.ObservableObject, tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml, activeElement = kendo._activeElement, Widget = ui.Widget, outerWidth = kendo._outerWidth, outerHeight = kendo._outerHeight, keys = kendo.keys, isPlainObject = $.isPlainObject, extend = $.extend, map = $.map, grep = $.grep, isArray = Array.isArray, inArray = $.inArray, push = Array.prototype.push, proxy = $.proxy, isFunction = kendo.isFunction, isEmptyObject = $.isEmptyObject, contains = $.contains, math = Math, DOT = '.', PROGRESS = 'progress', ERROR = 'error', HIERARCHY_CELL_CLASS = 'k-hierarchy-cell', DATA_CELL = ':not(.k-group-cell):not([' + kendo.attr('virtual') + ']):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible', SELECTION_CELL_SELECTOR = 'tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)', NAVROW = 'tr:not(.k-footer-template):visible', NAVCELL = ':not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible', ITEMROW = 'tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible', COLGROUP = 'col:not(.k-group-col, .k-hierarchy-col)', HEADERCELLS = 'th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)', WRAPPER = '.k-grid.k-widget', NS = '.kendoGrid', CONTENTRLOCKEDCONTAINER = 'k-grid-content-locked', GROUPCELLCLASS = 'k-group-cell', EDIT = 'edit', BEFOREEDIT = 'beforeEdit', SAVE = 'save', REMOVE = 'remove', DETAILINIT = 'detailInit', FILTERMENUINIT = 'filterMenuInit', COLUMNMENUINIT = 'columnMenuInit', FILTERMENUOPEN = 'filterMenuOpen', COLUMNMENUOPEN = 'columnMenuOpen', CELLCLOSE = 'cellClose', CHANGE = 'change', COLUMNHIDE = 'columnHide', COLUMNSHOW = 'columnShow', SAVECHANGES = 'saveChanges', DATABOUND = 'dataBound', DETAILEXPAND = 'detailExpand', DETAILCOLLAPSE = 'detailCollapse', ITEM_CHANGE = 'itemchange', PAGE = 'page', PAGING = 'paging', SCROLL = 'scroll', SYNC = 'sync', LOAD_START = 'loadStart', LOAD_END = 'loadEnd', FOCUSED = 'k-state-focused', FOCUSABLE = ':kendoFocusable', SELECTED = 'k-state-selected', CHECKBOX = 'k-checkbox', CHECKBOXINPUT = 'input[data-role=\\'checkbox\\'].' + CHECKBOX, NORECORDSCLASS = 'k-grid-norecords', LINK_CLASS = 'k-link', ICON_CLASS = 'k-icon', ORDER_CLASS = 'k-sort-order', SORTED_CLASS = 'k-sorted', HEADER_COLUMN_MENU_CLASS = 'k-header-column-menu', FILTER_MENU_CLASS = 'k-grid-filter', STICKY_CELL_CLASS = 'k-grid-content-sticky', STICKY_HEADER_CLASS = 'k-grid-header-sticky', STICKY_FOOTER_CLASS = 'k-grid-footer-sticky', STICKY_HEADER_NO_BORDER_CLASS = 'k-grid-no-left-border', RESIZE = 'resize', COLUMNRESIZE = 'columnResize', COLUMNREORDER = 'columnReorder', COLUMNLOCK = 'columnLock', COLUMNUNLOCK = 'columnUnlock', COLUMNSTICK = 'columnStick', COLUMNUNSTICK = 'columnUnstick', ROWREORDER = 'rowReorder', NAVIGATE = 'navigate', CLICK = 'click', MOUSEDOWN = 'mousedown', HEIGHT = 'height', TABINDEX = 'tabIndex', FUNCTION = 'function', STRING = 'string', BOTTOM = 'bottom', CONTAINER_FOR = 'container-for', FIELD = 'field', INPUT = 'input', INCELL = 'incell', INLINE = 'inline', UNIQUE_ID = 'uid', MINCOLSPANVALUE = 1, COLSPAN = 'colSpan', OVERFLOW = 'overflow', HIDDEN = 'hidden', SORT = 'sort', GROUP_SORT = 'group-sort', DELETECONFIRM = 'Are you sure you want to delete this record?', NORECORDS = 'No records available.', CONFIRMDELETE = 'Delete', CANCELDELETE = 'Cancel', COLLAPSE = 'Collapse', EXPAND = 'Expand', ARIALABEL = 'aria-label', formatRegExp = /(\\}|\\#)/gi, templateHashRegExp = /#/gi, whitespaceRegExp = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', leftRegExp = new RegExp('(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*', 'ig'), rightRegExp = new RegExp('(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*', 'ig'), nonDataCellsRegExp = new RegExp('(^|' + whitespaceRegExp + ')' + '(k-group-cell|k-hierarchy-cell)' + '(' + whitespaceRegExp + '|$)'), filterRowRegExp = new RegExp('(^|' + whitespaceRegExp + ')' + '(k-filter-row)' + '(' + whitespaceRegExp + '|$)'), COMMANDBUTTONTMPL = '<button type=\"button\" class=\"#=className#\" #=attr#>#=text#</button>', SELECTCOLUMNTMPL = '<input class=\"' + CHECKBOX + ' k-checkbox-md k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select row\" aria-checked=\"false\" type=\"checkbox\">', SELECTCOLUMNHEADERTMPL = '<input class=\"' + CHECKBOX + ' k-checkbox-md k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select all rows\" aria-checked=\"false\" type=\"checkbox\">', DRAGHANDLECOLUMNTMPL = '<span class=\"k-icon k-i-reorder\"></span>', SORTHEADERTMPL = '<span class=\"k-cell-inner\"><span class=\"k-link\"><span class=\"k-column-title\">#=text#</span></span></span>', isRtl = false, browser = kendo.support.browser;\n        var isIE11 = browser.msie && browser.version === 11;\n        var isMac = /Mac OS/.test(navigator.userAgent);\n        var classNames = {\n            content: 'k-content',\n            widget: 'k-widget',\n            scrollContainer: 'k-scroll-container',\n            headerCellInner: 'k-cell-inner'\n        };\n        var GroupsPager;\n        if (ui.Pager) {\n            GroupsPager = ui.Pager.extend({\n                init: function (element, options) {\n                    ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                    this.dataSource.options.useRanges = true;\n                    this.dataSource._omitPrefetch = true;\n                },\n                options: { name: 'GroupsPager' },\n                totalPages: function () {\n                    var that = this;\n                    return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n                },\n                _collapsedTotal: function () {\n                    var dataSource = this.dataSource;\n                    return dataSource ? dataSource.groupsTotal(true) || 0 : 0;\n                }\n            });\n        }\n        var VirtualScrollable = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                that._refreshHandler = proxy(that.refresh, that);\n                that.setDataSource(options.dataSource);\n                that.wrap();\n            },\n            setDataSource: function (dataSource) {\n                var that = this;\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                }\n                that.dataSource = dataSource;\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n                that.dataSource.options.useRanges = true;\n            },\n            options: {\n                name: 'VirtualScrollable',\n                itemHeight: $.noop,\n                prefetch: true,\n                maxScrollHeight: 250000\n            },\n            events: [\n                PAGING,\n                PAGE,\n                SCROLL,\n                LOAD_START,\n                LOAD_END\n            ],\n            destroy: function () {\n                var that = this;\n                Widget.fn.destroy.call(that);\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.wrapper.add(that.verticalScrollbar).off(NS);\n                clearTimeout(that._timeout);\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n                if (that.drag) {\n                    that.drag.destroy();\n                    that.drag = null;\n                }\n                that.wrapper = that.element = that.verticalScrollbar = null;\n                that._refreshHandler = null;\n            },\n            wrap: function () {\n                var that = this, scrollbar = kendo.support.scrollbar() + 1, element = that.element, wrapper;\n                element.css({\n                    width: 'auto',\n                    overflow: 'hidden'\n                }).css(isRtl ? 'padding-left' : 'padding-right', scrollbar);\n                that.content = element.children().first();\n                wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>').parent().on('DOMMouseScroll' + NS + ' mousewheel' + NS, proxy(that._wheelScroll, that));\n                that._wrapper();\n                if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                    that.wrapper.css('touch-action', 'none');\n                    that.drag = new kendo.UserEvents(that.wrapper, {\n                        global: true,\n                        allowSelection: true,\n                        start: function (e) {\n                            e.sender.capture();\n                        },\n                        move: function (e) {\n                            that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                            kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                            e.preventDefault();\n                        }\n                    });\n                }\n                that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />').css({ width: scrollbar }).appendTo(element).on('scroll' + NS, proxy(that._scroll, that));\n            },\n            _wrapper: function () {\n                var that = this;\n                if (isIE11) {\n                    that.wrapper.css({ 'overflow-y': SCROLL });\n                    that.element.css(isRtl ? 'padding-left' : 'padding-right', 0);\n                }\n            },\n            _wheelScroll: function (e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n                var scrollbar = this.verticalScrollbar, scrollTop = scrollbar.scrollTop(), delta = kendo.wheelDeltaY(e);\n                if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                    e.preventDefault();\n                    this.verticalScrollbar.scrollTop(scrollTop + -delta);\n                }\n            },\n            _scroll: function (e) {\n                var that = this, delayLoading = !that.options.prefetch, scrollTop = e.currentTarget.scrollTop, dataSource = that.dataSource, rowHeight = that.itemHeight, skip = dataSource.skip() || 0, start = that._rangeStart || skip, height = that.element.innerHeight(), isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop), firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0), lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight), lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n                if (that._preventScroll) {\n                    that._preventScroll = false;\n                    return;\n                }\n                that._prevScrollTop = that._scrollTop;\n                that._scrollTop = scrollTop - start * rowHeight;\n                that._scrollbarTop = scrollTop;\n                that._scrolling = delayLoading;\n                if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                    that.wrapper[0].scrollTop = that._scrollTop;\n                }\n                that.trigger(SCROLL);\n                if (delayLoading) {\n                    if (that._scrollingTimeout) {\n                        clearTimeout(that._scrollingTimeout);\n                    }\n                    that._scrollingTimeout = setTimeout(function () {\n                        that._scrolling = false;\n                        that._page(that._rangeStart, that.dataSource.take());\n                    }, 100);\n                }\n            },\n            scrollToTop: function () {\n                this._scrollTo(0);\n            },\n            scrollToBottom: function () {\n                var scrollbar = this.verticalScrollbar;\n                this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n            },\n            _scrollWrapperToTop: function () {\n                this.wrapper.scrollTop(0);\n            },\n            _scrollWrapperToBottom: function () {\n                this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n            },\n            _scrollWrapperOnColumnResize: function () {\n                var that = this;\n                var wrapper = this.wrapper;\n                var initialScrollTop = wrapper.scrollTop();\n                if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                    if (!that._wrapperScrolled && initialScrollTop || that._isScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                        that._wrapperScrolled = true;\n                    }\n                } else if (that._wrapperScrolled) {\n                    if (!that._isWrapperScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                    }\n                    that._wrapperScrolled = false;\n                }\n            },\n            _scrollTo: function (scrollTop) {\n                var that = this;\n                var scrollbar = that.verticalScrollbar;\n                if (scrollbar.scrollTop() !== scrollTop) {\n                    that._preventScroll = true;\n                }\n                that.wrapper.scrollTop(scrollTop);\n                that._scrollTop = that.wrapper.scrollTop();\n                scrollbar.scrollTop(scrollTop);\n                that._scrollbarTop = scrollbar.scrollTop();\n            },\n            _isScrolledToTop: function () {\n                return this.verticalScrollbar.scrollTop() === 0;\n            },\n            _isScrolledToBottom: function () {\n                var scrollbar = this.verticalScrollbar;\n                var scrollTop = scrollbar.scrollTop();\n                return scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10);\n            },\n            _isWrapperScrolledToBottom: function () {\n                var wrapper = this.wrapper;\n                return wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10);\n            },\n            itemIndex: function (rowIndex) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n                return rangeStart + rowIndex;\n            },\n            position: function (index) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n                var pageSize = this.dataSource.pageSize();\n                var result;\n                if (index > rangeStart) {\n                    result = index - rangeStart;\n                } else {\n                    result = rangeStart - index - 1;\n                }\n                return result > pageSize ? pageSize : result;\n            },\n            scrollIntoView: function (row) {\n                var container = this.wrapper[0];\n                var containerHeight = container.clientHeight;\n                var containerScroll = !this._isScrolledToBottom() ? this._scrollTop || container.scrollTop : container.scrollTop;\n                var elementOffset = row[0].offsetTop;\n                var elementHeight = row[0].offsetHeight;\n                if (containerScroll > elementOffset) {\n                    this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n                } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                    this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n                }\n            },\n            _fetch: function (firstItemIndex, lastItemIndex, scrollingUp) {\n                var that = this, dataSource = that.dataSource, itemHeight = that.itemHeight, take = dataSource.take(), rangeStart = that._rangeStart || dataSource.skip() || 0, currentSkip = math.floor(firstItemIndex / take) * take, fetching = false, prefetchAt = 0.33;\n                var scrollbar = that.verticalScrollbar;\n                var webkitCorrection = browser.webkit ? 1 : 0;\n                var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n                if (firstItemIndex < rangeStart) {\n                    fetching = true;\n                    rangeStart = math.max(0, lastItemIndex - take);\n                    that._scrollTop = scrollbar.scrollTop() - rangeStart * itemHeight;\n                    that._page(rangeStart, take);\n                } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n                    fetching = true;\n                    rangeStart = math.min(firstItemIndex, total - take);\n                    if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                    } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                    } else {\n                        that._scrollTop = itemHeight;\n                    }\n                    that._page(rangeStart, take);\n                } else if (!that._fetching && that.options.prefetch) {\n                    if (firstItemIndex < currentSkip + take - take * prefetchAt && firstItemIndex > take) {\n                        dataSource.prefetch(currentSkip - take, take, $.noop);\n                    }\n                    if (lastItemIndex > currentSkip + take * prefetchAt) {\n                        dataSource.prefetch(currentSkip + take, take, $.noop);\n                    }\n                }\n                return fetching;\n            },\n            fetching: function () {\n                return this._fetching;\n            },\n            _page: function (skip, take, callback) {\n                var that = this, delayLoading = !that.options.prefetch, dataSource = that.dataSource, isGroupPaged = dataSource._isGroupPaged();\n                callback = isFunction(callback) ? callback : $.noop;\n                if (that.trigger(PAGING, {\n                        skip: skip,\n                        take: take\n                    })) {\n                    return;\n                }\n                clearTimeout(that._timeout);\n                that._fetching = true;\n                that._rangeStart = skip;\n                if (isGroupPaged && dataSource._groupRangeExists(skip, skip + take) || !isGroupPaged && dataSource.inRange(skip, take)) {\n                    that.trigger(LOAD_START);\n                    dataSource.range(skip, take, function () {\n                        that.trigger(LOAD_END);\n                        callback();\n                        that.trigger(PAGE);\n                    }, 'page');\n                } else {\n                    if (!delayLoading) {\n                        that.trigger(LOAD_START);\n                    }\n                    that._timeout = setTimeout(function () {\n                        if (!that._scrolling) {\n                            if (delayLoading) {\n                                that.trigger(LOAD_START);\n                            }\n                            dataSource.range(skip, take, function () {\n                                that.trigger(LOAD_END);\n                                callback();\n                                that.trigger(PAGE);\n                            });\n                        }\n                    }, 100);\n                }\n            },\n            repaintScrollbar: function (shouldScrollWrapper) {\n                var that = this, html = '', maxHeight = that.options.maxScrollHeight, dataSource = that.dataSource, scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0, wrapperElement = that.wrapper[0], totalHeight, idx, itemHeight;\n                var wasScrolledToBottom = that._isScrolledToBottom();\n                itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n                var addScrollBarHeight = wrapperElement.scrollWidth > wrapperElement.offsetWidth ? scrollbar : 0;\n                totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n                for (idx = 0; idx < math.floor(totalHeight / maxHeight); idx++) {\n                    html += '<div style=\"width:1px;height:' + maxHeight + 'px\"></div>';\n                }\n                if (totalHeight % maxHeight) {\n                    html += '<div style=\"width:1px;height:' + totalHeight % maxHeight + 'px\"></div>';\n                }\n                that.verticalScrollbar.html(html);\n                if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                    that.scrollToBottom();\n                }\n                if (typeof that._scrollTop !== 'undefined' && !!shouldScrollWrapper) {\n                    wrapperElement.scrollTop = that._scrollTop;\n                    that._scrollWrapperOnColumnResize();\n                }\n            },\n            refresh: function (e) {\n                var that = this, dataSource = that.dataSource, rangeStart = that._rangeStart;\n                var action = (e || {}).action;\n                var shouldScrollWrapper = that._isScrolledToBottom() || !action || action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC;\n                that.trigger(LOAD_END);\n                clearTimeout(that._timeout);\n                that.repaintScrollbar(shouldScrollWrapper);\n                if (that.drag) {\n                    that.drag.cancel();\n                }\n                if (typeof rangeStart !== 'undefined' && !that._fetching) {\n                    if (!action || action !== SYNC && action !== ITEM_CHANGE && action !== 'expandGroup') {\n                        that._rangeStart = dataSource.skip();\n                    }\n                    if (dataSource.page() === 1 && (!action || action !== SYNC && action !== ITEM_CHANGE && action !== 'expandGroup' && action !== 'collapseGroup')) {\n                        that.verticalScrollbar[0].scrollTop = 0;\n                    }\n                }\n                that._fetching = false;\n            }\n        });\n        function attrEquals(attrName, attrValue) {\n            return '[' + kendo.attr(attrName) + '=' + attrValue + ']';\n        }\n        function groupCells(count) {\n            return new Array(count + 1).join('<td class=\"k-group-cell\">&nbsp;</td>');\n        }\n        function stringifyAttributes(attributes) {\n            var attr, result = ' ';\n            if (attributes) {\n                if (typeof attributes === STRING) {\n                    return attributes;\n                }\n                for (attr in attributes) {\n                    if (attributes[attr] !== '') {\n                        result += attr + '=\"' + attributes[attr] + '\"';\n                    }\n                }\n            }\n            return result;\n        }\n        var defaultCommands = {\n            create: {\n                text: 'Add new record',\n                className: 'k-grid-add',\n                iconClass: 'k-icon k-i-plus'\n            },\n            cancel: {\n                text: 'Cancel changes',\n                className: 'k-grid-cancel-changes',\n                iconClass: 'k-icon k-i-cancel'\n            },\n            save: {\n                text: 'Save changes',\n                className: 'k-grid-save-changes',\n                iconClass: 'k-icon k-i-check'\n            },\n            destroy: {\n                text: 'Delete',\n                className: 'k-grid-delete',\n                iconClass: 'k-icon k-i-close'\n            },\n            edit: {\n                text: 'Edit',\n                className: 'k-grid-edit',\n                iconClass: 'k-icon k-i-edit'\n            },\n            update: {\n                text: 'Update',\n                className: 'k-grid-update',\n                iconClass: 'k-icon k-i-check',\n                themeColor: 'primary'\n            },\n            canceledit: {\n                text: 'Cancel',\n                className: 'k-grid-cancel',\n                iconClass: 'k-icon k-i-cancel'\n            },\n            excel: {\n                text: 'Export to Excel',\n                className: 'k-grid-excel',\n                iconClass: 'k-icon k-i-file-excel'\n            },\n            pdf: {\n                text: 'Export to PDF',\n                className: 'k-grid-pdf',\n                iconClass: 'k-icon k-i-file-pdf'\n            },\n            search: {\n                text: 'Search...',\n                className: 'k-grid-search'\n            }\n        };\n        function cursor(context, value) {\n            $('th, th .k-grid-filter, th .k-link', context).add(document.body).css('cursor', value);\n        }\n        function reorder(selector, source, dest, before, count) {\n            var sourceIndex = source;\n            source = $();\n            count = count || 1;\n            for (var idx = 0; idx < count; idx++) {\n                source = source.add(selector.eq(sourceIndex + idx));\n            }\n            if (typeof dest == 'number') {\n                source[before ? 'insertBefore' : 'insertAfter'](selector.eq(dest));\n            } else {\n                source.appendTo(dest);\n            }\n        }\n        function elements(lockedContent, content, filter) {\n            return $(lockedContent).add(content).find(filter);\n        }\n        function attachCustomCommandEvent(context, container, commands) {\n            var idx, length, command, commandName;\n            commands = !isArray(commands) ? [commands] : commands;\n            for (idx = 0, length = commands.length; idx < length; idx++) {\n                command = commands[idx];\n                if (isPlainObject(command) && command.click) {\n                    commandName = command.name || command.text;\n                    container.on(CLICK + NS, '.k-grid-' + (commandName || '').replace(/\\s/g, ''), { commandName: commandName }, proxy(command.click, context));\n                }\n            }\n        }\n        function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n            return map(columns, function (column) {\n                column = typeof column === STRING ? { field: column } : column;\n                var hidden;\n                column.parentIds = parentIds;\n                if (!isVisible(column) || hide) {\n                    column.attributes = addHiddenStyle(column.attributes);\n                    column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                    column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                    hidden = true;\n                }\n                var uid = kendo.guid();\n                if (locked && !column.locked) {\n                    column.locked = locked;\n                }\n                column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n                if (!column.headerAttributes.id) {\n                    column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                    column.uid = uid;\n                } else {\n                    uid = column.headerAttributes.id;\n                }\n                if (column.columns) {\n                    column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? parentIds + ' ' + uid : uid);\n                }\n                return extend({\n                    encoded: encoded,\n                    hidden: hidden,\n                    locked: locked\n                }, column);\n            });\n        }\n        function columnParent(column, columns) {\n            var parents = [];\n            columnParents(column, columns, parents);\n            return parents[parents.length - 1];\n        }\n        function columnParents(column, columns, parents) {\n            parents = parents || [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (column === columns[idx]) {\n                    return true;\n                } else if (columns[idx].columns) {\n                    var inserted = parents.length;\n                    parents.push(columns[idx]);\n                    if (!columnParents(column, columns[idx].columns, parents)) {\n                        parents.splice(inserted, parents.length - inserted);\n                    } else {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n        function setColumnVisibility(column, visible) {\n            setVisibility(column, visible, visible);\n        }\n        function setVisibility(column, visible, show) {\n            var method = show ? removeHiddenStyle : addHiddenStyle;\n            column.hidden = !visible;\n            column.attributes = method(column.attributes);\n            column.footerAttributes = method(column.footerAttributes);\n            column.headerAttributes = method(column.headerAttributes);\n        }\n        function setColumnMediaVisibility(column, visible) {\n            setColumnMatchesMedia(column);\n            var hideByMedia = column._hideByMedia;\n            setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n        }\n        function setColumnMatchesMedia(column) {\n            column.matchesMedia = columnMatchesMedia(column);\n        }\n        function columnMatchesMedia(column) {\n            return column && (isUndefined(column.media) || !isUndefined(column.media) && kendo.matchesMedia(column.media));\n        }\n        function isCellVisible() {\n            return this.style.display !== 'none';\n        }\n        function isElementVisible(element) {\n            return $(element)[0].style.display !== 'none';\n        }\n        function isVisible(column) {\n            return visibleColumns([column]).length > 0;\n        }\n        function visibleColumns(columns) {\n            return grep(columns, function (column) {\n                var result = !column.hidden && column.matchesMedia !== false;\n                if (result && column.columns) {\n                    result = visibleColumns(column.columns).length > 0;\n                }\n                return result;\n            });\n        }\n        function columnsWithMedia(columns) {\n            var result = [];\n            var column;\n            for (var i = 0; i < columns.length; i++) {\n                column = columns[i];\n                if (!isUndefined(column.media)) {\n                    if (!isUndefined(column.minScreenWidth)) {\n                        throw new Error('Using \\'media\\' and \\'minScreenWidth\\' options at the same time is not supported.');\n                    }\n                    result.push(column);\n                }\n                if (column.columns) {\n                    result = result.concat(columnsWithMedia(column.columns));\n                }\n            }\n            return result;\n        }\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        function toJQuery(elements) {\n            return $(elements).map(function () {\n                return this.toArray();\n            });\n        }\n        function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n            var lockedColumnDepth = depth(lockedColumns(columns));\n            var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n            var rowSpan = cell.rowSpan;\n            if (sourceLockedColumnsCount) {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = rowSpan - (lockedColumnDepth - nonLockedColumnDepth) || 1;\n                } else {\n                    cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n                }\n            } else {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n                } else {\n                    cell.rowSpan = rowSpan - (nonLockedColumnDepth - lockedColumnDepth) || 1;\n                }\n            }\n        }\n        function findColumnByField(columns, field) {\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].field == field) {\n                    return columns[i];\n                }\n            }\n        }\n        function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n            var sourcesDepth = depth(sources);\n            var targetDepth = depth([target]);\n            if (sourcesDepth > targetDepth) {\n                var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">&nbsp;</th>');\n                var rows = destination.children(':not(.k-filter-row)');\n                $(new Array(sourcesDepth - targetDepth + 1).join('<tr>' + groupCells + '</tr>')).insertAfter(rows.last());\n            }\n            addRowSpanValue(destination, sourcesDepth - targetDepth);\n            moveCells(leafs, columns, container, destination, action);\n        }\n        function updateCellIndex(thead, columns, offset) {\n            offset = offset || 0;\n            var position;\n            var cell;\n            var allColumns = columns;\n            columns = leafColumns(columns);\n            var cells = {};\n            var rows = thead.find('>tr:not(.k-filter-row)');\n            var filter = function () {\n                var el = $(this);\n                return !el.hasClass('k-group-cell') && !el.hasClass('k-hierarchy-cell');\n            };\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n                position = columnPosition(columns[idx], allColumns);\n                if (!cells[position.row]) {\n                    cells[position.row] = rows.eq(position.row).find('.k-header').filter(filter);\n                }\n                cell = cells[position.row].eq(position.cell);\n                cell.attr(kendo.attr('index'), offset + idx);\n            }\n            return columns.length;\n        }\n        function depth(columns) {\n            var result = 1;\n            var max = 0;\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    var temp = depth(columns[idx].columns);\n                    if (temp > max) {\n                        max = temp;\n                    }\n                }\n            }\n            return result + max;\n        }\n        function moveCells(leafs, columns, container, destination, action) {\n            var sourcePosition = columnVisiblePosition(leafs[0], columns);\n            var ths = container.find('>tr:not(.k-filter-row)').eq(sourcePosition.row).children('th.k-header');\n            var t = $();\n            var sourceIndex = sourcePosition.cell;\n            var idx;\n            for (idx = 0; idx < leafs.length; idx++) {\n                t = t.add(ths.eq(sourceIndex + idx));\n            }\n            destination.find('>tr:not(.k-filter-row)').eq(sourcePosition.row)[action](t);\n            var children = [];\n            for (idx = 0; idx < leafs.length; idx++) {\n                if (leafs[idx].columns) {\n                    children = children.concat(leafs[idx].columns);\n                }\n            }\n            if (children.length) {\n                moveCells(children, columns, container, destination, action);\n            }\n        }\n        function columnPosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n            for (idx = 0; idx < columns.length; idx++) {\n                if (columns[idx] == column) {\n                    result = {\n                        cell: cellCounts[row],\n                        row: row\n                    };\n                    break;\n                } else if (columns[idx].columns) {\n                    result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n                    if (result) {\n                        break;\n                    }\n                }\n                cellCounts[row]++;\n            }\n            return result;\n        }\n        function findParentColumnWithChildren(columns, index, source, rtl) {\n            var target;\n            var locked = !!source.locked;\n            var targetLocked;\n            do {\n                target = columns[index];\n                index += rtl ? 1 : -1;\n                targetLocked = !!target.locked;\n            } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n            return target;\n        }\n        function findReorderTarget(columns, target, source, before, masterColumns) {\n            if (target.columns) {\n                target = target.columns;\n                return target[before ? 0 : target.length - 1];\n            } else {\n                var parent = columnParent(target, columns);\n                var parentColumns;\n                if (parent) {\n                    parentColumns = parent.columns;\n                } else {\n                    parentColumns = columns;\n                }\n                var index = inArray(target, parentColumns);\n                if (index === 0 && before) {\n                    index++;\n                } else if (index == parentColumns.length - 1 && !before || !source.locked && !target.columns && !before) {\n                    index--;\n                } else if (index > 0 || index === 0 && !before) {\n                    index++;\n                }\n                var sourceIndex = inArray(source, parentColumns);\n                target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n                var targetIndex = inArray(target, masterColumns);\n                if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                    return null;\n                }\n                if (target && target != source && target.columns) {\n                    return findReorderTarget(columns, target, source, before, masterColumns);\n                }\n            }\n            return null;\n        }\n        function columnVisiblePosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n            for (idx = 0; idx < columns.length; idx++) {\n                if (columns[idx] == column) {\n                    result = {\n                        cell: cellCounts[row],\n                        row: row\n                    };\n                    break;\n                } else if (columns[idx].columns) {\n                    result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n                    if (result) {\n                        break;\n                    }\n                }\n                if (!columns[idx].hidden) {\n                    cellCounts[row]++;\n                }\n            }\n            return result;\n        }\n        function flatColumnsInDomOrder(columns) {\n            var result = flatColumns(lockedColumns(columns));\n            return result.concat(flatColumns(nonLockedColumns(columns)));\n        }\n        function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n            var column = flatColumns[sourceIndex];\n            var target = flatColumns[targetIndex];\n            var parent = columnParent(column, columns);\n            columns = parent ? parent.columns : columns;\n            return inArray(target, columns);\n        }\n        function flatColumns(columns) {\n            var result = [];\n            var children = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                result.push(columns[idx]);\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n            if (children.length) {\n                result = result.concat(flatColumns(children));\n            }\n            return result;\n        }\n        function hiddenLeafColumnsCount(columns) {\n            var counter = 0;\n            var column;\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n                if (column.columns) {\n                    counter += hiddenLeafColumnsCount(column.columns);\n                } else if (column.hidden) {\n                    counter++;\n                }\n            }\n            return counter;\n        }\n        function sumWidths(cols) {\n            var width = 0;\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                if (!cols[idx].hidden) {\n                    width += parseInt(cols[idx].width, 10);\n                }\n            }\n            return width;\n        }\n        function columnsWidth(cols) {\n            var colWidth, width = 0;\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                colWidth = cols[idx].style.width;\n                if (colWidth && colWidth.indexOf('%') == -1) {\n                    width += parseInt(colWidth, 10);\n                }\n            }\n            return width;\n        }\n        function removeRowSpanValue(container, count) {\n            var cells = container.find('tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)');\n            var rowSpan;\n            for (var idx = 0; idx < cells.length; idx++) {\n                rowSpan = cells[idx].rowSpan;\n                if (rowSpan > 1) {\n                    cells[idx].rowSpan = rowSpan - count || 1;\n                }\n            }\n        }\n        function addRowSpanValue(container, count) {\n            var cells = container.find('tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)');\n            for (var idx = 0; idx < cells.length; idx++) {\n                cells[idx].rowSpan += count;\n            }\n        }\n        function removeEmptyRows(container) {\n            var rows = container.find('tr:not(.k-filter-row)');\n            var emptyRowsCount = rows.filter(function () {\n                return !$(this).children().length;\n            }).remove().length;\n            var cells = rows.find('th:not(.k-group-cell,.k-hierarchy-cell)');\n            for (var idx = 0; idx < cells.length; idx++) {\n                if (cells[idx].rowSpan > 1) {\n                    cells[idx].rowSpan -= emptyRowsCount;\n                }\n            }\n            return rows.length - emptyRowsCount;\n        }\n        function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n            var idx, row, length, children = [];\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                row = rows[rowIndex] || [];\n                row.push(cells.eq(offset + idx));\n                rows[rowIndex] = row;\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n            if (children.length) {\n                mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n            }\n        }\n        function setLeftAndRightStyles(element, left, right) {\n            element.css({\n                'left': left,\n                'right': right\n            });\n        }\n        function createColumnAttribute(column, attribute, property) {\n            column[attribute] = column[attribute] || {};\n            column[attribute][property] = column[attribute][property] || '';\n        }\n        function addColumnAttribute(column, attribute, property, value) {\n            createColumnAttribute(column, attribute, property);\n            if (column[attribute][property] !== '') {\n                column[attribute][property] += ' ' + value;\n            } else {\n                column[attribute][property] = value;\n            }\n        }\n        function removeColumnAttribute(column, attribute, property, value) {\n            createColumnAttribute(column, attribute, property);\n            column[attribute][property] = column[attribute][property].replace(value, '');\n        }\n        function lockedColumns(columns) {\n            return grep(columns, function (column) {\n                return column.locked;\n            });\n        }\n        function nonLockedColumns(columns) {\n            return grep(columns, function (column) {\n                return !column.locked;\n            });\n        }\n        function stickyColumns(columns) {\n            return grep(columns, function (column) {\n                return column.sticky && !column.locked;\n            });\n        }\n        function visibleStickyColumns(columns) {\n            return grep(columns, function (column) {\n                return column.sticky && !column.locked && isVisible(column);\n            });\n        }\n        function visibleNonLockedColumns(columns) {\n            return grep(columns, function (column) {\n                return !column.locked && isVisible(column);\n            });\n        }\n        function visibleLockedColumns(columns) {\n            return grep(columns, function (column) {\n                return column.locked && isVisible(column);\n            });\n        }\n        function visibleLeafColumns(columns) {\n            var result = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].hidden) {\n                    continue;\n                }\n                if (columns[idx].columns) {\n                    result = result.concat(visibleLeafColumns(columns[idx].columns));\n                } else {\n                    result.push(columns[idx]);\n                }\n            }\n            return result;\n        }\n        function childColumns(columns) {\n            var result = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    result = result.concat(columns[idx].columns);\n                }\n            }\n            return result;\n        }\n        function visibleChildColumns(columns) {\n            var result = childColumns(columns);\n            result = result.filter(function (e) {\n                return !e.hidden;\n            });\n            return result;\n        }\n        function leafColumns(columns) {\n            var result = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n            return result;\n        }\n        function getColumnsFields(columns) {\n            var result = [];\n            columns = leafColumns(columns);\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (typeof columns[idx] === 'string') {\n                    result.push(columns[idx]);\n                } else if (columns[idx].field) {\n                    result.push(columns[idx].field);\n                }\n            }\n            return result;\n        }\n        function leafDataCells(container) {\n            var rows = container.find('>tr:not(.k-filter-row)');\n            var filter = function () {\n                var el = $(this);\n                return !el.hasClass('k-group-cell') && !el.hasClass('k-hierarchy-cell');\n            };\n            var cells = $();\n            if (rows.length > 1) {\n                cells = rows.find('th').filter(filter).filter(function () {\n                    return this.rowSpan > 1;\n                });\n            }\n            cells = cells.add(rows.last().find('th').filter(filter));\n            var indexAttr = kendo.attr('index');\n            cells.sort(function (a, b) {\n                a = $(a);\n                b = $(b);\n                var indexA = a.attr(indexAttr);\n                var indexB = b.attr(indexAttr);\n                if (indexA === undefined) {\n                    indexA = $(a).index();\n                }\n                if (indexB === undefined) {\n                    indexB = $(b).index();\n                }\n                indexA = parseInt(indexA, 10);\n                indexB = parseInt(indexB, 10);\n                return indexA > indexB ? 1 : indexA < indexB ? -1 : 0;\n            });\n            return cells;\n        }\n        function parentColumnsCells(cell) {\n            var container = cell.closest('table');\n            var result = $().add(cell);\n            var row = cell.closest('tr');\n            var headerRows = container.find('tr:not(.k-filter-row)');\n            var level = headerRows.index(row);\n            if (level > 0) {\n                var parent = headerRows.eq(level - 1);\n                var parentCellsWithChildren = parent.find('th:not(.k-group-cell,.k-hierarchy-cell)').filter(function () {\n                    return !$(this).attr('rowspan');\n                });\n                var offset = 0;\n                var index = row.find('th:not(.k-group-cell,.k-hierarchy-cell)').index(cell);\n                var prevCells = cell.prevAll(':not(.k-group-cell,.k-hierarchy-cell)').filter(function () {\n                    return this.colSpan > 1;\n                });\n                for (var idx = 0; idx < prevCells.length; idx++) {\n                    offset += prevCells[idx].colSpan || 1;\n                }\n                index += Math.max(offset - 1, 0);\n                offset = 0;\n                for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                    var parentCell = parentCellsWithChildren.eq(idx);\n                    if (parentCell.attr('data-colspan')) {\n                        offset += parentCell[0].getAttribute('data-colspan');\n                    } else {\n                        offset += 1;\n                    }\n                    if (index >= idx && index < offset) {\n                        result = parentColumnsCells(parentCell).add(result);\n                        break;\n                    }\n                }\n            }\n            return result;\n        }\n        function childColumnsCells(cell) {\n            var container = cell.closest('thead');\n            var result = $().add(cell);\n            var row = cell.closest('tr');\n            var headerRows = container.find('tr:not(.k-filter-row)');\n            var level = headerRows.index(row) + cell[0].rowSpan;\n            var colSpanAttr = kendo.attr('colspan');\n            if (level <= headerRows.length - 1) {\n                var child = row.next();\n                var prevCells = cell.prevAll(':not(.k-group-cell,.k-hierarchy-cell)');\n                var idx;\n                prevCells = prevCells.filter(function () {\n                    return !this.rowSpan || this.rowSpan === 1;\n                });\n                var offset = 0;\n                for (idx = 0; idx < prevCells.length; idx++) {\n                    offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n                }\n                var cells = child.find('th:not(.k-group-cell,.k-hierarchy-cell)');\n                var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n                idx = 0;\n                while (idx < colSpan) {\n                    child = cells.eq(idx + offset);\n                    result = result.add(childColumnsCells(child));\n                    var value = parseInt(child.attr(colSpanAttr), 10);\n                    if (value > 1) {\n                        colSpan -= value - 1;\n                    }\n                    idx++;\n                }\n            }\n            return result;\n        }\n        function appendContent(tbody, table, html, empty) {\n            var placeholder, tmp = tbody;\n            if (empty) {\n                tbody.empty();\n            }\n            if (tbodySupportsInnerHtml) {\n                tbody[0].innerHTML = html;\n            } else {\n                placeholder = document.createElement('div');\n                placeholder.innerHTML = '<table><tbody>' + html + '</tbody></table>';\n                tbody = placeholder.firstChild.firstChild;\n                table[0].replaceChild(tbody, tmp[0]);\n                tbody = $(tbody);\n            }\n            return tbody;\n        }\n        function addHiddenStyle(attr) {\n            attr = attr || {};\n            var style = attr.style;\n            if (!style) {\n                style = 'display:none';\n            } else {\n                style = style.replace(/display:[^;]*/i, 'display:none');\n                if (!style.match(/display:/i)) {\n                    style = style.replace(/(.*)?/i, 'display:none;$1');\n                }\n            }\n            return extend({}, attr, { style: style });\n        }\n        function hasHiddenStyle(attr) {\n            attr = attr || {};\n            var style = attr.style || '';\n            return style.indexOf('display:none') !== -1;\n        }\n        function removeHiddenStyle(attr) {\n            attr = attr || {};\n            var style = attr.style;\n            if (style) {\n                attr.style = style.replace(/(display\\s*:\\s*none\\s*;?)*/gi, '');\n            }\n            return attr;\n        }\n        function normalizeCols(table, visibleColumns, hasDetails, groups) {\n            var colgroup = table.find('>colgroup'), width, cols = map(visibleColumns, function (column) {\n                    width = column.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}\"/>', typeof width === STRING ? width : width + 'px');\n                    }\n                    return '<col />';\n                });\n            if (hasDetails || colgroup.find('.k-hierarchy-col').length) {\n                cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n            }\n            if (colgroup.length) {\n                colgroup.remove();\n            }\n            colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(''));\n            if (!colgroup.is('colgroup')) {\n                colgroup = $('<colgroup/>').append(colgroup);\n            }\n            table.prepend(colgroup);\n        }\n        function normalizeHeaderCells(container, columns) {\n            var lastIndex = 0;\n            var idx, len;\n            var th = container.find('th:not(.k-group-cell)');\n            for (idx = 0, len = columns.length; idx < len; idx++) {\n                if (columns[idx].locked) {\n                    th.eq(idx).insertBefore(th.eq(lastIndex));\n                    th = container.find('th:not(.k-group-cell)');\n                    lastIndex++;\n                }\n            }\n        }\n        function convertToObject(array) {\n            var result = {}, item, idx, length;\n            for (idx = 0, length = array.length; idx < length; idx++) {\n                item = array[idx];\n                result[item.value] = item.text;\n            }\n            return result;\n        }\n        function formatGroupValue(value, format, columnValues, encoded) {\n            var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && 'value' in columnValues[0], groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n            groupValue = groupValue != null ? groupValue : '';\n            return format ? kendo.format(format, groupValue) : encoded === false ? groupValue : kendo.htmlEncode(groupValue);\n        }\n        function setCellVisibility(cells, index, visible) {\n            var pad = 0, state, cell = cells[pad];\n            while (cell) {\n                state = visible ? true : cell.style.display !== 'none';\n                if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                    cell.style.display = visible ? '' : 'none';\n                    break;\n                }\n                cell = cells[++pad];\n            }\n        }\n        function hideColumnCells(rows, columnIndex) {\n            var idx = 0, length = rows.length, cell, row;\n            for (; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is('.k-grouping-row,.k-detail-row')) {\n                    cell = row.children(':not(.k-group-cell):first,.k-detail-cell').last();\n                    cell.attr('colspan', parseInt(cell.attr('colspan'), 10) - 1);\n                } else {\n                    if (row.hasClass('k-grid-edit-row') && (cell = row.children('.k-edit-container')[0])) {\n                        cell = $(cell);\n                        cell.attr('colspan', parseInt(cell.attr('colspan'), 10) - 1);\n                        cell.find('col').eq(columnIndex).remove();\n                        row = cell.find('tr').first();\n                    }\n                    setCellVisibility(row[0].cells, columnIndex, false);\n                }\n            }\n        }\n        function groupRows(data) {\n            var result = [];\n            var item;\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!('field' in item && 'value' in item && 'items' in item)) {\n                    break;\n                }\n                result.push(item);\n                if (item.hasSubgroups) {\n                    result = result.concat(groupRows(item.items));\n                }\n            }\n            return result;\n        }\n        function groupFooters(data) {\n            var result = [];\n            var item;\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!('field' in item && 'value' in item && 'items' in item)) {\n                    break;\n                }\n                if (item.hasSubgroups) {\n                    result = result.concat(groupFooters(item.items));\n                }\n                result.push(item.aggregates);\n            }\n            return result;\n        }\n        function showColumnCells(rows, columnIndex) {\n            var idx = 0, length = rows.length, cell, row, columns;\n            for (; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is('.k-grouping-row,.k-detail-row')) {\n                    cell = row.children(':not(.k-group-cell):first,.k-detail-cell').last();\n                    cell.attr('colspan', parseInt(cell.attr('colspan'), 10) + 1);\n                } else {\n                    if (row.hasClass('k-grid-edit-row') && (cell = row.children('.k-edit-container')[0])) {\n                        cell = $(cell);\n                        cell.attr('colspan', parseInt(cell.attr('colspan'), 10) + 1);\n                        normalizeCols(cell.find('>form>table'), visibleColumns(columns), false, 0);\n                        row = cell.find('tr').first();\n                    }\n                    setCellVisibility(row[0].cells, columnIndex, true);\n                }\n            }\n        }\n        function updateColspan(toAdd, toRemove, num) {\n            num = num || 1;\n            var item, idx, length;\n            for (idx = 0, length = toAdd.length; idx < length; idx++) {\n                item = toAdd.eq(idx).children().last();\n                item.attr('colspan', parseInt(item.attr('colspan'), 10) + num);\n                item = toRemove.eq(idx).children().last();\n                item.attr('colspan', parseInt(item.attr('colspan'), 10) - num);\n            }\n        }\n        function tableWidth(table) {\n            var idx, length, width = 0;\n            var cols = table.find('>colgroup>col');\n            for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                width += parseInt(cols[idx].style.width, 10);\n            }\n            return width;\n        }\n        var Grid = kendo.ui.DataBoundWidget.extend({\n            init: function (element, options, events) {\n                var that = this;\n                options = isArray(options) ? { dataSource: options } : options;\n                Widget.fn.init.call(that, element, options);\n                if (events) {\n                    that._events = events;\n                }\n                isRtl = kendo.support.isRtl(element);\n                that._element();\n                that._aria();\n                that._columns($.extend(true, [], that.options.columns));\n                if (that._foreignKeyPromises) {\n                    $.when.apply(null, that._foreignKeyPromises).then(function () {\n                        that._foreignKeyPromises = null;\n                        that._continueInit();\n                    });\n                } else {\n                    that._continueInit();\n                }\n            },\n            _continueInit: function () {\n                var that = this;\n                that._dataSource();\n                that._stickyColumns();\n                that._tbody();\n                that._thead();\n                that._groupable();\n                that._toolbar();\n                that._pageable();\n                that._setContentHeight();\n                that._templates();\n                that._navigatable();\n                that._selectable();\n                that._clipboard();\n                that._details();\n                that._editable();\n                that._attachCustomCommandsEvent();\n                that._adaptiveColumns();\n                that._minScreenSupport();\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._group = that._groups() > 0;\n                    that._footer();\n                }\n                if (that.lockedContent) {\n                    that.wrapper.addClass('k-grid-lockedcolumns');\n                    that._resizeHandler = function () {\n                        that.resize();\n                    };\n                    $(window).on('resize' + NS, that._resizeHandler);\n                }\n                kendo.notify(that);\n            },\n            events: [\n                CHANGE,\n                'dataBinding',\n                'cancel',\n                DATABOUND,\n                DETAILEXPAND,\n                DETAILCOLLAPSE,\n                DETAILINIT,\n                FILTERMENUINIT,\n                FILTERMENUOPEN,\n                COLUMNMENUINIT,\n                COLUMNMENUOPEN,\n                EDIT,\n                BEFOREEDIT,\n                SAVE,\n                REMOVE,\n                SAVECHANGES,\n                CELLCLOSE,\n                COLUMNRESIZE,\n                COLUMNREORDER,\n                COLUMNSHOW,\n                COLUMNHIDE,\n                COLUMNLOCK,\n                COLUMNUNLOCK,\n                COLUMNSTICK,\n                COLUMNUNSTICK,\n                ROWREORDER,\n                NAVIGATE,\n                'page',\n                'sort',\n                'filter',\n                'group',\n                'groupExpand',\n                'groupCollapse',\n                'kendoKeydown'\n            ],\n            setDataSource: function (dataSource) {\n                var that = this;\n                var scrollable = that.options.scrollable;\n                var scrollableContent;\n                that.options.dataSource = dataSource;\n                that._dataSource();\n                that._pageable();\n                that._thead();\n                if (scrollable) {\n                    if (scrollable.virtual) {\n                        scrollableContent = that.content.find('>.k-virtual-scrollable-wrap');\n                        kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                    } else {\n                        scrollableContent = that.tbody;\n                        kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                    }\n                }\n                if (that.options.groupable) {\n                    that._groupable();\n                }\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.setDataSource(that.options.dataSource);\n                }\n                if (that.options.navigatable) {\n                    that._navigatable();\n                }\n                if (that.options.selectable) {\n                    that._selectable();\n                }\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._footer();\n                }\n            },\n            options: {\n                name: 'Grid',\n                columns: [],\n                toolbar: null,\n                autoBind: true,\n                filterable: false,\n                scrollable: true,\n                sortable: false,\n                selectable: false,\n                allowCopy: false,\n                navigatable: false,\n                pageable: false,\n                persistSelection: false,\n                editable: false,\n                encodeTitles: false,\n                groupable: false,\n                rowTemplate: '',\n                altRowTemplate: '',\n                search: false,\n                noRecords: false,\n                dataSource: {},\n                height: null,\n                resizable: false,\n                reorderable: false,\n                columnMenu: false,\n                detailTemplate: null,\n                columnResizeHandleWidth: 3,\n                mobile: '',\n                loaderType: 'loadingPanel',\n                messages: {\n                    editable: {\n                        cancelDelete: CANCELDELETE,\n                        confirmation: DELETECONFIRM,\n                        confirmDelete: CONFIRMDELETE\n                    },\n                    commands: {\n                        create: defaultCommands.create.text,\n                        cancel: defaultCommands.cancel.text,\n                        save: defaultCommands.save.text,\n                        destroy: defaultCommands.destroy.text,\n                        edit: defaultCommands.edit.text,\n                        update: defaultCommands.update.text,\n                        canceledit: defaultCommands.canceledit.text,\n                        excel: defaultCommands.excel.text,\n                        pdf: defaultCommands.pdf.text,\n                        search: defaultCommands.search.text\n                    },\n                    noRecords: NORECORDS,\n                    expandCollapseColumnHeader: '',\n                    groupHeader: 'Press ctrl + space to group',\n                    ungroupHeader: 'Press ctrl + space to ungroup',\n                    itemsSelected: 'items selected',\n                    dragHandleLabel: 'Drag row'\n                },\n                width: null\n            },\n            destroy: function () {\n                var that = this, element;\n                that._angularItems('cleanup');\n                that._destroyColumnAttachments();\n                Widget.fn.destroy.call(that);\n                if (this._navigatableTables) {\n                    this._navigatableTables.off(NS);\n                    this._navigatableTables = null;\n                    this._headertables = null;\n                }\n                if (that._resizeHandler) {\n                    $(window).off('resize' + NS, that._resizeHandler);\n                }\n                if (that.pager && that.pager.element) {\n                    that.pager.destroy();\n                }\n                if (that.timer) {\n                    clearTimeout(that.timer);\n                }\n                if (that._progressTimeOut) {\n                    clearTimeout(that._progressTimeOut);\n                }\n                if (that._collapseGroupsTimeOut) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                }\n                if (that._endlessFetchTimeOut) {\n                    clearTimeout(that._endlessFetchTimeOut);\n                }\n                that.pager = null;\n                that._destroyGroupable();\n                if (that.options.reorderable === true || that.options.reorderable && that.options.reorderable.columns) {\n                    that.wrapper.data('kendoReorderable').destroy();\n                }\n                if (that._hasReorderableRows()) {\n                    that.tbody.data('kendoReorderable').destroy();\n                }\n                if (that.selectable && that.selectable.element) {\n                    that.selectable.destroy();\n                    that.clearArea();\n                    that._selectedIds = null;\n                    if (that.copyHandler) {\n                        that.wrapper.off('keydown', that.copyHandler);\n                        that.unbind(that.copyHandler);\n                    }\n                    if (that.updateClipBoardState) {\n                        that.unbind(that.updateClipBoardState);\n                        that.updateClipBoardState = null;\n                    }\n                    if (that.clearAreaHandler) {\n                        that.wrapper.off('keyup', that.clearAreaHandler);\n                    }\n                }\n                that.selectable = null;\n                if (that.resizable) {\n                    that.resizable.destroy();\n                    if (that._resizeUserEvents) {\n                        if (that._resizeHandleDocumentClickHandler) {\n                            $(document).off('click', that._resizeHandleDocumentClickHandler);\n                        }\n                        that._resizeUserEvents.destroy();\n                        that._resizeUserEvents = null;\n                    }\n                    that.resizable = null;\n                }\n                that._destroyVirtualScrollable();\n                if (that.editableUserEvents) {\n                    that.editableUserEvents.destroy();\n                    that.editableUserEvents = null;\n                }\n                if (that._lockedContentUserEvents) {\n                    that._lockedContentUserEvents.destroy();\n                    that._lockedContentUserEvents = null;\n                }\n                that._destroyEditable();\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler).unbind(SORT, that._clearSortClasses);\n                    that._refreshHandler = that._progressHandler = that._errorHandler = that._clearSortClasses = null;\n                }\n                element = that.element.add(that.wrapper).add(that.table).add(that.thead).add(that.wrapper.find('>.k-grid-toolbar'));\n                if (that.content) {\n                    element = element.add(that.content).add(that.content.find('>.k-virtual-scrollable-wrap'));\n                }\n                if (that.lockedHeader) {\n                    that._removeLockedContainers();\n                }\n                if (that.pane) {\n                    that.pane.destroy();\n                }\n                if (that._isMobile) {\n                    that.wrapper.off('transitionend' + NS);\n                    that.wrapper.off('contextmenu' + NS);\n                }\n                if (that.minScreenResizeHandler) {\n                    $(window).off('resize', that.minScreenResizeHandler);\n                }\n                that._detachColumnMediaResizeHandler();\n                if (that._draggableInstance && that._draggableInstance.element) {\n                    that._draggableInstance.destroy();\n                }\n                that._draggableInstance = null;\n                if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                    that._draggableRowsInstance.destroy();\n                }\n                that._draggableRowsInstance = null;\n                element.off(NS);\n                kendo.destroy(that.wrapper);\n                that.rowTemplate = that.altRowTemplate = that.lockedRowTemplate = that.lockedAltRowTemplate = that.detailTemplate = that.footerTemplate = that.groupFooterTemplate = that.lockedGroupFooterTemplate = that.noRecordsTemplate = null;\n                that.scrollables = that.thead = that.tbody = that.element = that.table = that.content = that.footer = that.wrapper = that.lockedTable = that.lockedContent = that.lockedHeader = that.lockedFooter = that._groupableClickHandler = that._groupRows = that._setContentWidthHandler = null;\n            },\n            getOptions: function () {\n                var options = this.options;\n                options.dataSource = null;\n                var result = extend(true, {}, this.options);\n                result.columns = kendo.deepExtend([], this.columns);\n                var dataSource = this.dataSource;\n                var initialData = dataSource.options.data && dataSource._data;\n                dataSource.options.data = null;\n                result.dataSource = $.extend(true, {}, dataSource.options);\n                dataSource.options.data = initialData;\n                result.dataSource.data = initialData;\n                result.dataSource.page = dataSource.page();\n                result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n                result.dataSource.pageSize = dataSource.pageSize();\n                result.dataSource.sort = dataSource.sort();\n                result.dataSource.group = dataSource.group();\n                result.dataSource.aggregate = dataSource.aggregate();\n                if (result.dataSource.transport) {\n                    result.dataSource.transport.dataSource = null;\n                }\n                if (result.pageable && result.pageable.pageSize) {\n                    result.pageable.pageSize = dataSource.pageSize();\n                }\n                result.$angular = undefined;\n                return result;\n            },\n            setOptions: function (options) {\n                var currentOptions = this.getOptions();\n                kendo.deepExtend(currentOptions, options);\n                if (!options.dataSource) {\n                    currentOptions.dataSource = this.dataSource;\n                } else {\n                    if (options.dataSource.filter) {\n                        currentOptions.dataSource.filter = options.dataSource.filter;\n                    }\n                }\n                var wrapper = this.wrapper;\n                var events = this._events;\n                var element = this.element;\n                this.destroy();\n                this.options = null;\n                if (this._isMobile) {\n                    var mobileWrapper = wrapper.closest(kendo.roleSelector('pane')).parent();\n                    mobileWrapper.after(wrapper);\n                    mobileWrapper.remove();\n                    wrapper.removeClass('k-grid-mobile');\n                }\n                if (wrapper[0] !== element[0]) {\n                    wrapper.before(element);\n                    wrapper.remove();\n                }\n                element.empty();\n                this.init(element, currentOptions, events);\n                this._setEvents(currentOptions);\n            },\n            items: function () {\n                if (this.lockedContent) {\n                    return this._items(this.tbody).add(this._items(this.lockedTable.children('tbody')));\n                } else {\n                    return this._items(this.tbody);\n                }\n            },\n            _items: function (container, includeGroupRows) {\n                return container.children().filter(function () {\n                    var tr = $(this);\n                    return (includeGroupRows ? !tr.hasClass('k-detail-row') : !tr.hasClass('k-grouping-row')) && !tr.hasClass('k-detail-row') && !tr.hasClass('k-group-footer');\n                });\n            },\n            dataItems: function () {\n                var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n                if (this.lockedContent) {\n                    var n = dataItems.length, tmp = new Array(2 * n);\n                    for (var i = n; --i >= 0;) {\n                        tmp[i] = tmp[i + n] = dataItems[i];\n                    }\n                    dataItems = tmp;\n                }\n                return dataItems;\n            },\n            _destroyColumnAttachments: function () {\n                var that = this;\n                that.resizeHandle = null;\n                if (!that.thead) {\n                    return;\n                }\n                this.angular('cleanup', function () {\n                    return { elements: that.thead.get() };\n                });\n                that.thead.add(that.lockedHeader).find('th').each(function () {\n                    var th = $(this), filterMenu = th.data('kendoFilterMenu'), sortable = th.data('kendoColumnSorter'), columnMenu = th.data('kendoColumnMenu');\n                    if (filterMenu) {\n                        filterMenu.destroy();\n                    }\n                    if (sortable) {\n                        sortable.destroy();\n                    }\n                    if (columnMenu) {\n                        columnMenu.destroy();\n                    }\n                });\n            },\n            _attachCustomCommandsEvent: function () {\n                var that = this, columns = leafColumns(that.columns || []), command, idx, length;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    command = columns[idx].command;\n                    if (command) {\n                        attachCustomCommandEvent(that, that.wrapper, command);\n                    }\n                }\n            },\n            _aria: function () {\n                var id = this.element.attr('id') || 'aria';\n                if (id) {\n                    this._cellId = id + '_active_cell';\n                }\n            },\n            _element: function () {\n                var that = this, table = that.element;\n                if (!table.is('table')) {\n                    if (that.options.scrollable) {\n                        table = that.element.find('> .k-grid-content > table');\n                    } else {\n                        table = that.element.children('table');\n                    }\n                    if (!table.length) {\n                        table = $('<table />').appendTo(that.element);\n                    }\n                }\n                that.table = table.attr('role', that._hasDetails() ? 'treegrid' : 'grid');\n                that._wrapper();\n            },\n            _createResizeHandle: function (container, th) {\n                var that = this;\n                var indicatorWidth = that.options.columnResizeHandleWidth;\n                var scrollable = that.options.scrollable;\n                var resizeHandle = that.resizeHandle;\n                var halfResizeHandle = indicatorWidth * 3 / 2;\n                var rtlCorrection = 0;\n                var headerWrap;\n                var ieCorrection;\n                var webkitCorrection;\n                var firefoxCorrection;\n                var leftMargin;\n                var invisibleSpace;\n                var leftBorderWidth;\n                var scrollLeft;\n                var left;\n                var top;\n                if (resizeHandle && that.lockedContent && resizeHandle.data('th')[0] !== th[0]) {\n                    resizeHandle.off(NS).remove();\n                    resizeHandle = null;\n                }\n                if (!resizeHandle) {\n                    resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                    container.append(resizeHandle);\n                }\n                scrollLeft = kendo.scrollLeft(container);\n                if (isRtl && (browser.mozilla || browser.webkit && browser.version >= 85)) {\n                    scrollLeft = scrollLeft * -1;\n                }\n                leftBorderWidth = parseFloat(container.css('borderLeftWidth'));\n                left = th.offset().left + scrollLeft - parseFloat(th.css('marginLeft')) - (container.offset().left + leftBorderWidth);\n                if (!isRtl) {\n                    left += th[0].offsetWidth;\n                } else {\n                    if (scrollable) {\n                        rtlCorrection = left <= scrollLeft ? halfResizeHandle : 0;\n                        headerWrap = th.closest('.k-grid-header-wrap, .k-grid-header-locked');\n                        invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth;\n                        leftMargin = parseFloat(headerWrap.css('marginLeft'));\n                        ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                        webkitCorrection = -rtlCorrection;\n                        firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n                        left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                    }\n                }\n                top = th.offset().top - parseFloat(th.css('marginTop')) - (container.offset().top + parseFloat(container.css('borderTopWidth')));\n                resizeHandle.css({\n                    top: top,\n                    left: left - halfResizeHandle,\n                    height: outerHeight(th),\n                    width: indicatorWidth * 3 - rtlCorrection\n                }).data('th', th).show();\n                resizeHandle.off('dblclick' + NS).on('dblclick' + NS, function () {\n                    that._autoFitLeafColumn(parseInt(th.attr(kendo.attr('index')), 10));\n                });\n            },\n            _positionColumnResizeHandle: function () {\n                var that = this, lockedHead = that.lockedHeader ? that.lockedHeader.find('thead').first() : $();\n                that.thead.add(lockedHead).on('mousemove' + NS, 'tr:not(.k-filter-row) > th', function (e) {\n                    var button = typeof e.buttons !== 'undefined' ? e.buttons : e.which || e.button;\n                    var th = $(this);\n                    if (th.hasClass('k-group-cell') || th.hasClass('k-hierarchy-cell')) {\n                        return;\n                    }\n                    if (typeof button !== 'undefined' && button !== 0) {\n                        return;\n                    }\n                    if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                        return;\n                    }\n                    that._createResizeHandle(th.closest('div'), th);\n                });\n            },\n            _resizeHandleDocumentClick: function (e) {\n                if ($(e.target).closest('.k-column-active').length) {\n                    return;\n                }\n                $(document).off(e);\n                this._resetResizeHandleHeader();\n                this._hideResizeHandle();\n            },\n            _resetResizeHandleHeader: function () {\n                var th;\n                if (!this.resizeHandle) {\n                    return;\n                }\n                th = $(this.resizeHandle).data('th');\n                if (th) {\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS).show();\n                    th.find(DOT + ORDER_CLASS).show();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                    th.find(DOT + FILTER_MENU_CLASS).show();\n                }\n            },\n            _hideResizeHandle: function () {\n                if (this.resizeHandle) {\n                    this.resizeHandle.data('th').removeClass('k-column-active');\n                    if (this.lockedContent && !this._isMobile) {\n                        this.resizeHandle.off(NS).remove();\n                        this.resizeHandle = null;\n                    } else {\n                        this.resizeHandle.hide();\n                    }\n                }\n            },\n            _positionColumnResizeHandleTouch: function () {\n                var that = this, lockedHead = that.lockedHeader ? that.lockedHeader.find('thead').first() : $();\n                that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                    filter: 'th:not(.k-group-cell):not(.k-hierarchy-cell)',\n                    threshold: 10,\n                    minHold: 500,\n                    hold: function (e) {\n                        var th = $(e.target);\n                        e.preventDefault();\n                        if (that.resizeHandle) {\n                            that.resizeHandle.data('th').removeClass('k-column-active');\n                            that._resetResizeHandleHeader();\n                        }\n                        th.addClass('k-column-active');\n                        th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS).hide();\n                        th.find(DOT + ORDER_CLASS).hide();\n                        th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                        th.find(DOT + FILTER_MENU_CLASS).hide();\n                        that._createResizeHandle(th.closest('div'), th);\n                        if (!that._resizeHandleDocumentClickHandler) {\n                            that._resizeHandleDocumentClickHandler = proxy(that._resizeHandleDocumentClick, that);\n                        }\n                        $(document).on('click', that._resizeHandleDocumentClickHandler);\n                    }\n                });\n            },\n            resizeColumn: function (column, columnWidth) {\n                var that = this;\n                var isLocked = !!column.locked;\n                var isHidden = !!column.hidden;\n                var options = this.options;\n                var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n                var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n                var contentTable = isLocked ? that.lockedTable : that.table;\n                var footer = that.footer || $();\n                var header = isLocked ? that.lockedHeader.find('table') : that.thead.closest('table');\n                var columnMinWidth = column.minResizableWidth || 10;\n                var gridWidth = isLocked ? outerWidth(contentTable.find('tbody')) : outerWidth(that.tbody);\n                var col;\n                if (isHidden) {\n                    column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                    return;\n                }\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children('.k-grid-footer-locked') : that.footer.children('.k-grid-footer-wrap');\n                }\n                if (options.scrollable) {\n                    col = header.find('col:not(.k-group-col,.k-hierarchy-col)').eq(index).add(contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col)').eq(index)).add(footer.find('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col)').eq(index));\n                } else {\n                    col = contentTable.find('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col)').eq(index);\n                }\n                if (options.scrollable) {\n                    var constrain = false;\n                    var totalWidth = that.wrapper.width() - scrollbar;\n                    var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                    if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                        width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                        if (width < 0) {\n                            width = columnWidth;\n                        }\n                        constrain = true;\n                    }\n                    if (width > 10 && width >= columnMinWidth) {\n                        col.css('width', width);\n                        if (gridWidth) {\n                            if (constrain) {\n                                width = totalWidth - scrollbar * 2;\n                            } else {\n                                width = gridWidth + (columnWidth - column.width);\n                            }\n                            contentTable.add(header).add(footer).css('width', width);\n                            if (!isLocked) {\n                                that._footerWidth = width;\n                            }\n                        }\n                    }\n                    that._scrollVirtualWrapperOnColumnResize();\n                } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                    col.css('width', columnWidth);\n                }\n                column.width = columnWidth;\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._updateStickyColumns();\n            },\n            _resizable: function () {\n                var that = this, options = that.options, container, columnStart, columnWidth, columnMinWidth, gridWidth, isMobile = this._isMobile, scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0, isLocked, col, th;\n                if (options.resizable) {\n                    container = options.scrollable ? that.wrapper.find('.k-grid-header-wrap').first() : that.wrapper;\n                    if (isMobile) {\n                        that._positionColumnResizeHandleTouch(container);\n                    } else {\n                        that._positionColumnResizeHandle(container);\n                    }\n                    if (that.resizable) {\n                        that.resizable.destroy();\n                    }\n                    that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                        handle: (!!options.scrollable ? '' : '>') + '.k-resize-handle',\n                        hint: function (handle) {\n                            return $('<div class=\"k-grid-resize-indicator\" />').css({ height: outerHeight(handle.data('th')) + that.tbody.attr('clientHeight') });\n                        },\n                        start: function (e) {\n                            th = $(e.currentTarget).data('th');\n                            if (isMobile) {\n                                that._hideResizeHandle();\n                            }\n                            var header = th.closest('table'), index = $.inArray(th[0], leafDataCells(th.closest('thead')).filter(':visible'));\n                            isLocked = header.parent().hasClass('k-grid-header-locked');\n                            var contentTable = isLocked ? that.lockedTable : that.table, footer = that.footer || $();\n                            if (that.footer && that.lockedContent) {\n                                footer = isLocked ? that.footer.children('.k-grid-footer-locked') : that.footer.children('.k-grid-footer-wrap');\n                            }\n                            cursor(that.wrapper, 'col-resize');\n                            if (options.scrollable) {\n                                col = header.find('col:not(.k-group-col):not(.k-hierarchy-col)').eq(index).add(contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col)').eq(index)).add(footer.find('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col)').eq(index));\n                            } else {\n                                col = contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col)').eq(index);\n                            }\n                            var columns = $.map(that.columns, function (a) {\n                                return !a.hidden && (isLocked && a.locked || !isLocked && !a.locked) ? a : null;\n                            });\n                            columnStart = e.x.location;\n                            columnWidth = outerWidth(th);\n                            columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                            gridWidth = isLocked ? outerWidth(contentTable.children('tbody')) : outerWidth(that.tbody);\n                            if (browser.webkit) {\n                                that.wrapper.addClass('k-grid-column-resizing');\n                            }\n                        },\n                        resize: function (e) {\n                            var rtlMultiplier = isRtl ? -1 : 1, currentWidth = columnWidth + e.x.location * rtlMultiplier - columnStart * rtlMultiplier;\n                            if (options.scrollable) {\n                                var footer;\n                                if (isLocked && that.lockedFooter) {\n                                    footer = that.lockedFooter.children('table');\n                                } else if (that.footer) {\n                                    footer = that.footer.find('>.k-grid-footer-wrap>table');\n                                }\n                                if (!footer || !footer[0]) {\n                                    footer = $();\n                                }\n                                var header = th.closest('table');\n                                var contentTable = isLocked ? that.lockedTable : that.table;\n                                var constrain = false;\n                                var totalWidth = that.wrapper.width() - scrollbar;\n                                var width = currentWidth;\n                                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                    if (width < 0) {\n                                        width = currentWidth;\n                                    }\n                                    constrain = true;\n                                }\n                                if (width > 10 && width >= columnMinWidth) {\n                                    col.css('width', width);\n                                    if (gridWidth) {\n                                        if (constrain) {\n                                            width = totalWidth - scrollbar * 2;\n                                        } else {\n                                            width = gridWidth + e.x.location * rtlMultiplier - columnStart * rtlMultiplier;\n                                        }\n                                        contentTable.add(header).add(footer).css('width', width);\n                                        if (!isLocked) {\n                                            that._footerWidth = width;\n                                        }\n                                    }\n                                }\n                                that._scrollVirtualWrapperOnColumnResize();\n                            } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                                col.css('width', currentWidth);\n                            }\n                        },\n                        resizeend: function () {\n                            var newWidth = outerWidth(th), column, header;\n                            cursor(that.wrapper, '');\n                            if (browser.webkit) {\n                                that.wrapper.removeClass('k-grid-column-resizing');\n                            }\n                            if (columnWidth != newWidth) {\n                                header = that.lockedHeader ? that.lockedHeader.find('thead').first().find('tr').first().add(that.thead.find('tr').first()) : th.parent();\n                                var index = th.attr(kendo.attr('index'));\n                                if (!index) {\n                                    index = header.find('th:not(.k-group-cell):not(.k-hierarchy-cell)').index(th);\n                                }\n                                column = leafColumns(that.columns)[index];\n                                column.width = newWidth;\n                                that.trigger(COLUMNRESIZE, {\n                                    column: column,\n                                    oldWidth: columnWidth,\n                                    newWidth: newWidth\n                                });\n                                that._applyLockedContainersWidth();\n                                that._syncLockedContentHeight();\n                                that._syncLockedHeaderHeight();\n                                that._updateStickyColumns();\n                            }\n                            that._resetResizeHandleHeader();\n                            that._hideResizeHandle();\n                            th = null;\n                        }\n                    });\n                }\n            },\n            _draggable: function () {\n                var that = this, reorderable = that.options.reorderable;\n                if (reorderable === true || reorderable && reorderable.columns) {\n                    if (that._draggableInstance) {\n                        that._draggableInstance.destroy();\n                    }\n                    var header = that.wrapper.children('.k-grid-header');\n                    that._draggableInstance = that.wrapper.kendoDraggable({\n                        group: kendo.guid(),\n                        autoScroll: true,\n                        filter: that.content ? '.k-grid-header:first ' + HEADERCELLS : 'table:first>.k-grid-header ' + HEADERCELLS,\n                        dragstart: function () {\n                            header.children('.k-grid-header-wrap').off('scroll' + NS + 'scrolling').on('scroll' + NS + 'scrolling', function (e) {\n                                if (that.virtualScrollable) {\n                                    kendo.scrollLeft(that.content.find('>.k-virtual-scrollable-wrap'), this.scrollLeft);\n                                } else {\n                                    kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                                }\n                            });\n                        },\n                        dragend: function () {\n                            that._resetResizeHandleHeader();\n                            header.children('.k-grid-header-wrap').off('scroll' + NS + 'scrolling');\n                        },\n                        drag: function () {\n                            that._hideResizeHandle();\n                        },\n                        hint: function (target) {\n                            var title = target.attr(kendo.attr('title'));\n                            if (title) {\n                                title = kendo.htmlEncode(title);\n                            }\n                            return $('<div class=\"k-reorder-clue k-drag-clue\" />').html(title || target.attr(kendo.attr('field')) || target.text()).prepend('<span class=\"k-icon k-drag-status k-i-cancel\"></span>');\n                        }\n                    }).data('kendoDraggable');\n                }\n            },\n            _reorderable: function () {\n                var that = this, reorderable = that.options.reorderable;\n                if (reorderable === true || reorderable && reorderable.columns) {\n                    if (that.wrapper.data('kendoReorderable')) {\n                        that.wrapper.data('kendoReorderable').destroy();\n                    }\n                    that.wrapper.kendoReorderable({\n                        draggable: that._draggableInstance,\n                        dropFilter: HEADERCELLS,\n                        dragOverContainers: function (sourceIndex, targetIndex) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                        },\n                        inSameContainer: function (e) {\n                            return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                        },\n                        change: function (e) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            var column = columns[e.oldIndex];\n                            var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n                            that.trigger(COLUMNREORDER, {\n                                newIndex: newIndex,\n                                oldIndex: inArray(column, columns),\n                                column: column\n                            });\n                            that.reorderColumn(newIndex, column, e.position === 'before');\n                        }\n                    });\n                }\n            },\n            _reorderHeader: function (sources, target, before, container) {\n                var that = this;\n                var sourcePosition = columnPosition(sources[0], that.columns);\n                var destPosition = columnPosition(target, that.columns);\n                var action;\n                var ths;\n                var leafs = [];\n                for (var idx = 0; idx < sources.length; idx++) {\n                    if (sources[idx].columns) {\n                        leafs = leafs.concat(sources[idx].columns);\n                    }\n                }\n                if (container) {\n                    ths = elements(container, container, 'tr:eq(' + sourcePosition.row + ')>th.k-header:not(.k-group-cell,.k-hierarchy-cell)');\n                } else {\n                    ths = elements(that.lockedHeader, that.thead, 'tr:eq(' + sourcePosition.row + ')>th.k-header:not(.k-group-cell,.k-hierarchy-cell)');\n                }\n                var sourceLockedColumns = lockedColumns(sources).length;\n                var targetLockedColumns = lockedColumns([target]).length;\n                if (leafs.length) {\n                    if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                        action = 'prepend';\n                        moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find('thead'), that.thead, this._groups(), action);\n                    } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                        action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? 'prepend' : 'append';\n                        moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find('thead'), this._groups(), action);\n                    }\n                    if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                        target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                        if (target) {\n                            if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                                that._reorderHeader(leafs, target, before, that.thead);\n                            } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                                that._reorderHeader(leafs, target, before, that.lockedHead);\n                            } else {\n                                that._reorderHeader(leafs, target, before);\n                            }\n                        }\n                    }\n                } else if (sourceLockedColumns !== targetLockedColumns) {\n                    updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n                }\n                reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n            },\n            _reorderContent: function (sources, destination, before) {\n                var that = this;\n                var lockedRows = $();\n                var source = sources[0];\n                var visibleSources = visibleColumns(sources);\n                var sourceIndex = inArray(source, leafColumns(that.columns));\n                var destIndex = inArray(destination, leafColumns(that.columns));\n                var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n                var colDest = inArray(destination, visibleLeafColumns(that.columns));\n                var lockedCount = lockedColumns(that.columns).length;\n                var isLocked = !!destination.locked;\n                var footer = that.footer || that.wrapper.find('.k-grid-footer');\n                var headerCol, footerCol, beforeVisibleColumn;\n                headerCol = footerCol = colDest;\n                if (destination.hidden) {\n                    var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n                    if (visibleColumns(columnsArray).length > 0) {\n                        headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                        beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                    } else {\n                        if (isLocked) {\n                            colDest = that.lockedTable.find('colgroup');\n                            headerCol = that.lockedHeader.find('colgroup');\n                            footerCol = $(that.lockedFooter).find('>table>colgroup');\n                        } else {\n                            colDest = that.tbody.prev();\n                            headerCol = that.thead.prev();\n                            footerCol = footer.find('.k-grid-footer-wrap').find('>table>colgroup');\n                        }\n                    }\n                }\n                if (that._hasFilterRow()) {\n                    reorder(that.wrapper.find('.k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)'), sourceIndex, destIndex, before, sources.length);\n                }\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n                if (that.options.scrollable) {\n                    if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                        reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                }\n                if (footer && footer.length) {\n                    if (colSourceIndex >= 0) {\n                        reorder(elements(that.lockedFooter, footer.find('.k-grid-footer-wrap'), '>table>colgroup>col:not(.k-group-col,.k-hierarchy-col)'), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                    reorder(footer.find('.k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)'), sourceIndex, destIndex, before, sources.length);\n                }\n                var rows = that.tbody.children(':not(.k-grouping-row,.k-detail-row)');\n                if (that.lockedTable) {\n                    if (lockedCount > destIndex) {\n                        if (lockedCount <= sourceIndex) {\n                            updateColspan(that.lockedTable.find('>tbody>tr.k-grouping-row'), that.table.find('>tbody>tr.k-grouping-row'), sources.length);\n                        }\n                    } else if (lockedCount > sourceIndex) {\n                        updateColspan(that.table.find('>tbody>tr.k-grouping-row'), that.lockedTable.find('>tbody>tr.k-grouping-row'), sources.length);\n                    }\n                    lockedRows = that.lockedTable.find('>tbody>tr:not(.k-grouping-row,.k-detail-row)');\n                }\n                for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                    reorder(elements(lockedRows[idx], rows[idx], '>td:not(.k-group-cell,.k-hierarchy-cell)'), sourceIndex, destIndex, before, sources.length);\n                }\n            },\n            _findClosestVisibleColumnIndex: function (columns, columnIndex) {\n                var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(), closestVisibleColumn = visibleColumns(columnsArray)[0];\n                return inArray(closestVisibleColumn, visibleColumns(this.columns));\n            },\n            _autoFitLeafColumn: function (leafIndex) {\n                this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n            },\n            _hasReorderableRows: function () {\n                return this._hasDragHandleColumn || this.options.reorderable && this.options.reorderable.rows;\n            },\n            _draggableRows: function () {\n                var that = this, selectable = that._checkBoxSelection || that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell;\n                if (that._draggableRowsInstance) {\n                    that._draggableRowsInstance.destroy();\n                }\n                that._draggableRowsInstance = that.tbody.kendoDraggable({\n                    group: 'row-draggable',\n                    autoScroll: true,\n                    filter: (selectable ? ' > .k-state-selected' : ' > ' + ITEMROW) + (that._hasDragHandleColumn ? ' > .k-drag-cell' : ''),\n                    hint: function (target) {\n                        var hint = $('<div class=\"k-reorder-clue k-drag-clue\"><span class=\"k-icon k-drag-status k-i-cancel\"></span></div>');\n                        if (selectable && that.select().length > 1) {\n                            hint.append('<span>' + that.select().length + ' ' + that.options.messages.itemsSelected + '</span>');\n                        } else {\n                            var clone = target.closest(ITEMROW).clone();\n                            clone.find('td.k-command-cell').remove();\n                            clone.find('td').each(function (index, elm) {\n                                hint.append('<span>' + elm.innerText + '&nbsp;</span>');\n                            });\n                        }\n                        return hint;\n                    }\n                }).data('kendoDraggable');\n            },\n            _reorderableRows: function () {\n                var that = this, selectable = that._checkBoxSelection || that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell;\n                if (that.tbody.data('kendoReorderable')) {\n                    that.tbody.data('kendoReorderable').destroy();\n                }\n                that.tbody.kendoReorderable({\n                    smartPosition: false,\n                    draggable: that._draggableRowsInstance,\n                    dragOverContainers: function (sourceIndex, targetIndex) {\n                        var result = true, target = $(ITEMROW, that.content).eq(targetIndex);\n                        if (selectable) {\n                            result = !target.is('.k-state-selected');\n                        }\n                        return result;\n                    },\n                    inSameContainer: function (e) {\n                        if (selectable) {\n                            return !$(e.target).is('.k-state-selected');\n                        }\n                        return true;\n                    },\n                    dropFilter: ITEMROW,\n                    allowIcon: 'k-i-insert-middle',\n                    orientation: 'vertical',\n                    reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                    positionDropCue: function (reorderDropCue, dropTarget) {\n                        var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                        reorderDropCue.css({\n                            transform: 'translate(0,-50%)',\n                            left: firstCellLeft\n                        });\n                    },\n                    externalDraggable: function (e) {\n                        var draggable = e.draggable;\n                        if (draggable) {\n                            return draggable;\n                        }\n                    },\n                    change: function (e) {\n                        that._triggerRowRorder(e);\n                    }\n                });\n            },\n            _triggerRowRorder: function (e) {\n                var that = this, args = {\n                        newIndex: e.position === 'after' ? e.newIndex + 1 : e.newIndex,\n                        oldIndex: e.oldIndex\n                    }, row = e.element, selectable = that._checkBoxSelection || that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell;\n                if (selectable && that.select().length > 1) {\n                    args = extend(args, { rows: that.select() });\n                } else {\n                    args = extend(args, { row: row });\n                }\n                if (!that.trigger(ROWREORDER, args)) {\n                    that.reorderRows(selectable ? that.select() : row, args.newIndex);\n                }\n            },\n            reorderRows: function (rows, index) {\n                var that = this, dataSource = that.dataSource, rowsLength = that.tbody.children(ITEMROW).length, targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)), items = rows.toArray().map(function (row) {\n                        return that.dataItem(row);\n                    });\n                if (!targetItem) {\n                    targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                    index = dataSource.indexOf(targetItem) + 1;\n                } else {\n                    index = dataSource.indexOf(targetItem);\n                }\n                if (index >= 0) {\n                    that._rowDropping = true;\n                    dataSource.pushMove(index, items);\n                    that._rowDropping = false;\n                }\n            },\n            autoFitColumns: function (columns) {\n                var that = this;\n                columns = columns || that.columns;\n                for (var i = 0; i < columns.length; i++) {\n                    var column = columns[i];\n                    if (column.columns) {\n                        that.autoFitColumns(column.columns);\n                    } else {\n                        that.autoFitColumn(column);\n                    }\n                }\n            },\n            autoFitColumn: function (column) {\n                var that = this, options = that.options, columns = that.columns, index, th, headerTable, leafCols, isLocked, visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find('>table>thead')).filter(isCellVisible).length : 0, col, minWidth, contentDiv, scrollLeft, notGroupOrHierarchyCol = 'col:not(.k-group-col):not(.k-hierarchy-col)', notGroupOrHierarchyVisibleCell = 'td:visible:not(.k-group-cell):not(.k-hierarchy-cell)', menu, thWidth;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n                leafCols = leafColumns(columns);\n                minWidth = column.minResizableWidth;\n                index = inArray(column, leafCols);\n                isLocked = column.locked;\n                if (isLocked) {\n                    headerTable = that.lockedHeader.children('table');\n                } else {\n                    headerTable = that.thead.parent();\n                }\n                th = headerTable.find('[data-index=\\'' + index + '\\']');\n                menu = th.find('a.k-header-column-menu, a.k-grid-filter');\n                var contentTable = isLocked ? that.lockedTable : that.table, footer = that.footer || $();\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children('.k-grid-footer-locked') : that.footer.children('.k-grid-footer-wrap');\n                }\n                var footerTable = footer.find('table').first();\n                if (that.lockedHeader && !isLocked) {\n                    index -= visibleLocked;\n                }\n                for (var j = 0; j < leafCols.length; j++) {\n                    if (leafCols[j] === column) {\n                        break;\n                    } else {\n                        if (leafCols[j].hidden) {\n                            index--;\n                        }\n                    }\n                }\n                if (options.scrollable) {\n                    col = headerTable.find(notGroupOrHierarchyCol).eq(index).add(contentTable.children('colgroup').find(notGroupOrHierarchyCol).eq(index)).add(footerTable.find('colgroup').find(notGroupOrHierarchyCol).eq(index));\n                    if (!isLocked) {\n                        contentDiv = contentTable.parent();\n                        scrollLeft = kendo.scrollLeft(contentDiv);\n                    }\n                } else {\n                    col = contentTable.children('colgroup').find(notGroupOrHierarchyCol).eq(index);\n                }\n                var tables = headerTable.add(contentTable).add(footerTable);\n                if (browser.safari) {\n                    th.css('white-space', 'initial');\n                }\n                var oldColumnWidth = outerWidth(th);\n                col.width('');\n                tables.css('table-layout', 'fixed');\n                col.width('auto');\n                tables.addClass('k-autofitting');\n                tables.css('table-layout', '');\n                thWidth = menu.length ? outerWidth(menu) + outerWidth(th) : outerWidth(th);\n                var newColumnWidth = Math.ceil(Math.max(thWidth, outerWidth(contentTable.find('tr:not(.k-grouping-row)').eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)), outerWidth(footerTable.find('tr').eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)))) + 1;\n                if (minWidth && minWidth > newColumnWidth) {\n                    newColumnWidth = minWidth;\n                }\n                col.width(newColumnWidth);\n                column.width = newColumnWidth;\n                if (browser.safari) {\n                    th.css('white-space', '');\n                }\n                if (options.scrollable) {\n                    var cols = headerTable.find('col'), colWidth, totalWidth = 0;\n                    for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (colWidth && colWidth.indexOf('%') == -1) {\n                            totalWidth += parseInt(colWidth, 10);\n                        } else if (cols.eq(idx).hasClass('k-group-col')) {\n                            totalWidth += parseInt(cols.eq(idx).width(), 10);\n                        } else {\n                            totalWidth = 0;\n                            break;\n                        }\n                    }\n                    if (totalWidth) {\n                        tables.each(function () {\n                            this.style.width = totalWidth + 'px';\n                        });\n                    }\n                }\n                tables.removeClass('k-autofitting');\n                if (scrollLeft) {\n                    kendo.scrollLeft(contentDiv, scrollLeft);\n                }\n                that.trigger(COLUMNRESIZE, {\n                    column: column,\n                    oldWidth: oldColumnWidth,\n                    newWidth: newColumnWidth\n                });\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._updateStickyColumns();\n            },\n            reorderColumn: function (destIndex, column, before) {\n                var that = this, parent = columnParent(column, that.columns), columns = parent ? parent.columns : that.columns, sourceIndex = inArray(column, columns), destColumn = columns[destIndex], virtualScroll = that.virtualScroll || {}, lockChanged, isLocked = !!destColumn.locked, lockedCount = lockedColumns(that.columns).length, groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function (column) {\n                        return column.groupHeaderColumnTemplate;\n                    });\n                if (sourceIndex === destIndex) {\n                    return;\n                }\n                if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                    return;\n                }\n                if (column.locked && !isLocked && lockedCount == 1) {\n                    return;\n                }\n                that._hideResizeHandle();\n                if (before === undefined) {\n                    before = destIndex < sourceIndex;\n                }\n                var sourceColumns = [column];\n                that._reorderHeader(sourceColumns, destColumn, before);\n                if (that.lockedHeader) {\n                    removeEmptyRows(that.thead);\n                    removeEmptyRows(that.lockedHeader);\n                }\n                if (destColumn.columns) {\n                    destColumn = leafColumns(destColumn.columns);\n                    destColumn = destColumn[before ? 0 : destColumn.length - 1];\n                }\n                if (column.columns) {\n                    sourceColumns = leafColumns(column.columns);\n                }\n                that._reorderContent(sourceColumns, destColumn, before);\n                lockChanged = !!column.locked;\n                lockChanged = lockChanged != isLocked;\n                column.locked = isLocked;\n                columns.splice(before ? destIndex : destIndex + 1, 0, column);\n                columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n                that._updateLockedCols();\n                that._updateCols();\n                that._templates();\n                that._updateColumnCellIndex();\n                that._updateColumnSorters();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedHeaderHeight();\n                that._syncLockedContentHeight();\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n                if (virtualScroll.columns) {\n                    that.refresh();\n                }\n                if (!lockChanged) {\n                    return;\n                }\n                if (isLocked) {\n                    that.trigger(COLUMNLOCK, { column: column });\n                } else {\n                    that.trigger(COLUMNUNLOCK, { column: column });\n                }\n            },\n            _updateColumnCellIndex: function () {\n                var header;\n                var offset = 0;\n                if (this.lockedHeader) {\n                    header = this.lockedHeader.find('thead');\n                    offset = updateCellIndex(header, lockedColumns(this.columns));\n                }\n                updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n            },\n            lockColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || column.locked || column.hidden) {\n                    return;\n                }\n                if (column.sticky) {\n                    this.unstickColumn(columns.indexOf(column));\n                }\n                var index = lockedColumns(columns).length - 1;\n                this.reorderColumn(index, column, false);\n            },\n            unlockColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || !column.locked || column.hidden) {\n                    return;\n                }\n                var index = lockedColumns(columns).length;\n                this.reorderColumn(index, column, true);\n            },\n            stickColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || column.sticky || column.hidden) {\n                    return;\n                }\n                if (column.locked) {\n                    this.unlockColumn(columns.indexOf(column));\n                    if (column.locked) {\n                        return;\n                    }\n                }\n                column.sticky = true;\n                this._updateStickyColumns();\n            },\n            unstickColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || !column.sticky || column.locked || column.hidden) {\n                    return;\n                }\n                this._removeStickyAttributes([column]);\n                this._removeStickyStyles(stickyColumns(columns));\n                column.sticky = false;\n                this._updateStickyColumns();\n                if (this._anyStickyColumns() === 0) {\n                    this._templates();\n                    if (this._hasFilterRow()) {\n                        this._updateStickyFilterCells();\n                    }\n                }\n            },\n            cellIndex: function (td) {\n                var lockedColumnOffset = 0;\n                if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                    lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n                }\n                return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n            },\n            _modelForContainer: function (container) {\n                container = $(container);\n                if (!container.is('tr') && this._editMode() !== 'popup') {\n                    container = container.closest('tr');\n                }\n                var id = container.attr(kendo.attr('uid'));\n                return this.dataSource.getByUid(id);\n            },\n            _calculateColumnIndex: function (cell) {\n                var cellIndex = this.cellIndex(cell);\n                var virtualOffset = 0;\n                if (this._hasVirtualColumns()) {\n                    virtualOffset = parseInt($(cell).closest('tr').find('td').first().attr('colspan'), 10);\n                    virtualOffset = virtualOffset > 1 ? virtualOffset - 1 : 0;\n                }\n                return cellIndex + virtualOffset;\n            },\n            _editable: function () {\n                var that = this, editable = that.options.editable, handler = function () {\n                        var target = activeElement(), cell = that._editContainer;\n                        if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest('.k-animation-container').length) {\n                            if (that.editable.end()) {\n                                that.closeCell();\n                            } else {\n                                that._scrollVirtualWrapper();\n                            }\n                        }\n                    };\n                if (editable) {\n                    this.wrapper.addClass('k-editable');\n                    var mode = that._editMode();\n                    if (mode === 'incell') {\n                        that.table.add(that.lockedTable).on('mousedown' + NS, NAVROW + '>' + NAVCELL, function (e) {\n                            var target = $(e.target);\n                            if (that._editMode() === 'incell' && target.hasClass('k-checkbox') && target.prev().attr(kendo.attr('bind'))) {\n                                e.preventDefault();\n                            }\n                        });\n                        if (editable.update !== false) {\n                            if (isMac) {\n                                that.wrapper.on(CLICK + NS, '.k-edit-cell > input[type=\\'checkbox\\']', function (e) {\n                                    $(e.target).trigger('focus');\n                                }).on(CLICK + NS, '.k-edit-cell', function (e) {\n                                    if (!$(e.target).is('input')) {\n                                        $(e.currentTarget).find('input[type=\\'checkbox\\']').trigger('focus');\n                                    }\n                                }).on(MOUSEDOWN + NS, 'tr:not(.k-grouping-row) > td', function (e) {\n                                    var editContainer = that._editContainer;\n                                    if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                        that._mousedownOnEditCell = true;\n                                    } else {\n                                        that._mousedownOnEditCell = false;\n                                    }\n                                });\n                            }\n                            that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                                filter: 'tr:not(.k-grouping-row) > td',\n                                allowSelection: true,\n                                tap: function (e) {\n                                    var td = $(e.target), isLockedCell = that.lockedTable && td.closest('table')[0] === that.lockedTable[0];\n                                    that._mousedownOnEditCell = false;\n                                    if (td.hasClass('k-hierarchy-cell') || td.hasClass('k-detail-cell') || td.hasClass('k-group-cell') || td.hasClass('k-edit-cell') || td.has('.k-grid-delete').length || td.closest('tbody')[0] !== that.tbody[0] && !isLockedCell || $(e.target).is(':input')) {\n                                        return;\n                                    }\n                                    if (that.editable) {\n                                        if (that.editable.end()) {\n                                            $(activeElement()).trigger('blur');\n                                            that.closeCell();\n                                            that.editCell(td);\n                                        } else {\n                                            that._scrollVirtualWrapper();\n                                        }\n                                    } else {\n                                        that.editCell(td);\n                                    }\n                                }\n                            });\n                            that.wrapper.on('focusin' + NS, function () {\n                                if (!$.contains(this, activeElement())) {\n                                    clearTimeout(that.timer);\n                                    that.timer = null;\n                                }\n                            }).on('focusout' + NS, function (e) {\n                                var shouldCloseCell = true;\n                                if (isMac && that._mousedownOnEditCell || that._virtualColScroll) {\n                                    shouldCloseCell = false;\n                                }\n                                that._mousedownOnEditCell = false;\n                                if (shouldCloseCell) {\n                                    that.timer = setTimeout(function () {\n                                        handler(e);\n                                    }, 1);\n                                }\n                            });\n                        }\n                    } else {\n                        if (editable.update !== false) {\n                            that.wrapper.on(CLICK + NS, 'tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit', function (e) {\n                                var element = $(this);\n                                if (!that._belongsToGrid(element)) {\n                                    return;\n                                }\n                                e.preventDefault();\n                                that.editRow(element.closest('tr'));\n                            });\n                            if (that._isVirtualInlineEditable()) {\n                                that.wrapper.on('focusout' + NS, 'tr:not(.k-grouping-row) > td', function () {\n                                    if (that.editable && !that.editable.end()) {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                });\n                            }\n                        }\n                    }\n                    if (editable.destroy !== false) {\n                        that.wrapper.on(CLICK + NS, 'tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete', function (e) {\n                            var element = $(this);\n                            if (!that._belongsToGrid(element)) {\n                                return;\n                            }\n                            e.preventDefault();\n                            e.stopPropagation();\n                            that.removeRow(element.closest('tr'));\n                        });\n                    } else {\n                        that.wrapper.on(CLICK + NS, 'tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete', function (e) {\n                            if (!that._belongsToGrid($(this))) {\n                                return;\n                            }\n                            e.stopPropagation();\n                            if (!that._confirmation()) {\n                                e.preventDefault();\n                            }\n                        });\n                    }\n                }\n            },\n            editCell: function (cell) {\n                cell = $(cell);\n                var that = this, column = leafColumns(that.columns)[that._calculateColumnIndex(cell)], model = that._modelForContainer(cell);\n                that.closeCell();\n                if (model && isColumnEditable(column, model) && !column.command) {\n                    if (that.trigger(BEFOREEDIT, { model: model })) {\n                        return;\n                    }\n                    that._attachModelChange(model);\n                    that._editContainer = cell;\n                    if (that._shouldClearEditableState) {\n                        that._clearEditableState();\n                    }\n                    that.editable = cell.addClass('k-edit-cell').kendoEditable({\n                        fields: {\n                            field: column.field,\n                            format: column.format,\n                            editor: column.editor,\n                            values: column.values\n                        },\n                        model: model,\n                        target: that,\n                        change: function (e) {\n                            if (that.trigger(SAVE, {\n                                    values: e.values,\n                                    container: cell,\n                                    model: model\n                                })) {\n                                e.preventDefault();\n                            }\n                        },\n                        skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n                    }).data('kendoEditable');\n                    var tr = cell.parent().addClass('k-grid-edit-row');\n                    if (that.lockedContent) {\n                        adjustRowHeight(tr[0], that._relatedRow(tr).addClass('k-grid-edit-row')[0]);\n                        that._syncLockedScroll();\n                    }\n                    that.trigger(EDIT, {\n                        container: cell,\n                        model: model\n                    });\n                }\n            },\n            _adjustLockedHorizontalScrollBar: function () {\n                var table = this.table, content = table.parent();\n                var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n                this.lockedContent.height(content[0].offsetHeight - scrollbar);\n            },\n            _syncLockedScroll: function () {\n                this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n                if (this.virtualScrollable) {\n                    this.lockedContent[0].scrollTop = this.wrapper.find('.k-virtual-scrollable-wrap')[0].scrollTop;\n                }\n            },\n            _syncLockedContentHeight: function () {\n                if (this.lockedTable) {\n                    if (!this.touchScroller) {\n                        this._adjustLockedHorizontalScrollBar();\n                    }\n                    this._adjustRowsHeight(this.table, this.lockedTable);\n                }\n            },\n            _syncLockedHeaderHeight: function () {\n                if (this.lockedHeader) {\n                    var lockedTable = this.lockedHeader.children('table');\n                    var table = this.thead.parent();\n                    this._adjustRowsHeight(lockedTable, table);\n                    syncTableHeight(lockedTable, table);\n                }\n            },\n            _syncLockedFooterHeight: function () {\n                if (this.lockedFooter && this.footer && this.footer.length) {\n                    this._adjustRowsHeight(this.lockedFooter.children('table'), this.footer.find('.k-grid-footer-wrap > table'));\n                }\n            },\n            _destroyEditable: function () {\n                var that = this;\n                var destroy = function () {\n                    if (that.editable) {\n                        var container = that.editView ? that.editView.element : that._editContainer;\n                        if (container) {\n                            container.off(CLICK + NS, '.k-grid-cancel', that._editCancelClickHandler);\n                            container.off(CLICK + NS, '.k-grid-update', that._editUpdateClickHandler);\n                        }\n                        that._detachModelChange();\n                        that.editable.destroy();\n                        that.editable = null;\n                        that._editContainer = null;\n                        that._destroyEditView();\n                        that._editableIsClosing = null;\n                    }\n                };\n                if (that.editable) {\n                    if (that._editMode() === 'popup' && !that._isMobile) {\n                        if (that._editableIsClosing) {\n                            that._editContainer.data('kendoWindow').bind('deactivate', destroy);\n                        } else {\n                            that._editableIsClosing = true;\n                            that._editContainer.data('kendoWindow').bind('deactivate', destroy).close();\n                        }\n                    } else {\n                        destroy();\n                    }\n                }\n                if (that._confirmDialog) {\n                    that._confirmDialog.close();\n                    that._confirmDialog.destroy();\n                    that._confirmDialog = null;\n                }\n            },\n            _destroyEditView: function () {\n                if (this.editView) {\n                    this.editView.purge();\n                    this.editView = null;\n                    this.pane.navigate('');\n                }\n            },\n            _attachModelChange: function (model) {\n                var that = this;\n                that._modelChangeHandler = function (e) {\n                    that._modelChange({\n                        field: e.field,\n                        model: this\n                    });\n                };\n                model.bind('change', that._modelChangeHandler);\n            },\n            _detachModelChange: function () {\n                var that = this, container = that._editContainer, model = that._modelForContainer(container);\n                if (model) {\n                    model.unbind(CHANGE, that._modelChangeHandler);\n                }\n            },\n            closeCell: function (isCancel) {\n                var that = this, cell = that._editContainer, column, tr, model;\n                if (!cell) {\n                    return;\n                }\n                model = that._modelForContainer(cell);\n                if (isCancel && that.trigger('cancel', {\n                        container: cell,\n                        model: model\n                    })) {\n                    return;\n                }\n                that.trigger(CELLCLOSE, {\n                    type: isCancel ? 'cancel' : 'save',\n                    model: model,\n                    container: cell\n                });\n                cell.removeClass('k-edit-cell');\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n                tr = cell.parent().removeClass('k-grid-edit-row');\n                if (that.lockedContent) {\n                    that._relatedRow(tr).removeClass('k-grid-edit-row');\n                }\n                that._destroyEditable();\n                that._displayCell(cell, column, model);\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n                that.trigger('itemChange', {\n                    item: tr,\n                    data: model,\n                    ns: ui\n                });\n                if (that.lockedContent) {\n                    adjustRowHeight(tr.css('height', '')[0], that._relatedRow(tr).css('height', '')[0]);\n                }\n            },\n            _displayCell: function (cell, column, dataItem) {\n                var that = this, state = {\n                        storage: {},\n                        count: 0\n                    }, settings = extend({}, kendo.Template, that.options.templateSettings), tmpl = kendo.template(that._cellTmpl(column, state), settings);\n                if (state.count > 0) {\n                    tmpl = proxy(tmpl, state.storage);\n                }\n                cell.empty().html(tmpl(dataItem));\n                that.angular('compile', function () {\n                    return {\n                        elements: cell,\n                        data: [{ dataItem: dataItem }]\n                    };\n                });\n            },\n            removeRow: function (row) {\n                if (!this._confirmation(row)) {\n                    return;\n                }\n                this._removeRow(row);\n            },\n            _removeRow: function (row) {\n                var that = this, model, modelId, key, schema, mode = that._editMode();\n                if (mode !== 'incell') {\n                    that.cancelRow();\n                }\n                row = $(row);\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n                row = row.hide();\n                if (that.dataSource._isGroupPaged()) {\n                    that._removeGroupIfEmpty(row);\n                }\n                model = that._modelForContainer(row);\n                if (model && !that.trigger(REMOVE, {\n                        row: row,\n                        model: model\n                    })) {\n                    schema = that.dataSource.options.schema;\n                    if (that._selectedIds && schema && schema.model) {\n                        modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                        key = model[modelId];\n                        delete that._selectedIds[key];\n                    }\n                    that.dataSource.remove(model);\n                    if (mode === 'inline' || mode === 'popup') {\n                        that.dataSource.sync();\n                    }\n                } else if (mode === 'incell') {\n                    that._destroyEditable();\n                }\n            },\n            _editMode: function () {\n                var mode = 'incell', editable = this.options.editable;\n                if (editable !== true) {\n                    if (typeof editable == 'string') {\n                        mode = editable;\n                    } else {\n                        mode = editable.mode || mode;\n                    }\n                }\n                return mode;\n            },\n            editRow: function (row) {\n                var model;\n                var that = this;\n                if (row instanceof ObservableObject) {\n                    model = row;\n                } else {\n                    row = $(row);\n                    model = that._modelForContainer(row);\n                }\n                var mode = that._editMode();\n                var container;\n                that.cancelRow();\n                if (model) {\n                    row = that.tbody.children('[' + kendo.attr('uid') + '=' + model.uid + ']');\n                    that._attachModelChange(model);\n                    if (mode === 'popup') {\n                        that._createPopupEditor(model);\n                    } else if (mode === 'inline') {\n                        that._createInlineEditor(row, model);\n                    } else if (mode === 'incell') {\n                        $(row).children(DATA_CELL).each(function () {\n                            var cell = $(this);\n                            var column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n                            model = that._modelForContainer(cell);\n                            if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                                that.editCell(cell);\n                                return false;\n                            }\n                        });\n                    }\n                    container = that.editView ? that.editView.element : that._editContainer;\n                    if (container) {\n                        if (!this._editCancelClickHandler) {\n                            this._editCancelClickHandler = proxy(this._editCancelClick, this);\n                        }\n                        container.on(CLICK + NS, '.k-grid-cancel', this._editCancelClickHandler);\n                        if (!this._editUpdateClickHandler) {\n                            this._editUpdateClickHandler = proxy(this._editUpdateClick, this);\n                        }\n                        container.on(CLICK + NS, '.k-grid-update', this._editUpdateClickHandler);\n                    }\n                }\n            },\n            _editUpdateClick: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.saveRow();\n            },\n            _editCancelClick: function (e) {\n                var that = this;\n                var navigatable = that.options.navigatable;\n                var model = that.editable.options.model;\n                var container = that.editView ? that.editView.element : that._editContainer;\n                e.preventDefault();\n                e.stopPropagation();\n                if (that.trigger('cancel', {\n                        container: container,\n                        model: model\n                    })) {\n                    return;\n                }\n                var currentIndex = that.items().index($(that.current()).parent());\n                that.cancelRow();\n                if (navigatable) {\n                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                    focusTable(that.table, true);\n                }\n            },\n            _createPopupEditor: function (model) {\n                var that = this;\n                var html = '<div ' + kendo.attr('uid') + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n                var column;\n                var command;\n                var fields = [];\n                var idx;\n                var length;\n                var tmpl;\n                var updateText;\n                var cancelText;\n                var updateIconClass;\n                var cancelIconClass;\n                var tempCommand;\n                var columns = leafColumns(that.columns);\n                var attr;\n                var editMenuGuid = kendo.guid();\n                var editable = that.options.editable;\n                var template = editable.template;\n                var options = isPlainObject(editable) ? editable.window : {};\n                var settings = extend({}, kendo.Template, that.options.templateSettings);\n                var state;\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n                options = options || {};\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = kendo.unescape(template);\n                    }\n                    html += kendo.template(template, settings)(model);\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.command) {\n                            tempCommand = getCommand(column.command, 'edit');\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                } else {\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.selectable) {\n                            continue;\n                        }\n                        if (!column.command) {\n                            if (!that._isMobile) {\n                                html += '<div class=\"k-edit-label\"><label for=\"' + column.field + '\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || '') + '</label></div>';\n                                if (isColumnEditable(column, model)) {\n                                    fields.push({\n                                        field: column.field,\n                                        title: column.title,\n                                        format: column.format,\n                                        editor: column.editor,\n                                        values: column.values\n                                    });\n                                    html += '<div ' + kendo.attr('container-for') + '=\"' + column.field + '\" class=\"k-edit-field\"></div>';\n                                } else {\n                                    state = {\n                                        storage: {},\n                                        count: 0\n                                    };\n                                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n                                    if (state.count > 0) {\n                                        tmpl = proxy(tmpl, state.storage);\n                                    }\n                                    html += '<div class=\"k-edit-field k-no-editor\">' + tmpl(model) + '</div>';\n                                }\n                            } else {\n                                html += '<li class=\"k-item k-listgroup-item\">';\n                                if (isColumnEditable(column, model)) {\n                                    fields.push({\n                                        field: column.field,\n                                        title: column.title,\n                                        format: column.format,\n                                        editor: column.editor,\n                                        values: column.values\n                                    });\n                                    html += '<label class=\"k-label k-listgroup-form-row\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || '') + '</span>';\n                                    html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr('container-for') + '=\"' + column.field + '\"></div>';\n                                    html += '</label>';\n                                } else {\n                                    state = {\n                                        storage: {},\n                                        count: 0\n                                    };\n                                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n                                    if (state.count > 0) {\n                                        tmpl = proxy(tmpl, state.storage);\n                                    }\n                                    html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || '') + '</span>';\n                                    html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                    html += '</label>';\n                                }\n                                html += '</li>';\n                            }\n                        } else if (column.command) {\n                            tempCommand = getCommand(column.command, 'edit');\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                }\n                if (command) {\n                    if (isPlainObject(command)) {\n                        if (isPlainObject(command.text)) {\n                            updateText = command.text.update;\n                            cancelText = command.text.cancel;\n                        }\n                        if (isPlainObject(command.iconClass)) {\n                            updateIconClass = command.iconClass.update;\n                            cancelIconClass = command.iconClass.cancel;\n                        }\n                        if (command.attr) {\n                            attr = command.attr;\n                        }\n                    }\n                }\n                var container;\n                if (!that._isMobile) {\n                    html += '<div class=\"k-edit-buttons k-actions-end\">';\n                    html += that._createButton({\n                        name: 'update',\n                        text: updateText,\n                        attr: attr,\n                        iconClass: updateIconClass\n                    }) + that._createButton({\n                        name: 'canceledit',\n                        text: cancelText,\n                        attr: attr,\n                        iconClass: cancelIconClass\n                    });\n                    html += '</div></div></div>';\n                    container = that._editContainer = $(html).appendTo(that.wrapper).eq(0).kendoWindow(extend({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: that.options.messages.commands.edit || 'Edit',\n                        visible: false,\n                        close: function (e) {\n                            if (e.userTriggered) {\n                                e.sender.element.trigger('focus');\n                                if (that.trigger('cancel', {\n                                        container: container,\n                                        model: model\n                                    })) {\n                                    e.preventDefault();\n                                    return;\n                                }\n                                var currentIndex = that.items().index($(that.current()).parent());\n                                that._editableIsClosing = true;\n                                that.cancelRow();\n                                if (that.options.navigatable) {\n                                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                    focusTable(that.table, true);\n                                }\n                            }\n                        }\n                    }, options));\n                } else {\n                    html += '</ul></div>';\n                    that.editView = that.pane.append('<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' + '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' + '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel\" title=\"#=messages.cancel#\" ' + 'aria-label=\"#=messages.cancel#\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' + (that.options.messages.commands.edit || 'Edit') + '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-update\" title=\"#=messages.done#\" ' + 'aria-label=\"#=messages.done#\"><span class=\"k-icon k-i-check\"></span></a>' + '</div>' + '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' + html + '</div>' + '</div>');\n                    container = that._editContainer = that.editView.element.find('.k-popup-edit-form');\n                }\n                that.editable = that._editContainer.kendoEditable({\n                    fields: fields,\n                    model: model,\n                    clearContainer: false,\n                    target: that\n                }).data('kendoEditable');\n                that._openPopUpEditor();\n                that.trigger(EDIT, {\n                    container: container,\n                    model: model\n                });\n            },\n            _openPopUpEditor: function () {\n                var that = this;\n                var windowEditor = that._editContainer ? that._editContainer.data('kendoWindow') : null;\n                var windowOptions = (that.options.editable || {}).window || {};\n                if (!this._isMobile) {\n                    if (windowEditor) {\n                        if (!windowOptions.position) {\n                            windowEditor.center();\n                        }\n                        windowEditor.open();\n                    }\n                } else {\n                    this.pane.navigate(this.editView, this._editAnimation);\n                }\n            },\n            _createInlineEditor: function (row, model) {\n                var that = this;\n                var column;\n                var cell;\n                var command;\n                var fields = [];\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n                row.children(':not(.k-group-cell,.k-hierarchy-cell)').each(function () {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n                    if (!column.command && isColumnEditable(column, model)) {\n                        fields.push({\n                            field: column.field,\n                            title: column.title,\n                            format: column.format,\n                            editor: column.editor,\n                            values: column.values\n                        });\n                        cell.attr(kendo.attr('container-for'), column.field);\n                        cell.empty();\n                    } else if (column.command) {\n                        command = getCommand(column.command, 'edit');\n                        if (command) {\n                            cell.empty();\n                            var updateText, cancelText, updateIconClass, cancelIconClass, attr;\n                            if (isPlainObject(command)) {\n                                if (isPlainObject(command.text)) {\n                                    updateText = command.text.update;\n                                    cancelText = command.text.cancel;\n                                }\n                                if (isPlainObject(command.iconClass)) {\n                                    updateIconClass = command.iconClass.update;\n                                    cancelIconClass = command.iconClass.cancel;\n                                }\n                                if (command.attr) {\n                                    attr = command.attr;\n                                }\n                            }\n                            $(that._createButton({\n                                name: 'update',\n                                text: updateText,\n                                attr: attr,\n                                iconClass: updateIconClass\n                            }) + that._createButton({\n                                name: 'canceledit',\n                                text: cancelText,\n                                attr: attr,\n                                iconClass: cancelIconClass\n                            })).appendTo(cell);\n                        }\n                    }\n                });\n                that._editContainer = row;\n                that._editContainer.addClass('k-grid-edit-row');\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n                that.editable = new kendo.ui.Editable(that._editContainer, {\n                    target: that,\n                    fields: fields,\n                    model: model,\n                    skipFocus: that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false) || that._hasVirtualColumns(),\n                    clearContainer: false\n                });\n                if (row.length > 1) {\n                    adjustRowHeight(row[0], row[1]);\n                    that._applyLockedContainersWidth();\n                }\n                that.trigger(EDIT, {\n                    container: row,\n                    model: model\n                });\n            },\n            cancelRow: function (notify) {\n                var that = this, container = that._editContainer, model;\n                if (container) {\n                    model = that._modelForContainer(container);\n                    if (!model || notify && that.trigger('cancel', {\n                            container: container,\n                            model: model\n                        })) {\n                        return;\n                    }\n                    that._destroyEditable();\n                    that.dataSource.cancelChanges(model);\n                    that._clearEditableState();\n                    if (that._editMode() !== 'popup') {\n                        that._displayRow(container);\n                    } else {\n                        that._displayRow(that.tbody.find('[' + kendo.attr('uid') + '=' + model.uid + ']'));\n                    }\n                }\n            },\n            saveRow: function () {\n                var that = this;\n                var container = this._editContainer;\n                var model = this._modelForContainer(container);\n                var deferred = $.Deferred();\n                var valid;\n                if (!container || !this.editable) {\n                    return deferred.resolve().promise();\n                }\n                valid = that.editable && that.editable.end();\n                if (!valid || this.trigger(SAVE, {\n                        container: container,\n                        model: model\n                    })) {\n                    if (!valid) {\n                        that._scrollVirtualWrapper();\n                    }\n                    return deferred.reject().promise();\n                }\n                that._clearEditableState();\n                return this.dataSource.sync();\n            },\n            _displayRow: function (row) {\n                var that = this, model = that._modelForContainer(row), related, newRow, nextRow, isSelected = row.hasClass('k-state-selected'), isAlt = row.hasClass('k-alt');\n                if (model) {\n                    if (that.lockedContent) {\n                        related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                        that._relatedRow(row.last()).replaceWith(related);\n                    }\n                    that.angular('cleanup', function () {\n                        return { elements: row.get() };\n                    });\n                    newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                    if (!row.is(':visible')) {\n                        newRow.hide();\n                    }\n                    row.replaceWith(newRow);\n                    that.trigger('itemChange', {\n                        item: newRow,\n                        data: model,\n                        ns: ui\n                    });\n                    if (related && related.length) {\n                        that.trigger('itemChange', {\n                            item: related,\n                            data: model,\n                            ns: ui\n                        });\n                    }\n                    var angularElements = newRow;\n                    var angularData = [{ dataItem: model }];\n                    if (related && related.length) {\n                        angularElements = newRow.add(related);\n                        angularData.push({ dataItem: model });\n                    }\n                    that.angular('compile', function () {\n                        return {\n                            elements: angularElements.get(),\n                            data: angularData\n                        };\n                    });\n                    if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                        that.select(newRow.add(related));\n                    }\n                    if (related) {\n                        adjustRowHeight(newRow[0], related[0]);\n                    }\n                    nextRow = newRow.next();\n                    if (nextRow.hasClass('k-detail-row') && nextRow.is(':visible')) {\n                        newRow.find('.k-hierarchy-cell .k-icon').removeClass('k-i-expand').addClass('k-i-collapse');\n                    }\n                }\n            },\n            _showMessage: function (messages, row) {\n                var that = this;\n                if (!that._isMobile) {\n                    return window.confirm(messages.title);\n                }\n                var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($('<div />').appendTo(document.body), {\n                    modal: { preventScroll: true },\n                    closable: false,\n                    title: false,\n                    content: messages.title,\n                    messages: {\n                        okText: messages.confirmDelete,\n                        cancel: messages.cancelDelete\n                    },\n                    open: function () {\n                        if (that.content) {\n                            that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                            that.content.css(OVERFLOW, HIDDEN);\n                        }\n                    },\n                    close: function () {\n                        if (that.content) {\n                            that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                        }\n                    }\n                });\n                confirmDialog.result.done(function () {\n                    that._removeRow(row);\n                }).fail(function () {\n                    var confirmDialog = that._confirmDialog;\n                    if (confirmDialog) {\n                        confirmDialog.close();\n                        confirmDialog.destroy();\n                    }\n                });\n                return false;\n            },\n            _confirmation: function (row) {\n                var that = this, editable = that.options.editable, confirmation = editable === true || typeof editable === STRING ? that.options.messages.editable.confirmation : editable.confirmation;\n                if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                    confirmation = that.options.messages.editable.confirmation;\n                }\n                if (confirmation !== false && confirmation != null) {\n                    if (typeof confirmation === FUNCTION) {\n                        confirmation = confirmation(that._modelForContainer(row));\n                    }\n                    return that._showMessage({\n                        confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                        cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                        title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                    }, row);\n                }\n                return true;\n            },\n            cancelChanges: function () {\n                var that = this;\n                that.dataSource.cancelChanges();\n                if (that._isVirtualEditable()) {\n                    that._virtualPageToTop(function () {\n                        that.virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n            saveChanges: function () {\n                var that = this;\n                var valid = that.editable && that.editable.end();\n                if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                    that.dataSource.sync();\n                } else if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n            },\n            addRow: function () {\n                var that = this, index, dataSource = that.dataSource, mode = that._editMode(), createAt = that.options.editable.createAt || '', pageSize = dataSource.pageSize(), view = dataSource.view() || [];\n                var createAtBottom = createAt.toLowerCase() === BOTTOM;\n                var model;\n                var virtualEditable = that._isVirtualEditable();\n                if (that.editable && that.editable.end() || !that.editable) {\n                    if (mode != 'incell') {\n                        that.cancelRow();\n                    }\n                    index = dataSource.indexOf(view[0]);\n                    if (createAtBottom) {\n                        index += view.length;\n                        if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                            index -= 1;\n                        }\n                    }\n                    if (index < 0) {\n                        if (dataSource.page() > dataSource.totalPages()) {\n                            index = (dataSource.page() - 1) * pageSize;\n                        } else {\n                            index = 0;\n                        }\n                    }\n                    if (that.options.navigatable && mode == 'incell') {\n                        that._removeCurrent();\n                    }\n                    if (virtualEditable) {\n                        that._virtualAddRow();\n                    } else {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                    }\n                } else {\n                    that._scrollVirtualWrapper();\n                }\n            },\n            _editModel: function (model) {\n                var that = this;\n                var createAt = that.options.editable.createAt || '';\n                var mode = that._editMode();\n                if (model) {\n                    var id = model.uid, table = that.lockedContent ? that.lockedTable : that.table, row = table.find('tr[' + kendo.attr('uid') + '=' + id + ']'), cell = row.children('td:not(.k-group-cell,.k-hierarchy-cell)').eq(that._firstEditableColumnIndex(row));\n                    if (mode === 'inline' && row.length) {\n                        that.editRow(row);\n                    } else if (mode === 'popup') {\n                        that.editRow(model);\n                    } else if (cell.length) {\n                        that.editCell(cell);\n                    }\n                    if (createAt.toLowerCase() == 'bottom' && that.lockedContent) {\n                        that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                    }\n                }\n            },\n            _virtualAddRow: function () {\n                var that = this;\n                var createAtBottom = (that.options.editable.createAt || '').toLowerCase() === BOTTOM;\n                that._clearEditableState();\n                if (createAtBottom) {\n                    that._virtualAddRowAtBottom();\n                } else {\n                    that._virtualAddRowAtTop();\n                }\n            },\n            _virtualAddRowAtTop: function () {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var model;\n                if (dataSource.page() === 1) {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                } else {\n                    that._virtualPageToTop(function () {\n                        model = dataSource.insert(0, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n            _virtualAddRowAtBottom: function () {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var index = dataSource.total();\n                var model;\n                if (dataSource.at(index - 1) instanceof ObservableObject) {\n                    model = dataSource.insert(index, {});\n                    that._virtualPageToBottom(function () {\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                } else {\n                    that._virtualPageToBottom(function () {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                }\n            },\n            _virtualPageToTop: function (callback) {\n                var that = this;\n                that._virtualPage(0, that.dataSource.take(), function () {\n                    callback();\n                });\n            },\n            _virtualPageToBottom: function (callback) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var take = dataSource.take();\n                var total = dataSource.total();\n                var skip = total > take ? total - take : 0;\n                that._virtualPage(skip, take, function () {\n                    callback();\n                });\n            },\n            _virtualPage: function (skip, take, callback) {\n                var that = this;\n                if (that._isVirtualEditable()) {\n                    that.virtualScrollable._preventScroll = true;\n                    that.virtualScrollable._page(skip, take, callback);\n                }\n            },\n            _firstEditableColumnIndex: function (container) {\n                var that = this, column, columns = leafColumns(that.columns), idx, length, model = that._modelForContainer(container);\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                        return idx;\n                    }\n                }\n                return -1;\n            },\n            _toolbar: function () {\n                var that = this, wrapper = that.wrapper, toolbar = that.options.toolbar, editable = that.options.editable, container;\n                if (toolbar) {\n                    container = that.wrapper.find('.k-grid-toolbar');\n                    if (!container.length) {\n                        if (!isFunction(toolbar)) {\n                            toolbar = typeof toolbar === STRING ? toolbar : that._toolbarTmpl(toolbar).replace(templateHashRegExp, '\\\\#');\n                            toolbar = proxy(kendo.template(toolbar), that);\n                        }\n                        container = $('<div class=\"k-toolbar k-grid-toolbar\" />').html(toolbar({})).prependTo(wrapper);\n                        that.angular('compile', function () {\n                            return { elements: container.get() };\n                        });\n                    }\n                    if (editable && editable.create !== false) {\n                        container.on(CLICK + NS, '.k-grid-add', function (e) {\n                            e.preventDefault();\n                            that.addRow();\n                        }).on(CLICK + NS, '.k-grid-cancel-changes', function (e) {\n                            e.preventDefault();\n                            that.cancelChanges();\n                        }).on(CLICK + NS, '.k-grid-save-changes', function (e) {\n                            e.preventDefault();\n                            that.saveChanges();\n                        });\n                    }\n                    container.on(CLICK + NS, '.k-grid-excel', function (e) {\n                        e.preventDefault();\n                        that.saveAsExcel();\n                    });\n                    container.on(CLICK + NS, '.k-grid-pdf', function (e) {\n                        e.preventDefault();\n                        that.saveAsPDF().done(function () {\n                            that._pdfInitialized = false;\n                        });\n                    });\n                    container.on(INPUT + NS, '.k-grid-search input', function (e) {\n                        var input = e.currentTarget;\n                        clearTimeout(that._searchTimeOut);\n                        that._searchTimeOut = setTimeout(function () {\n                            that._searchTimeOut = null;\n                            var options = that.options;\n                            var searchFields = options.search ? options.search.fields : null;\n                            var expression = {\n                                filters: [],\n                                logic: 'or'\n                            };\n                            var value = input.value;\n                            if (!searchFields) {\n                                searchFields = getColumnsFields(options.columns);\n                            }\n                            if (that.dataSource.options.endless) {\n                                that.dataSource.options.endless = null;\n                                that._endlessPageSize = that.dataSource.options.pageSize;\n                            }\n                            if (value) {\n                                for (var i = 0; i < searchFields.length; i++) {\n                                    that._pushExpression(expression.filters, searchFields[i], value);\n                                }\n                            } else {\n                                expression = {};\n                            }\n                            that.dataSource.filter(expression);\n                        }, 300);\n                    });\n                }\n            },\n            _pushExpression: function (filters, field, value) {\n                var that = this, isServerFiltering = that.dataSource.options.serverFiltering, defaultOperators = {\n                        string: 'contains',\n                        number: 'gte',\n                        date: 'gte',\n                        enums: 'eq',\n                        boolean: 'eq'\n                    }, name = field.name || field, operator = field.operator, modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields, fieldInfo = modelInfo && modelInfo[name], parseFn = fieldInfo && fieldInfo.parse, expression = {\n                        field: name,\n                        operator: operator || defaultOperators.string,\n                        value: value\n                    };\n                if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                    extend(expression, {\n                        operator: operator || defaultOperators[fieldInfo.type],\n                        value: parseFn(value)\n                    });\n                }\n                if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                    return;\n                }\n                filters.push(expression);\n            },\n            _toolbarTmpl: function (commands) {\n                var that = this, idx, length, html = '', command, searchText = '', messages = that.options.messages.commands;\n                if (isArray(commands)) {\n                    for (idx = 0, length = commands.length; idx < length; idx++) {\n                        command = typeof commands[idx] === 'string' ? commands[idx].toLowerCase() : (commands[idx].name || '').toLowerCase();\n                        if (command === 'search') {\n                            if (typeof commands[idx] !== 'string') {\n                                searchText = commands[idx].text;\n                            }\n                            searchText = searchText || messages.search;\n                            html += '<span class=\\'k-spacer\\'></span>';\n                            html += '<span class=\\'k-searchbox k-input k-input-md k-rounded-md k-input-solid k-grid-search\\'>';\n                            html += '<span class=\\'k-input-icon k-icon k-i-search\\'></span>';\n                            html += '<input autocomplete=\\'off\\' placeholder=\\'' + searchText + '\\' title=\\'' + searchText + '\\' class=\\'k-input-inner\\' />';\n                            html += '</span>';\n                        } else {\n                            html += that._createButton(commands[idx]);\n                        }\n                    }\n                }\n                return html;\n            },\n            _createButton: function (command) {\n                var button, template = command.template || COMMANDBUTTONTMPL, commandName = typeof command === STRING ? command : command.name || command.text, className = defaultCommands[commandName] ? defaultCommands[commandName].className : 'k-grid-' + (commandName || '').replace(/\\s/g, ''), options = {\n                        className: className,\n                        text: commandName,\n                        attr: '',\n                        iconClass: ''\n                    }, messages = this.options.messages.commands, attributeClassMatch;\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error('Custom commands should have name specified');\n                }\n                if (isPlainObject(command)) {\n                    command = extend(true, {}, command);\n                    if (command.className && inArray(options.className, command.className.split(' ')) < 0) {\n                        command.className += ' ' + options.className;\n                    } else if (command.className === undefined) {\n                        command.className = options.className;\n                    }\n                    if (command.className.indexOf('k-primary') > -1) {\n                        command.className = command.className.replace('k-primary', '');\n                        command.themeColor = 'primary';\n                    }\n                    if (commandName === 'edit') {\n                        command = extend(true, {}, command);\n                        command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                        command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                    }\n                    if (command.attr) {\n                        if (isPlainObject(command.attr)) {\n                            command.attr = stringifyAttributes(command.attr);\n                        }\n                        if (typeof command.attr === STRING) {\n                            attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n                            if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(' ')) < 0) {\n                                command.className += ' ' + attributeClassMatch[1];\n                            }\n                        }\n                    }\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n                } else {\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n                }\n                button = kendo.template(template)(options);\n                if (!command.template) {\n                    return kendo.html.renderButton($(button), options);\n                } else {\n                    return button;\n                }\n            },\n            _hasFooters: function () {\n                return !!this.footerTemplate || !!this.groupFooterTemplate || this.footer && this.footer.length > 0 || this.wrapper.find('.k-grid-footer').length > 0;\n            },\n            _groupable: function () {\n                var that = this;\n                if (that._groupableClickHandler) {\n                    that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n                } else {\n                    that._groupableClickHandler = function (e) {\n                        var element = $(this), groupRow = element.closest('tr');\n                        var group = that._groupRows ? that._groupRows[that.wrapper.find('.k-grouping-row').index(groupRow)] : {};\n                        if (element.hasClass('k-i-collapse')) {\n                            if (!that.trigger('groupCollapse', {\n                                    group: group,\n                                    element: groupRow\n                                })) {\n                                that.collapseGroup(groupRow);\n                            }\n                        } else {\n                            if (!that.trigger('groupExpand', {\n                                    group: group,\n                                    element: groupRow\n                                })) {\n                                that.expandGroup(groupRow);\n                            }\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                }\n                if (that._isLocked()) {\n                    that.lockedTable.on(CLICK + NS, '.k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse', that._groupableClickHandler);\n                } else {\n                    that.table.on(CLICK + NS, '.k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse', that._groupableClickHandler);\n                }\n                that._attachGroupable();\n            },\n            _attachGroupable: function () {\n                var that = this, wrapper = that.wrapper, groupable = that.options.groupable, draggables = HEADERCELLS + '[' + kendo.attr('field') + ']', filter = that.content ? '.k-grid-header:first ' + draggables : 'table:first>.k-grid-header ' + draggables;\n                if (groupable && groupable.enabled !== false) {\n                    if (!wrapper.has('div.k-grouping-header')[0]) {\n                        $('<div>&nbsp;</div>').addClass('k-grouping-header').prependTo(wrapper);\n                    }\n                    if (that.groupable) {\n                        that._destroyGroupable();\n                    }\n                    if (browser.chrome) {\n                        wrapper.find('div.k-grouping-header').css('touch-action', 'none');\n                        wrapper.find(filter).css('touch-action', 'none');\n                    }\n                    that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                        draggable: that._draggableInstance,\n                        groupContainer: '>div.k-grouping-header',\n                        dataSource: that.dataSource,\n                        draggableElements: filter,\n                        filter: filter,\n                        allowDrag: that.options.reorderable,\n                        change: function (e) {\n                            if (that.trigger('group', { groups: e.groups })) {\n                                e.preventDefault();\n                            } else {\n                                that._clearEditableState();\n                                if (that.dataSource.options.endless) {\n                                    that.dataSource.options.endless = null;\n                                    that._endlessPageSize = that.dataSource.options.pageSize;\n                                    that.dataSource._skip = 0;\n                                    that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n                                    that.dataSource._page = 1;\n                                }\n                            }\n                        }\n                    }));\n                    that._addGroupableOptionsToHeader();\n                }\n            },\n            _addGroupableOptionsToHeader: function () {\n                var that = this;\n                var columns = flatColumns(that.columns);\n                var columnFieldMap = {};\n                var field = '';\n                var headerCells = that._headerCells();\n                var cellFieldAttr = '';\n                var headerCell;\n                var columnOptions;\n                var i;\n                for (i = 0; i < columns.length; i++) {\n                    field = columns[i].field;\n                    columnFieldMap[columns[i].field] = columns[i];\n                }\n                for (i = 0; i < headerCells.length; i++) {\n                    headerCell = headerCells.eq(i);\n                    cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                    columnOptions = columnFieldMap[cellFieldAttr];\n                    if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                        headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                    }\n                }\n            },\n            _destroyGroupable: function () {\n                var that = this;\n                if (that.groupable && that.groupable.element) {\n                    that.groupable.element.kendoGroupable('destroy');\n                }\n                that.groupable = null;\n                that._removeGroupableOptionsFromHeader();\n            },\n            _removeGroupableOptionsFromHeader: function () {\n                var that = this;\n                var headerCells = that._headerCells();\n                for (var i = 0; i < headerCells.length; i++) {\n                    headerCells.eq(i).removeData(GROUP_SORT);\n                }\n            },\n            _continuousItems: function (filter, cell) {\n                if (!this.lockedContent) {\n                    return;\n                }\n                var that = this;\n                var elements = that.table.add(that.lockedTable);\n                var lockedItems = $(filter, elements[0]);\n                var nonLockedItems = $(filter, elements[1]);\n                var columns = cell ? lockedColumns(that.columns).length : 1;\n                var nonLockedColumns = cell ? that.columns.length - columns : 1;\n                var result = [];\n                for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                    push.apply(result, lockedItems.slice(idx, idx + columns));\n                    push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n                }\n                return result;\n            },\n            _selectable: function () {\n                var that = this, multi, cell, notString = [], isLocked = that._isLocked(), selectable = that.options.selectable;\n                if (selectable) {\n                    if (that.selectable) {\n                        that.selectable.destroy();\n                    }\n                    that._selectedIds = {};\n                    selectable = kendo.ui.Selectable.parseOptions(selectable);\n                    multi = selectable.multiple;\n                    cell = selectable.cell;\n                    if (that._hasDetails()) {\n                        notString[notString.length] = '.k-detail-row';\n                    }\n                    if (that.options.groupable || that._hasFooters() || that._groups()) {\n                        notString[notString.length] = '.k-grouping-row,.k-group-footer';\n                    }\n                    notString = notString.join(',');\n                    if (notString !== '') {\n                        notString = ':not(' + notString + ')';\n                    }\n                    var elements = that.table;\n                    if (isLocked) {\n                        elements = elements.add(that.lockedTable);\n                    }\n                    var filter = '>' + (cell ? SELECTION_CELL_SELECTOR : 'tbody>tr' + notString);\n                    that.selectable = new kendo.ui.Selectable(elements, {\n                        filter: filter,\n                        aria: true,\n                        multiple: multi,\n                        change: function () {\n                            var selectedValues;\n                            if (!cell) {\n                                that._persistSelectedRows();\n                            }\n                            if (that._checkBoxSelection) {\n                                selectedValues = that.selectable.value();\n                                that._uncheckCheckBoxes();\n                                that._checkRows(selectedValues);\n                                if (selectedValues.length && selectedValues.length === that.items().length) {\n                                    that._toggleHeaderCheckState(true);\n                                } else {\n                                    that._toggleHeaderCheckState(false);\n                                }\n                            }\n                            that.trigger(CHANGE);\n                        },\n                        useAllItems: isLocked && multi && cell,\n                        relatedTarget: function (items) {\n                            if (cell || !isLocked) {\n                                return;\n                            }\n                            var related;\n                            var result = $();\n                            for (var idx = 0, length = items.length; idx < length; idx++) {\n                                related = that._relatedRow(items[idx]);\n                                if (inArray(related[0], items) < 0) {\n                                    result = result.add(related);\n                                }\n                            }\n                            return result;\n                        },\n                        continuousItems: function () {\n                            return that._continuousItems(filter, cell);\n                        },\n                        ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                        addIdToRanges: true\n                    });\n                    if (that.options.navigatable) {\n                        elements.on('keydown' + NS, function (e) {\n                            var current = that.current();\n                            var target = e.target;\n                            if (!current) {\n                                return;\n                            }\n                            if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 && !current.is('.k-edit-cell,.k-header') && current.parent().is(':not(.k-grouping-row,.k-detail-row,.k-group-footer)')) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(SELECTED)) {\n                                            that._deselectCheckRows(current);\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current);\n                            } else if (!cell && ($(target).is('td') || $(target).is('table') && inArray(target, this._navigatableTables)) && (e.shiftKey && e.keyCode == keys.LEFT || e.shiftKey && e.keyCode == keys.RIGHT || e.shiftKey && e.keyCode == keys.UP || e.shiftKey && e.keyCode == keys.DOWN || e.keyCode === keys.SPACEBAR && e.shiftKey)) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = current.parent();\n                                if (isLocked) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n                                if (multi) {\n                                    if (!that.selectable._lastActive) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.selectRange(that.selectable._firstSelectee(), current);\n                                } else {\n                                    that.selectable.clear();\n                                    that.selectable.value(current);\n                                }\n                            }\n                        });\n                    }\n                }\n            },\n            _clipboard: function () {\n                var options = this.options;\n                var selectable = options.selectable;\n                if (selectable && options.allowCopy) {\n                    var grid = this;\n                    if (!options.navigatable) {\n                        grid.table.add(grid.lockedTable).attr('tabindex', 0).on('mousedown' + NS + ' keydown' + NS, '.k-detail-cell', function (e) {\n                            if (e.target !== e.currentTarget) {\n                                e.stopImmediatePropagation();\n                            }\n                        }).on('mousedown' + NS, NAVROW + '>' + NAVCELL, proxy(tableClick, grid));\n                    }\n                    grid.copyHandler = proxy(grid.copySelection, grid);\n                    grid.updateClipBoardState = function () {\n                        if (grid.areaClipBoard) {\n                            grid.areaClipBoard.val(grid.getTSV()).trigger('focus').select();\n                        }\n                    };\n                    grid.bind('change', grid.updateClipBoardState);\n                    grid.wrapper.on('keydown', grid.copyHandler);\n                    grid.clearAreaHandler = proxy(grid.clearArea, grid);\n                    grid.wrapper.on('keyup', grid.clearAreaHandler);\n                }\n            },\n            copySelectionToClipboard: function (includeHeaders) {\n                this._createAreaClipBoard();\n                this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger('focus').select();\n                document.execCommand('copy');\n            },\n            copySelection: function (e) {\n                if (e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey) || $(e.target).is('input:visible,textarea:visible') || window.getSelection && window.getSelection().toString() || document.selection && document.selection.createRange().text) {\n                    return;\n                }\n                this._createAreaClipBoard();\n                this.areaClipBoard.val(this.getTSV()).trigger('focus').select();\n            },\n            _createAreaClipBoard: function () {\n                if (!this.areaClipBoard) {\n                    this.areaClipBoard = $('<textarea />').css({\n                        position: 'fixed',\n                        top: '50%',\n                        left: '50%',\n                        opacity: 0,\n                        width: 0,\n                        height: 0\n                    }).appendTo(this.wrapper);\n                }\n            },\n            getTSV: function (includeHeaders) {\n                var grid = this;\n                var selected = grid.select();\n                var delimeter = '\\t';\n                var allowCopy = grid.options.allowCopy;\n                var onlyVisible = true;\n                var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                    delimeter = allowCopy.delimeter;\n                }\n                var text = '';\n                if (selected.length) {\n                    if (selected.eq(0).is('tr')) {\n                        selected = selected.find('td:not(.k-group-cell)');\n                    }\n                    if (onlyVisible) {\n                        selected.filter(':visible');\n                    }\n                    var result = [];\n                    var cellsOffset = this.columns.length;\n                    var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                    var inLockedArea = true;\n                    var fields = [];\n                    var field;\n                    var columns = visibleLeafColumns(this.columns);\n                    $.each(selected, function (idx, cell) {\n                        cell = $(cell);\n                        field = grid._getCellField(cell, hasLockedCols);\n                        var tr = cell.closest('tr');\n                        var rowIndex = tr.index();\n                        var cellIndex = cell.index();\n                        if (onlyVisible) {\n                            cellIndex -= cell.prevAll(':hidden').length;\n                        }\n                        if (lockedCols && inLockedArea) {\n                            inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                        }\n                        if (grid._groups() && inLockedArea) {\n                            cellIndex -= grid._groups();\n                        }\n                        cellIndex = inLockedArea ? cellIndex : cellIndex + lockedCols;\n                        if (field) {\n                            fields[cellIndex] = field;\n                        }\n                        if (cellsOffset > cellIndex) {\n                            cellsOffset = cellIndex;\n                        }\n                        var cellText = cell.text();\n                        if (!result[rowIndex]) {\n                            result[rowIndex] = [];\n                        }\n                        result[rowIndex][cellIndex] = cellText;\n                    });\n                    var rowsOffset = result.length;\n                    result = $.each(result, function (idx, val) {\n                        if (val) {\n                            result[idx] = val.slice(cellsOffset);\n                            if (rowsOffset > idx) {\n                                rowsOffset = idx;\n                            }\n                        }\n                    });\n                    if (includeHeaders && fields.length) {\n                        result.splice(rowsOffset, 0, fields.map(function (field) {\n                            return getTitle(field, columns);\n                        }));\n                    }\n                    $.each(result.slice(rowsOffset), function (idx, val) {\n                        if (val) {\n                            text += val.join(delimeter) + '\\r\\n';\n                        } else {\n                            text += '\\r\\n';\n                        }\n                    });\n                }\n                return text;\n            },\n            clearArea: function (e) {\n                var table;\n                if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                    if (this.options.navigatable) {\n                        table = $(this.current()).closest('table');\n                    } else {\n                        table = this.table;\n                    }\n                    focusTable(table, true);\n                }\n                if (this.areaClipBoard) {\n                    this.areaClipBoard.remove();\n                    this.areaClipBoard = null;\n                }\n            },\n            _adaptiveColumns: function () {\n                var that = this;\n                if (that._anyColumnHasMediaQuery()) {\n                    that._setColumnsMediaVisibility(that.columns);\n                    that._attachColumnMediaResizeHandler();\n                }\n            },\n            _anyColumnHasMediaQuery: function () {\n                return this._columnsWithMediaQuery().length;\n            },\n            _columnsWithMediaQuery: function () {\n                return columnsWithMedia(this.columns);\n            },\n            _attachColumnMediaResizeHandler: function () {\n                var that = this;\n                that._detachColumnMediaResizeHandler();\n                that._columnMediaResizeHandler = proxy(that._onColumnMediaResize, that);\n                $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n            },\n            _detachColumnMediaResizeHandler: function () {\n                var that = this;\n                if (that._columnMediaResizeHandler) {\n                    $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n                }\n            },\n            _onColumnMediaResize: function () {\n                var that = this;\n                that._setColumnsMediaVisibility(that.columns);\n                that._setContentMediaWidth();\n            },\n            _setColumnsMediaVisibility: function (columns) {\n                var cols = columns || [];\n                for (var i = 0; i < cols.length; i++) {\n                    this._setColumnMediaVisibility(cols[i]);\n                }\n            },\n            _setColumnMediaVisibility: function (column) {\n                var that = this;\n                if (isUndefined(column.media)) {\n                    that._setColumnsMediaVisibility(column.columns);\n                } else {\n                    if (columnMatchesMedia(column)) {\n                        that._showColumnByMedia(column);\n                        if (!column.hidden) {\n                            that._setColumnsMediaVisibility(column.columns);\n                        }\n                    } else {\n                        that._hideColumnByMedia(column);\n                    }\n                }\n            },\n            _showColumnByMedia: function (column) {\n                if (!column.hidden) {\n                    this.showColumn(column);\n                }\n                setColumnMatchesMedia(column);\n            },\n            _hideColumnByMedia: function (column) {\n                var initiallyHidden = column.hidden;\n                if (!initiallyHidden) {\n                    column._hideByMedia = true;\n                    this.hideColumn(column);\n                    column._hideByMedia = false;\n                    column.hidden = initiallyHidden;\n                }\n                setColumnMatchesMedia(column);\n            },\n            _setContentMediaWidth: function () {\n                var that = this;\n                var options = that.options;\n                var isLocked = that._isLocked();\n                var footer;\n                if (options.scrollable && options.resizable) {\n                    if (isLocked && that.lockedFooter) {\n                        footer = that.lockedFooter.children('table');\n                    } else if (that.footer) {\n                        footer = that.footer.find('>.k-grid-footer-wrap>table');\n                    }\n                    if (!footer || !footer[0]) {\n                        footer = $();\n                    }\n                    var header = isLocked ? that.wrapper.find('.k-grid-header-locked').find('table') : that.wrapper.find('.k-grid-header').find('table');\n                    var contentTable = isLocked ? that.lockedTable : that.table;\n                    var headerColumns = header.find('th');\n                    var headerColgroup = header.find('colgroup');\n                    var headerColumnsCount = headerColumns.length;\n                    var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                    var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n                    var totalHeaderWidth = 0;\n                    if (header[0].style.width !== '' && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                        var currentHeaderWidth = header.css('width');\n                        for (var i = 0; i < headerColumnsCount; i++) {\n                            if (isElementVisible(headerColumns[i])) {\n                                var columnWidth;\n                                var cellIndex = Math.max(i, i - hiddenHeaderColumnsCount);\n                                var colgroupChild = headerColgroup.children()[cellIndex];\n                                var columnStyleWidth = colgroupChild ? colgroupChild.style.width : '';\n                                if (columnStyleWidth !== '') {\n                                    columnWidth = parseFloat(columnStyleWidth);\n                                } else {\n                                    header.css('width', 'auto');\n                                    columnWidth = outerWidth(headerColumns.eq(i));\n                                    header.css('width', currentHeaderWidth);\n                                }\n                                totalHeaderWidth += columnWidth;\n                            }\n                        }\n                        contentTable.css('width', totalHeaderWidth - 1);\n                        header.css('width', totalHeaderWidth);\n                        footer.css('width', totalHeaderWidth);\n                        that._updateStickyColumns();\n                    }\n                }\n            },\n            _minScreenSupport: function () {\n                var any = this.hideMinScreenCols();\n                if (any) {\n                    this.minScreenResizeHandler = proxy(this.hideMinScreenCols, this);\n                    $(window).on('resize', this.minScreenResizeHandler);\n                }\n            },\n            hideMinScreenCols: function () {\n                var cols = this.columns, screenWidth = window.innerWidth > 0 ? window.innerWidth : screen.width;\n                return this._iterateMinScreenCols(cols, screenWidth);\n            },\n            _iterateMinScreenCols: function (cols, screenWidth) {\n                var any = false;\n                for (var i = 0; i < cols.length; i++) {\n                    var col = cols[i];\n                    var minWidth = col.minScreenWidth;\n                    if (minWidth !== undefined && minWidth !== null) {\n                        any = true;\n                        if (minWidth > screenWidth) {\n                            this.hideColumn(col);\n                        } else {\n                            this.showColumn(col);\n                        }\n                    }\n                    if (!col.hidden && col.columns) {\n                        any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                    }\n                }\n                return any;\n            },\n            _stickyColumns: function () {\n                var that = this;\n                if (that._anyStickyColumns()) {\n                    that._setStickyColumns(false);\n                }\n            },\n            _updateStickyColumns: function () {\n                var that = this;\n                var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function (column) {\n                    return column.groupHeaderColumnTemplate;\n                });\n                if (that._anyStickyColumns()) {\n                    that._setStickyColumns(true);\n                    that._templates();\n                    if (groupHeaderColumnTemplateColumns.length > 0) {\n                        that._renderGroupRows();\n                    }\n                    if (that._hasFilterRow()) {\n                        that._updateStickyFilterCells();\n                    }\n                }\n            },\n            _updateStickyFilterCells: function () {\n                var that = this;\n                var filterCells = that.thead.find('.k-filter-row').find('th:not(.k-group-cell,.k-hierarchy-cell)');\n                if (filterCells.length) {\n                    filterCells.each(function () {\n                        var th = $(this);\n                        var column = th.data('column');\n                        var style = th.attr('style') || '';\n                        if (column.sticky) {\n                            th.attr('style', style + column.stickyStyle);\n                            th.addClass(STICKY_HEADER_CLASS);\n                        } else {\n                            style = style.replace(leftRegExp, '');\n                            style = style.replace(rightRegExp, '');\n                            th.attr('style', style);\n                            th.removeClass(STICKY_HEADER_CLASS);\n                        }\n                    });\n                }\n            },\n            _anyStickyColumns: function () {\n                var that = this;\n                return stickyColumns(that.columns).length;\n            },\n            _setStickyColumns: function (updateStyles) {\n                var that = this;\n                var columns = stickyColumns(that.columns);\n                var visibleColumns = visibleStickyColumns(that.columns);\n                var stickyWidths = that._calculateStickyWidths(visibleColumns);\n                that._removeStickyAttributes(columns);\n                that._setStickyClassAttributes(columns);\n                that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n                if (updateStyles) {\n                    that._setStickyStyles(visibleColumns, stickyWidths);\n                }\n            },\n            _calculateStickyWidths: function (columns, initialLeftWidth, initialRightWidth) {\n                var that = this;\n                var i;\n                var column;\n                var columnWidth;\n                var nextColumnLeft;\n                var nextColumnRight;\n                var left = isRtl ? 'right' : 'left';\n                var right = isRtl ? 'left' : 'right';\n                var stickyWidths = {\n                    left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                    right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n                };\n                for (i = 0; i < columns.length - 1; i++) {\n                    column = columns[i];\n                    columnWidth = that._sumColumnWidth(column);\n                    nextColumnLeft = columnWidth + stickyWidths[left][i];\n                    stickyWidths[left][i + 1] = nextColumnLeft;\n                }\n                for (i = columns.length - 1; i > 0; i--) {\n                    column = columns[i];\n                    columnWidth = that._sumColumnWidth(column);\n                    nextColumnRight = columnWidth + stickyWidths[right][i];\n                    stickyWidths[right][i - 1] = nextColumnRight;\n                }\n                return stickyWidths;\n            },\n            _setStickyClassAttributes: function (columns, masterIndex) {\n                var that = this;\n                var i;\n                var column;\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    if (column.columns) {\n                        if (!masterIndex && i) {\n                            masterIndex = i;\n                        }\n                        that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                    }\n                    if (masterIndex) {\n                        addColumnAttribute(column, 'headerAttributes', 'class', STICKY_HEADER_NO_BORDER_CLASS);\n                    }\n                    addColumnAttribute(column, 'attributes', 'class', STICKY_CELL_CLASS);\n                    addColumnAttribute(column, 'headerAttributes', 'class', STICKY_HEADER_CLASS);\n                    addColumnAttribute(column, 'footerAttributes', 'class', STICKY_FOOTER_CLASS);\n                }\n            },\n            _setStickyStyleAttributes: function (columns, stickyWidths, updateStyles) {\n                var that = this;\n                var i;\n                var column;\n                var stickyLeft;\n                var stickyRight;\n                var stickyStyle;\n                var childCols;\n                var childStickyWidths;\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    stickyLeft = stickyWidths.left[i];\n                    stickyRight = stickyWidths.right[i];\n                    stickyStyle = 'left: ' + stickyLeft + 'px; right: ' + stickyRight + 'px;';\n                    if (column.columns) {\n                        childCols = visibleChildColumns([column]);\n                        childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n                        that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n                        if (updateStyles) {\n                            that._setStickyStyles(childCols, childStickyWidths);\n                        }\n                    }\n                    addColumnAttribute(column, 'attributes', 'style', stickyStyle);\n                    addColumnAttribute(column, 'headerAttributes', 'style', stickyStyle);\n                    addColumnAttribute(column, 'footerAttributes', 'style', stickyStyle);\n                    column.stickyStyle = stickyStyle;\n                }\n            },\n            _removeStickyAttributes: function (columns) {\n                var that = this;\n                var i;\n                var cellClassRegExp = new RegExp('(\\\\s*' + STICKY_CELL_CLASS + ')*', 'ig');\n                var headerClassRegExp = new RegExp('(\\\\s*' + STICKY_HEADER_CLASS + ')*', 'ig');\n                var footerClassRegExp = new RegExp('(\\\\s*' + STICKY_FOOTER_CLASS + ')*', 'ig');\n                var headerClassNoBorderRegExp = new RegExp('(\\\\s*' + STICKY_HEADER_NO_BORDER_CLASS + ')*', 'ig');\n                var column;\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    if (column.columns) {\n                        that._removeStickyAttributes(childColumns([column]));\n                    }\n                    removeColumnAttribute(column, 'attributes', 'class', cellClassRegExp);\n                    removeColumnAttribute(column, 'attributes', 'style', leftRegExp);\n                    removeColumnAttribute(column, 'attributes', 'style', rightRegExp);\n                    removeColumnAttribute(column, 'headerAttributes', 'class', headerClassRegExp);\n                    removeColumnAttribute(column, 'headerAttributes', 'class', headerClassNoBorderRegExp);\n                    removeColumnAttribute(column, 'headerAttributes', 'style', leftRegExp);\n                    removeColumnAttribute(column, 'headerAttributes', 'style', rightRegExp);\n                    removeColumnAttribute(column, 'footerAttributes', 'class', footerClassRegExp);\n                    removeColumnAttribute(column, 'footerAttributes', 'style', leftRegExp);\n                    removeColumnAttribute(column, 'footerAttributes', 'style', rightRegExp);\n                }\n            },\n            _setStickyStyles: function (columns, stickyWidths) {\n                var that = this;\n                var i;\n                var j;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var rows = that.tbody.children(':not(.k-detail-row)');\n                var row;\n                var column;\n                var columnIndex;\n                var left;\n                var right;\n                var header;\n                var footer;\n                var groupHeader;\n                var cell;\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    left = stickyWidths.left[i];\n                    right = stickyWidths.right[i];\n                    columnIndex = leafsCols.indexOf(column);\n                    header = that._getColumnHeader(column);\n                    header.addClass(STICKY_HEADER_CLASS);\n                    if (column.headerAttributes['class'] && column.headerAttributes['class'].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                        header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                    }\n                    setLeftAndRightStyles(header, left, right);\n                    if (column.columns) {\n                        continue;\n                    }\n                    if (that.footer) {\n                        footer = that.footer.find('.k-grid-footer-wrap tr.k-footer-template').children().filter(':not(.k-group-cell,.k-hierarchy-cell)').eq(columnIndex);\n                        footer.addClass(STICKY_FOOTER_CLASS);\n                        setLeftAndRightStyles(footer, left, right);\n                    }\n                    for (j = 0; j < rows.length; j++) {\n                        row = $(rows[j]);\n                        if (row.hasClass('k-grouping-row')) {\n                            groupHeader = row.find('.' + column.groupHeaderColumnTemplateClass);\n                            groupHeader.addClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(groupHeader, left, right);\n                        } else {\n                            cell = row.children().filter(':not(.k-group-cell,.k-hierarchy-cell)').eq(columnIndex);\n                            cell.addClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(cell, left, right);\n                        }\n                    }\n                }\n            },\n            _removeStickyStyles: function (columns) {\n                var that = this;\n                var i;\n                var j;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var rows = that.tbody.children(':not(.k-detail-row)');\n                var row;\n                var column;\n                var columnIndex;\n                var header;\n                var footer;\n                var groupHeader;\n                var cell;\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    columnIndex = leafsCols.indexOf(column);\n                    header = that._getColumnHeader(column);\n                    header.removeClass(STICKY_HEADER_CLASS);\n                    header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                    setLeftAndRightStyles(header, '', '');\n                    if (column.columns) {\n                        that._removeStickyStyles(column.columns);\n                        continue;\n                    }\n                    if (column.footerTemplate && that.footer) {\n                        footer = that.footer.find('.k-grid-footer-wrap tr.k-footer-template').children().filter(':not(.k-group-cell,.k-hierarchy-cell)').eq(columnIndex);\n                        footer.removeClass(STICKY_FOOTER_CLASS);\n                        setLeftAndRightStyles(footer, '', '');\n                    }\n                    for (j = 0; j < rows.length; j++) {\n                        row = $(rows[j]);\n                        if (row.hasClass('k-grouping-row')) {\n                            groupHeader = row.find('.' + column.groupHeaderColumnTemplateClass);\n                            groupHeader.removeClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(groupHeader, '', '');\n                        } else {\n                            cell = row.children().filter(':not(.k-group-cell,.k-hierarchy-cell)').eq(columnIndex);\n                            cell.removeClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(cell, '', '');\n                        }\n                    }\n                }\n            },\n            _getColumnHeader: function (column) {\n                var that = this;\n                var header = $('#' + column.headerAttributes.id).length ? $('#' + column.headerAttributes.id) : $('#' + that._cellId);\n                return header;\n            },\n            _sumColumnWidth: function (column) {\n                var that = this;\n                var width = 0;\n                if (column.columns) {\n                    width = that._sumCurrentWidths(leafColumns([column]));\n                } else {\n                    width = that._sumCurrentWidths([column]);\n                }\n                return width;\n            },\n            _sumCurrentWidths: function (cols) {\n                var that = this;\n                var width = 0;\n                var colWidth = 0;\n                var col;\n                var header;\n                var i;\n                var length = cols.length;\n                for (i = 0; i < length; i++) {\n                    col = cols[i];\n                    header = that._getColumnHeader(col);\n                    if (!col.hidden && columnMatchesMedia(col)) {\n                        colWidth = header.is(':visible') ? header.outerWidth() : col.width;\n                        width += colWidth ? parseInt(colWidth, 10) : 0;\n                    }\n                }\n                return width;\n            },\n            _belongsToGrid: function (element) {\n                return this.wrapper[0] === element.closest(WRAPPER)[0];\n            },\n            getSelectedData: function () {\n                var that = this;\n                var selectedRanges = that.selectable.selectedRanges();\n                var selectedRangeNames = Object.keys(selectedRanges);\n                var selectedSingleItems = that.selectable.selectedSingleItems();\n                var result = [];\n                var visibleColumns = visibleLeafColumns(that.columns);\n                for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                    result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns));\n                }\n                if (selectedSingleItems.length) {\n                    result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns));\n                }\n                return result;\n            },\n            exportSelectedToExcel: function (includeHeaders) {\n                if (!kendo.excel || !kendo.ooxml) {\n                    throw new Error('The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.');\n                }\n                var that = this;\n                var excel = this.options.excel || {};\n                var visibleColumns = visibleLeafColumns(that.columns);\n                var exporter = new kendo.excel.ExcelExporter({});\n                var columnHandler = function () {\n                    return { autoWidth: true };\n                };\n                var book = {\n                    sheets: [{\n                            columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                            rows: [],\n                            freezePane: {},\n                            filter: false\n                        }]\n                };\n                var selectedRanges = that.selectable.selectedRanges();\n                var selectedRangeNames = Object.keys(selectedRanges);\n                var selectedSingleItems = that.selectable.selectedSingleItems();\n                var idx;\n                var exportData = [];\n                var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n                var sortHandler = exportDataSort.bind(that);\n                for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                    exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n                }\n                if (exportData.length) {\n                    that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n                }\n                exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n                if (exportData.length) {\n                    if (hasLockedCols) {\n                        exportData = exportData.sort(sortHandler);\n                    }\n                    that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n                }\n                if (book.sheets[0].rows.length) {\n                    var workbook = new kendo.ooxml.Workbook(book);\n                    if (!workbook.options) {\n                        workbook.options = {};\n                    }\n                    workbook.options.skipCustomHeight = true;\n                    workbook.toDataURLAsync().then(function (dataURI) {\n                        kendo.saveAs({\n                            dataURI: dataURI,\n                            fileName: book.fileName || excel.fileName,\n                            proxyURL: excel.proxyURL,\n                            forceProxy: excel.forceProxy\n                        });\n                    });\n                }\n            },\n            _addSingleSelectionRows: function (book, exporter, data, includeHeaders) {\n                var idx = 0;\n                var visibleColumns = visibleLeafColumns(this.columns);\n                var item;\n                for (idx = 0; idx < data.length; idx++) {\n                    item = data[idx];\n                    exporter.data = [item];\n                    this._setExporterColumns(exporter, visibleColumns, item);\n                    this._createExportRows(book, exporter, includeHeaders);\n                }\n            },\n            _addRangeSelectionRows: function (book, exporter, data, includeHeaders) {\n                var visibleColumns = visibleLeafColumns(this.columns);\n                exporter.data = data;\n                this._setExporterColumns(exporter, visibleColumns, data[0]);\n                this._createExportRows(book, exporter, includeHeaders);\n            },\n            _createExportRows: function (book, exporter, includeHeaders) {\n                book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n            },\n            _setExporterColumns: function (exporter, columns, item) {\n                exporter.columns = exporter.options.columns = $.map(columns.filter(function (col) {\n                    return Object.keys(item).indexOf(col.field) >= 0;\n                }), exporter._prepareColumn);\n            },\n            _mapSelectionToData: function (elements, visibleColumns, columnsFilter) {\n                var that = this;\n                var elementType = elements[0][0].nodeName;\n                var isRowSelection = elementType === 'TR';\n                var dataItem;\n                var result = {};\n                var element;\n                var curr;\n                var field;\n                var columnMapHandler = function (col) {\n                    var result = {};\n                    if (!col.field || columnsFilter && !columnsFilter(col)) {\n                        return;\n                    }\n                    result[col.field] = dataItem[col.field];\n                    return result;\n                };\n                var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n                var column;\n                for (var i = 0; i < elements.length; i++) {\n                    element = elements[i];\n                    dataItem = that.dataItem(isRowSelection ? element : element.parent());\n                    if (isRowSelection) {\n                        result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                    } else {\n                        field = that._getCellField(element, hasLockedCols);\n                        if (!field) {\n                            continue;\n                        }\n                        curr = result[dataItem.uid];\n                        if (!curr) {\n                            curr = result[dataItem.uid] = {};\n                        }\n                        column = findColumnByField(visibleColumns, field);\n                        if (!column || columnsFilter && !columnsFilter(column)) {\n                            continue;\n                        }\n                        curr[field] = dataItem[field];\n                    }\n                }\n                return Object.keys(result).map(function (id) {\n                    result[id].uid = id;\n                    return result[id];\n                });\n            },\n            _getCellField: function (cell, hasLockedCols) {\n                var grid = this;\n                var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n                var fieldAttr = kendo.attr('field');\n                if (hasLockedCols) {\n                    return grid.element.find('.k-grid-header-' + (inLockedArea ? 'locked' : 'wrap') + ' th').eq(cell.index()).attr(fieldAttr);\n                } else {\n                    return grid.thead.find('th').eq(cell.index()).attr(fieldAttr);\n                }\n            },\n            _relatedRow: function (row) {\n                var lockedTable = this.lockedTable;\n                row = $(row);\n                if (!lockedTable) {\n                    return row;\n                }\n                var table = row.closest(this.table.add(this.lockedTable));\n                var index = table.find('>tbody>tr').index(row);\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n                return table.find('>tbody>tr').eq(index);\n            },\n            _relatedCell: function (cell) {\n                var lockedTable = this.lockedTable;\n                cell = $(cell);\n                if (!lockedTable) {\n                    return cell;\n                }\n                var table = cell.closest(this.table.add(this.lockedTable));\n                var index = table.find('>tbody>tr>td').index(cell);\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n                return table.find('>tbody>tr>td').index(index);\n            },\n            clearSelection: function () {\n                var that = this;\n                if (that.selectable && !that._checkBoxSelection) {\n                    that.selectable.clear();\n                }\n                if (that._checkBoxSelection) {\n                    that._deselectCheckRows(that.select());\n                    return;\n                }\n                if (that.options.persistSelection) {\n                    that._persistSelectedRows();\n                } else {\n                    that._selectedIds = {};\n                }\n                that.trigger(CHANGE);\n            },\n            select: function (items) {\n                var that = this, selectable = that.selectable, selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable), cell = selectableoptions.cell;\n                items = that.table.add(that.lockedTable).find(items);\n                if (items.length) {\n                    if (selectable && !selectable.options.multiple) {\n                        selectable.clear();\n                        items = items.first();\n                    }\n                    if (that._isLocked()) {\n                        items = items.add(items.map(function () {\n                            if (cell) {\n                                return that._relatedCell(this);\n                            } else {\n                                return that._relatedRow(this);\n                            }\n                        }));\n                    }\n                    if (selectable && !that._checkBoxSelection) {\n                        selectable.value(items);\n                    } else {\n                        that._checkRows(items);\n                        if (that.select().length === that.items().length) {\n                            that._toggleHeaderCheckState(true);\n                        }\n                        if (!cell) {\n                            that._persistSelectedRows();\n                        }\n                        that.trigger(CHANGE);\n                    }\n                    return;\n                }\n                return selectable ? selectable.value() : that.items().filter('.' + SELECTED);\n            },\n            _toggleHeaderCheckState: function (checked) {\n                var that = this;\n                if (checked) {\n                    that.thead.add(that.lockedHeader).find('tr ' + CHECKBOXINPUT).prop('checked', true).attr('aria-checked', true).attr('aria-label', 'Deselect all rows');\n                } else {\n                    that.thead.add(that.lockedHeader).find('tr ' + CHECKBOXINPUT).prop('checked', false).attr('aria-checked', false).attr('aria-label', 'Select all rows');\n                }\n            },\n            _uncheckCheckBoxes: function () {\n                var that = this;\n                var tables = that.table.add(that.lockedTable);\n                tables.find('tbody ' + CHECKBOXINPUT).attr('aria-checked', false).prop('checked', false).attr('aria-label', 'Select row');\n            },\n            _deselectCheckRows: function (items) {\n                var that = this;\n                items = that.table.add(that.lockedTable).find(items);\n                if (that._isLocked()) {\n                    items = items.add(items.map(function () {\n                        return that._relatedRow(this);\n                    }));\n                }\n                items.each(function () {\n                    $(this).removeClass(SELECTED).find(CHECKBOXINPUT).attr('aria-checked', false).prop('checked', false).attr('aria-label', 'Select row');\n                });\n                that._toggleHeaderCheckState(false);\n                that._persistSelectedRows();\n                that.trigger(CHANGE);\n            },\n            _checkRows: function (items) {\n                items.each(function () {\n                    $(this).addClass(SELECTED).find(CHECKBOXINPUT).prop('checked', true).attr('aria-label', 'Deselect row').attr('aria-checked', true);\n                });\n            },\n            _persistSelectedRows: function () {\n                var that = this, key, dataItem, allRows = that.items(), dataSourceOptions = that.dataSource.options, schema = dataSourceOptions.schema, modelId, selectedViewIds = {};\n                if (!schema || !schema.model || !that._data) {\n                    return;\n                }\n                modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n                if (!modelId) {\n                    return;\n                }\n                that.select().each(function () {\n                    dataItem = that.dataItem(this);\n                    selectedViewIds[dataItem[modelId]] = true;\n                });\n                for (var i = 0; i < allRows.length; i++) {\n                    dataItem = that.dataItem(allRows[i]);\n                    key = dataItem[modelId];\n                    if (selectedViewIds[key]) {\n                        that._selectedIds[key] = true;\n                    } else {\n                        delete that._selectedIds[key];\n                    }\n                }\n            },\n            selectedKeyNames: function () {\n                var that = this, ids = [];\n                for (var property in that._selectedIds) {\n                    ids.push(property);\n                }\n                ids.sort();\n                return ids;\n            },\n            _updateCurrentAttr: function (current, next) {\n                var headerId = $(current).data('headerId');\n                var nextId;\n                var descId;\n                $(current).removeClass(FOCUSED).closest('table').removeAttr('aria-activedescendant');\n                if (headerId) {\n                    headerId = headerId.replace(this._cellId, '');\n                    $(current).attr('id', headerId);\n                } else {\n                    $(current).removeAttr('id');\n                }\n                nextId = next.attr('id');\n                if (nextId != this._cellId) {\n                    next.data('headerId', nextId);\n                }\n                if (next.is('th')) {\n                    descId = nextId;\n                } else {\n                    next.attr('id', this._cellId);\n                }\n                next.addClass(FOCUSED).closest('table').attr('aria-activedescendant', descId || this._cellId);\n                this._current = next;\n            },\n            _scrollCurrent: function () {\n                var current = this._current;\n                var scrollable = this.options.scrollable;\n                if (!current || !scrollable) {\n                    return;\n                }\n                var row = current.parent();\n                var tableContainer = row.closest('table').parent();\n                var isInLockedContainer = tableContainer.is('.k-grid-content-locked,.k-grid-header-locked');\n                var isInContent = tableContainer.is('.k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap');\n                var scrollableContainer = $(this.content).find('>.k-virtual-scrollable-wrap').addBack().last()[0];\n                if (isInContent) {\n                    if (this.virtualScroll) {\n                        var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                        if (this.virtualScroll.rows) {\n                            this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                            this.virtualScrollable.scrollIntoView(row);\n                        } else {\n                            this._rowVirtualIndex = rowIndex;\n                            this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                        }\n                    } else {\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                }\n                if (this.lockedContent) {\n                    this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n                }\n                if (!isInLockedContainer) {\n                    this._scrollTo(current[0], scrollableContainer);\n                }\n            },\n            current: function (next) {\n                return this._setCurrent(next, true);\n            },\n            _setCurrent: function (next, preventTrigger, preventScroll) {\n                var current = this._current;\n                next = $(next);\n                if (next.length) {\n                    if (!current || current[0] !== next[0]) {\n                        var parent = next.parent();\n                        var siblings = parent.children(DATA_CELL);\n                        var colspan = parseInt(parent.children().first().attr('colspan'), 10);\n                        if (this._hasVirtualColumns()) {\n                            this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                        }\n                        this._updateCurrentAttr(current, next);\n                        if (!preventScroll) {\n                            this._scrollCurrent();\n                        }\n                        if (!preventTrigger) {\n                            this.trigger(NAVIGATE, { element: next });\n                        }\n                    }\n                }\n                if (next && next.length) {\n                    this._lastCellIndex = next.parent().children(DATA_CELL).index(next);\n                }\n                return this._current;\n            },\n            _removeCurrent: function () {\n                if (this._current) {\n                    this._current.removeClass(FOCUSED);\n                    this._current = null;\n                }\n            },\n            _scrollTo: function (element, container) {\n                var elementToLowercase = element.tagName.toLowerCase();\n                var isHorizontal = elementToLowercase === 'td' || elementToLowercase === 'th';\n                var table = $(element).closest('table')[0];\n                var elementOffsetDir = element[isHorizontal ? 'offsetWidth' : 'offsetHeight'];\n                var containerScroll = container[isHorizontal ? 'scrollLeft' : 'scrollTop'];\n                var containerOffsetDir = container[isHorizontal ? 'clientWidth' : 'clientHeight'];\n                var elementOffset = $(element).css('position') === 'relative' && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? 'offsetLeft' : 'offsetTop'];\n                var bottomDistance = elementOffset + elementOffsetDir;\n                var result = 0;\n                var ieCorrection = 0;\n                var firefoxCorrection = 0;\n                if (isRtl && isHorizontal) {\n                    if (browser.msie || browser.edge) {\n                        ieCorrection = table.offsetLeft;\n                    } else if (browser.mozilla || browser.webkit && browser.version > 85) {\n                        firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                    }\n                }\n                containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (bottomDistance > containerScroll + containerOffsetDir) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = bottomDistance - containerOffsetDir;\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n                result = Math.abs(result + ieCorrection) + firefoxCorrection;\n                container[isHorizontal ? 'scrollLeft' : 'scrollTop'] = result;\n            },\n            _navigatable: function () {\n                var that = this;\n                if (!that.options.navigatable) {\n                    return;\n                }\n                var dataTables = that.table.add(that.lockedTable);\n                var headerTables = that.thead.parent().add($('>table', that.lockedHeader));\n                var tables = dataTables;\n                if (that.options.scrollable) {\n                    tables = tables.add(headerTables);\n                    headerTables.attr(TABINDEX, -1);\n                }\n                this._navigatableTables = tables;\n                this._headertables = headerTables;\n                tables.off('mousedown' + NS + ' focus' + NS + ' focusout' + NS + ' keydown' + NS);\n                headerTables.on('keydown' + NS, proxy(that._openHeaderMenu, that)).find('a.k-link').attr('tabIndex', -1);\n                dataTables.attr(TABINDEX, math.max(dataTables.attr(TABINDEX) || 0, 0)).on('keydown' + NS, '.k-detail-cell', function (e) {\n                    if (e.target !== e.currentTarget) {\n                        e.stopImmediatePropagation();\n                    }\n                });\n                tables.on(kendo.support.touch ? 'touchstart' + NS : 'mousedown' + NS, NAVROW + '>' + NAVCELL, proxy(tableClick, that)).on('focus' + NS, proxy(that._tableFocus, that)).on('focusout' + NS, proxy(that._tableBlur, that)).on('keydown' + NS, that, proxy(that._tableKeyDown, that));\n            },\n            _openHeaderMenu: function (e) {\n                if (e.altKey && e.keyCode == keys.DOWN) {\n                    this.current().find('.k-grid-filter, .k-header-column-menu').click();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _setTabIndex: function (table) {\n                this._navigatableTables.attr(TABINDEX, -1);\n                table.attr(TABINDEX, 0);\n            },\n            _tableFocus: function (e) {\n                var current = this.current();\n                var table = $(e.currentTarget);\n                if (current && current.is(':visible')) {\n                    current.addClass(FOCUSED);\n                } else {\n                    if (this._virtualColScroll) {\n                        this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                    } else {\n                        this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                    }\n                }\n                this._setTabIndex(table);\n            },\n            _tableBlur: function () {\n                var current = this.current();\n                if (current) {\n                    current.removeClass(FOCUSED);\n                }\n            },\n            _findCellIndex: function (columns, startIndex, reversed) {\n                var cellIndex;\n                var i;\n                if (reversed) {\n                    for (i = startIndex; i >= 0; i--) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (i = startIndex; i < columns.length; i++) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                }\n                return cellIndex;\n            },\n            _scrollToColumn: function (key, e) {\n                if (this._virtualCellIndex === undefined) {\n                    return false;\n                }\n                var that = this;\n                var cellIndex = that._virtualCellIndex;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var scrollWidth = 0;\n                if (key == (isRtl ? keys.LEFT : keys.RIGHT) && cellIndex !== leafsCols.length - 1) {\n                    cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n                } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                    cellIndex = that._findCellIndex(leafsCols, cellIndex - 1, true);\n                } else if (key == keys.HOME) {\n                    cellIndex = that._findCellIndex(leafsCols, 0);\n                } else if (key == keys.END) {\n                    cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n                }\n                for (var i = 0; i < cellIndex; i++) {\n                    scrollWidth += leafsCols[i].width;\n                }\n                that._virtualCellIndex = cellIndex;\n                if (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                kendo.scrollLeft(that.content, scrollWidth);\n                return true;\n            },\n            _tableKeyDown: function (e) {\n                var current = this.current();\n                var virtualScroll = this.virtualScroll || {};\n                var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n                var target = $(e.target);\n                var canHandle = !e.isDefaultPrevented() && !target.is(':button,a,:input,a>.k-icon');\n                if (requestInProgress) {\n                    e.preventDefault();\n                    return;\n                }\n                if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && this._scrollToColumn(e.keyCode, e)) {\n                    return;\n                }\n                if (!current) {\n                    current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n                }\n                if (!current.length) {\n                    return;\n                }\n                var handled = false;\n                if (canHandle && e.keyCode == keys.UP) {\n                    handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n                }\n                if (canHandle && e.keyCode == keys.DOWN) {\n                    handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n                }\n                if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                    handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n                }\n                if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                    handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n                }\n                if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                    handled = this._handlePageDown();\n                }\n                if (canHandle && e.keyCode == keys.PAGEUP) {\n                    handled = this._handlePageUp();\n                }\n                if (canHandle && e.keyCode == keys.HOME) {\n                    handled = this._handleHome(current, e.ctrlKey);\n                }\n                if (canHandle && e.keyCode == keys.END) {\n                    handled = this._handleEnd(current, e.ctrlKey);\n                }\n                if (canHandle && e.keyCode == keys.SPACEBAR) {\n                    handled = this._handleSpaceKey(current, e.ctrlKey);\n                }\n                if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                    handled = this._handleEnterKey(current, e.currentTarget, target);\n                }\n                if (e.keyCode == keys.ESC) {\n                    handled = this._handleEscKey(current, e.currentTarget);\n                }\n                if (e.keyCode == keys.TAB) {\n                    handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n                }\n                if (handled) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            },\n            _moveLeft: function (current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                var container = row.parent();\n                if (altKey) {\n                    this.collapseRow(row);\n                } else if (ctrlKey && current.is('.k-header') && this.options.reorderable) {\n                    this._moveColumn(current, true);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._prevHorizontalCell(container, current, index);\n                    if (!next[0]) {\n                        if (shiftKey) {\n                            if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.lockedTable[0], row[0])) {\n                                    next = next.prevAll(ITEMROW).first();\n                                }\n                                next = next.children(DATA_CELL).last();\n                            } else {\n                                next = this._tabNext(current, currentTable, true);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container);\n                            next = this._prevHorizontalCell(container, current, index);\n                            if (next[0] !== current[0]) {\n                                focusTable(container.parent(), true);\n                            }\n                        }\n                    }\n                    this._setCurrent(next);\n                }\n                return true;\n            },\n            _moveRight: function (current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                var container = row.parent();\n                if (altKey) {\n                    this.expandRow(row);\n                } else if (ctrlKey && current.is('.k-header') && this.options.reorderable) {\n                    this._moveColumn(current, false);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._nextHorizontalCell(container, current, index);\n                    if (!next[0]) {\n                        if (shiftKey) {\n                            if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.table[0], row[0])) {\n                                    next = next.nextAll(ITEMROW).first();\n                                }\n                                next = next.children(DATA_CELL).first();\n                            } else {\n                                next = this._tabNext(current, currentTable, false);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container, true);\n                            next = this._nextHorizontalCell(container, current, index);\n                            if (next[0] !== current[0]) {\n                                focusTable(container.parent(), true);\n                            }\n                        }\n                    }\n                    this._setCurrent(next);\n                }\n                return true;\n            },\n            _moveUp: function (current, shiftKey, ctrlKey) {\n                var container = current.parent().parent();\n                var next, cellIndex, index, oldIndex;\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.prevAll(ITEMROW).first();\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n                } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                    cellIndex = current.index();\n                    next = current.parent();\n                    next = next.prevAll(ITEMROW).first();\n                    index = this.tbody.children(ITEMROW).index(next);\n                    oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n                    if (index >= 0 && !this.trigger(ROWREORDER, {\n                            oldIndex: oldIndex,\n                            newIndex: index,\n                            row: current.parent()\n                        })) {\n                        this.reorderRows(current.parent(), index);\n                        next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                    }\n                } else {\n                    next = this._prevVerticalCell(container, current);\n                    if (!next[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container, true);\n                        next = this._prevVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(next);\n                this._lastCellIndex = tmp;\n                return true;\n            },\n            _moveDown: function (current, shiftKey, ctrlKey) {\n                var container = current.parent().parent();\n                var next, cellIndex, index, oldIndex;\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW).first();\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n                } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                    cellIndex = current.index();\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW).first();\n                    index = this.tbody.children(ITEMROW).index(next);\n                    oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n                    if (index >= 0 && !this.trigger(ROWREORDER, {\n                            oldIndex: oldIndex,\n                            newIndex: index,\n                            row: current.parent()\n                        })) {\n                        this.reorderRows(current.parent(), index + 1);\n                        next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                    }\n                } else {\n                    next = this._nextVerticalCell(container, current);\n                    if (!next[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container);\n                        next = this._nextVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(next);\n                this._lastCellIndex = tmp;\n                return true;\n            },\n            _moveColumn: function (current, isLeft) {\n                var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + ':visible');\n                var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n                var oldIndex = elements.index($(current));\n                var offset = isLeft ? -1 : 1;\n                var column = columns[oldIndex];\n                var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n                if (newIndex >= 0) {\n                    this.reorderColumn(newIndex, column, isLeft);\n                    this.trigger(COLUMNREORDER, {\n                        newIndex: newIndex,\n                        oldIndex: oldIndex,\n                        column: column\n                    });\n                }\n            },\n            _handleHome: function (current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children('tbody')[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var prev;\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(kendo.keys.HOME);\n                    return true;\n                }\n                if (ctrl) {\n                    if (this.lockedTable) {\n                        prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                    } else {\n                        prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                    }\n                } else if (isInBody || isInLockedTable) {\n                    if (isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    prev = row.children(DATA_CELL).first();\n                }\n                if (prev && prev.length) {\n                    this._setCurrent(prev);\n                    return true;\n                }\n            },\n            _handleEnd: function (current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children('tbody')[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var next;\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(kendo.keys.END);\n                    return true;\n                }\n                if (ctrl) {\n                    next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n                } else if (isInBody || isInLockedTable) {\n                    if (!isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    next = row.children(DATA_CELL).last();\n                }\n                if (next && next.length) {\n                    this._setCurrent(next);\n                    return true;\n                }\n            },\n            _handlePageDown: function () {\n                if (!this.options.pageable) {\n                    return false;\n                }\n                this.dataSource.page(this.dataSource.page() + 1);\n                return true;\n            },\n            _handlePageUp: function () {\n                if (!this.options.pageable) {\n                    return false;\n                }\n                this.dataSource.page(this.dataSource.page() - 1);\n                return true;\n            },\n            _handleTabKey: function (current, currentTable, shiftKey, target) {\n                var isInCell = this.options.editable && this._editMode() == 'incell';\n                var cell;\n                if (!isInCell || current.is('th') || (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                    return false;\n                }\n                cell = $(activeElement()).closest('.k-edit-cell');\n                if (cell[0] && cell[0] !== current[0]) {\n                    current = cell;\n                }\n                cell = this._tabNext(current, currentTable, shiftKey);\n                if (cell[0] === current[0]) {\n                    return false;\n                }\n                if (cell.length) {\n                    this._handleEditing(current, cell, cell.closest('table'));\n                    return true;\n                }\n                return false;\n            },\n            _handleEscKey: function (current, currentTable) {\n                var active = activeElement();\n                var isInCell = this._editMode() == 'incell';\n                if (!isInEdit(current)) {\n                    if (current.has(active).length) {\n                        focusTable(currentTable, true);\n                        return true;\n                    }\n                    return false;\n                }\n                if (isInCell) {\n                    this.closeCell(true);\n                } else {\n                    var currentIndex = $(current).parent().index();\n                    if (active) {\n                        active.blur();\n                    }\n                    this.cancelRow(true);\n                    if (currentIndex >= 0) {\n                        this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                    }\n                }\n                focusTable(currentTable, true);\n                return true;\n            },\n            _toggleCurrent: function (current, editable, hasDetails) {\n                var row = current.parent();\n                if (current.is('.k-command-cell')) {\n                    return false;\n                }\n                if (row.is('.k-grouping-row')) {\n                    row.find('.k-icon').first().click();\n                    return true;\n                }\n                if (!editable && hasDetails) {\n                    row.find('.k-icon').first().click();\n                    return true;\n                }\n                return false;\n            },\n            _handleSpaceKey: function (current, ctrlKey) {\n                var that = this;\n                if (!ctrlKey || !that.groupable || !current.hasClass('k-header')) {\n                    return;\n                }\n                var descriptors = that.groupable.descriptors();\n                var field = current.attr(kendo.attr('field'));\n                var aggregates = that.groupable.aggregates();\n                var label = current.attr(kendo.attr('title')) || field;\n                if (that.groupable._canDrag(current)) {\n                    descriptors.push({\n                        field: field,\n                        dir: 'asc',\n                        aggregates: aggregates || []\n                    });\n                    label += ' ' + that.options.messages.ungroupHeader;\n                } else {\n                    descriptors = $.grep(descriptors, function (item) {\n                        return item.field !== field;\n                    });\n                    label += ' ' + that.options.messages.groupHeader;\n                }\n                current.attr('aria-label', label);\n                that.dataSource.group(descriptors);\n                return true;\n            },\n            _handleEnterKey: function (current, currentTable, target) {\n                var editable = this.options.editable && this.options.editable.update !== false;\n                var container = target.closest('[role=gridcell]');\n                var hasDetails = this._hasDetails();\n                var link;\n                if (!target.is('table') && !$.contains(current[0], target[0])) {\n                    current = container;\n                }\n                if (current.is('th')) {\n                    link = current.find('.k-link');\n                    if (link.length) {\n                        link.click();\n                    } else {\n                        current.find(CHECKBOXINPUT).trigger('focus');\n                    }\n                    return true;\n                }\n                if (this._toggleCurrent(current, editable, hasDetails)) {\n                    return true;\n                }\n                var focusable = current.find(':kendoFocusable').first();\n                if (focusable[0] && !current.hasClass('k-edit-cell') && current.hasClass('k-state-focused')) {\n                    focusable.trigger('focus');\n                    return true;\n                }\n                if (editable && !target.is(':button,.k-button,textarea')) {\n                    if (!container[0]) {\n                        container = current;\n                    }\n                    this._handleEditing(container, false, currentTable);\n                    return true;\n                }\n                return false;\n            },\n            _nextHorizontalCell: function (table, current, originalIndex) {\n                var cells = current.nextAll(DATA_CELL);\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n                    if (rowIndex == -1) {\n                        if (current.hasClass('k-header')) {\n                            var headerRows = [];\n                            mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(':visible').first()), headerRows, 0, 0);\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n                            return current;\n                        }\n                        if (current.parent().hasClass('k-filter-row')) {\n                            return rows.last().children(DATA_CELL).first();\n                        }\n                        return rows.eq(originalIndex).children(DATA_CELL).first();\n                    }\n                }\n                return cells.first();\n            },\n            _prevHorizontalCell: function (table, current, originalIndex) {\n                var cells = current.prevAll(DATA_CELL);\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n                    if (rowIndex == -1) {\n                        if (current.hasClass('k-header')) {\n                            var headerRows = [];\n                            var columns = lockedColumns(this.columns);\n                            mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n                            return current;\n                        }\n                        if (current.parent().hasClass('k-filter-row')) {\n                            return rows.last().children(DATA_CELL).last();\n                        }\n                        return rows.eq(originalIndex).children(DATA_CELL).last();\n                    }\n                }\n                return cells.first();\n            },\n            _currentDataIndex: function (table, current) {\n                var index = current.attr('data-index');\n                if (!index) {\n                    return undefined;\n                }\n                var lockedColumnsCount = lockedColumns(this.columns).length;\n                if (lockedColumnsCount && !table.closest('div').hasClass('k-grid-content-locked')[0]) {\n                    return index - lockedColumnsCount;\n                }\n                return index;\n            },\n            _prevVerticalCell: function (container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                var index = this._currentDataIndex(container, current);\n                if (index || current.hasClass('k-header')) {\n                    cells = parentColumnsCells(current);\n                    return cells.eq(cells.length - 2);\n                }\n                index = Math.max(row.children(DATA_CELL).index(current), this._lastCellIndex || 0);\n                if (row.hasClass('k-filter-row')) {\n                    return leafDataCells(container).filter(isCellVisible).eq(index);\n                }\n                if (rowIndex == -1) {\n                    if (this._hasVirtualColumns()) {\n                        index = this._virtualCellIndex;\n                    }\n                    row = container.find('tr.k-filter-row:visible');\n                    if (!row[0]) {\n                        if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                            index--;\n                        }\n                        return leafDataCells(container).filter(isCellVisible).eq(index);\n                    }\n                } else {\n                    row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n                }\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n                return cells.eq(0);\n            },\n            _nextVerticalCell: function (container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                var index = this._currentDataIndex(container, current);\n                var virtualScroll = this.virtualScroll || {};\n                var colspan;\n                if (rowIndex != -1 && index === undefined && current.hasClass('k-header')) {\n                    return childColumnsCells(current).eq(1);\n                }\n                index = index ? parseInt(index, 10) : row.children(DATA_CELL).index(current);\n                index = Math.max(index, this._lastCellIndex || 0);\n                if (rowIndex == -1) {\n                    row = rows.eq(0);\n                    if (virtualScroll.columns) {\n                        colspan = parseInt(row.children().first().attr('colspan'), 10);\n                        index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                    }\n                    if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                        index++;\n                    }\n                } else {\n                    row = rows.eq(rowIndex + current[0].rowSpan);\n                }\n                var tmpIndex = index;\n                if (this._currentDataIndex(container, current) !== undefined) {\n                    var currentRowCells = row.children(':not(.k-group-cell):not(.k-hierarchy-cell)');\n                    var hiddenColumns = currentRowCells.filter(':hidden');\n                    for (var idx = 0, length = hiddenColumns.length; idx < length; idx++) {\n                        if (currentRowCells.index(hiddenColumns[idx]) < index) {\n                            tmpIndex--;\n                        }\n                    }\n                }\n                index = tmpIndex;\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n                return cells.eq(0);\n            },\n            _verticalContainer: function (container, up) {\n                var table = container.parent();\n                var length = this._navigatableTables.length;\n                var step = Math.floor(length / 2);\n                var index = inArray(table[0], this._navigatableTables);\n                if (up) {\n                    step *= -1;\n                }\n                index += step;\n                if (index >= 0 || index < length) {\n                    table = this._navigatableTables.eq(index);\n                }\n                return table.find(up ? '>thead' : '>tbody');\n            },\n            _horizontalContainer: function (container, right) {\n                var length = this._navigatableTables.length;\n                if (length <= 2) {\n                    return container;\n                }\n                var table = container.parent();\n                var index = inArray(table[0], this._navigatableTables);\n                index += right ? 1 : -1;\n                if (right && (index == 2 || index == length)) {\n                    return container;\n                }\n                if (!right && (index == 1 || index < 0)) {\n                    return container;\n                }\n                return this._navigatableTables.eq(index).find('thead, tbody');\n            },\n            _tabNext: function (current, currentTable, back) {\n                var switchRow = true;\n                var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(':visible').first();\n                if (!next.length) {\n                    next = current.parent();\n                    if (this.lockedTable) {\n                        switchRow = back && currentTable == this.lockedTable[0] || !back && currentTable == this.table[0];\n                        next = this._relatedRow(next);\n                    }\n                    if (switchRow) {\n                        if (this._hasVirtualColumns()) {\n                            return current;\n                        }\n                        next = next[back ? 'prevAll' : 'nextAll']('tr:not(.k-grouping-row):not(.k-detail-row):visible').first();\n                    }\n                    if (back) {\n                        next = next.children(DATA_CELL).last();\n                    } else {\n                        next = next.children(DATA_CELL).first();\n                    }\n                }\n                return next;\n            },\n            _handleEditing: function (current, next, table) {\n                var that = this, active = $(activeElement()), mode = that._editMode(), isIE = browser.msie, editContainer = that._editContainer, focusable, editable = that.options.editable && that.options.editable.update !== false, isEdited;\n                table = $(table);\n                if (mode == 'incell') {\n                    isEdited = current.hasClass('k-edit-cell');\n                } else {\n                    isEdited = current.parent().hasClass('k-grid-edit-row');\n                }\n                if (that.editable) {\n                    if ($.contains(editContainer[0], active[0])) {\n                        active.trigger('blur');\n                        if (isIE) {\n                            active.trigger('blur');\n                        }\n                    }\n                    if (!that.editable) {\n                        focusTable(table);\n                        return;\n                    }\n                    if (that.editable.end()) {\n                        if (mode == 'incell') {\n                            that.closeCell();\n                        } else {\n                            that.saveRow();\n                            isEdited = true;\n                        }\n                    } else {\n                        if (mode == 'incell') {\n                            that._setCurrent(editContainer);\n                        } else {\n                            that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                        }\n                        focusable = editContainer.find(':kendoFocusable').first()[0];\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                        return;\n                    }\n                }\n                if (next) {\n                    that._setCurrent(next);\n                }\n                focusTable(table, true);\n                if (!editable) {\n                    return;\n                }\n                if (!isEdited && !next || next) {\n                    if (mode === INCELL) {\n                        if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                            that.editCell(that.current());\n                        }\n                    } else {\n                        that.editRow(that.current().parent());\n                    }\n                }\n            },\n            _wrapper: function () {\n                var that = this, table = that.table, height = that.options.height, width = that.options.width, wrapper = that.element;\n                if (!wrapper.is('div')) {\n                    wrapper = wrapper.wrap('<div/>').parent();\n                }\n                that.wrapper = wrapper.addClass('k-grid k-widget k-grid-display-block');\n                if (height) {\n                    that.wrapper.css(HEIGHT, height);\n                    table.css(HEIGHT, 'auto');\n                }\n                if (width) {\n                    that.wrapper.css('width', width);\n                }\n                that._initMobile();\n            },\n            _initMobile: function () {\n                var options = this.options;\n                var that = this;\n                this._isMobile = options.mobile === true && kendo.support.mobileOS || options.mobile === 'phone' || options.mobile === 'tablet';\n                if (this._isMobile) {\n                    var html = this.wrapper.addClass('k-grid-mobile').wrap('<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' + 'data-' + kendo.ns + 'init-widgets=\"false\"></div>').parent();\n                    this.pane = this._createPane(html);\n                    this.view = this.pane.view();\n                    if (options.height) {\n                        this.pane.element.parent().css(HEIGHT, options.height);\n                    } else {\n                        this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                    }\n                    this._editAnimation = 'slide';\n                    that.wrapper.on('transitionend' + NS, function (e) {\n                        e.stopPropagation();\n                    });\n                    that.wrapper.on('contextmenu' + NS, 'th a', function (e) {\n                        e.preventDefault();\n                        return false;\n                    });\n                    this.view.bind('showStart', function () {\n                        if (that._isLocked()) {\n                            that._updateTablesWidth();\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._syncLockedFooterHeight();\n                        }\n                    });\n                }\n            },\n            _createPane: function (html) {\n                var pane = kendo.Pane.wrap(html, {\n                    viewEngine: {\n                        viewOptions: {\n                            renderOnInit: true,\n                            wrap: false,\n                            wrapInSections: true,\n                            detachOnHide: false,\n                            detachOnDestroy: false\n                        }\n                    }\n                });\n                return pane;\n            },\n            _tbody: function () {\n                var that = this, table = that.table, tbody;\n                tbody = table.find('>tbody');\n                if (!tbody.length) {\n                    tbody = $('<tbody/>').appendTo(table);\n                }\n                that.tbody = tbody.attr('role', 'rowgroup');\n            },\n            _scrollable: function () {\n                var that = this, header, table, options = that.options, scrollable = options.scrollable, hasVirtualScroll = scrollable !== true && scrollable.virtual, virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null, scrollbar = !kendo.support.kineticScrollNeeded || virtualScroll && virtualScroll.rows ? kendo.support.scrollbar() : 0, headerWrap;\n                if (scrollable) {\n                    header = that.wrapper.children('.k-grid-header');\n                    if (!header[0]) {\n                        header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                    }\n                    header.css(isRtl ? 'padding-left' : 'padding-right', scrollable.virtual ? scrollbar + 1 : scrollbar);\n                    table = $('<table role=\"grid\" />');\n                    table.width(that.table[0].style.width);\n                    table.append(that.thead);\n                    header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n                    that.content = that.table.parent();\n                    that.virtualScroll = virtualScroll;\n                    if (that.content.is('.k-virtual-scrollable-wrap, ' + DOT + classNames.scrollContainer)) {\n                        that.content = that.content.parent();\n                    }\n                    if (!that.content.is('.k-grid-content, .k-virtual-scrollable-wrap')) {\n                        that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                    }\n                    if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                        that._createVirtualScrollable();\n                    }\n                    if (virtualScroll && virtualScroll.columns) {\n                        that.table.css({ width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns))) });\n                    }\n                    headerWrap = header.children('.k-grid-header-wrap');\n                    that.scrollables = headerWrap.add(that.content);\n                    var footer = that.wrapper.find('.k-grid-footer');\n                    if (footer.length) {\n                        that.scrollables = that.scrollables.add(footer.children('.k-grid-footer-wrap'));\n                    }\n                    headerWrap.off('scroll' + NS).on('scroll' + NS, function (e) {\n                        if (that._scrollLeft !== this.scrollLeft) {\n                            kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                        }\n                    });\n                    if (virtualScroll && virtualScroll.rows) {\n                        that.content.find('>.k-virtual-scrollable-wrap').off('scroll' + NS).on('scroll' + NS, function () {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                            if (that.lockedContent) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (virtualScroll.columns && isScrollingLeft) {\n                                that.refresh();\n                            }\n                        });\n                    } else {\n                        var endless = scrollable.endless;\n                        var originalPageSize = that.dataSource.options.pageSize;\n                        if (endless) {\n                            that._endlessPageSize = originalPageSize;\n                        }\n                        that.content.off('scroll' + NS).on('scroll' + NS, function (e) {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                            if (that.lockedContent && e.currentTarget == that.content[0]) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (endless) {\n                                if (this.scrollTop + this.clientHeight - this.scrollHeight >= -10 && !that._endlessFetchInProgress && that._endlessPageSize < that.dataSource.total()) {\n                                    that._skipRerenderItemsCount = that._endlessPageSize;\n                                    that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                    that.dataSource.options.endless = true;\n                                    that._endlessFetchInProgress = true;\n                                    that.dataSource.pageSize(that._endlessPageSize);\n                                }\n                            }\n                            if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                                that._virtualColScroll = true;\n                                that._cacheEditableState();\n                                that.refresh();\n                                that._restoreEditableState();\n                                that._virtualColScroll = false;\n                            }\n                        });\n                        var touchScroller = that.content.data('kendoTouchScroller');\n                        if (touchScroller) {\n                            touchScroller.destroy();\n                        }\n                        touchScroller = kendo.touchScroller(that.content);\n                        if (touchScroller && touchScroller.movable) {\n                            that.touchScroller = touchScroller;\n                            touchScroller.movable.bind('change', function (e) {\n                                kendo.scrollLeft(that.scrollables, -e.sender.x);\n                                if (that.lockedContent) {\n                                    that.lockedContent.scrollTop(-e.sender.y);\n                                }\n                            });\n                            that.one(DATABOUND, function (e) {\n                                e.sender.wrapper.addClass('k-grid-backface');\n                            });\n                        }\n                    }\n                }\n            },\n            _createVirtualScrollable: function () {\n                var that = this;\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.destroy();\n                }\n                that.virtualScrollable = new VirtualScrollable(that.content, {\n                    dataSource: that.dataSource,\n                    itemHeight: function () {\n                        return that._averageRowHeight();\n                    },\n                    page: function () {\n                        that._restoreEditableState();\n                    },\n                    scroll: function () {\n                        that._focusEditable();\n                    },\n                    loadStart: function () {\n                        that._progress(true);\n                    },\n                    loadEnd: function () {\n                        that._progress(false);\n                    }\n                });\n                that.virtualScrollable.bind(PAGING, proxy(that._onVirtualPaging, that));\n            },\n            _onVirtualPaging: function () {\n                var that = this;\n                that._cacheEditableState();\n                if (that._isVirtualIncellEditable()) {\n                    that._shouldClearEditableState = false;\n                    that.closeCell();\n                    that._shouldClearEditableState = true;\n                }\n            },\n            _isVirtualEditable: function () {\n                return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n            },\n            _isVirtualInlineEditable: function () {\n                return this.virtualScrollable && this._editMode() === INLINE;\n            },\n            _isVirtualIncellEditable: function () {\n                return this.virtualScrollable && this._editMode() === INCELL;\n            },\n            _isVirtualPopupEditable: function () {\n                return this.virtualScrollable && this._editMode() === 'popup';\n            },\n            _hasVirtualColumns: function () {\n                return (this.virtualScroll || {}).columns ? true : false;\n            },\n            _scrollVirtualWrapper: function () {\n                var that = this;\n                var scrollable = that.virtualScrollable;\n                if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                    if (scrollable._isScrolledToBottom()) {\n                        scrollable._scrollWrapperToBottom();\n                    } else if (scrollable._isScrolledToTop()) {\n                        scrollable._scrollWrapperToTop();\n                    }\n                }\n            },\n            _scrollVirtualWrapperOnColumnResize: function () {\n                var virtualScrollable = this.virtualScrollable;\n                if (virtualScrollable) {\n                    virtualScrollable._scrollWrapperOnColumnResize();\n                }\n            },\n            _restoreEditableState: function () {\n                var that = this;\n                var editableState = that._editableState || {};\n                var editedModel = editableState.model;\n                var dataSource = that.dataSource;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var row;\n                var cell;\n                if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                    if (that._editMode() === INLINE) {\n                        that._shouldClearEditableState = false;\n                        that.editRow(editedModel);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    } else if (that._editMode() === INCELL) {\n                        row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                        cell = $(row).children(attrEquals(FIELD, editableState.field));\n                        if (cell[0]) {\n                            that._shouldClearEditableState = false;\n                            that.editCell(cell);\n                            if (!virtualColumns) {\n                                that._focusEditable();\n                            }\n                        }\n                    }\n                }\n                that._shouldClearEditableState = true;\n            },\n            _focusEditable: function () {\n                var that = this;\n                var editedField = (that._editableState || {}).field;\n                var editContainer = that._editContainer;\n                if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                    if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger('focus');\n                    } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(FOCUSABLE).eq(0).trigger('focus');\n                    }\n                }\n            },\n            _canFocusEditable: function () {\n                var that = this;\n                var result = (that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) && (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer));\n                return result;\n            },\n            _cacheEditableState: function () {\n                var that = this;\n                var editContainer = that._editContainer;\n                var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var active;\n                var widget;\n                if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                    that._clearEditableState();\n                    active = $(activeElement());\n                    if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                        active.change();\n                        widget = kendo.widgetInstance(active, kendo.ui);\n                        if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                            widget.value(active.val());\n                            widget.trigger(CHANGE);\n                        }\n                    }\n                    if (that._editMode() === INLINE) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: active.closest('[' + kendo.attr(CONTAINER_FOR) + ']').attr(kendo.attr(CONTAINER_FOR))\n                        };\n                    } else if (that._editMode() === INCELL) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: editContainer.attr(kendo.attr(FIELD))\n                        };\n                    }\n                }\n            },\n            _clearSortClasses: function () {\n                var that = this, content = that.content || that.table, lockedContent = that.lockedContent;\n                if (content) {\n                    content.find(COLGROUP).removeClass(SORTED_CLASS);\n                }\n                if (lockedContent) {\n                    lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n                }\n            },\n            _clearEditableState: function () {\n                var that = this;\n                if (that.virtualScrollable || that.virtualScroll && that._hasVirtualColumns()) {\n                    that._editableState = null;\n                }\n            },\n            _destroyVirtualScrollable: function () {\n                var that = this;\n                that._clearEditableState();\n                if (that.virtualScrollable && that.virtualScrollable.element) {\n                    that.virtualScrollable.destroy();\n                }\n                that.virtualScrollable = null;\n            },\n            _renderNoRecordsContent: function () {\n                var that = this;\n                if (that.options.noRecords) {\n                    var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n                    if (noRecordsElement.length) {\n                        that.angular('cleanup', function () {\n                            return { elements: noRecordsElement.get() };\n                        });\n                        noRecordsElement.remove();\n                    }\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        noRecordsElement = $(that.noRecordsTemplate({})).insertAfter(that.table);\n                        that.angular('compile', function () {\n                            return {\n                                elements: noRecordsElement.get(),\n                                data: [{}]\n                            };\n                        });\n                    }\n                }\n            },\n            _setContentWidth: function (scrollLeft) {\n                var that = this, hiddenDivClass = 'k-grid-content-expander', hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>', resizable = that.resizable, expander;\n                if (that.options.scrollable && that.wrapper.is(':visible')) {\n                    expander = that.table.parent().children('.' + hiddenDivClass);\n                    that._setContentWidthHandler = proxy(that._setContentWidth, that);\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        if (!expander[0]) {\n                            expander = $(hiddenDiv).appendTo(that.table.parent());\n                            if (resizable) {\n                                resizable.bind('resize', that._setContentWidthHandler);\n                            }\n                        }\n                        if (that.thead) {\n                            expander.width(that.thead.width());\n                            if (!isNaN(parseFloat(scrollLeft, 10))) {\n                                kendo.scrollLeft(that.content, scrollLeft);\n                            }\n                        }\n                    } else if (expander[0]) {\n                        expander.remove();\n                        if (resizable) {\n                            resizable.unbind('resize', that._setContentWidthHandler);\n                        }\n                    }\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                        that.table[0].style.width = '1px';\n                    }\n                }\n            },\n            _applyLockedContainersWidth: function () {\n                if (this.options.scrollable && this.lockedHeader) {\n                    var headerTable = this.thead.parent(), headerWrap = headerTable.parent(), contentWidth = this.wrapper[0].clientWidth, groups = this._groups(), scrollbar = kendo.support.scrollbar(), cols = this.lockedHeader.find('>table>colgroup>col:not(.k-group-col, .k-hierarchy-col)'), nonLockedCols = headerTable.find('>colgroup>col:not(.k-group-col, .k-hierarchy-col)'), width = columnsWidth(cols), nonLockedColsWidth = columnsWidth(nonLockedCols), footerWrap;\n                    if (groups > 0) {\n                        width += outerWidth(this.lockedHeader.find('.k-group-cell').first()) * groups;\n                    }\n                    if (width >= contentWidth) {\n                        width = contentWidth - 3 * scrollbar;\n                    }\n                    this.lockedHeader.add(this.lockedContent).width(width);\n                    headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + 'px';\n                    headerTable.add(this.table).width(nonLockedColsWidth);\n                    if (this.virtualScrollable && !isIE11) {\n                        contentWidth -= scrollbar;\n                    }\n                    this.content[0].style.width = contentWidth - width - 1 + 'px';\n                    if (this.lockedFooter && this.lockedFooter.length) {\n                        this.lockedFooter.width(width);\n                        footerWrap = this.footer.find('.k-grid-footer-wrap');\n                        footerWrap[0].style.width = headerWrap[0].clientWidth + 'px';\n                        footerWrap.children().first().width(nonLockedColsWidth);\n                    }\n                }\n            },\n            _setContentHeight: function () {\n                var that = this, options = that.options, height, header = that.wrapper.children('.k-grid-header'), scrollbar = kendo.support.scrollbar();\n                var scrollableHeight = (options.scrollable || {}).height;\n                if (options.scrollable && that.wrapper.is(':visible')) {\n                    if (scrollableHeight && that.content[0].style.height === '') {\n                        that.content[0].style.height = scrollableHeight;\n                    }\n                    height = that.wrapper.innerHeight();\n                    height -= outerHeight(header);\n                    if (that.pager && that.pager.element.is(':visible')) {\n                        height -= outerHeight(that.pager.element);\n                    }\n                    if (options.groupable) {\n                        height -= outerHeight(that.wrapper.children('.k-grouping-header'));\n                    }\n                    if (options.toolbar) {\n                        height -= outerHeight(that.wrapper.children('.k-grid-toolbar'));\n                    }\n                    if (that.footerTemplate) {\n                        height -= outerHeight(that.wrapper.children('.k-grid-footer'));\n                    }\n                    var isGridHeightSet = function (el) {\n                        var initialHeight, newHeight;\n                        if (el[0].style.height) {\n                            return true;\n                        } else {\n                            initialHeight = el.height();\n                        }\n                        el.height('auto');\n                        newHeight = el.height();\n                        if (initialHeight != newHeight) {\n                            el.height('');\n                            return true;\n                        }\n                        el.height('');\n                        return false;\n                    };\n                    if (isGridHeightSet(that.wrapper)) {\n                        if (height > scrollbar * 2) {\n                            if (that.lockedContent) {\n                                scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                                that.lockedContent.height(height - scrollbar);\n                            }\n                            that.content.height(height);\n                        } else {\n                            that.content.height(scrollbar * 2 + 1);\n                        }\n                    }\n                }\n            },\n            _averageRowHeight: function () {\n                var that = this, itemsCount = that._items(that.tbody, true).length, rowHeight = that._rowHeight;\n                if (itemsCount === 0) {\n                    return rowHeight;\n                }\n                if (!that._rowHeight) {\n                    that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                    that._sum = rowHeight;\n                    that._measures = 1;\n                }\n                var currentRowHeight = outerHeight(that.table) / itemsCount;\n                if (rowHeight !== currentRowHeight) {\n                    that._measures++;\n                    that._sum += currentRowHeight;\n                    that._rowHeight = that._sum / that._measures;\n                }\n                return rowHeight;\n            },\n            _dataSource: function () {\n                var that = this, options = that.options, pageable, dataSource = options.dataSource;\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n                if (isPlainObject(dataSource)) {\n                    extend(dataSource, {\n                        table: that.table,\n                        fields: that.columns\n                    });\n                    pageable = options.pageable;\n                    if (isPlainObject(pageable) && pageable.pageSize !== undefined) {\n                        dataSource.pageSize = pageable.pageSize;\n                    }\n                }\n                if (that.dataSource && that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler).unbind(SORT, that._sortHandler);\n                } else {\n                    that._refreshHandler = proxy(that.refresh, that);\n                    that._progressHandler = proxy(that._requestStart, that);\n                    that._errorHandler = proxy(that._error, that);\n                    that._sortHandler = proxy(that._clearSortClasses, that);\n                }\n                that.dataSource = DataSource.create(dataSource).bind(CHANGE, that._refreshHandler).bind(PROGRESS, that._progressHandler).bind(ERROR, that._errorHandler).bind(SORT, that._sortHandler);\n            },\n            _error: function () {\n                this._progress(false);\n            },\n            _requestStart: function () {\n                this._progress(true);\n            },\n            _modelChange: function (e) {\n                var that = this, tbody = that.tbody, model = e.model, row = that.tbody.find('tr[' + kendo.attr('uid') + '=' + model.uid + ']'), relatedRow, cell, column, isAlt = row.hasClass('k-alt'), tmp, idx = that._items(tbody).index(row), isLocked = that.lockedContent, selectable, selectableRow, childCells, originalCells, length;\n                if (isLocked) {\n                    relatedRow = that._relatedRow(row);\n                }\n                if (row.add(relatedRow).children('.k-edit-cell').length && !that.options.rowTemplate) {\n                    row.add(relatedRow).children(':not(.k-group-cell,.k-hierarchy-cell)').each(function () {\n                        cell = $(this);\n                        column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n                        if (column.field === e.field) {\n                            if (!cell.hasClass('k-edit-cell')) {\n                                that._displayCell(cell, column, model);\n                            } else {\n                                cell.addClass('k-dirty-cell');\n                            }\n                        }\n                    });\n                } else if (!row.hasClass('k-grid-edit-row')) {\n                    selectableRow = $().add(row);\n                    if (isLocked) {\n                        tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n                        selectableRow = selectableRow.add(relatedRow);\n                        relatedRow.replaceWith(tmp);\n                    }\n                    that.angular('cleanup', function () {\n                        return { elements: selectableRow.get() };\n                    });\n                    tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n                    row.replaceWith(tmp);\n                    tmp = that._items(tbody).eq(idx);\n                    var angularData = [{ dataItem: model }];\n                    if (isLocked) {\n                        row = row.add(relatedRow);\n                        relatedRow = that._relatedRow(tmp)[0];\n                        adjustRowHeight(tmp[0], relatedRow);\n                        tmp = tmp.add(relatedRow);\n                        angularData.push({ dataItem: model });\n                    }\n                    that.angular('compile', function () {\n                        return {\n                            elements: tmp.get(),\n                            data: angularData\n                        };\n                    });\n                    selectable = that.options.selectable;\n                    if ((selectable || that._checkBoxSelection) && row.hasClass('k-state-selected')) {\n                        that.select(tmp);\n                    }\n                    originalCells = selectableRow.children(':not(.k-group-cell,.k-hierarchy-cell)');\n                    childCells = tmp.children(':not(.k-group-cell,.k-hierarchy-cell)');\n                    for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                        column = that.columns[idx];\n                        cell = childCells.eq(idx);\n                        if (selectable && originalCells.eq(idx).hasClass('k-state-selected')) {\n                            cell.addClass('k-state-selected');\n                        }\n                    }\n                    that.trigger('itemChange', {\n                        item: tmp,\n                        data: model,\n                        ns: ui\n                    });\n                }\n            },\n            _pageable: function () {\n                var that = this, pagerWrap, pageable = that.options.pageable, navigatable = that.options.navigatable;\n                if (pageable) {\n                    pagerWrap = that.wrapper.children('div.k-grid-pager');\n                    if (!pagerWrap.length) {\n                        pagerWrap = $('<div class=\"k-pager-wrap k-grid-pager\"/>');\n                    }\n                    if (pageable.position === 'top') {\n                        pagerWrap.prependTo(that.wrapper).addClass('k-grid-pager-top');\n                    } else {\n                        pagerWrap.appendTo(that.wrapper);\n                    }\n                    if (that.pager) {\n                        that.pager.destroy();\n                    }\n                    if (typeof pageable === 'object' && pageable instanceof kendo.ui.Pager) {\n                        that.pager = pageable;\n                    } else {\n                        if (that.dataSource._groupPaging) {\n                            that.pager = new GroupsPager(pagerWrap, extend({}, pageable, {\n                                dataSource: that.dataSource,\n                                navigatable: navigatable\n                            }));\n                        } else {\n                            that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, {\n                                dataSource: that.dataSource,\n                                navigatable: navigatable\n                            }));\n                        }\n                    }\n                    that.pager.bind('pageChange', function (e) {\n                        if (that.trigger('page', { page: e.index })) {\n                            e.preventDefault();\n                        }\n                    });\n                    that._togglePagerVisibility();\n                }\n            },\n            _footer: function () {\n                var that = this, aggregates = that.dataSource.aggregates(), html = '', footerTemplate = that.footerTemplate, options = that.options, footerWrap, footer = that.footer || that.wrapper.find('.k-grid-footer');\n                if (footerTemplate) {\n                    html = $(that._wrapFooter(footerTemplate(aggregates)));\n                    if (footer.length) {\n                        var tmp = html;\n                        that.angular('cleanup', function () {\n                            return { elements: footer.get() };\n                        });\n                        footer.replaceWith(tmp);\n                        footer = that.footer = tmp;\n                    } else {\n                        if (options.scrollable) {\n                            footer = that.footer = options.pageable && options.pageable.position !== 'top' ? html.insertBefore(that.wrapper.children('div.k-grid-pager')) : html.appendTo(that.wrapper);\n                        } else {\n                            footer = that.footer = html.insertBefore(that.tbody);\n                        }\n                    }\n                    that.angular('compile', function () {\n                        return {\n                            elements: footer.find('td:not(.k-group-cell, .k-hierarchy-cell)').get(),\n                            data: map(that.columns, function (col) {\n                                return {\n                                    column: col,\n                                    aggregate: aggregates[col.field]\n                                };\n                            })\n                        };\n                    });\n                } else if (footer && !that.footer) {\n                    that.footer = footer;\n                }\n                if (footer.length) {\n                    if (options.scrollable) {\n                        footerWrap = footer.attr('tabindex', -1).children('.k-grid-footer-wrap');\n                        that.scrollables = $(that.scrollables.filter(function () {\n                            return !$(this).is('.k-grid-footer-wrap');\n                        }).toArray()).add(footerWrap);\n                    }\n                    if (that._footerWidth) {\n                        footer.find('table').css('width', that._footerWidth);\n                    }\n                    if (footerWrap) {\n                        var offset = kendo.scrollLeft(that.content);\n                        if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                            offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                        }\n                        kendo.scrollLeft(footerWrap, offset);\n                    }\n                }\n                if (that.lockedContent) {\n                    that._appendLockedColumnFooter();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedFooterHeight();\n                }\n            },\n            _wrapFooter: function (footerRow) {\n                var that = this, html = '', scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n                if (that.options.scrollable) {\n                    html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table><tbody>' + footerRow + '</tbody></table></div></div>');\n                    that._appendCols(html.find('table'));\n                    html.css(isRtl ? 'padding-left' : 'padding-right', scrollbar);\n                    return html;\n                }\n                return '<tfoot class=\"k-grid-footer\">' + footerRow + '</tfoot>';\n            },\n            _columnMenu: function () {\n                var that = this, menu, columns = leafColumns(that.columns), column, options = that.options, columnMenu = options.columnMenu, menuOptions, sortable, filterable, cells, hasMultiColumnHeaders = grep(that.columns, function (item) {\n                        return item.columns !== undefined;\n                    }).length > 0, hasLockableColumns = grep(that.columns, function (item) {\n                        return item.lockable !== false;\n                    }).length > 0, hasStickableColumns = grep(that.columns, function (item) {\n                        return item.stickable === true;\n                    }).length > 0, isMobile = this._isMobile, initCallback = function (e) {\n                        that.trigger(COLUMNMENUINIT, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, openCallback = function (e) {\n                        that.trigger(COLUMNMENUOPEN, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, closeCallback = function (element) {\n                        focusTable(element.closest('table'), true);\n                    }, stickCallback = function (e) {\n                        that.trigger(COLUMNSTICK, { column: e.column });\n                    }, unstickCallback = function (e) {\n                        that.trigger(COLUMNUNSTICK, { column: e.column });\n                    }, sortHandler = function (e) {\n                        if (that.trigger('sort', { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that.dataSource.options.endless = null;\n                                that._endlessPageSize = that.dataSource.options.pageSize;\n                                that.dataSource.pageSize(that.dataSource.options.pageSize);\n                            }\n                        }\n                    }, filterHandler = function (e) {\n                        if (that.trigger('filter', {\n                                filter: e.filter,\n                                field: e.field\n                            })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that.dataSource.options.endless = null;\n                                that._endlessPageSize = that.dataSource.options.pageSize;\n                                that.dataSource.pageSize(that.dataSource.options.pageSize);\n                            }\n                        }\n                    }, $angular = options.$angular;\n                if (columnMenu) {\n                    if (typeof columnMenu == 'boolean') {\n                        columnMenu = {};\n                    }\n                    that._setColumnsMediaVisibility(columns);\n                    cells = leafDataCells(that.thead);\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n                        var cell = cells.eq(idx);\n                        if (!column.command && (column.field || cell.attr('data-' + kendo.ns + 'field'))) {\n                            menu = cell.data('kendoColumnMenu');\n                            if (menu) {\n                                menu.destroy();\n                            }\n                            sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, { compare: (column.sortable || {}).compare }) : false;\n                            filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n                            if (column.filterable && column.filterable.dataSource) {\n                                filterable.forceUnique = false;\n                                filterable.checkSource = column.filterable.dataSource;\n                            }\n                            if (filterable) {\n                                filterable.format = column.format;\n                            }\n                            menuOptions = {\n                                dataSource: that.dataSource,\n                                values: column.values,\n                                columns: columnMenu.columns,\n                                sortable: sortable,\n                                filterable: filterable,\n                                messages: columnMenu.messages,\n                                owner: that,\n                                closeCallback: closeCallback,\n                                init: initCallback,\n                                open: openCallback,\n                                stick: stickCallback,\n                                unstick: unstickCallback,\n                                pane: that.pane,\n                                sort: sortHandler,\n                                filtering: filterHandler,\n                                filter: isMobile ? ':not(.k-column-active)' : '',\n                                hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                                hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                                encodeTitles: that.options.encodeTitles,\n                                componentType: columnMenu.componentType,\n                                appendTo: DOT + classNames.headerCellInner\n                            };\n                            if ($angular) {\n                                menuOptions.$angular = $angular;\n                            }\n                            cell.kendoColumnMenu(menuOptions);\n                        }\n                    }\n                }\n            },\n            _headerCells: function () {\n                return $(this.thead).find('th').filter(function () {\n                    var th = $(this);\n                    return !th.hasClass('k-group-cell') && !th.hasClass('k-hierarchy-cell');\n                });\n            },\n            _filterable: function () {\n                var that = this, columns = leafColumns(that.columns), filterMenu, cells, cell, filterInit = function (e) {\n                        that.trigger(FILTERMENUINIT, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, closeCallback = function (element) {\n                        focusTable(element.closest('table'), true);\n                    }, filterHandler = function (e) {\n                        if (that.trigger('filter', {\n                                filter: e.filter,\n                                field: e.field\n                            })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that.dataSource.options.endless = null;\n                                that._endlessPageSize = that.dataSource.options.pageSize;\n                                that.dataSource.pageSize(that.dataSource.options.pageSize);\n                            }\n                        }\n                    }, filterOpen = function (e) {\n                        that.trigger(FILTERMENUOPEN, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, filterable = that.options.filterable;\n                if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf('menu') == -1) {\n                    filterable = false;\n                }\n                if (filterable && !that.options.columnMenu) {\n                    cells = leafDataCells(that.thead);\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        cell = cells.eq(idx);\n                        if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr('data-' + kendo.ns + 'field'))) {\n                            filterMenu = cell.data('kendoFilterMenu');\n                            if (filterMenu) {\n                                filterMenu.destroy();\n                            }\n                            filterMenu = cell.data('kendoFilterMultiCheck');\n                            if (filterMenu) {\n                                filterMenu.destroy();\n                            }\n                            var columnFilterable = columns[idx].filterable;\n                            var options = extend({}, filterable, columnFilterable, {\n                                dataSource: that.dataSource,\n                                values: columns[idx].values,\n                                format: columns[idx].format,\n                                closeCallback: closeCallback,\n                                title: columns[idx].title || columns[idx].field,\n                                init: filterInit,\n                                open: filterOpen,\n                                pane: that.pane,\n                                change: filterHandler,\n                                appendTo: DOT + classNames.headerCellInner\n                            });\n                            if (columnFilterable && columnFilterable.messages) {\n                                options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                            }\n                            if (columnFilterable && columnFilterable.dataSource) {\n                                options.forceUnique = false;\n                                options.checkSource = columnFilterable.dataSource;\n                            }\n                            if (columnFilterable && columnFilterable.multi) {\n                                cell.kendoFilterMultiCheck(options);\n                            } else {\n                                cell.kendoFilterMenu(options);\n                            }\n                        }\n                    }\n                }\n            },\n            _filterRow: function () {\n                var that = this;\n                if (!that._hasFilterRow()) {\n                    return;\n                }\n                var settings;\n                var $angular = that.options.$angular;\n                var columns = leafColumns(that.columns), filterable = that.options.filterable, rowheader = that.thead.find('.k-filter-row'), filterHandler = function (e) {\n                        if (that.trigger('filter', {\n                                filter: e.filter,\n                                field: e.field\n                            })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that.dataSource.options.endless = null;\n                                that._endlessPageSize = that.dataSource.options.pageSize;\n                                that.dataSource.pageSize(that.dataSource.options.pageSize);\n                            }\n                        }\n                    };\n                this._updateHeader(this.dataSource.group().length);\n                for (var i = 0; i < columns.length; i++) {\n                    var suggestDataSource, col = columns[i], operators = that.options.filterable.operators, customDataSource = false, th = $('<th/>'), field = col.field;\n                    if (col.hidden) {\n                        th.hide();\n                    }\n                    rowheader.append(th);\n                    if (field && col.filterable !== false) {\n                        var cellOptions = col.filterable && col.filterable.cell || {};\n                        suggestDataSource = that.options.dataSource;\n                        if (suggestDataSource instanceof DataSource) {\n                            suggestDataSource = that.options.dataSource.options;\n                        }\n                        var messages = extend(true, {}, filterable.messages);\n                        if (col.filterable) {\n                            extend(true, messages, col.filterable.messages);\n                        }\n                        if (cellOptions.enabled === false) {\n                            th.html('&nbsp;');\n                            continue;\n                        }\n                        if (cellOptions.dataSource) {\n                            suggestDataSource = cellOptions.dataSource;\n                            customDataSource = true;\n                        }\n                        if (col.filterable && col.filterable.operators) {\n                            operators = col.filterable.operators;\n                        }\n                        settings = {\n                            column: col,\n                            dataSource: that.dataSource,\n                            suggestDataSource: suggestDataSource,\n                            customDataSource: customDataSource,\n                            field: field,\n                            messages: messages,\n                            values: col.values,\n                            template: cellOptions.template,\n                            delay: cellOptions.delay,\n                            inputWidth: cellOptions.inputWidth,\n                            suggestionOperator: cellOptions.suggestionOperator,\n                            minLength: cellOptions.minLength,\n                            dataTextField: cellOptions.dataTextField,\n                            operator: cellOptions.operator,\n                            operators: operators,\n                            showOperators: cellOptions.showOperators,\n                            change: filterHandler\n                        };\n                        if ($angular) {\n                            settings.$angular = $angular;\n                        }\n                        $('<span/>').attr(kendo.attr('field'), field).appendTo(th).kendoFilterCell(settings);\n                    } else {\n                        th.html('&nbsp;');\n                    }\n                    th.data('column', col);\n                }\n            },\n            _sortable: function () {\n                var that = this, columns = leafColumns(that.columns), column, sorterInstance, cell, sortable = that.options.sortable, sortHandler = function (e) {\n                        if (that.trigger('sort', { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                        }\n                    };\n                if (sortable) {\n                    var cells = leafDataCells(that.thead);\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.sortable !== false && !column.command && column.field) {\n                            cell = cells.eq(idx);\n                            sorterInstance = cell.data('kendoColumnSorter');\n                            if (sorterInstance) {\n                                sorterInstance.destroy();\n                            }\n                            cell.attr('data-' + kendo.ns + 'field', column.field).kendoColumnSorter(extend({}, sortable, column.sortable, {\n                                dataSource: that.dataSource,\n                                aria: true,\n                                filter: ':not(.k-column-active)',\n                                change: sortHandler\n                            }));\n                        }\n                    }\n                    cells = null;\n                }\n            },\n            _columns: function (columns) {\n                var that = this, table = that.table, encoded, cols = table.find('col'), lockedCols, headerRows = that.element.find('thead tr'), dataSource = that.options.dataSource, draggableColumns;\n                columns = columns.length ? columns : map(table.find('th:not(.k-group-cell):not(.k-hierarchy-cell)'), function (th, idx) {\n                    th = $(th);\n                    var sortable = th.attr(kendo.attr('sortable')), filterable = th.attr(kendo.attr('filterable')), type = th.attr(kendo.attr('type')), groupable = th.attr(kendo.attr('groupable')), field = th.attr(kendo.attr('field')), title = th.attr(kendo.attr('title')), menu = th.attr(kendo.attr('menu'));\n                    if (!field) {\n                        field = th.text().replace(/\\s|[^A-z0-9]/g, '');\n                    }\n                    return {\n                        field: field,\n                        type: type,\n                        title: title,\n                        sortable: sortable !== 'false',\n                        filterable: filterable !== 'false',\n                        groupable: groupable !== 'false',\n                        menu: menu !== 'false',\n                        template: th.attr(kendo.attr('template')),\n                        width: cols.eq(idx).css('width')\n                    };\n                });\n                encoded = !(that.table.find('tbody tr').length > 0 && (!dataSource || !dataSource.transport));\n                if (that.options.scrollable) {\n                    var initialColumns = columns;\n                    lockedCols = lockedColumns(columns);\n                    columns = nonLockedColumns(columns);\n                    if (lockedCols.length > 0 && columns.length === 0) {\n                        throw new Error('There should be at least one non locked column');\n                    }\n                    normalizeHeaderCells(that.element.find('tr:has(th)').first(), initialColumns);\n                    columns = lockedCols.concat(columns);\n                }\n                if (headerRows.length && columns.length) {\n                    that._updateColumnIDs(columns, headerRows.first());\n                }\n                that.columns = normalizeColumns(columns, encoded);\n                if ($.grep(leafColumns(that.columns), function (col) {\n                        return col.selectable;\n                    }).length) {\n                    that._selectedIds = {};\n                    that._checkBoxSelection = true;\n                    that.wrapper.on(CLICK + NS, 'tbody > tr ' + CHECKBOXINPUT, proxy(that._checkboxClick, that));\n                    that.wrapper.on(CLICK + NS, 'thead > tr ' + CHECKBOXINPUT, proxy(that._headerCheckboxClick, that));\n                }\n                draggableColumns = $.grep(leafColumns(that.columns), function (col) {\n                    return col.draggable;\n                });\n                if (draggableColumns.length) {\n                    that._hasDragHandleColumn = true;\n                    for (var i = 0; i < draggableColumns.length; i++) {\n                        draggableColumns[i].headerAttributes = $.extend({ 'aria-label': that.options.messages.dragHandleLabel }, draggableColumns[i].headerAttributes);\n                    }\n                }\n                that._foreignKeyBindings(that.columns);\n            },\n            _foreignKeyBindings: function (columns) {\n                var that = this;\n                var length = columns.length;\n                var column;\n                for (var i = 0; i < length; i++) {\n                    column = columns[i];\n                    if (column.dataSource) {\n                        that._fetchForeignKeyValues(column);\n                    }\n                }\n            },\n            _fetchForeignKeyValues: function (column) {\n                var that = this;\n                var promise = $.Deferred();\n                that._hasBoundForeignKey = true;\n                column.dataSource = DataSource.create(column.dataSource);\n                if (!that._foreignKeyPromises) {\n                    that._foreignKeyPromises = [];\n                }\n                that._foreignKeyPromises.push(promise);\n                column.dataSource.fetch().then(function () {\n                    var data = column.dataSource.data();\n                    column.values = data.map(function (item) {\n                        return {\n                            value: item[column.dataValueField],\n                            text: item[column.dataTextField]\n                        };\n                    });\n                    promise.resolve();\n                });\n            },\n            _updateColumnIDs: function (columns, tr) {\n                if (!columns.length) {\n                    return;\n                }\n                var ths = tr.find('th:not(.k-group-cell):not(.k-hierarchy-cell)');\n                var id;\n                for (var i = 0; i < columns.length; i++) {\n                    id = ths.eq(i).attr('id');\n                    if (id) {\n                        columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                    }\n                }\n                this._updateColumnIDs(childColumns(columns), tr.next());\n            },\n            _headerCheckboxClick: function (e) {\n                var that = this, checkBox = $(e.target), checked = checkBox.prop('checked');\n                if (!that._belongsToGrid(checkBox)) {\n                    return;\n                }\n                if (checked) {\n                    that.select(that.items());\n                } else {\n                    that.clearSelection();\n                }\n            },\n            _checkboxClick: function (e) {\n                var that = this, row = $(e.target).closest('tr'), isSelecting = !row.hasClass(SELECTED);\n                if (!that._belongsToGrid(row)) {\n                    return;\n                }\n                if (isSelecting) {\n                    that.select(row);\n                } else {\n                    that._deselectCheckRows(row);\n                }\n            },\n            _groups: function () {\n                var group = this.dataSource.group();\n                return group ? group.length : 0;\n            },\n            _tmpl: function (rowTemplate, columns, alt, skipGroupCells) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), paramName = settings.paramName, idx, length = columns.length, template, state = {\n                        storage: {},\n                        count: 0\n                    }, column, type, hasDetails = that._hasDetails(), className = [], groups = that._groups(), navigatable = that.options.navigatable;\n                var fieldAttr = kendo.attr('field');\n                var field;\n                var dirtyCellTemplate = '';\n                if (!rowTemplate) {\n                    rowTemplate = '<tr';\n                    if (alt) {\n                        className.push('k-alt');\n                    }\n                    className.push('k-master-row');\n                    if (className.length) {\n                        rowTemplate += ' class=\"' + className.join(' ') + '\"';\n                    }\n                    if (length) {\n                        rowTemplate += ' ' + kendo.attr('uid') + '=\"#=' + kendo.expr('uid', settings.paramName) + '#\"';\n                    }\n                    rowTemplate += ' role=\\'row\\'>';\n                    if (groups > 0 && !skipGroupCells) {\n                        rowTemplate += groupCells(groups);\n                    }\n                    if (hasDetails) {\n                        rowTemplate += '<td class=\"k-hierarchy-cell\" aria-expanded=\"false\"><a class=\"k-icon k-i-expand\" href=\"\\\\#\" ' + ARIALABEL + '=\"' + EXPAND + '\" tabindex=\"-1\"></a></td>';\n                    }\n                    for (idx = 0; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column.template;\n                        type = typeof template;\n                        field = column.field;\n                        if (that._editMode() === INCELL && field) {\n                            column.attributes = column.attributes || {};\n                            if (that.virtualScroll) {\n                                column.attributes[fieldAttr] = field;\n                            }\n                            dirtyCellTemplate = that._dirtyCellTemplate(field, paramName);\n                            column.attributes['class'] = column.attributes['class'] || '';\n                            if (column.attributes['class'].indexOf(dirtyCellTemplate) < 0) {\n                                column.attributes['class'] += dirtyCellTemplate;\n                            }\n                        }\n                        if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) {\n                            column.attributes = removeHiddenStyle(column.attributes);\n                        } else if (!column.colSpan && column.hidden) {\n                            column.attributes = addHiddenStyle(column.attributes);\n                        }\n                        if (column.command) {\n                            column.attributes = column.attributes || {};\n                            if (typeof column.attributes['class'] !== 'undefined') {\n                                column.attributes['class'] += ' k-command-cell';\n                            } else {\n                                column.attributes['class'] = 'k-command-cell';\n                            }\n                        }\n                        if (column.draggable) {\n                            column.attributes = column.attributes || {};\n                            if (typeof column.attributes['class'] !== 'undefined') {\n                                column.attributes['class'] += ' k-drag-cell k-touch-action-none';\n                            } else {\n                                column.attributes['class'] = 'k-drag-cell k-touch-action-none';\n                            }\n                            if (typeof column.attributes['aria-label'] === 'undefined') {\n                                column.attributes['aria-label'] = that.options.messages.dragHandleLabel;\n                            }\n                            if (typeof column.attributes.style !== 'undefined') {\n                                column.attributes.style += ' cursor: move;';\n                            } else {\n                                column.attributes.style = 'cursor: move;';\n                            }\n                        }\n                        rowTemplate += '<td' + stringifyAttributes(column.attributes);\n                        if (navigatable && !column.draggable) {\n                            rowTemplate += ' aria-describedby=\\'' + column.headerAttributes.id + '\\'';\n                        }\n                        if (column.colSpan) {\n                            if (column.colSpan > 1) {\n                                rowTemplate += ' ' + kendo.attr('virtual');\n                            }\n                            rowTemplate += ' colSpan=\\'' + column.colSpan + '\\'';\n                        }\n                        rowTemplate += ' role=\\'gridcell\\'>';\n                        rowTemplate += that._cellTmpl(column, state);\n                        rowTemplate += '</td>';\n                    }\n                    rowTemplate += '</tr>';\n                }\n                rowTemplate = kendo.template(rowTemplate, settings);\n                if (state.count > 0) {\n                    return proxy(rowTemplate, state.storage);\n                }\n                return rowTemplate;\n            },\n            _dirtyCellTemplate: function (field, paramName) {\n                var dirtyField;\n                if (field && paramName) {\n                    dirtyField = field.charAt(0) === '[' ? kendo.expr(field, paramName + '.dirtyFields') : paramName + '.dirtyFields[\\'' + field + '\\']';\n                    return '#= ' + paramName + ' && ' + paramName + '.dirty && ' + paramName + '.dirtyFields && ' + dirtyField + ' ? \\' k-dirty-cell\\' : \\'\\' #';\n                }\n                return '';\n            },\n            _headerCellText: function (column) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), template = column.headerTemplate, type = typeof template, text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || '';\n                if (type === FUNCTION) {\n                    text = kendo.template(template, settings)({});\n                } else if (type === STRING) {\n                    text = template;\n                }\n                return text;\n            },\n            _cellTmpl: function (column, state) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), template = column.template, paramName = settings.paramName, field = column.field, html = '', idx, length, format = column.format, type = typeof template, columnValues = column.values;\n                if (column.command) {\n                    if (isArray(column.command)) {\n                        for (idx = 0, length = column.command.length; idx < length; idx++) {\n                            if (column.command[idx].visible) {\n                                html += kendo.format('#= {0}(data)? \\'{1}\\':\\'\\' #', column.command[idx].visible, that._createButton(column.command[idx]).replace(templateHashRegExp, '\\\\#').replace(/'/gi, '\\\\\\''));\n                            } else {\n                                html += that._createButton(column.command[idx]).replace(templateHashRegExp, '\\\\#');\n                            }\n                        }\n                        return html;\n                    }\n                    return that._createButton(column.command).replace(templateHashRegExp, '\\\\#');\n                }\n                if (column.selectable) {\n                    return SELECTCOLUMNTMPL;\n                }\n                if (column.draggable) {\n                    return DRAGHANDLECOLUMNTMPL;\n                }\n                html += that._dirtyIndicatorTemplate(field, paramName);\n                if (type === FUNCTION) {\n                    state.storage['tmpl' + state.count] = template;\n                    html += '#=this.tmpl' + state.count + '(' + paramName + ')#';\n                    state.count++;\n                } else if (type === STRING) {\n                    html += template;\n                } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && 'value' in columnValues[0] && field) {\n                    html += '#var v =' + kendo.stringify(convertToObject(columnValues)).replace(templateHashRegExp, '\\\\#') + '#';\n                    html += '#var f = v[';\n                    if (!settings.useWithBlock) {\n                        html += paramName + '.';\n                    }\n                    html += field + ']#';\n                    html += '${f != null ? f : \\'\\'}';\n                } else {\n                    html += column.encoded ? '#:' : '#=';\n                    if (format) {\n                        html += 'kendo.format(\"' + format.replace(formatRegExp, '\\\\$1') + '\",';\n                    }\n                    if (field) {\n                        field = kendo.expr(field, paramName);\n                        html += field + '==null?\\'\\':' + field;\n                    } else {\n                        html += '\\'\\'';\n                    }\n                    if (format) {\n                        html += ')';\n                    }\n                    html += '#';\n                }\n                return html;\n            },\n            _dirtyIndicatorTemplate: function (field, paramName) {\n                var dirtyField;\n                if (field && paramName) {\n                    dirtyField = field.charAt(0) === '[' ? kendo.expr(field, paramName + '.dirtyFields') : paramName + '.dirtyFields[\\'' + field + '\\']';\n                    return '#= ' + paramName + ' && ' + paramName + '.dirty && ' + paramName + '.dirtyFields && ' + dirtyField + ' ? \\'<span class=\"k-dirty\"></span>\\' : \\'\\' #';\n                }\n                return '';\n            },\n            _virtualCols: function (columns) {\n                var that = this;\n                var widths = $.map(columns, function (c) {\n                    return c.hidden ? 0 : parseInt(c.width, 10);\n                });\n                var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find('>.k-virtual-scrollable-wrap')) : kendo.scrollLeft(that.content);\n                var tableWidth = outerWidth(that.content);\n                var sumOfWidths = sumWidths(columns);\n                var colsToRender = [];\n                var firstColspan = 0;\n                var lastColspan = 0;\n                var hiddenColumns = 0;\n                var idx = 0;\n                var widthOfHiddenColumns = 0;\n                var considerNext;\n                for (idx = 0; idx < columns.length; idx++) {\n                    considerNext = idx < widths.length - 1 ? widths[idx + 1] : 0;\n                    if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                        if (widths[idx]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[idx];\n                    } else {\n                        firstColspan = 1 + hiddenColumns;\n                        break;\n                    }\n                }\n                hiddenColumns = 0;\n                widthOfHiddenColumns = 0;\n                for (var i = columns.length - 1; i >= 0; i--) {\n                    if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                        if (widths[i]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[i];\n                    } else {\n                        lastColspan = 1 + hiddenColumns;\n                        for (var j = idx; j <= i; j++) {\n                            if (columns[j].locked) {\n                                continue;\n                            }\n                            colsToRender.push(columns[j]);\n                            if (columns[j].colSpan) {\n                                delete columns[j].colSpan;\n                            }\n                        }\n                        colsToRender[0].colSpan = firstColspan;\n                        colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                        break;\n                    }\n                }\n                if (colsToRender[0].hidden) {\n                    colsToRender[0].colSpan--;\n                }\n                that.virtualCols = colsToRender;\n                return colsToRender;\n            },\n            _templates: function () {\n                var that = this, options = that.options, dataSource = that.dataSource, groups = dataSource.group(), footer = that.footer || that.wrapper.find('.k-grid-footer'), aggregates = dataSource.aggregate(), columnLeafs = leafColumns(that.columns), columnsLocked = leafColumns(lockedColumns(that.columns)), leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs, columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols, groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function (column, index) {\n                        return column.groupHeaderColumnTemplate && index !== 0;\n                    }), groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function (column) {\n                        return column.groupHeaderColumnTemplate;\n                    });\n                if (options.scrollable && columnsLocked.length) {\n                    if (options.rowTemplate || options.altRowTemplate) {\n                        throw new Error('Having both row template and locked columns is not supported');\n                    }\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n                    that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                    that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n                } else {\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n                }\n                if (that._hasDetails()) {\n                    that.detailTemplate = that._detailTmpl(options.detailTemplate || '');\n                }\n                if (that._group && !isEmptyObject(aggregates) || !isEmptyObject(aggregates) && !footer.length || grep(columnLeafs, function (column) {\n                        return column.footerTemplate;\n                    }).length) {\n                    that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, 'footerTemplate', 'k-footer-template');\n                }\n                if (groups && grep(columnLeafs, function (column) {\n                        return column.groupFooterTemplate;\n                    }).length) {\n                    aggregates = $.map(groups, function (g) {\n                        return g.aggregates;\n                    });\n                    that.groupFooterTemplate = that._footerTmpl(columns, aggregates, 'groupFooterTemplate', 'k-group-footer', columnsLocked.length);\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, 'groupFooterTemplate', 'k-group-footer');\n                    }\n                }\n                if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                    aggregates = $.map(groups, function (g) {\n                        return g.aggregates;\n                    });\n                    that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, 'groupHeaderColumnTemplate', 'k-grouping-row', columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, 'groupHeaderColumnTemplate', 'k-grouping-row', 0, groupHeaderColumnTemplateLockedColumns);\n                    }\n                } else {\n                    that.groupHeaderColumnTemplate = null;\n                    that.lockedGroupHeaderColumnTemplate = null;\n                }\n                if (that.options.noRecords) {\n                    that.noRecordsTemplate = that._noRecordsTmpl();\n                }\n            },\n            _noRecordsTmpl: function () {\n                var wrapper = '<div class=\"{0}\">{1}</div>';\n                var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n                var scrollableNoGridHeightStyles = this.options.scrollable && !this.wrapper[0].style.height ? ' style=\"margin:0 auto;position:static;\"' : '';\n                var state = {\n                    storage: {},\n                    count: 0\n                };\n                var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var template;\n                var html = '';\n                var type;\n                var tmpl;\n                if (this.options.noRecords.template) {\n                    template = this.options.noRecords.template;\n                } else {\n                    template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n                }\n                type = typeof template;\n                if (type === 'function') {\n                    state.storage['tmpl' + state.count] = template;\n                    html += '#=this.tmpl' + state.count + '(' + paramName + ')#';\n                    state.count++;\n                } else if (type === 'string') {\n                    html += template;\n                }\n                tmpl = kendo.template(kendo.format(wrapper, NORECORDSCLASS, html), settings);\n                if (state.count > 0) {\n                    tmpl = $.proxy(tmpl, state.storage);\n                }\n                return tmpl;\n            },\n            _footerTmpl: function (columns, aggregates, templateName, rowClass, skipGroupCells) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), paramName = settings.paramName, html = '', idx, length, template, type, storage = {}, count = 0, scope = {}, groups = that._groups(), fieldsMap = that.dataSource._emptyAggregates(aggregates), column;\n                html += '<tr class=\"' + rowClass + '\">';\n                if (groups > 0 && !skipGroupCells) {\n                    html += groupCells(groups);\n                }\n                if (that._hasDetails()) {\n                    html += '<td class=\"k-hierarchy-cell\">&nbsp;</td>';\n                }\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n                    html += '<td' + stringifyAttributes(column.footerAttributes) + '>';\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + '[\\'' + column.field + '\\']' }) : {};\n                            template = kendo.template(template, scope);\n                        }\n                        storage['tmpl' + count] = template;\n                        html += '#=this.tmpl' + count + '(' + paramName + ')#';\n                        count++;\n                    } else {\n                        html += '&nbsp;';\n                    }\n                    html += '</td>';\n                }\n                html += '</tr>';\n                html = kendo.template(html, settings);\n                if (count > 0) {\n                    return proxy(html, storage);\n                }\n                return html;\n            },\n            _groupHeaderTmpl: function (columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), paramName = settings.paramName, html = '', idx, length, template, type, storage = {}, count = 0, scope = {}, fieldsMap = that.dataSource._emptyAggregates(aggregates), column, headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1, groupHeaderColumnTemplateClass;\n                html += '<tr role=\"row\" class=\"' + rowClass + '\">';\n                if (!skipGroupCells) {\n                    html += '# for (var i = 0; i < data.groupCells; i++) { #' + '<td class=\"k-group-cell\">' + '&nbsp;' + '</td>' + '# } #';\n                }\n                if (that._hasDetails()) {\n                    html += '<td class=\"k-hierarchy-cell\">&nbsp;</td>';\n                }\n                if (headerTemplateIndex < 0) {\n                    html += !skipGroupCells ? groupCellBuilder(columns.length) : '';\n                    return;\n                }\n                if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                    html += !skipGroupCells ? groupCellBuilder(columns.length) : '';\n                    return kendo.template(html, settings);\n                }\n                if (headerTemplateIndex < MINCOLSPANVALUE) {\n                    headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                    html += !skipGroupCells ? groupCellBuilder(headerTemplateIndex) : '';\n                } else {\n                    html += !skipGroupCells ? groupCellBuilder(headerTemplateIndex) : groupCellLockedContentBuilder(headerTemplateIndex);\n                }\n                for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n                    if (column.sticky) {\n                        groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass || '';\n                        if (!groupHeaderColumnTemplateClass) {\n                            groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = 'group-header-column-template-' + kendo.guid();\n                        }\n                        html += '<td class=\\'' + STICKY_CELL_CLASS + ' ' + groupHeaderColumnTemplateClass + '\\' style=\\'' + (column.stickyStyle || '') + '\\'>';\n                    } else {\n                        html += '<td>';\n                    }\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + '[\\'' + column.field + '\\']' }) : {};\n                            template = kendo.template(template, scope);\n                        }\n                        storage['tmpl' + count] = template;\n                        html += '#=this.tmpl' + count + '(' + paramName + ')#';\n                        count++;\n                    } else {\n                        html += '&nbsp;';\n                    }\n                    html += '</td>';\n                }\n                html += '</tr>';\n                html = kendo.template(html, settings);\n                if (count > 0) {\n                    return proxy(html, storage);\n                }\n                return html;\n            },\n            _detailTmpl: function (template) {\n                var that = this, html = '', settings = extend({}, kendo.Template, that.options.templateSettings), paramName = settings.paramName, templateFunctionStorage = {}, templateFunctionCount = 0, groups = that._groups(), colspan = visibleColumns(leafColumns(that.columns)).length, type = typeof template;\n                html += '<tr class=\"k-detail-row\">';\n                if (groups > 0) {\n                    html += groupCells(groups);\n                }\n                html += '<td class=\"k-hierarchy-cell\"></td><td class=\"k-detail-cell\"' + (colspan ? ' colspan=\"' + colspan + '\"' : '') + '>';\n                if (type === FUNCTION) {\n                    templateFunctionStorage['tmpl' + templateFunctionCount] = template;\n                    html += '#=this.tmpl' + templateFunctionCount + '(' + paramName + ')#';\n                    templateFunctionCount++;\n                } else {\n                    html += template;\n                }\n                html += '</td></tr>';\n                html = kendo.template(html, settings);\n                if (templateFunctionCount > 0) {\n                    return proxy(html, templateFunctionStorage);\n                }\n                return html;\n            },\n            _hasDetails: function () {\n                var that = this;\n                return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n            },\n            _hasFilterRow: function () {\n                var filterable = this.options.filterable;\n                var hasFiltering = filterable && typeof filterable.mode == STRING && filterable.mode.indexOf('row') != -1;\n                var columns = this.columns;\n                var columnsWithoutFiltering = $.grep(columns, function (col) {\n                    return col.filterable === false;\n                });\n                if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                    hasFiltering = false;\n                }\n                return hasFiltering;\n            },\n            _details: function () {\n                var that = this;\n                if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                    throw new Error('Having both detail template and locked columns is not supported');\n                }\n                that.table.on(CLICK + NS, '.k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse', function (e) {\n                    var button = $(this);\n                    that._toggleDetails(button);\n                    e.preventDefault();\n                    return false;\n                });\n            },\n            _toggleDetails: function (button, omitAnimation) {\n                var that = this, cell = button.closest('td.k-hierarchy-cell'), expanding = button.hasClass('k-i-expand'), masterRow = button.closest('tr.k-master-row'), detailRow, detailTemplate = that.detailTemplate, data, hasDetails = that._hasDetails(), ariaLabelText = expanding ? COLLAPSE : EXPAND, ariaExpandText = expanding ? true : false;\n                button.toggleClass('k-i-expand', !expanding).toggleClass('k-i-collapse', expanding).attr(ARIALABEL, ariaLabelText);\n                cell.attr('aria-expanded', ariaExpandText);\n                detailRow = masterRow.next();\n                if (hasDetails && !detailRow.hasClass('k-detail-row')) {\n                    data = that.dataItem(masterRow);\n                    detailRow = $(detailTemplate(data)).addClass(masterRow.hasClass('k-alt') ? 'k-alt' : '').insertAfter(masterRow);\n                    that.angular('compile', function () {\n                        return {\n                            elements: detailRow.get(),\n                            data: [{ dataItem: data }]\n                        };\n                    });\n                    that.trigger(DETAILINIT, {\n                        masterRow: masterRow,\n                        detailRow: detailRow,\n                        data: data,\n                        detailCell: detailRow.find('.k-detail-cell')\n                    });\n                }\n                that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, {\n                    masterRow: masterRow,\n                    detailRow: detailRow\n                });\n                if (omitAnimation) {\n                    toggleRow(detailRow, expanding);\n                } else {\n                    detailRow.toggle(expanding);\n                }\n            },\n            dataItem: function (tr) {\n                tr = $(tr)[0];\n                if (!tr) {\n                    return null;\n                }\n                var rows = this.tbody.children(), classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/, idx = tr.sectionRowIndex, j, correctIdx;\n                correctIdx = idx;\n                for (j = 0; j < idx; j++) {\n                    if (classesRegEx.test(rows[j].className)) {\n                        correctIdx--;\n                    }\n                }\n                return this._data[correctIdx];\n            },\n            expandRow: function (tr, omitAnimation) {\n                var button = $(tr).find('> td .k-i-expand');\n                if (button.length) {\n                    this._toggleDetails(button, omitAnimation);\n                }\n            },\n            collapseRow: function (tr, omitAnimation) {\n                var button = $(tr).find('> td .k-i-collapse');\n                if (button.length) {\n                    this._toggleDetails(button, omitAnimation);\n                }\n            },\n            _createHeaderCells: function (columns, rowSpan) {\n                var that = this, idx, th, text, html = '', length, title, sortable = that.options.sortable, messages = that.options.messages, leafs = leafColumns(that.columns), groups = that.dataSource.group(), field;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    th = columns[idx].column || columns[idx];\n                    text = that._headerCellText(th);\n                    title = th.title;\n                    field = '';\n                    var index = inArray(th, leafs);\n                    if (th.selectable) {\n                        html += '<th scope=\\'col\\'' + stringifyAttributes(th.headerAttributes);\n                        if (rowSpan && !columns[idx].colSpan) {\n                            html += ' rowspan=\\'' + rowSpan + '\\'';\n                        }\n                        if (index > -1) {\n                            html += kendo.attr('index') + '=\\'' + index + '\\'';\n                        }\n                        text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({});\n                        html += '>' + text + '</th>';\n                    } else if (th.draggable) {\n                        html += '<th class=\\'k-header k-drag-cell\\' scope=\\'col\\'' + stringifyAttributes(th.headerAttributes);\n                        if (rowSpan && !columns[idx].colSpan) {\n                            html += ' rowspan=\\'' + rowSpan + '\\'';\n                        }\n                        if (index > -1) {\n                            html += kendo.attr('index') + '=\\'' + index + '\\'';\n                        }\n                        text = th.headerTemplate ? text : '';\n                        html += '>' + text + '</th>';\n                    } else if (th.command) {\n                        html += '<th scope=\\'col\\'' + stringifyAttributes(th.headerAttributes);\n                        if (rowSpan && !columns[idx].colSpan) {\n                            html += ' rowspan=\\'' + rowSpan + '\\'';\n                        }\n                        if (index > -1) {\n                            html += kendo.attr('index') + '=\\'' + index + '\\'';\n                        }\n                        html += '>' + text + '</th>';\n                    } else {\n                        if (th.field) {\n                            field = kendo.attr('field') + '=\\'' + th.field + '\\' ';\n                        }\n                        html += '<th scope=\\'col\\' role=\\'columnheader\\' ' + field;\n                        html += ' aria-haspopup=\\'true\\'';\n                        if (rowSpan && !columns[idx].colSpan) {\n                            html += ' rowspan=\\'' + rowSpan + '\\'';\n                        }\n                        if (columns[idx].colSpan > 1) {\n                            html += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                            html += kendo.attr('colspan') + '=\\'' + columns[idx].colSpan + '\\'';\n                        } else if (columns[idx].colSpan === 1) {\n                            html += kendo.attr('colspan') + '=\\'' + columns[idx].colSpan + '\\'';\n                        }\n                        if (title) {\n                            title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                            html += kendo.attr('title') + '=\"' + title + '\" ';\n                        }\n                        if (th.groupable !== undefined) {\n                            html += kendo.attr('groupable') + '=\\'' + th.groupable + '\\' ';\n                        }\n                        if (isColumnGroupable(that, th)) {\n                            html += 'aria-label=\\'' + (title || th.field) + ' ';\n                            html += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                            html += '\\' ';\n                        }\n                        if (th.aggregates && th.aggregates.length) {\n                            html += kendo.attr('aggregates') + '=\\'' + th.aggregates + '\\'';\n                        }\n                        if (index > -1) {\n                            html += kendo.attr('index') + '=\\'' + index + '\\'';\n                        }\n                        html += stringifyAttributes(th.headerAttributes);\n                        if (sortable) {\n                            text = kendo.template(SORTHEADERTMPL)({ text: text });\n                        }\n                        html += '>' + text + '</th>';\n                    }\n                }\n                return html;\n            },\n            _appendLockedColumnContent: function () {\n                var columns = this.columns, idx, colgroup = this.table.find('colgroup'), cols = colgroup.find(COLGROUP), length, lockedCols = $(), skipHiddenCount = 0, container, colSpan, spanIdx, colOffset = 0;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n                        if (isVisible(columns[idx])) {\n                            colSpan = 1;\n                            if (columns[idx].columns) {\n                                colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n                            colSpan = colSpan || 1;\n                            for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        } else {\n                            skipHiddenCount++;\n                        }\n                    }\n                }\n                container = $('<div class=\"k-grid-content-locked\"><table><colgroup></colgroup><tbody></tbody></table></div>');\n                colgroup.detach();\n                container.find('colgroup').append(lockedCols);\n                colgroup.insertBefore(this.table.find('tbody'));\n                this.lockedContent = container.insertBefore(this.content);\n                this.lockedTable = container.children('table');\n            },\n            _appendLockedColumnFooter: function () {\n                var that = this;\n                var footer = that.footer;\n                var cells = footer.find('.k-footer-template>td');\n                var cols = footer.find('.k-grid-footer-wrap>table>colgroup>col');\n                var html = $('<div class=\"k-grid-footer-locked\"><table><colgroup></colgroup><tbody><tr class=\"k-footer-template\"></tr></tbody></table></div>');\n                var idx, length;\n                var groups = that._groups();\n                var lockedCells = $(), lockedCols = $();\n                lockedCells = lockedCells.add(cells.filter('.k-group-cell'));\n                for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                    lockedCells = lockedCells.add(cells.eq(idx + groups));\n                }\n                lockedCols = lockedCols.add(cols.filter('.k-group-col'));\n                for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                    lockedCols = lockedCols.add(cols.eq(idx + groups));\n                }\n                lockedCells.appendTo(html.find('tr'));\n                lockedCols.appendTo(html.find('colgroup'));\n                that.lockedFooter = html.prependTo(footer);\n            },\n            _appendLockedColumnHeader: function (container) {\n                var that = this, columns = this.columns, idx, html, length, colgroup, tr, trFilter, table, header, filtercellCells, rows = [], skipHiddenCount = 0, cols = $(), hasFilterRow = that._hasFilterRow(), filterCellOffset = 0, filterCells = $(), cell, leafColumnsCount = 0, cells = $();\n                colgroup = that.thead.prev().find(COLGROUP);\n                header = that.thead.find('tr').first().find('.k-header:not(.k-group-cell,.k-hierarchy-cell)');\n                filtercellCells = that.thead.find('.k-filter-row').find('th:not(.k-group-cell,.k-hierarchy-cell)');\n                var colOffset = 0;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n                        cell = header.eq(idx);\n                        leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n                        if (isVisible(columns[idx])) {\n                            var colSpan = null;\n                            if (columns[idx].columns) {\n                                colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n                            colSpan = colSpan || 1;\n                            for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        }\n                        mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n                        leafColumnsCount = leafColumnsCount || 1;\n                        for (var j = 0; j < leafColumnsCount; j++) {\n                            filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                        }\n                        filterCellOffset += leafColumnsCount;\n                    }\n                    if (columns[idx].columns) {\n                        skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                    }\n                    if (!isVisible(columns[idx])) {\n                        skipHiddenCount++;\n                    }\n                }\n                if (rows.length) {\n                    html = '<div class=\"k-grid-header-locked\" style=\"width:1px\"><table><colgroup></colgroup><thead>';\n                    html += new Array(rows.length + 1).join('<tr></tr>');\n                    html += (hasFilterRow ? '<tr class=\"k-filter-row\"></tr>' : '') + '</thead></table></div>';\n                    table = $(html);\n                    colgroup = table.find('colgroup');\n                    colgroup.append(that.thead.prev().find('col.k-group-col').add(cols));\n                    tr = table.find('thead tr:not(.k-filter-row)');\n                    for (idx = 0, length = rows.length; idx < length; idx++) {\n                        cells = toJQuery(rows[idx]);\n                        tr.eq(idx).append(that.thead.find('tr').eq(idx).find('.k-group-cell').add(cells));\n                    }\n                    var count = removeEmptyRows(this.thead);\n                    if (rows.length < count) {\n                        removeRowSpanValue(table, count - rows.length);\n                    }\n                    trFilter = table.find('.k-filter-row');\n                    trFilter.append(that.thead.find('.k-filter-row .k-group-cell').add(filterCells));\n                    this.lockedHeader = table.prependTo(container);\n                    this.thead.find('.k-group-cell').remove();\n                    return true;\n                }\n                return false;\n            },\n            _removeLockedContainers: function () {\n                var elements = this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);\n                kendo.destroy(elements);\n                elements.off(NS).remove();\n                this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n                this.selectable = null;\n            },\n            _thead: function () {\n                var that = this, columns = that.columns, hasDetails = that._hasDetails() && columns.length, hasFilterRow = that._hasFilterRow(), idx, html = '', thead = that.table.find('>thead'), hasTHead = that.element.find('thead').first().length > 0, headerContent = that.options.messages.expandCollapseColumnHeader, tr;\n                if (!thead.length) {\n                    thead = $('<thead/>').insertBefore(that.tbody);\n                }\n                if (that.lockedHeader && that.thead) {\n                    tr = that.thead.find('tr:has(th):not(.k-filter-row)').html('');\n                    tr.remove();\n                    tr = $();\n                    that._removeLockedContainers();\n                } else if (hasTHead) {\n                    tr = that.element.find('thead').first().find('tr:has(th):not(.k-filter-row)');\n                } else {\n                    tr = that.element.find('tr:has(th)').first();\n                }\n                if (!tr.length) {\n                    tr = thead.children().first();\n                    if (!tr.length) {\n                        var rows = [{\n                                rowSpan: 1,\n                                cells: [],\n                                index: 0\n                            }];\n                        that._prepareColumns(rows, columns);\n                        for (idx = 0; idx < rows.length; idx++) {\n                            html += '<tr>';\n                            if (hasDetails) {\n                                html += '<th class=\"k-hierarchy-cell\" scope=\"col\">' + headerContent + '</th>';\n                            }\n                            html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                            html += '</tr>';\n                        }\n                        tr = $(html);\n                    }\n                } else {\n                    for (idx = 0; idx < columns.length; idx++) {\n                        var columnIndex = inArray(columns[idx], leafColumns(columns));\n                        var cell = leafDataCells(tr.parent()).filter('th:not(.k-group-cell):not(.k-hierarchy-cell)').eq(columnIndex);\n                        if (columns[idx].hidden && columnIndex >= 0) {\n                            cell[0].style.display = 'none';\n                        }\n                    }\n                    that._updateHeadersAttr(childColumns(columns));\n                }\n                if (hasFilterRow) {\n                    var filterRow = $('<tr/>');\n                    filterRow.addClass('k-filter-row');\n                    if (hasDetails || tr.find('.k-hierarchy-cell').length) {\n                        filterRow.prepend('<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>');\n                    }\n                    var existingFilterRow = (that.thead || thead).find('.k-filter-row');\n                    if (existingFilterRow.length) {\n                        kendo.destroy(existingFilterRow);\n                        existingFilterRow.remove();\n                    }\n                    thead.append(filterRow);\n                }\n                if (!tr.children().length) {\n                    html = '';\n                    if (hasDetails) {\n                        html += '<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>';\n                    }\n                    html += that._createHeaderCells(columns);\n                    tr.html(html);\n                } else if (hasDetails && !tr.find('.k-hierarchy-cell')[0]) {\n                    tr.prepend('<th class=\"k-hierarchy-cell\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n                }\n                tr.attr('role', 'row').find('th').addClass('k-header');\n                if (!that.options.scrollable) {\n                    thead.addClass('k-grid-header');\n                }\n                tr.find('script').remove().end().prependTo(thead);\n                if (that.thead) {\n                    that._destroyColumnAttachments();\n                }\n                this.angular('cleanup', function () {\n                    return { elements: thead.find('th' + NAVCELL).get() };\n                });\n                this.angular('compile', function () {\n                    return {\n                        elements: thead.find(HEADERCELLS).get(),\n                        data: map(columns, function (col) {\n                            return { column: col };\n                        })\n                    };\n                });\n                that.thead = thead.attr('role', 'rowgroup');\n                that._sortable();\n                that._filterable();\n                that._filterRow();\n                that._scrollable();\n                that._columnMenu();\n                var syncHeight;\n                var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n                if (hasLockedColumns) {\n                    syncHeight = that._appendLockedColumnHeader(that.thead.closest('.k-grid-header'));\n                    that._appendLockedColumnContent();\n                    that.lockedContent.on('DOMMouseScroll' + NS + ' mousewheel' + NS, proxy(that._wheelScroll, that));\n                    if (kendo.support.touch) {\n                        that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                            move: function (e) {\n                                that.content.scrollTop(that.content.scrollTop() + -e.y.delta);\n                                e.preventDefault();\n                            }\n                        });\n                    }\n                    that._updateLockedCols();\n                }\n                that._updateCols();\n                that._updateColumnCellIndex();\n                that._updateFirstColumnClass();\n                that._resizable();\n                that._draggable();\n                that._reorderable();\n                that._updateHeader(that._groups());\n                that._updateStickyColumns();\n                if (hasLockedColumns) {\n                    if (syncHeight) {\n                        that._syncLockedHeaderHeight();\n                    }\n                    that._applyLockedContainersWidth();\n                }\n                if (that.groupable) {\n                    that._attachGroupable();\n                }\n            },\n            _retrieveFirstColumn: function (columns, rows) {\n                var result = $();\n                if (rows.length && columns[0]) {\n                    var column = columns[0];\n                    while (column.columns && column.columns.length) {\n                        column = column.columns[0];\n                        rows = rows.filter(':not(:first)');\n                    }\n                    result = result.add(rows);\n                }\n                return result;\n            },\n            _updateFirstColumnClass: function () {\n                var that = this, columns = that.columns || [], hasDetails = that._hasDetails() && columns.length;\n                if (!hasDetails && !that._groups()) {\n                    var tr = that.thead.find('>tr:not(.k-filter-row):not(:first)');\n                    columns = nonLockedColumns(columns);\n                    var rows = that._retrieveFirstColumn(columns, tr);\n                    if (that._isLocked()) {\n                        tr = that.lockedHeader.find('thead>tr:not(.k-filter-row):not(:first)');\n                        columns = lockedColumns(that.columns);\n                        rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                    }\n                    rows.each(function () {\n                        var ths = $(this).find('th');\n                        ths.removeClass('k-first');\n                        ths.eq(0).addClass('k-first');\n                    });\n                }\n            },\n            _prepareColumns: function (rows, columns, parentCell, parentRow) {\n                var row = parentRow || rows[rows.length - 1];\n                var childRow = rows[row.index + 1];\n                var totalColSpan = 0;\n                for (var idx = 0; idx < columns.length; idx++) {\n                    var cell = {\n                        column: columns[idx],\n                        colSpan: 0\n                    };\n                    row.cells.push(cell);\n                    if (columns[idx].columns && columns[idx].columns.length) {\n                        if (!childRow) {\n                            childRow = {\n                                rowSpan: 0,\n                                cells: [],\n                                index: rows.length\n                            };\n                            rows.push(childRow);\n                        }\n                        cell.colSpan = columns[idx].columns.length;\n                        this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                        totalColSpan += cell.colSpan - 1;\n                        row.rowSpan = rows.length - row.index;\n                    }\n                }\n                if (parentCell) {\n                    parentCell.colSpan += totalColSpan;\n                }\n            },\n            _wheelScroll: function (e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n                var content = this.content;\n                if (this.virtualScroll && this.virtualScroll.rows) {\n                    content = this.virtualScrollable.verticalScrollbar;\n                }\n                var scrollTop = content.scrollTop(), delta = kendo.wheelDeltaY(e);\n                if (delta) {\n                    if (content[0].scrollHeight > content[0].clientHeight && (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 || content[0].scrollTop > 0 && delta > 0)) {\n                        e.preventDefault();\n                    }\n                    content.scrollTop(scrollTop + -delta);\n                }\n            },\n            _isLocked: function () {\n                return this.lockedHeader != null;\n            },\n            _updateHeaderCols: function () {\n                var table = this.thead.parent().add(this.table);\n                if (this._isLocked()) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n                }\n            },\n            _updateColumnSorters: function () {\n                var that = this;\n                var cells = leafDataCells(that.thead);\n                var columns = leafColumns(that.columns);\n                var column;\n                var cell;\n                var sorterInstance;\n                if (!that.options.sortable) {\n                    return;\n                }\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n                        sorterInstance = cell.data('kendoColumnSorter');\n                        if (sorterInstance) {\n                            sorterInstance.refresh();\n                        }\n                    }\n                }\n            },\n            _updateHeadersAttr: function (columns) {\n                if (!columns.length) {\n                    return;\n                }\n                var that = this;\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].headerAttributes) {\n                        var th = that.element.find('[id=\\'' + columns[i].headerAttributes.id + '\\']');\n                        th.attr('headers', columns[i].headerAttributes.headers);\n                    }\n                }\n                that._updateHeadersAttr(childColumns(columns));\n            },\n            _updateCols: function (table) {\n                table = table || this.thead.parent().add(this.table);\n                this._appendCols(table, this._isLocked());\n            },\n            _updateLockedCols: function (table) {\n                if (this._isLocked()) {\n                    table = table || this.lockedHeader.find('table').add(this.lockedTable);\n                    normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n            _appendCols: function (table, locked) {\n                if (locked) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n            _autoColumns: function (schema) {\n                if (schema && schema.toJSON) {\n                    var that = this, field, encoded;\n                    schema = schema.toJSON();\n                    encoded = !(that.table.find('tbody tr').length > 0 && (!that.dataSource || !that.dataSource.transport));\n                    for (field in schema) {\n                        that.columns.push({\n                            field: field,\n                            encoded: encoded,\n                            headerAttributes: { id: kendo.guid() }\n                        });\n                    }\n                    that._thead();\n                    that._templates();\n                }\n            },\n            _rowsHtml: function (data, templates) {\n                var that = this, html = '', idx, rowTemplate = templates.rowTemplate, altRowTemplate = templates.altRowTemplate, length;\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (that._skipRerenderItemsCount > 0) {\n                        that._skipRerenderItemsCount--;\n                    } else {\n                        if (idx % 2) {\n                            html += altRowTemplate(data[idx]);\n                        } else {\n                            html += rowTemplate(data[idx]);\n                        }\n                    }\n                    that._data.push(data[idx]);\n                }\n                return html;\n            },\n            _groupData: function (group, skipFooter, firstColumn) {\n                var that = this, footerDefaults = that._groupAggregatesDefaultObject || {}, groupItems = group.items, aggregates = extend({}, footerDefaults, group.aggregates), headerData = extend({}, {\n                        field: group.field,\n                        value: group.value,\n                        items: groupItems,\n                        aggregates: aggregates\n                    }, group.aggregates[firstColumn ? firstColumn.field : group.field]), footerData = {};\n                if (!skipFooter) {\n                    for (var aggregate in aggregates) {\n                        footerData[aggregate] = extend({}, aggregates[aggregate], {\n                            group: {\n                                field: group.field,\n                                value: group.value,\n                                items: groupItems\n                            }\n                        });\n                    }\n                }\n                return extend({}, footerData, headerData);\n            },\n            _removeGroupIfEmpty: function (row) {\n                var that = this, itemsCount, subgroupsCount, length = that.dataSource._group.length;\n                for (var i = 0; i < length; i++) {\n                    row = row.prev();\n                    itemsCount = +row.attr('data-group-item-count');\n                    subgroupsCount = +row.attr('data-sub-group-count');\n                    if (itemsCount == 1 || subgroupsCount == 1) {\n                        row.hide();\n                    }\n                }\n            },\n            _groupRowHtml: function (group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup) {\n                var that = this, html = '', idx, length, field = group.field, column = grep(leafColumns(that.columns), function (column) {\n                        return column.field == field;\n                    })[0] || {}, firstColumn = visibleColumns(that.columns)[0], firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null, template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate, text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded), groupItems = group.currentItems || group.items, groups = that._groups(), groupFooterTemplate = templates.groupFooterTemplate, groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate, groupData, expanded = that.dataSource._isGroupPaged() ? that.dataSource._groupsState[group.uid] : true;\n                if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                    expanded = true;\n                }\n                if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                    groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n                }\n                if (template && !skipColspan) {\n                    text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n                }\n                if (!that._skipRerenderItemsCount) {\n                    if (groupHeaderColumnTemplate) {\n                        if (!group.excludeHeader) {\n                            html += groupHeaderColumnTemplate(extend({}, groupData, {\n                                groupCells: level,\n                                colspan: groups - level,\n                                text: text\n                            }));\n                        } else {\n                            group.excludeHeader = false;\n                        }\n                    } else {\n                        if (!group.excludeHeader) {\n                            html += groupHeaderBuilder(colspan, level, text, expanded, group.uid, that.dataSource._isGroupPaged());\n                        } else {\n                            group.excludeHeader = false;\n                        }\n                    }\n                } else {\n                    groupHeaderBuilder(colspan, level, text, expanded, group.uid, that.dataSource._isGroupPaged());\n                }\n                if (expanded) {\n                    if (group.hasSubgroups) {\n                        for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                            html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1);\n                        }\n                    } else {\n                        html += that._rowsHtml(groupItems, templates);\n                    }\n                }\n                if (groupFooterTemplate) {\n                    if (skipLastGroup) {\n                        if (!inArray(group.value, that._skippedGroups)) {\n                            that._skippedGroups.push(group.value);\n                        }\n                    } else {\n                        if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                            that._skippedGroups.shift();\n                        }\n                        if (!that._skipRerenderItemsCount) {\n                            html += groupFooterTemplate(groupData);\n                        }\n                    }\n                }\n                return html;\n            },\n            collapseGroup: function (group) {\n                var level, that = this, groupToCollapse = group, groupable = this.options.groupable, showFooter = groupable.showFooter, footerCount = showFooter ? 0 : 1, offset, relatedGroup = $(), idx, length, tr;\n                group = $(group);\n                level = group.find('.k-group-cell').length;\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr('data-group-uid');\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterCollapse;\n                    that.dataSource._groupsState[groupUid] = false;\n                    groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function () {\n                        that._progress(false);\n                    }, 'collapseGroup');\n                    return;\n                }\n                if (this._isLocked()) {\n                    if (!group.closest('div').hasClass('k-grid-content-locked')) {\n                        relatedGroup = group.nextAll('tr');\n                        group = this.lockedTable.find('>tbody>tr').eq(group.index());\n                    } else {\n                        relatedGroup = this.tbody.children('tr').eq(group.index()).nextAll('tr');\n                    }\n                }\n                group.find('.k-i-collapse').addClass('k-i-expand').removeClass('k-i-collapse');\n                group.find('td[aria-expanded=\\'true\\']').first().attr('aria-expanded', false).find('a').attr(ARIALABEL, EXPAND);\n                group = group.nextAll('tr');\n                var toHide = [];\n                for (idx = 0, length = group.length; idx < length; idx++) {\n                    tr = group.eq(idx);\n                    offset = tr.find('.k-group-cell').length;\n                    if (tr.hasClass('k-grouping-row')) {\n                        footerCount++;\n                    } else if (tr.hasClass('k-group-footer')) {\n                        footerCount--;\n                    }\n                    if (offset <= level || tr.hasClass('k-group-footer') && footerCount < 0) {\n                        break;\n                    }\n                    if (relatedGroup.length) {\n                        toHide.push(relatedGroup[idx]);\n                    }\n                    toHide.push(tr[0]);\n                }\n                $(toHide).hide();\n                if (this.options.scrollable.endless && this.content) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                    that._collapseGroupsTimeOut = setTimeout(function () {\n                        that.content.scroll();\n                        that._groupToCollapse = groupToCollapse;\n                    });\n                }\n            },\n            expandGroup: function (group) {\n                group = $(group);\n                var that = this, showFooter = that.options.groupable.showFooter, level, tr, offset, relatedGroup = $(), idx, length, footersVisibility = [], groupsCount = 1;\n                level = group.find('.k-group-cell').length;\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr('data-group-uid');\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterExpand;\n                    that.dataSource._groupsState[groupUid] = true;\n                    if (groupObject.items && groupObject.items.length) {\n                        groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                        that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                    }\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function () {\n                        that._progress(false);\n                    }, 'expandGroup');\n                    return;\n                }\n                if (this._isLocked()) {\n                    if (!group.closest('div').hasClass('k-grid-content-locked')) {\n                        relatedGroup = group.nextAll('tr');\n                        group = this.lockedTable.find('>tbody>tr').eq(group.index());\n                    } else {\n                        relatedGroup = this.tbody.children('tr').eq(group.index()).nextAll('tr');\n                    }\n                }\n                group.find('.k-i-expand').addClass('k-i-collapse').removeClass('k-i-expand');\n                group.find('td[aria-expanded=\\'false\\']').first().attr('aria-expanded', true).find('a').attr(ARIALABEL, COLLAPSE);\n                group = group.nextAll('tr');\n                for (idx = 0, length = group.length; idx < length; idx++) {\n                    tr = group.eq(idx);\n                    offset = tr.find('.k-group-cell').length;\n                    if (offset <= level) {\n                        break;\n                    }\n                    if (offset == level + 1 && !tr.hasClass('k-detail-row')) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n                        if (tr.hasClass('k-grouping-row') && tr.find('.k-icon').hasClass('k-i-collapse')) {\n                            that.expandGroup(tr);\n                        }\n                        if (tr.hasClass('k-master-row') && tr.find('.k-icon').hasClass('k-i-collapse')) {\n                            tr.next().show();\n                            relatedGroup.eq(idx + 1).show();\n                        }\n                    }\n                    if (tr.hasClass('k-grouping-row')) {\n                        if (showFooter) {\n                            footersVisibility.push(tr.is(':visible'));\n                        }\n                        groupsCount++;\n                    }\n                    if (tr.hasClass('k-group-footer')) {\n                        if (showFooter) {\n                            var toggleVisibility = footersVisibility.pop();\n                            tr.toggle(toggleVisibility);\n                            relatedGroup.eq(idx).toggle(toggleVisibility);\n                        }\n                        if (groupsCount == 1) {\n                            tr.show();\n                            relatedGroup.eq(idx).show();\n                        } else {\n                            groupsCount--;\n                        }\n                    }\n                }\n                if (level === 0 && that.options.scrollable.endless && this._isLocked() || !that.options.scrollable.endless && this._isLocked()) {\n                    that._syncLockedContentHeight();\n                }\n            },\n            _updateHeader: function (groups) {\n                var that = this, container = that._isLocked() ? that.lockedHeader.find('thead') : that.thead, filterCells = container.find('tr.k-filter-row').find('th.k-group-cell').length, length = container.find('tr').first().find('th.k-group-cell').length, rows = container.children('tr:not(:first)').filter(function () {\n                        return !$(this).children(':visible').length;\n                    });\n                if (groups > length) {\n                    $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">' + that.options.messages.expandCollapseColumnHeader + '</th>')).prependTo(container.children('tr:not(.k-filter-row)'));\n                    if (that.element.is(':visible')) {\n                        rows.find('th.k-group-cell').hide();\n                    }\n                } else if (groups < length) {\n                    container.find('tr').each(function () {\n                        $(this).find('th.k-group-cell').eq(groups).remove();\n                        $(this).find('th.k-group-cell').slice(groups).remove();\n                    });\n                }\n                if (groups > filterCells) {\n                    $(new Array(groups - filterCells + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">&nbsp;</th>')).prependTo(container.find('.k-filter-row'));\n                }\n            },\n            _firstDataItem: function (data, grouped) {\n                if (data && grouped) {\n                    if (data.hasSubgroups) {\n                        data = this._firstDataItem(data.items[0], grouped);\n                    } else {\n                        data = data.items[0];\n                    }\n                }\n                return data;\n            },\n            _updateTablesWidth: function () {\n                var that = this, tables;\n                if (!that._isLocked()) {\n                    return;\n                }\n                tables = $('>.k-grid-footer>.k-grid-footer-wrap>table', that.wrapper).add(that.thead.parent()).add(that.table);\n                that._footerWidth = tableWidth(tables.eq(0));\n                tables.width(that._footerWidth);\n                tables = $('>.k-grid-footer>.k-grid-footer-locked>table', that.wrapper).add(that.lockedHeader.find('>table')).add(that.lockedTable);\n                tables.width(tableWidth(tables.eq(0)));\n            },\n            hideColumn: function (column) {\n                var that = this, cell, tables, idx, cols, colWidth, position, width = 0, headerCellIndex, length, footer = that.footer || that.wrapper.find('.k-grid-footer'), virtualScroll = that.virtualScroll || {}, columns = that.columns, visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find('>table>thead')).filter(isCellVisible).length : 0, columnIndex, groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function (column) {\n                        return column.groupHeaderColumnTemplate;\n                    });\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n                if (column.columns && column.columns.length) {\n                    position = columnVisiblePosition(column, columns);\n                    setColumnVisibility(column, false);\n                    setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr:eq(' + position.row + ')>th'), position.cell, false);\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                        this.hideColumn(column.columns[idx]);\n                    }\n                    that.trigger(COLUMNHIDE, { column: column });\n                    return;\n                }\n                columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n                setColumnVisibility(column, false);\n                that._setParentsVisibility(column, false);\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                var container = that.thead;\n                headerCellIndex = columnIndex;\n                if (that.lockedHeader && visibleLocked > columnIndex) {\n                    container = that.lockedHeader.find('>table>thead');\n                } else {\n                    headerCellIndex -= visibleLocked;\n                }\n                cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n                cell[0].style.display = 'none';\n                setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr.k-filter-row>th'), columnIndex, false);\n                if (footer[0]) {\n                    that._updateCols(footer.find('>.k-grid-footer-wrap>table'));\n                    that._updateLockedCols(footer.find('>.k-grid-footer-locked>table'));\n                    setCellVisibility(footer.find('.k-footer-template>td'), columnIndex, false);\n                }\n                if (virtualScroll.columns && !column.locked) {\n                    that._updateContentWidth();\n                    that.trigger(COLUMNHIDE, { column: column });\n                    return;\n                }\n                if (that.lockedTable && visibleLocked > columnIndex) {\n                    hideColumnCells(that.lockedTable.find('>tbody>tr'), columnIndex);\n                } else {\n                    hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n                }\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                    that._syncLockedFooterHeight();\n                } else {\n                    cols = that.thead.prev().find('col');\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (cols[idx].className.indexOf('k-hierarchy-col') > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n                        if (cols[idx].className.indexOf('k-group-col') > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n                        if (colWidth && colWidth.indexOf('%') == -1) {\n                            width += parseInt(colWidth, 10);\n                        } else {\n                            width = 0;\n                            break;\n                        }\n                    }\n                    tables = that.wrapper.find('>.k-grid-header table').first().add(that.wrapper.find('>.k-grid-footer table').first()).add(that.table);\n                    that._footerWidth = null;\n                    if (width) {\n                        tables.each(function () {\n                            this.style.width = width + 'px';\n                        });\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                }\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that.trigger(COLUMNHIDE, { column: column });\n            },\n            _setParentsVisibility: function (column, visible) {\n                var that = this;\n                var columns = that.columns;\n                var idx;\n                var parents = [];\n                var parent;\n                var position;\n                var cell;\n                var colSpan;\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n                var predicate = visible ? function (p) {\n                    return visibleColumns(p.columns).length && p.hidden;\n                } : function (p) {\n                    return !visibleColumns(p.columns).length && !p.hidden;\n                };\n                if (columnParents(column, columns, parents) && parents.length) {\n                    for (idx = parents.length - 1; idx >= 0; idx--) {\n                        parent = parents[idx];\n                        position = columnPosition(parent, columns);\n                        cell = elements($('>table>thead', this.lockedHeader), this.thead, '>tr:eq(' + position.row + ')>th:not(.k-group-cell):not(.k-hierarchy-cell)').eq(position.cell);\n                        if (predicate(parent)) {\n                            setColumnVisibility(parent, visible);\n                            cell[0].style.display = visible ? '' : 'none';\n                        }\n                        if (cell.filter('[' + kendo.attr('colspan') + ']').length) {\n                            colSpan = parseInt(cell.attr(kendo.attr('colspan')), 10);\n                            cell[0].colSpan = colSpan - hiddenLeafColumnsCount(parent.columns) || 1;\n                        }\n                    }\n                }\n            },\n            _updateContentWidth: function () {\n                var that = this;\n                var tables = that.table.add(that.thead.parent());\n                tables.css({ width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns))) });\n                that.refresh();\n            },\n            showColumn: function (column) {\n                var that = this, idx, length, cell, tables, width, headerCellIndex, position, colWidth, cols, columns = that.columns, virtualScroll = that.virtualScroll || {}, footer = that.footer || that.wrapper.find('.k-grid-footer'), lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find('>table>thead')).length : 0, columnIndex, originalColumn, columnLeafIndex, groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function (column) {\n                        return column.groupHeaderColumnTemplate;\n                    });\n                if (typeof column == 'number') {\n                    columnIndex = column;\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    $.each(flatColumns(columns), function (index, item) {\n                        if (item === column) {\n                            column = item;\n                            columnIndex = index;\n                            return false;\n                        }\n                    });\n                } else {\n                    $.each(flatColumns(columns), function (index, item) {\n                        if (item.field === column) {\n                            column = item;\n                            columnIndex = index;\n                            return false;\n                        }\n                    });\n                }\n                if (!column || isVisible(column)) {\n                    return;\n                }\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n                if (column.columns && column.columns.length) {\n                    position = columnPosition(column, columns);\n                    originalColumn = flatColumns(that.options.columns)[columnIndex];\n                    setColumnVisibility(column, true);\n                    setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr:eq(' + position.row + ')>th'), position.cell, true);\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                        if (!originalColumn.columns[idx].hidden) {\n                            this.showColumn(column.columns[idx]);\n                        }\n                    }\n                    that.trigger(COLUMNSHOW, { column: column });\n                    return;\n                }\n                columnLeafIndex = inArray(column, leafColumns(columns));\n                setColumnVisibility(column, true);\n                that._setParentsVisibility(column, true);\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                var container = that.thead;\n                headerCellIndex = columnLeafIndex;\n                if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                    container = that.lockedHeader.find('>table>thead');\n                } else {\n                    headerCellIndex -= lockedColumnsCount;\n                }\n                cell = leafDataCells(container).eq(headerCellIndex);\n                cell[0].style.display = '';\n                setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr.k-filter-row>th'), columnLeafIndex, true);\n                if (footer[0]) {\n                    that._updateCols(footer.find('>.k-grid-footer-wrap>table'));\n                    that._updateLockedCols(footer.find('>.k-grid-footer-locked>table'));\n                    setCellVisibility(footer.find('.k-footer-template>td'), columnLeafIndex, true);\n                }\n                if (virtualScroll.columns && !column.locked) {\n                    that._updateContentWidth();\n                    that.trigger(COLUMNSHOW, { column: column });\n                    return;\n                }\n                if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                    showColumnCells(that.lockedTable.find('>tbody>tr'), columnLeafIndex);\n                } else {\n                    showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n                }\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                } else {\n                    tables = that.wrapper.find('>.k-grid-header table').first().add(that.wrapper.find('>.k-grid-footer table').first()).add(that.table);\n                    if (!column.width) {\n                        tables.width('');\n                    } else {\n                        width = 0;\n                        cols = that.thead.prev().find('col');\n                        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                            colWidth = cols[idx].style.width;\n                            if (cols[idx].className.indexOf('k-hierarchy-col') > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n                            if (cols[idx].className.indexOf('k-group-col') > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n                            if (colWidth.indexOf('%') > -1) {\n                                width = 0;\n                                break;\n                            }\n                            width += parseInt(colWidth, 10);\n                        }\n                        that._footerWidth = null;\n                        if (width) {\n                            tables.each(function () {\n                                this.style.width = width + 'px';\n                            });\n                            that._footerWidth = width;\n                            that._setContentWidth();\n                        }\n                    }\n                }\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that.trigger(COLUMNSHOW, { column: column });\n            },\n            _columnVisibilitySetter: function (column) {\n                var col = column || {};\n                if (isUndefined(col.media)) {\n                    return setColumnVisibility;\n                } else {\n                    return setColumnMediaVisibility;\n                }\n            },\n            _buildSkeleton: function () {\n                var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n                var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n                var loaderHTML = '';\n                var colspan;\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(this.content.find('tr').first().find('td').first().attr('colspan'), 10);\n                }\n                for (var i = 0; i < pageSize; i++) {\n                    loaderHTML += '<tr>';\n                    for (var j = 0; j < visibleColumns.length; j++) {\n                        if (colspan && !j) {\n                            loaderHTML += '<td colspan=\\'' + colspan + '\\'><span class=\\'k-skeleton k-skeleton-text k-skeleton-pulse\\'></span></td>';\n                        } else {\n                            loaderHTML += '<td><span class=\\'k-skeleton k-skeleton-text k-skeleton-pulse\\'></span></td>';\n                        }\n                    }\n                    loaderHTML += '</tr>';\n                }\n                return loaderHTML;\n            },\n            _progress: function (toggle) {\n                var element = this.element;\n                var endless = this.options.scrollable && this.options.scrollable.endless;\n                var loaderType = this.options.loaderType;\n                var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n                var skeleton;\n                if (isVirtualization) {\n                    element = this.content;\n                } else if (this._editContainer && this._editMode() === 'popup') {\n                    element = this._editContainer;\n                } else if (this.lockedContent || endless) {\n                    element = this.wrapper;\n                } else if (this.element.is('table')) {\n                    element = this.element.parent();\n                } else if (this.content && this.content.length) {\n                    element = this.content;\n                }\n                if (loaderType == 'skeleton') {\n                    if (toggle) {\n                        skeleton = this._buildSkeleton();\n                        element.find('tbody').empty().append(skeleton);\n                    } else {\n                        element.find('.k-skeleton').closest('tbody').empty();\n                    }\n                } else {\n                    if (endless && toggle) {\n                        kendo.ui.progress(element, toggle, {\n                            height: this.content.height(),\n                            top: this.content[0].offsetTop,\n                            opacity: true\n                        });\n                    } else {\n                        kendo.ui.progress(element, toggle);\n                    }\n                }\n            },\n            _resize: function (size, force) {\n                this._syncLockedContentHeight();\n                this._syncLockedHeaderHeight();\n                if (this.content) {\n                    this._setContentWidth();\n                    this._setContentHeight();\n                }\n                if (this.lockedTable) {\n                    this._syncLockedScroll();\n                }\n                if (this.virtualScrollable && (force || this._rowHeight)) {\n                    if (force) {\n                        this._rowHeight = null;\n                    }\n                    this.virtualScrollable.repaintScrollbar();\n                }\n                if (this.pager && this.pager.element) {\n                    this.pager.resize(force);\n                }\n                if (this._anyStickyColumns()) {\n                    this._updateStickyColumns(false);\n                }\n            },\n            _isActiveInTable: function () {\n                var active = activeElement();\n                if (!active) {\n                    return false;\n                }\n                return this.table[0] === active || $.contains(this.table[0], active) || this._isLocked() && (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active));\n            },\n            refresh: function (e) {\n                var that = this, data = that.dataSource.view(), navigatable = that.options.navigatable, virtualScroll = that.virtualScroll || {}, currentIndex, current = $(that.current()), isCurrentInHeader = false, groups = (that.dataSource.group() || []).length, colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length, contentScrollLeft, cachedItemsToSkip;\n                if (e && e.action === 'itemchange' && (that.editable || that.options.scrollable.endless)) {\n                    if (this._editMode() != 'popup' || this._editMode() === 'popup' && !that._editableIsClosing) {\n                        return;\n                    }\n                }\n                if (virtualScroll.columns) {\n                    that._templates();\n                }\n                if (e && e.action === 'remove' && that.editable && that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                    that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n                }\n                e = e || {};\n                if (that.trigger('dataBinding', {\n                        action: e.action || 'rebind',\n                        index: e.index,\n                        items: e.items\n                    })) {\n                    return;\n                }\n                if (e.action === SYNC && that._isVirtualEditable()) {\n                    that._destroyEditable();\n                    that._clearEditableState();\n                }\n                that._angularItems('cleanup');\n                if (!that._endlessFetchInProgress) {\n                    if (navigatable && (that._isActiveInTable() || that._editContainer && that._editContainer.data('kendoWindow'))) {\n                        isCurrentInHeader = current.is('th');\n                        currentIndex = isCurrentInHeader ? current.parent().children(':not(.k-group-cell)').index(current[0]) : Math.max(that.cellIndex(current), 0);\n                    }\n                    that._destroyEditable();\n                }\n                if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                    clearTimeout(that._progressTimeOut);\n                    that._progressTimeOut = setTimeout(function () {\n                        if (!that._endlessFetchInProgress) {\n                            that._progress(false);\n                        }\n                    }, 100);\n                } else {\n                    that._progress(false);\n                }\n                that._hideResizeHandle();\n                that._data = [];\n                if (!that.columns.length) {\n                    that._autoColumns(that._firstDataItem(data[0], groups));\n                    colspan = groups + that.columns.length;\n                }\n                that._group = groups > 0 || that._group;\n                if (that._group) {\n                    that._templates();\n                    that._updateCols();\n                    that._updateLockedCols();\n                    if (!that._virtualColScroll) {\n                        that._updateHeader(groups);\n                    }\n                    that._group = groups > 0;\n                    that._groupRows = groupRows(data);\n                }\n                if (that.content) {\n                    contentScrollLeft = kendo.scrollLeft(that.content);\n                }\n                cachedItemsToSkip = that._skipRerenderItemsCount;\n                that._renderContent(data, colspan, groups);\n                if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                    that._skipRerenderItemsCount = cachedItemsToSkip;\n                }\n                that._renderLockedContent(data, colspan, groups);\n                if (!that._virtualColScroll) {\n                    that._footer();\n                    that._renderNoRecordsContent();\n                    that._togglePagerVisibility();\n                    that._setContentHeight();\n                    that._setContentWidth(that.content && contentScrollLeft);\n                }\n                if (that.lockedTable) {\n                    if (virtualScroll.rows) {\n                        that.content.find('>.k-virtual-scrollable-wrap').trigger('scroll');\n                    } else if (that.touchScroller) {\n                        that.touchScroller.movable.trigger('change');\n                    } else {\n                        that.wrapper.one('scroll', function (e) {\n                            e.stopPropagation();\n                        });\n                        that.content.trigger('scroll');\n                    }\n                }\n                if (!that._endlessFetchInProgress && !that._rowDropping) {\n                    that._restoreCurrent(currentIndex, isCurrentInHeader);\n                }\n                if (that.touchScroller) {\n                    that.touchScroller.contentResized();\n                }\n                if (that.selectable) {\n                    that.selectable.resetTouchEvents();\n                }\n                that._muteAngularRebind(function () {\n                    that._angularItems('compile');\n                });\n                if (that._checkBoxSelection) {\n                    that._toggleHeaderCheckState(false);\n                }\n                if (that.options.persistSelection && (that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell || that._checkBoxSelection) && (that.items().length || that.dataSource._isGroupPaged())) {\n                    that._restoreSelection();\n                }\n                if (that._hasReorderableRows()) {\n                    that._draggableRows();\n                    that._reorderableRows();\n                }\n                that.trigger(DATABOUND);\n            },\n            _restoreCurrent: function (currentIndex, isCurrentInHeader) {\n                if (currentIndex === undefined || currentIndex < 0) {\n                    return;\n                }\n                this._removeCurrent();\n                if (isCurrentInHeader) {\n                    this._setCurrent(this.thead.find('th:not(.k-group-cell)').eq(currentIndex));\n                } else {\n                    var rowIndex = 0;\n                    var virtualScroll = this.virtualScroll || {};\n                    if (this._rowVirtualIndex) {\n                        if (virtualScroll.rows) {\n                            rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                        } else {\n                            rowIndex = this._rowVirtualIndex;\n                        }\n                    } else {\n                        currentIndex = 0;\n                    }\n                    var row = $();\n                    var colspan;\n                    if (this.lockedTable) {\n                        row = this.lockedTable.find('>tbody>tr').eq(rowIndex);\n                    }\n                    row = row.add(this.tbody.children().eq(rowIndex));\n                    if (this._hasVirtualColumns()) {\n                        colspan = parseInt(row.find('td').first().attr('colspan'), 10);\n                        currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                    }\n                    var td = row.find('>td:not(.k-group-cell):not(.k-hierarchy-cell)').eq(currentIndex);\n                    if (!td.length || currentIndex < 0) {\n                        return;\n                    }\n                    if (this._hasVirtualColumns()) {\n                        this._setCurrent(td, true, true);\n                    } else {\n                        this._setCurrent(td);\n                    }\n                }\n                if (this._current) {\n                    focusTable(this._current.closest('table')[0], true);\n                }\n            },\n            _restoreSelection: function () {\n                var that = this, allRows = that.items(), selectedRows, id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                selectedRows = grep(allRows, function (row) {\n                    var dataItemKey = that.dataItem(row)[id];\n                    if (that._selectedIds[dataItemKey]) {\n                        return row;\n                    }\n                });\n                that.select(selectedRows);\n            },\n            _angularItems: function (cmd) {\n                kendo.ui.DataBoundWidget.fn._angularItems.call(this, cmd);\n                if (cmd === 'cleanup' && (!this.dataSource || !this.dataSource.options.endless)) {\n                    this._cleanupDetailItems();\n                }\n                this._angularGroupItems(cmd);\n                this._angularGroupFooterItems(cmd);\n            },\n            _cleanupDetailItems: function () {\n                var that = this;\n                if (that._hasDetails()) {\n                    that.angular('cleanup', function () {\n                        return { elements: that.tbody.children('.k-detail-row') };\n                    });\n                    that.tbody.find('.k-detail-cell').empty();\n                }\n            },\n            _angularGroupItems: function (cmd) {\n                var that = this, container = that.tbody;\n                if (that.lockedContent) {\n                    container = that.lockedTable.find('tbody');\n                }\n                if (that._group) {\n                    that.angular(cmd, function () {\n                        return {\n                            elements: container.children('.k-grouping-row'),\n                            data: $.map(groupRows(that.dataSource.view()), function (dataItem) {\n                                return { dataItem: dataItem };\n                            })\n                        };\n                    });\n                }\n            },\n            _angularGroupFooterItems: function (cmd) {\n                var that = this, container = that.tbody;\n                if (that.lockedContent) {\n                    container = that.element;\n                }\n                if (that._group && that.groupFooterTemplate) {\n                    that.angular(cmd, function () {\n                        return {\n                            elements: container.find('.k-group-footer'),\n                            data: $.map(groupFooters(that.dataSource.view()), function (dataItem) {\n                                return { dataItem: dataItem };\n                            })\n                        };\n                    });\n                }\n            },\n            _renderContent: function (data, colspan, groups) {\n                var that = this, idx, length, html = '', isLocked = that.lockedContent != null, endlessAppend = null, skipLastGroup, flatViewLength, scrollable = that.options.scrollable, templates = {\n                        rowTemplate: that.rowTemplate,\n                        altRowTemplate: that.altRowTemplate,\n                        groupFooterTemplate: that.groupFooterTemplate,\n                        groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                    };\n                if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                    that._skipRerenderItemsCount = 0;\n                    if (that.content) {\n                        that.content[0].scrollTop = 0;\n                    }\n                }\n                endlessAppend = that._skipRerenderItemsCount > 0;\n                colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n                if (groups > 0) {\n                    colspan = isLocked ? colspan - groups : colspan;\n                    if (that.detailTemplate) {\n                        colspan++;\n                    }\n                    if (that.groupFooterTemplate) {\n                        that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                    }\n                    if (that.options.scrollable.endless) {\n                        flatViewLength = that.dataSource.flatView().length;\n                    }\n                    for (idx = 0, length = data.length; idx < length; idx++) {\n                        if (!that._skippedGroups) {\n                            that._skippedGroups = [];\n                        }\n                        skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                        html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup);\n                    }\n                } else {\n                    html += that._rowsHtml(data, templates);\n                }\n                if (endlessAppend) {\n                    that.tbody.append(html);\n                    clearTimeout(that._endlessFetchTimeOut);\n                    that._endlessFetchTimeOut = setTimeout(function () {\n                        if (that._groupToCollapse) {\n                            that.collapseGroup(that._groupToCollapse);\n                            that._groupToCollapse = null;\n                        }\n                    });\n                    that._endlessFetchInProgress = null;\n                } else {\n                    that.tbody = appendContent(that.tbody, that.table, html, this.options.$angular);\n                }\n            },\n            _renderGroupRows: function () {\n                var that = this, data = that._groupRows, groupRows = that.wrapper.find('.k-grouping-row'), groups = that._groups(), groupRowBuilderFunc, isLocked = that.lockedContent != null, columns, colspan, group, field, column, template, text, groupHeaderData, tableContainer, isInLockedContainer, prevElement, newGroupRowElement, currentRow, level, groupHeaderColumnTemplate, firstColumnGroupData;\n                groupRows.each(function (index, row) {\n                    currentRow = $(row);\n                    tableContainer = currentRow.closest('table').parent();\n                    isInLockedContainer = tableContainer.is('.' + CONTENTRLOCKEDCONTAINER);\n                    columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n                    level = currentRow.find('.' + GROUPCELLCLASS).length;\n                    if (isLocked) {\n                        groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                        colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n                    } else {\n                        groupRowBuilderFunc = groupRowBuilder;\n                        colspan = columns.length + groups - level;\n                    }\n                    group = index >= data.length ? data[index - data.length] : data[index];\n                    field = group.field;\n                    column = grep(leafColumns(that.columns), function (column) {\n                        return column.field == field;\n                    })[0] || {};\n                    firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n                    template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n                    text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n                    groups = groups;\n                    groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n                    groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n                    if (template) {\n                        text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n                    }\n                    prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n                    newGroupRowElement = $(groupHeaderColumnTemplate ? groupHeaderColumnTemplate(extend({}, groupHeaderData, {\n                        groupCells: level,\n                        colspan: groups - level,\n                        text: text\n                    })) : groupRowBuilderFunc(colspan, level, text));\n                    if (prevElement.is('tbody')) {\n                        prevElement.prepend(newGroupRowElement);\n                    } else {\n                        prevElement.after(newGroupRowElement);\n                    }\n                    currentRow.remove();\n                });\n            },\n            _renderLockedContent: function (data, colspan, groups) {\n                var html = '', idx, length, endlessAppend = null, templates = {\n                        rowTemplate: this.lockedRowTemplate,\n                        altRowTemplate: this.lockedAltRowTemplate,\n                        groupFooterTemplate: this.lockedGroupFooterTemplate,\n                        groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n                    };\n                if (this.lockedContent) {\n                    var table = this.lockedTable;\n                    endlessAppend = this._skipRerenderItemsCount > 0;\n                    if (groups > 0) {\n                        colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                        for (idx = 0, length = data.length; idx < length; idx++) {\n                            html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, this.options.scrollable.endless && idx === data.length - 1);\n                        }\n                    } else {\n                        html = this._rowsHtml(data, templates);\n                    }\n                    if (endlessAppend) {\n                        table.children('tbody').append(html);\n                    } else {\n                        appendContent(table.children('tbody'), table, html, this.options.$angular);\n                    }\n                    this._syncLockedContentHeight();\n                }\n            },\n            _togglePagerVisibility: function () {\n                if (this.options.pageable.alwaysVisible === false) {\n                    this.wrapper.find('.k-grid-pager').toggle(this.dataSource.total() >= this.dataSource.pageSize());\n                }\n            },\n            _adjustRowsHeight: function (table1, table2) {\n                var rows = table1[0].rows, length = rows.length, idx, rows2 = table2[0].rows, containers = table1.add(table2), containersLength = containers.length, heights = [];\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n                    if (rows[idx].style.height) {\n                        rows[idx].style.height = rows2[idx].style.height = '';\n                    }\n                }\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n                    var offsetHeight1 = rows[idx].offsetHeight;\n                    var offsetHeight2 = rows2[idx].offsetHeight;\n                    var height = 0;\n                    if (offsetHeight1 > offsetHeight2) {\n                        height = offsetHeight1;\n                    } else if (offsetHeight1 < offsetHeight2) {\n                        height = offsetHeight2;\n                    }\n                    heights.push(height);\n                }\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = 'none';\n                }\n                for (idx = 0; idx < length; idx++) {\n                    if (heights[idx]) {\n                        rows[idx].style.height = rows2[idx].style.height = heights[idx] + 1 + 'px';\n                    }\n                }\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = '';\n                }\n            }\n        });\n        if (kendo.ExcelMixin) {\n            kendo.ExcelMixin.extend(Grid.prototype);\n        }\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Grid.prototype);\n            Grid.prototype._drawPDF_autoPageBreak = function (progress) {\n                var grid = this;\n                var result = new $.Deferred();\n                var dataSource = grid.dataSource;\n                var allPages = grid.options.pdf.allPages;\n                var origBody = grid.wrapper.find('table[role$=\"grid\"] > tbody').first();\n                var cont = $('<div>').css({\n                    position: 'absolute',\n                    left: -10000,\n                    top: -10000\n                });\n                var clone;\n                grid.toggleUnexportableColumns(grid.columns);\n                clone = grid.wrapper.clone().css({\n                    height: 'auto',\n                    width: 'auto'\n                }).appendTo(cont);\n                clone.find('.k-grid-content').css({\n                    height: 'auto',\n                    width: 'auto',\n                    overflow: 'visible'\n                });\n                clone.find('table[role$=\"grid\"], .k-grid-footer table').css({\n                    height: 'auto',\n                    width: '100%',\n                    overflow: 'visible'\n                });\n                clone.find('.k-grid-pager, .k-grid-toolbar, .k-grouping-header').remove();\n                clone.find('.k-grid-header, .k-grid-footer, .k-auto-scrollable').css({ paddingRight: 0 });\n                this._initPDFProgress(progress);\n                var body = clone.find('table[role$=\"grid\"] > tbody').first().empty();\n                var startingPage = dataSource.page();\n                function resolve() {\n                    if (allPages && startingPage !== undefined) {\n                        dataSource.one('change', draw);\n                        dataSource.page(startingPage);\n                    } else {\n                        grid.refresh();\n                        draw();\n                    }\n                }\n                function draw() {\n                    cont.appendTo(document.body);\n                    var options = $.extend({}, grid.options.pdf, {\n                        _destructive: true,\n                        progress: function (p) {\n                            progress.notify({\n                                page: p.page,\n                                pageNumber: p.pageNum,\n                                progress: 0.5 + p.pageNum / p.totalPages / 2,\n                                totalPages: p.totalPages\n                            });\n                        }\n                    });\n                    kendo.drawing.drawDOM(clone, options).always(function () {\n                        cont.remove();\n                    }).then(function (group) {\n                        result.resolve(group);\n                        grid.toggleUnexportableColumns(grid.columns, true);\n                    }).fail(function (err) {\n                        result.reject(err);\n                    });\n                }\n                function renderPage() {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n                    body.append(origBody.children('tr:not(.k-detail-row)'));\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        dataSource.unbind('change', renderPage);\n                        resolve();\n                    }\n                }\n                if (allPages) {\n                    dataSource.bind('change', renderPage);\n                    dataSource.page(1);\n                } else {\n                    renderPage();\n                }\n                return result.promise();\n            };\n            Grid.prototype.toggleUnexportableColumns = function (columns, restore) {\n                var length = columns.length;\n                var column;\n                var exportable;\n                var visibleInExport;\n                var visibleInExportOnly;\n                for (var i = 0; i < length; i++) {\n                    column = columns[i];\n                    exportable = column.exportable;\n                    if (!restore) {\n                        if (typeof column.exportable === 'object') {\n                            exportable = column.exportable.pdf;\n                        }\n                        visibleInExport = !column.hidden && exportable !== false;\n                        visibleInExportOnly = column.hidden && exportable === true;\n                        exportable = visibleInExport || visibleInExportOnly;\n                        if (!exportable && !column.hidden) {\n                            column._toggledDuringExport = true;\n                            this.hideColumn(column);\n                        } else if (exportable && column.hidden) {\n                            column._toggledDuringExport = true;\n                            this.showColumn(column);\n                        } else if (exportable && column.columns) {\n                            this.toggleUnexportableColumns(column.columns);\n                        }\n                    } else {\n                        if (column._toggledDuringExport) {\n                            column._toggledDuringExport = false;\n                            if (column.hidden) {\n                                this.showColumn(column);\n                            } else {\n                                this.hideColumn(column);\n                            }\n                        } else if (column.columns) {\n                            this.toggleUnexportableColumns(column.columns, restore);\n                        }\n                    }\n                }\n            };\n            Grid.prototype._drawPDF = function (progress) {\n                var grid = this;\n                if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != 'auto') {\n                    return grid._drawPDF_autoPageBreak(progress);\n                }\n                var result = new $.Deferred();\n                var dataSource = grid.dataSource;\n                var allPages = grid.options.pdf.allPages;\n                this._initPDFProgress(progress);\n                var doc = new kendo.drawing.Group();\n                var startingPage = dataSource.page();\n                function resolve() {\n                    if (allPages && startingPage !== undefined) {\n                        dataSource.unbind('change', exportPage);\n                        dataSource.one('change', function () {\n                            result.resolve(doc);\n                        });\n                        dataSource.page(startingPage);\n                    } else {\n                        result.resolve(doc);\n                    }\n                }\n                function exportPage() {\n                    grid.toggleUnexportableColumns(grid.columns);\n                    grid._drawPDFShadow({ width: grid.wrapper.width() }, { avoidLinks: grid.options.pdf.avoidLinks }).done(function (group) {\n                        var pageNum = dataSource.page();\n                        var totalPages = allPages ? dataSource.totalPages() : 1;\n                        var args = {\n                            page: group,\n                            pageNumber: pageNum,\n                            progress: pageNum / totalPages,\n                            totalPages: totalPages\n                        };\n                        grid.toggleUnexportableColumns(grid.columns, true);\n                        progress.notify(args);\n                        doc.append(args.page);\n                        if (pageNum < totalPages) {\n                            dataSource.page(pageNum + 1);\n                        } else {\n                            resolve();\n                        }\n                    }).fail(function (err) {\n                        result.reject(err);\n                    });\n                }\n                if (allPages) {\n                    dataSource.bind('change', exportPage);\n                    dataSource.page(1);\n                } else {\n                    exportPage();\n                }\n                return result.promise();\n            };\n            Grid.prototype._initPDFProgress = function (deferred) {\n                var loading = $('<div class=\\'k-loading-pdf-mask\\'><div class=\\'k-loading-color\\'></div></div>');\n                loading.prepend(this.wrapper.clone().css({\n                    position: 'absolute',\n                    top: 0,\n                    left: 0\n                }));\n                this._pdfInitialized = true;\n                this.wrapper.append(loading);\n                var pb = $('<div class=\\'k-loading-pdf-progress\\'>').appendTo(loading).kendoProgressBar({\n                    type: 'chunk',\n                    chunkCount: 10,\n                    min: 0,\n                    max: 1,\n                    value: 0\n                }).data('kendoProgressBar');\n                deferred.progress(function (e) {\n                    pb.value(e.progress);\n                }).always(function () {\n                    kendo.destroy(loading);\n                    loading.remove();\n                });\n            };\n        }\n        function syncTableHeight(table1, table2) {\n            table1 = table1[0];\n            table2 = table2[0];\n            if (table1.rows.length !== table2.rows.length) {\n                var lockedHeigth = table1.offsetHeight;\n                var tableHeigth = table2.offsetHeight;\n                var row;\n                var diff;\n                if (lockedHeigth > tableHeigth) {\n                    row = table2.rows[table2.rows.length - 1];\n                    if (filterRowRegExp.test(row.className)) {\n                        row = table2.rows[table2.rows.length - 2];\n                    }\n                    diff = lockedHeigth - tableHeigth;\n                } else {\n                    row = table1.rows[table1.rows.length - 1];\n                    if (filterRowRegExp.test(row.className)) {\n                        row = table1.rows[table1.rows.length - 2];\n                    }\n                    diff = tableHeigth - lockedHeigth;\n                }\n                row.style.height = row.offsetHeight + diff + 'px';\n            }\n        }\n        function adjustRowHeight(row1, row2) {\n            var height;\n            var offsetHeight1 = row1.offsetHeight;\n            var offsetHeight2 = row2.offsetHeight;\n            if (offsetHeight1 > offsetHeight2) {\n                height = offsetHeight1 + 'px';\n            } else if (offsetHeight1 < offsetHeight2) {\n                height = offsetHeight2 + 'px';\n            }\n            if (height) {\n                row1.style.height = row2.style.height = height;\n            }\n        }\n        function getCommand(commands, name) {\n            var idx, length, command;\n            if (typeof commands === STRING && commands === name) {\n                return commands;\n            }\n            if (isPlainObject(commands) && commands.name === name) {\n                return commands;\n            }\n            if (isArray(commands)) {\n                for (idx = 0, length = commands.length; idx < length; idx++) {\n                    command = commands[idx];\n                    if (typeof command === STRING && command === name || command.name === name) {\n                        return command;\n                    }\n                }\n            }\n            return null;\n        }\n        function focusTable(table, direct) {\n            if (direct === true) {\n                table = $(table);\n                var scrollLeft = kendo.scrollLeft(table.parent());\n                kendo.focusElement(table);\n                kendo.scrollLeft(table.parent(), scrollLeft);\n            } else {\n                $(table).one('focusin', function (e) {\n                    e.preventDefault();\n                }).trigger('focus');\n            }\n        }\n        function isColumnGroupable(grid, column) {\n            return grid.options.groupable && (column.groupable || column.groupable === undefined);\n        }\n        function isGroupedBy(groups, field) {\n            return !!$.grep(groups, function (item) {\n                return item.field === field;\n            }).length;\n        }\n        function isColumnEditable(column, model) {\n            if (!column.field || column.selectable) {\n                return false;\n            }\n            if (model.editable && !model.editable(column.field)) {\n                return false;\n            }\n            if (column.editable && !column.editable(model)) {\n                return false;\n            }\n            return true;\n        }\n        function isInputElement(element) {\n            return $(element).is(':button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdown');\n        }\n        function tableClick(e) {\n            var currentTarget = $(e.currentTarget), isHeader = currentTarget.is('th'), table = this.table.add(this.lockedTable), headerTable = this.thead.parent().add($('>table', this.lockedHeader)), isInput = isInputElement(e.target), preventScroll = $(e.target).is('.k-checkbox'), target = $(e.target), currentTable = currentTarget.closest('table')[0];\n            if (isInput && currentTarget.find(kendo.roleSelector('filtercell')).length) {\n                this._setCurrent(currentTarget);\n                return;\n            }\n            if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n                return;\n            }\n            if (target.is('a.k-i-expand, a.k-i-collapse')) {\n                return;\n            }\n            if (this.options.navigatable) {\n                this._setCurrent(currentTarget, false, preventScroll);\n            }\n            if (isHeader || !isInput) {\n                setTimeout(function () {\n                    var activeEl = $(kendo._activeElement());\n                    if (activeEl.hasClass('k-widget') && !activeEl.hasClass('k-grid-pager')) {\n                        return;\n                    }\n                    if (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement())) {\n                        focusTable(currentTable, true);\n                    }\n                });\n            }\n            if (isHeader && !kendo.support.touch) {\n                e.preventDefault();\n            }\n        }\n        function leftMostPosition(element, rtl) {\n            if (!rtl) {\n                return 0;\n            }\n            var result = 0;\n            if (kendo.support.browser.webkit) {\n                result = element.width();\n            }\n            return result;\n        }\n        function parseVirtualSettings(options) {\n            var asLowerString;\n            if (typeof options === 'string') {\n                asLowerString = options.toLowerCase();\n                if (asLowerString === 'true') {\n                    return { rows: true };\n                } else {\n                    return {\n                        rows: asLowerString.indexOf('rows') > -1,\n                        columns: asLowerString.indexOf('columns') > -1\n                    };\n                }\n            } else if (options === true) {\n                return { rows: true };\n            }\n        }\n        function isElementVisibleInWrapper(wrapper, element) {\n            var offsetTop;\n            var halfHeight;\n            if (!wrapper) {\n                return false;\n            }\n            element = $(element);\n            if (element[0] && contains(wrapper[0], element[0])) {\n                offsetTop = element.offset().top - wrapper.offset().top;\n                halfHeight = element.outerHeight() / 2;\n                if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && math.floor(offsetTop + halfHeight) <= wrapper.height()) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        function isInEdit(cell) {\n            return cell && (cell.hasClass('k-edit-cell') || cell.parent().hasClass('k-grid-edit-row'));\n        }\n        function groupCellBuilder(headerTemplateIndex) {\n            return '<td colspan=\"#=data.colspan +' + headerTemplateIndex + '#\">' + '<p class=\"k-reset\">' + '<a class=\"k-icon k-i-collapse\" href=\"\\\\#\" tabindex=\"-1\" ' + ARIALABEL + '=\"' + COLLAPSE + '\"></a>#=data.text#' + '</p></td>';\n        }\n        function groupCellLockedContentBuilder(headerTemplateIndex) {\n            return '<td colspan=\"' + headerTemplateIndex + '\">' + '<p class=\"k-reset\">&nbsp;</p></td>';\n        }\n        function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData) {\n            return '<tr role=\"row\"' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-grouping-row\">' + groupCells(level) + '<td colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' + '<p class=\"k-reset\">' + '<a class=\"k-icon ' + (expanded ? 'k-i-collapse' : 'k-i-expand') + '\" href=\"#\" tabindex=\"-1\" ' + ARIALABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>' + text + '</p></td></tr>';\n        }\n        function groupRowLockedContentBuilder(colspan) {\n            return '<tr role=\"row\" class=\"k-grouping-row\">' + '<td colspan=\"' + colspan + '\" aria-expanded=\"true\">' + '<p class=\"k-reset\">&nbsp;</p></td></tr>';\n        }\n        function toggleRow(row, visible) {\n            row = $(row)[0];\n            if (visible) {\n                row.style.display = '';\n            } else {\n                row.style.display = 'none';\n            }\n        }\n        function htmlEncode(value, backslashEscapeQuotes) {\n            var ampRegExp = /&/g, ltRegExp = /</g, quoteRegExp = /\"/g, aposRegExp = /'/g, gtRegExp = />/g;\n            return ('' + value).replace(ampRegExp, '&amp;').replace(ltRegExp, '&lt;').replace(gtRegExp, '&gt;').replace(quoteRegExp, function (match) {\n                if (backslashEscapeQuotes) {\n                    return '\\\\' + match;\n                }\n                return '&quot;';\n            }).replace(aposRegExp, '&#39;');\n        }\n        function getTitle(field, columns) {\n            return columns.filter(function (col) {\n                return col.field === field;\n            })[0].title || field;\n        }\n        function exportDataSort(a, b) {\n            return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n        }\n        function isExcelExportableColumn(column) {\n            return !(column.exportable === false || column.exportable && column.exportable.excel === false);\n        }\n        ui.plugin(Grid);\n        ui.plugin(VirtualScrollable);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}